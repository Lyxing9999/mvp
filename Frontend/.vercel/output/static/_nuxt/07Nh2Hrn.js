import{V,g as N,e as z,A as ue,S,q as oe,ae as fe,y as ve,i as J,F as P,c as X,o as $,d as R,P as U,Q as T,R as o,f as me,w as M,j as q,ac as ye,T as te,af as pe,a3 as j,ag as ge,U as Ce,r as F,a4 as he,ad as be,X as we,ah as Ee,ai as ke,aj as Se,ak as Te,a6 as Me}from"./logkf7nQ.js";import{P as H,F as Pe,t as Ie,E as Le,a as Be}from"./BwEmtvrM.js";import{b as _,d as W}from"./CN6nfdWM.js";import{u as Z,_ as se,d as De,w as Ae}from"./BN3SMaRa.js";import{h as Fe,j as K,k as Oe,C as $e,a as ze,l as Ne,U as ne,t as Ye,i as le,n as Q,o as Re,p as je,r as Ve,q as Xe,s as x,v as He,w as ee,x as Ue}from"./Cv_xL7jc.js";import{c as qe}from"./B0fAFev2.js";import{g as We}from"./Dtr359OJ.js";const ae=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let n=!1,l=!1;return{onClick:r=>{n&&l&&e(r),n=l=!1},onMousedown:r=>{n=r.target===r.currentTarget},onMouseup:r=>{l=r.target===r.currentTarget}}},Ke=_({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),_e={click:e=>e instanceof MouseEvent},Ze="overlay";var Ge=N({name:"ElOverlay",props:Ke,emits:_e,setup(e,{slots:n,emit:l}){const v=Z(Ze),s=a=>{l("click",a)},{onClick:d,onMousedown:r,onMouseup:p}=ae(e.customMaskEvent?void 0:s);return()=>e.mask?z("div",{class:[v.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:r,onMouseup:p},[S(n,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):ue("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(n,"default")])}});const Je=Ge,re=Symbol("dialogInjectionKey"),ie=_({center:Boolean,alignCenter:Boolean,closeIcon:{type:Fe},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Qe={close:()=>!0},xe=(e,n,l,v)=>{const s={offsetX:0,offsetY:0},d=(c,f)=>{if(e.value){const{offsetX:m,offsetY:C}=s,h=e.value.getBoundingClientRect(),b=h.left,i=h.top,w=h.width,k=h.height,I=document.documentElement.clientWidth,L=document.documentElement.clientHeight,B=-b+m,D=-i+C,A=I-b-w+m,O=L-i-(k<L?k:0)+C;v!=null&&v.value||(c=Math.min(Math.max(c,B),A),f=Math.min(Math.max(f,D),O)),s.offsetX=c,s.offsetY=f,e.value.style.transform=`translate(${K(c)}, ${K(f)})`}},r=c=>{const f=c.clientX,m=c.clientY,{offsetX:C,offsetY:h}=s,b=w=>{const k=C+w.clientX-f,I=h+w.clientY-m;d(k,I)},i=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",i)},p=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",r),window.addEventListener("resize",g))},a=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",r),window.removeEventListener("resize",g))},u=()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform="")},g=()=>{const{offsetX:c,offsetY:f}=s;d(c,f)};return oe(()=>{fe(()=>{l.value?p():a()})}),ve(()=>{a()}),{resetPosition:u,updatePosition:g}},eo=N({name:"ElDialogContent"}),oo=N({...eo,props:ie,emits:Qe,setup(e,{expose:n}){const l=e,{t:v}=Oe(),{Close:s}=$e,{dialogRef:d,headerRef:r,bodyId:p,ns:a,style:u}=J(re),{focusTrapRef:g}=J(Pe),c=P(()=>[a.b(),a.is("fullscreen",l.fullscreen),a.is("draggable",l.draggable),a.is("align-center",l.alignCenter),{[a.m("center")]:l.center}]),f=qe(g,d),m=P(()=>l.draggable),C=P(()=>l.overflow),{resetPosition:h,updatePosition:b}=xe(d,r,m,C);return n({resetPosition:h,updatePosition:b}),(i,w)=>($(),X("div",{ref:o(f),class:T(o(c)),style:te(o(u)),tabindex:"-1"},[R("header",{ref_key:"headerRef",ref:r,class:T([o(a).e("header"),i.headerClass,{"show-close":i.showClose}])},[S(i.$slots,"header",{},()=>[R("span",{role:"heading","aria-level":i.ariaLevel,class:T(o(a).e("title"))},me(i.title),11,["aria-level"])]),i.showClose?($(),X("button",{key:0,"aria-label":o(v)("el.dialog.close"),class:T(o(a).e("headerbtn")),type:"button",onClick:k=>i.$emit("close")},[z(o(ze),{class:T(o(a).e("close"))},{default:M(()=>[($(),q(ye(i.closeIcon||o(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):U("v-if",!0)],2),R("div",{id:o(p),class:T([o(a).e("body"),i.bodyClass])},[S(i.$slots,"default")],10,["id"]),i.$slots.footer?($(),X("footer",{key:0,class:T([o(a).e("footer"),i.footerClass])},[S(i.$slots,"footer")],2)):U("v-if",!0)],6))}});var to=se(oo,[["__file","dialog-content.vue"]]);const so=_({...ie,appendToBody:Boolean,appendTo:{type:Ie.to.type,default:"body"},beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),no={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>Ne(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},lo=(e,n={})=>{pe(e)||Ye("[useLockscreen]","You need to pass a ref param to this function");const l=n.ns||Z("popup"),v=P(()=>l.bm("parent","hidden"));if(!le||Q(document.body,v.value))return;let s=0,d=!1,r="0";const p=()=>{setTimeout(()=>{typeof document>"u"||d&&document&&(document.body.style.width=r,Ve(document.body,v.value))},200)};j(e,a=>{if(!a){p();return}d=!Q(document.body,v.value),d&&(r=document.body.style.width,Re(document.body,v.value)),s=We(l.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,g=je(document.body,"overflowY");s>0&&(u||g==="scroll")&&d&&(document.body.style.width=`calc(100% - ${s}px)`)}),ge(()=>p())},ao=(e,n)=>{var l;const s=Ce().emit,{nextZIndex:d}=Xe();let r="";const p=x(),a=x(),u=F(!1),g=F(!1),c=F(!1),f=F((l=e.zIndex)!=null?l:d());let m,C;const h=He("namespace",De),b=P(()=>{const y={},E=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(y[`${E}-margin-top`]=e.top),e.width&&(y[`${E}-width`]=K(e.width))),y}),i=P(()=>e.alignCenter?{display:"flex"}:{});function w(){s("opened")}function k(){s("closed"),s(ne,!1),e.destroyOnClose&&(c.value=!1)}function I(){s("close")}function L(){C==null||C(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=ee(()=>O(),e.openDelay):O()}function B(){m==null||m(),C==null||C(),e.closeDelay&&e.closeDelay>0?{stop:C}=ee(()=>Y(),e.closeDelay):Y()}function D(){function y(E){E||(g.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(y):B()}function A(){e.closeOnClickModal&&D()}function O(){le&&(u.value=!0)}function Y(){u.value=!1}function t(){s("openAutoFocus")}function G(){s("closeAutoFocus")}function de(y){var E;((E=y.detail)==null?void 0:E.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&lo(u);function ce(){e.closeOnPressEscape&&D()}return j(()=>e.zIndex,()=>{var y;f.value=(y=e.zIndex)!=null?y:d()}),j(()=>e.modelValue,y=>{var E;y?(g.value=!1,L(),c.value=!0,f.value=(E=e.zIndex)!=null?E:d(),he(()=>{s("open"),n.value&&(n.value.parentElement.scrollTop=0,n.value.parentElement.scrollLeft=0,n.value.scrollTop=0)})):u.value&&B()}),j(()=>e.fullscreen,y=>{n.value&&(y?(r=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=r)}),oe(()=>{e.modelValue&&(u.value=!0,c.value=!0,L())}),{afterEnter:w,afterLeave:k,beforeLeave:I,handleClose:D,onModalClick:A,close:B,doClose:Y,onOpenAutoFocus:t,onCloseAutoFocus:G,onCloseRequested:ce,onFocusoutPrevented:de,titleId:p,bodyId:a,closed:g,style:b,overlayDialogStyle:i,rendered:c,visible:u,zIndex:f}},ro=N({name:"ElDialog",inheritAttrs:!1}),io=N({...ro,props:so,emits:no,setup(e,{expose:n}){const l=e,v=be();Ue({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},P(()=>!!v.title));const s=Z("dialog"),d=F(),r=F(),p=F(),{visible:a,titleId:u,bodyId:g,style:c,overlayDialogStyle:f,rendered:m,zIndex:C,afterEnter:h,afterLeave:b,beforeLeave:i,handleClose:w,onModalClick:k,onOpenAutoFocus:I,onCloseAutoFocus:L,onCloseRequested:B,onFocusoutPrevented:D}=ao(l,d);Me(re,{dialogRef:d,headerRef:r,bodyId:g,ns:s,rendered:m,style:c});const A=ae(k),O=P(()=>l.draggable&&!l.fullscreen);return n({visible:a,dialogContentRef:p,resetPosition:()=>{var t;(t=p.value)==null||t.resetPosition()},handleClose:w}),(t,G)=>($(),q(o(Be),{to:t.appendTo,disabled:t.appendTo!=="body"?!1:!t.appendToBody},{default:M(()=>[z(we,{name:"dialog-fade",onAfterEnter:o(h),onAfterLeave:o(b),onBeforeLeave:o(i),persisted:""},{default:M(()=>[Ee(z(o(Je),{"custom-mask-event":"",mask:t.modal,"overlay-class":t.modalClass,"z-index":o(C)},{default:M(()=>[R("div",{role:"dialog","aria-modal":"true","aria-label":t.title||void 0,"aria-labelledby":t.title?void 0:o(u),"aria-describedby":o(g),class:T(`${o(s).namespace.value}-overlay-dialog`),style:te(o(f)),onClick:o(A).onClick,onMousedown:o(A).onMousedown,onMouseup:o(A).onMouseup},[z(o(Le),{loop:"",trapped:o(a),"focus-start-el":"container",onFocusAfterTrapped:o(I),onFocusAfterReleased:o(L),onFocusoutPrevented:o(D),onReleaseRequested:o(B)},{default:M(()=>[o(m)?($(),q(to,ke({key:0,ref_key:"dialogContentRef",ref:p},t.$attrs,{center:t.center,"align-center":t.alignCenter,"close-icon":t.closeIcon,draggable:o(O),overflow:t.overflow,fullscreen:t.fullscreen,"header-class":t.headerClass,"body-class":t.bodyClass,"footer-class":t.footerClass,"show-close":t.showClose,title:t.title,"aria-level":t.headerAriaLevel,onClose:o(w)}),Se({header:M(()=>[t.$slots.title?S(t.$slots,"title",{key:1}):S(t.$slots,"header",{key:0,close:o(w),titleId:o(u),titleClass:o(s).e("title")})]),default:M(()=>[S(t.$slots,"default")]),_:2},[t.$slots.footer?{name:"footer",fn:M(()=>[S(t.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):U("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Te,o(a)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var co=se(io,[["__file","dialog.vue"]]);const Co=Ae(co);export{Co as E};
