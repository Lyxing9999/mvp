const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VKWv0cjb.js","./BwEmtvrM.js","./Cv_xL7jc.js","./logkf7nQ.js","./entry._-PxIaC1.css","./CN6nfdWM.js","./BN3SMaRa.js","./base.L8-VYUOd.css","./aria.HFX6wX62.css","./07Nh2Hrn.js","./B0fAFev2.js","./Dtr359OJ.js","./el-tag.DljBBxJR.css","./el-overlay.CFKKsM3h.css","./Vlj5_leD.js","./DLbQifwJ.js","./index.COjcj0hU.css","./Bbv6myjm.js","./el-popper.DxnjKDWR.css","./tFSXDdTk.js","./BXdRk_-m.js","./index.BP5RPbOz.css","./el-select.D16zbMl5.css","./CP8Wd66V.js","./el-row.CsbxBLOD.css","./l0sNRNKZ.js","./DlAUqK2U.js","./AdminAttendanceDict.D9LNF8s5.css","./CJQQVJZh.js","./Do5yqUOX.js","./D8CkI1ry.js","./el-form.Bs6UI5VS.css","./UserDetailDialog.CfS05pcB.css"])))=>i.map(i=>d[i]);
import{g as I,r as D,W as De,F as E,a3 as ve,q as qe,ar as Ua,c as k,o as f,ah as Te,P as Z,e as g,R as l,aB as ye,Q as j,S as ee,w as C,j as A,aC as Aa,aD as Ia,aE as $a,aF as Ta,aj as Ba,Y as Se,a5 as Fa,f as Q,ac as ia,i as Ma,a1 as te,a2 as Pe,a8 as xa,d as ie,ae as La,aG as Oa,aH as aa,aI as Ra,U as ja,a6 as Ka,A as me,aJ as Ya,aK as qa,aL as Ja,l as ta,ao as Wa,ai as Oe,aM as Ga,B as Be,az as re,N as ue,a4 as la,aN as Ha,ad as Qa,ak as na,aO as Xa,aP as Za}from"./logkf7nQ.js";import{b as le,d as Je}from"./CN6nfdWM.js";import{_ as ce,u as de,w as We,a as et}from"./BN3SMaRa.js";import{g as R,f as ze,U as Ce,J as $e,K as ke,A as at,y as ua,k as ge,F as tt,ag as Ve,u as lt,B as nt,a as _e,H as Re,t as st,h as Fe,c as da,m as ca,ah as ot,x as rt,E as Ge}from"./Cv_xL7jc.js";import{E as pa}from"./Dtr359OJ.js";import{v as sa,E as it,a as ut,u as fa,d as oa,b as ma,c as dt,e as ct,B as pt}from"./Vlj5_leD.js";import{E as ft,a as mt}from"./CP8Wd66V.js";import{a as va,E as ga,i as vt}from"./tFSXDdTk.js";import{E as xe}from"./DLbQifwJ.js";import{E as gt}from"./07Nh2Hrn.js";import"./l0sNRNKZ.js";import"./Bbv6myjm.js";import{_ as He}from"./DlAUqK2U.js";import{a as H,U as Qe}from"./CJQQVJZh.js";import{U as bt,a as Ee}from"./Do5yqUOX.js";import{E as yt,a as ba}from"./D8CkI1ry.js";const _t=le({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:ua,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||R(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...at(["ariaLabel"])}),ht={[ke]:(e,p)=>p!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[$e]:e=>R(e)||ze(e),[Ce]:e=>R(e)||ze(e)},Ct=I({name:"ElInputNumber"}),St=I({...Ct,props:_t,emits:ht,setup(e,{expose:p,emit:t}){const n=e,{t:s}=ge(),r=de("input-number"),d=D(),c=De({currentValue:n.modelValue,userInput:null}),{formItem:P}=tt(),m=E(()=>R(n.modelValue)&&n.modelValue<=n.min),y=E(()=>R(n.modelValue)&&n.modelValue>=n.max),u=E(()=>{const o=L(n.step);return Ve(n.precision)?Math.max(L(n.modelValue),o):(o>n.precision,n.precision)}),V=E(()=>n.controls&&n.controlsPosition==="right"),$=lt(),w=nt(),S=E(()=>{if(c.userInput!==null)return c.userInput;let o=c.currentValue;if(ze(o))return"";if(R(o)){if(Number.isNaN(o))return"";Ve(n.precision)||(o=o.toFixed(n.precision))}return o}),U=(o,_)=>{if(Ve(_)&&(_=u.value),_===0)return Math.round(o);let N=String(o);const M=N.indexOf(".");if(M===-1||!N.replace(".","").split("")[M+_])return o;const G=N.length;return N.charAt(G-1)==="5"&&(N=`${N.slice(0,Math.max(0,G-1))}6`),Number.parseFloat(Number(N).toFixed(_))},L=o=>{if(ze(o))return 0;const _=o.toString(),N=_.indexOf(".");let M=0;return N!==-1&&(M=_.length-N-1),M},ae=(o,_=1)=>R(o)?U(o+n.step*_):c.currentValue,W=()=>{if(n.readonly||w.value||y.value)return;const o=Number(S.value)||0,_=ae(o);v(_),t($e,c.currentValue),K()},a=()=>{if(n.readonly||w.value||m.value)return;const o=Number(S.value)||0,_=ae(o,-1);v(_),t($e,c.currentValue),K()},i=(o,_)=>{const{max:N,min:M,step:x,precision:X,stepStrictly:G,valueOnClear:pe}=n;N<M&&st("InputNumber","min should not be greater than max.");let b=Number(o);if(ze(o)||Number.isNaN(b))return null;if(o===""){if(pe===null)return null;b=Fa(pe)?{min:M,max:N}[pe]:pe}return G&&(b=U(Math.round(b/x)*x,X),b!==o&&_&&t(Ce,b)),Ve(X)||(b=U(b,X)),(b>N||b<M)&&(b=b>N?N:M,_&&t(Ce,b)),b},v=(o,_=!0)=>{var N;const M=c.currentValue,x=i(o);if(!_){t(Ce,x);return}M===x&&o||(c.userInput=null,t(Ce,x),M!==x&&t(ke,x,M),n.validateEvent&&((N=P==null?void 0:P.validate)==null||N.call(P,"change").catch(X=>Re())),c.currentValue=x)},T=o=>{c.userInput=o;const _=o===""?null:Number(o);t($e,_),v(_,!1)},F=o=>{const _=o!==""?Number(o):"";(R(_)&&!Number.isNaN(_)||o==="")&&v(_),K(),c.userInput=null},Y=()=>{var o,_;(_=(o=d.value)==null?void 0:o.focus)==null||_.call(o)},q=()=>{var o,_;(_=(o=d.value)==null?void 0:o.blur)==null||_.call(o)},B=o=>{t("focus",o)},z=o=>{var _,N;c.userInput=null,c.currentValue===null&&((_=d.value)!=null&&_.input)&&(d.value.input.value=""),t("blur",o),n.validateEvent&&((N=P==null?void 0:P.validate)==null||N.call(P,"blur").catch(M=>Re()))},K=()=>{c.currentValue!==n.modelValue&&(c.currentValue=n.modelValue)},he=o=>{document.activeElement===o.target&&o.preventDefault()};return ve(()=>n.modelValue,(o,_)=>{const N=i(o,!0);c.userInput===null&&N!==_&&(c.currentValue=N)},{immediate:!0}),qe(()=>{var o;const{min:_,max:N,modelValue:M}=n,x=(o=d.value)==null?void 0:o.input;if(x.setAttribute("role","spinbutton"),Number.isFinite(N)?x.setAttribute("aria-valuemax",String(N)):x.removeAttribute("aria-valuemax"),Number.isFinite(_)?x.setAttribute("aria-valuemin",String(_)):x.removeAttribute("aria-valuemin"),x.setAttribute("aria-valuenow",c.currentValue||c.currentValue===0?String(c.currentValue):""),x.setAttribute("aria-disabled",String(w.value)),!R(M)&&M!=null){let X=Number(M);Number.isNaN(X)&&(X=null),t(Ce,X)}x.addEventListener("wheel",he,{passive:!1})}),Ua(()=>{var o,_;const N=(o=d.value)==null?void 0:o.input;N==null||N.setAttribute("aria-valuenow",`${(_=c.currentValue)!=null?_:""}`)}),p({focus:Y,blur:q}),(o,_)=>(f(),k("div",{class:j([l(r).b(),l(r).m(l($)),l(r).is("disabled",l(w)),l(r).is("without-controls",!o.controls),l(r).is("controls-right",l(V))]),onDragstart:Se(()=>{},["prevent"])},[o.controls?Te((f(),k("span",{key:0,role:"button","aria-label":l(s)("el.inputNumber.decrease"),class:j([l(r).e("decrease"),l(r).is("disabled",l(m))]),onKeydown:ye(a,["enter"])},[ee(o.$slots,"decrease-icon",{},()=>[g(l(_e),null,{default:C(()=>[l(V)?(f(),A(l(Aa),{key:0})):(f(),A(l(Ia),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[l(sa),a]]):Z("v-if",!0),o.controls?Te((f(),k("span",{key:1,role:"button","aria-label":l(s)("el.inputNumber.increase"),class:j([l(r).e("increase"),l(r).is("disabled",l(y))]),onKeydown:ye(W,["enter"])},[ee(o.$slots,"increase-icon",{},()=>[g(l(_e),null,{default:C(()=>[l(V)?(f(),A(l($a),{key:0})):(f(),A(l(Ta),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[l(sa),W]]):Z("v-if",!0),g(l(xe),{id:o.id,ref_key:"input",ref:d,type:"number",step:o.step,"model-value":l(S),placeholder:o.placeholder,readonly:o.readonly,disabled:l(w),size:l($),max:o.max,min:o.min,name:o.name,"aria-label":o.ariaLabel,"validate-event":!1,onKeydown:[ye(Se(W,["prevent"]),["up"]),ye(Se(a,["prevent"]),["down"])],onBlur:z,onFocus:B,onInput:T,onChange:F},Ba({_:2},[o.$slots.prefix?{name:"prefix",fn:C(()=>[ee(o.$slots,"prefix")])}:void 0,o.$slots.suffix?{name:"suffix",fn:C(()=>[ee(o.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var kt=ce(St,[["__file","input-number.vue"]]);const Pt=We(kt),ya=Symbol("elPaginationKey"),wt=le({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Fe}}),Et={click:e=>e instanceof MouseEvent},Nt=I({name:"ElPaginationPrev"}),Vt=I({...Nt,props:wt,emits:Et,setup(e){const p=e,{t}=ge(),n=E(()=>p.disabled||p.currentPage<=1);return(s,r)=>(f(),k("button",{type:"button",class:"btn-prev",disabled:l(n),"aria-label":s.prevText||l(t)("el.pagination.prev"),"aria-disabled":l(n),onClick:d=>s.$emit("click",d)},[s.prevText?(f(),k("span",{key:0},Q(s.prevText),1)):(f(),A(l(_e),{key:1},{default:C(()=>[(f(),A(ia(s.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Dt=ce(Vt,[["__file","prev.vue"]]);const zt=le({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Fe}}),Ut=I({name:"ElPaginationNext"}),At=I({...Ut,props:zt,emits:["click"],setup(e){const p=e,{t}=ge(),n=E(()=>p.disabled||p.currentPage===p.pageCount||p.pageCount===0);return(s,r)=>(f(),k("button",{type:"button",class:"btn-next",disabled:l(n),"aria-label":s.nextText||l(t)("el.pagination.next"),"aria-disabled":l(n),onClick:d=>s.$emit("click",d)},[s.nextText?(f(),k("span",{key:0},Q(s.nextText),1)):(f(),A(l(_e),{key:1},{default:C(()=>[(f(),A(ia(s.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var It=ce(At,[["__file","next.vue"]]);const Xe=()=>Ma(ya,{}),$t=le({pageSize:{type:Number,required:!0},pageSizes:{type:Je(Array),default:()=>ca([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:da},appendSizeTo:String}),Tt=I({name:"ElPaginationSizes"}),Bt=I({...Tt,props:$t,emits:["page-size-change"],setup(e,{emit:p}){const t=e,{t:n}=ge(),s=de("pagination"),r=Xe(),d=D(t.pageSize);ve(()=>t.pageSizes,(m,y)=>{if(!vt(m,y)&&xa(m)){const u=m.includes(t.pageSize)?t.pageSize:t.pageSizes[0];p("page-size-change",u)}}),ve(()=>t.pageSize,m=>{d.value=m});const c=E(()=>t.pageSizes);function P(m){var y;m!==d.value&&(d.value=m,(y=r.handleSizeChange)==null||y.call(r,Number(m)))}return(m,y)=>(f(),k("span",{class:j(l(s).e("sizes"))},[g(l(ga),{"model-value":d.value,disabled:m.disabled,"popper-class":m.popperClass,size:m.size,teleported:m.teleported,"validate-event":!1,"append-to":m.appendSizeTo,onChange:P},{default:C(()=>[(f(!0),k(te,null,Pe(l(c),u=>(f(),A(l(va),{key:u,value:u,label:u+l(n)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var Ft=ce(Bt,[["__file","sizes.vue"]]);const Mt=le({size:{type:String,values:da}}),xt=I({name:"ElPaginationJumper"}),Lt=I({...xt,props:Mt,setup(e){const{t:p}=ge(),t=de("pagination"),{pageCount:n,disabled:s,currentPage:r,changeEvent:d}=Xe(),c=D(),P=E(()=>{var u;return(u=c.value)!=null?u:r==null?void 0:r.value});function m(u){c.value=u?+u:""}function y(u){u=Math.trunc(+u),d==null||d(u),c.value=void 0}return(u,V)=>(f(),k("span",{class:j(l(t).e("jump")),disabled:l(s)},[ie("span",{class:j([l(t).e("goto")])},Q(l(p)("el.pagination.goto")),3),g(l(xe),{size:u.size,class:j([l(t).e("editor"),l(t).is("in-pagination")]),min:1,max:l(n),disabled:l(s),"model-value":l(P),"validate-event":!1,"aria-label":l(p)("el.pagination.page"),type:"number","onUpdate:modelValue":m,onChange:y},null,8,["size","class","max","disabled","model-value","aria-label"]),ie("span",{class:j([l(t).e("classifier")])},Q(l(p)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var Ot=ce(Lt,[["__file","jumper.vue"]]);const Rt=le({total:{type:Number,default:1e3}}),jt=I({name:"ElPaginationTotal"}),Kt=I({...jt,props:Rt,setup(e){const{t:p}=ge(),t=de("pagination"),{disabled:n}=Xe();return(s,r)=>(f(),k("span",{class:j(l(t).e("total")),disabled:l(n)},Q(l(p)("el.pagination.total",{total:s.total})),11,["disabled"]))}});var Yt=ce(Kt,[["__file","total.vue"]]);const qt=le({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),Jt=I({name:"ElPaginationPager"}),Wt=I({...Jt,props:qt,emits:[ke],setup(e,{emit:p}){const t=e,n=de("pager"),s=de("icon"),{t:r}=ge(),d=D(!1),c=D(!1),P=D(!1),m=D(!1),y=D(!1),u=D(!1),V=E(()=>{const a=t.pagerCount,i=(a-1)/2,v=Number(t.currentPage),T=Number(t.pageCount);let F=!1,Y=!1;T>a&&(v>a-i&&(F=!0),v<T-i&&(Y=!0));const q=[];if(F&&!Y){const B=T-(a-2);for(let z=B;z<T;z++)q.push(z)}else if(!F&&Y)for(let B=2;B<a;B++)q.push(B);else if(F&&Y){const B=Math.floor(a/2)-1;for(let z=v-B;z<=v+B;z++)q.push(z)}else for(let B=2;B<T;B++)q.push(B);return q}),$=E(()=>["more","btn-quickprev",s.b(),n.is("disabled",t.disabled)]),w=E(()=>["more","btn-quicknext",s.b(),n.is("disabled",t.disabled)]),S=E(()=>t.disabled?-1:0);La(()=>{const a=(t.pagerCount-1)/2;d.value=!1,c.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-a&&(d.value=!0),t.currentPage<t.pageCount-a&&(c.value=!0))});function U(a=!1){t.disabled||(a?P.value=!0:m.value=!0)}function L(a=!1){a?y.value=!0:u.value=!0}function ae(a){const i=a.target;if(i.tagName.toLowerCase()==="li"&&Array.from(i.classList).includes("number")){const v=Number(i.textContent);v!==t.currentPage&&p(ke,v)}else i.tagName.toLowerCase()==="li"&&Array.from(i.classList).includes("more")&&W(a)}function W(a){const i=a.target;if(i.tagName.toLowerCase()==="ul"||t.disabled)return;let v=Number(i.textContent);const T=t.pageCount,F=t.currentPage,Y=t.pagerCount-2;i.className.includes("more")&&(i.className.includes("quickprev")?v=F-Y:i.className.includes("quicknext")&&(v=F+Y)),Number.isNaN(+v)||(v<1&&(v=1),v>T&&(v=T)),v!==F&&p(ke,v)}return(a,i)=>(f(),k("ul",{class:j(l(n).b()),onClick:W,onKeyup:ye(ae,["enter"])},[a.pageCount>0?(f(),k("li",{key:0,class:j([[l(n).is("active",a.currentPage===1),l(n).is("disabled",a.disabled)],"number"]),"aria-current":a.currentPage===1,"aria-label":l(r)("el.pagination.currentPage",{pager:1}),tabindex:l(S)}," 1 ",10,["aria-current","aria-label","tabindex"])):Z("v-if",!0),d.value?(f(),k("li",{key:1,class:j(l($)),tabindex:l(S),"aria-label":l(r)("el.pagination.prevPages",{pager:a.pagerCount-2}),onMouseenter:v=>U(!0),onMouseleave:v=>P.value=!1,onFocus:v=>L(!0),onBlur:v=>y.value=!1},[(P.value||y.value)&&!a.disabled?(f(),A(l(Oa),{key:0})):(f(),A(l(aa),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Z("v-if",!0),(f(!0),k(te,null,Pe(l(V),v=>(f(),k("li",{key:v,class:j([[l(n).is("active",a.currentPage===v),l(n).is("disabled",a.disabled)],"number"]),"aria-current":a.currentPage===v,"aria-label":l(r)("el.pagination.currentPage",{pager:v}),tabindex:l(S)},Q(v),11,["aria-current","aria-label","tabindex"]))),128)),c.value?(f(),k("li",{key:2,class:j(l(w)),tabindex:l(S),"aria-label":l(r)("el.pagination.nextPages",{pager:a.pagerCount-2}),onMouseenter:v=>U(),onMouseleave:v=>m.value=!1,onFocus:v=>L(),onBlur:v=>u.value=!1},[(m.value||u.value)&&!a.disabled?(f(),A(l(Ra),{key:0})):(f(),A(l(aa),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Z("v-if",!0),a.pageCount>1?(f(),k("li",{key:3,class:j([[l(n).is("active",a.currentPage===a.pageCount),l(n).is("disabled",a.disabled)],"number"]),"aria-current":a.currentPage===a.pageCount,"aria-label":l(r)("el.pagination.currentPage",{pager:a.pageCount}),tabindex:l(S)},Q(a.pageCount),11,["aria-current","aria-label","tabindex"])):Z("v-if",!0)],42,["onKeyup"]))}});var Gt=ce(Wt,[["__file","pager.vue"]]);const J=e=>typeof e!="number",Ht=le({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>R(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Je(Array),default:()=>ca([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Fe,default:()=>qa},nextText:{type:String,default:""},nextIcon:{type:Fe,default:()=>Ya},teleported:{type:Boolean,default:!0},small:Boolean,size:ua,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),Qt={"update:current-page":e=>R(e),"update:page-size":e=>R(e),"size-change":e=>R(e),change:(e,p)=>R(e)&&R(p),"current-change":e=>R(e),"prev-click":e=>R(e),"next-click":e=>R(e)},ra="ElPagination";var Xt=I({name:ra,props:Ht,emits:Qt,setup(e,{emit:p,slots:t}){const{t:n}=ge(),s=de("pagination"),r=ja().vnode.props||{},d=ot(),c=E(()=>{var i;return e.small?"small":(i=e.size)!=null?i:d.value});rt({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},E(()=>!!e.small));const P="onUpdate:currentPage"in r||"onUpdate:current-page"in r||"onCurrentChange"in r,m="onUpdate:pageSize"in r||"onUpdate:page-size"in r||"onSizeChange"in r,y=E(()=>{if(J(e.total)&&J(e.pageCount)||!J(e.currentPage)&&!P)return!1;if(e.layout.includes("sizes")){if(J(e.pageCount)){if(!J(e.total)&&!J(e.pageSize)&&!m)return!1}else if(!m)return!1}return!0}),u=D(J(e.defaultPageSize)?10:e.defaultPageSize),V=D(J(e.defaultCurrentPage)?1:e.defaultCurrentPage),$=E({get(){return J(e.pageSize)?u.value:e.pageSize},set(i){J(e.pageSize)&&(u.value=i),m&&(p("update:page-size",i),p("size-change",i))}}),w=E(()=>{let i=0;return J(e.pageCount)?J(e.total)||(i=Math.max(1,Math.ceil(e.total/$.value))):i=e.pageCount,i}),S=E({get(){return J(e.currentPage)?V.value:e.currentPage},set(i){let v=i;i<1?v=1:i>w.value&&(v=w.value),J(e.currentPage)&&(V.value=v),P&&(p("update:current-page",v),p("current-change",v))}});ve(w,i=>{S.value>i&&(S.value=i)}),ve([S,$],i=>{p(ke,...i)},{flush:"post"});function U(i){S.value=i}function L(i){$.value=i;const v=w.value;S.value>v&&(S.value=v)}function ae(){e.disabled||(S.value-=1,p("prev-click",S.value))}function W(){e.disabled||(S.value+=1,p("next-click",S.value))}function a(i,v){i&&(i.props||(i.props={}),i.props.class=[i.props.class,v].join(" "))}return Ka(ya,{pageCount:w,disabled:E(()=>e.disabled),currentPage:S,changeEvent:U,handleSizeChange:L}),()=>{var i,v;if(!y.value)return Re(ra,n("el.pagination.deprecationWarning")),null;if(!e.layout||e.hideOnSinglePage&&w.value<=1)return null;const T=[],F=[],Y=me("div",{class:s.e("rightwrapper")},F),q={prev:me(Dt,{disabled:e.disabled,currentPage:S.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:ae}),jumper:me(Ot,{size:c.value}),pager:me(Gt,{currentPage:S.value,pageCount:w.value,pagerCount:e.pagerCount,onChange:U,disabled:e.disabled}),next:me(It,{disabled:e.disabled,currentPage:S.value,pageCount:w.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:W}),sizes:me(Ft,{pageSize:$.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,teleported:e.teleported,size:c.value,appendSizeTo:e.appendSizeTo}),slot:(v=(i=t==null?void 0:t.default)==null?void 0:i.call(t))!=null?v:null,total:me(Yt,{total:J(e.total)?0:e.total})},B=e.layout.split(",").map(K=>K.trim());let z=!1;return B.forEach(K=>{if(K==="->"){z=!0;return}z?F.push(q[K]):T.push(q[K])}),a(T[0],s.is("first")),a(T[T.length-1],s.is("last")),z&&F.length>0&&(a(F[0],s.is("first")),a(F[F.length-1],s.is("last")),T.push(Y)),me("div",{class:[s.b(),s.is("background",e.background),s.m(c.value)]},T)}}});const Zt=We(Xt),el=le({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Je([Number,Object])}}),al=le({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),tl=I({name:"ElSkeletonItem"}),ll=I({...tl,props:al,setup(e){const p=de("skeleton");return(t,n)=>(f(),k("div",{class:j([l(p).e("item"),l(p).e(t.variant)])},[t.variant==="image"?(f(),A(l(Ja),{key:0})):Z("v-if",!0)],2))}});var Me=ce(ll,[["__file","skeleton-item.vue"]]);const nl=(e,p=0)=>{if(p===0)return e;const t=ta(p)&&!!p.initVal,n=D(t);let s=null;const r=c=>{if(Ve(c)){n.value=e.value;return}s&&clearTimeout(s),s=setTimeout(()=>{n.value=e.value},c)},d=c=>{c==="leading"?R(p)?r(p):r(p.leading):ta(p)?r(p.trailing):n.value=!1};return qe(()=>d("leading")),ve(()=>e.value,c=>{d(c?"leading":"trailing")}),n},sl=I({name:"ElSkeleton"}),ol=I({...sl,props:el,setup(e,{expose:p}){const t=e,n=de("skeleton"),s=nl(Wa(t,"loading"),t.throttle);return p({uiLoading:s}),(r,d)=>l(s)?(f(),k("div",Oe({key:0,class:[l(n).b(),l(n).is("animated",r.animated)]},r.$attrs),[(f(!0),k(te,null,Pe(r.count,c=>(f(),k(te,{key:c},[l(s)?ee(r.$slots,"template",{key:c},()=>[g(Me,{class:j(l(n).is("first")),variant:"p"},null,8,["class"]),(f(!0),k(te,null,Pe(r.rows,P=>(f(),A(Me,{key:P,class:j([l(n).e("paragraph"),l(n).is("last",P===r.rows&&r.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Z("v-if",!0)],64))),128))],16)):ee(r.$slots,"default",Ga(Oe({key:1},r.$attrs)))}});var rl=ce(ol,[["__file","skeleton.vue"]]);const il=We(rl,{SkeletonItem:Me});et(Me);const ul={class:"flex items-center space-x-1"},dl=I({__name:"SaveCancelControls",props:{loading:{type:Boolean},disabled:{type:Boolean},title:{},confirmText:{},cancelText:{}},emits:["confirm","cancel"],setup(e,{emit:p}){const t=e,n=p;function s(){n("confirm")}function r(){n("cancel")}return(d,c)=>{const P=Be("Edit"),m=_e,y=Ge,u=it,V=Be("Close");return f(),k("div",ul,[g(u,{title:d.title||"Are you sure you want to save the changes?","confirm-button-text":d.confirmText||"Yes","cancel-button-text":d.cancelText||"No",onConfirm:s,onCancel:r},{reference:C(()=>[g(y,{class:"compact-btn",type:"text",size:"small",loading:t.loading,"aria-label":"Save"},{default:C(()=>[g(m,null,{default:C(()=>[g(P)]),_:1})]),_:1},8,["loading"])]),_:1},8,["title","confirm-button-text","cancel-button-text"]),g(y,{class:"compact-btn",type:"text",size:"small","aria-label":"Cancel",onClick:r,disabled:t.loading},{default:C(()=>[g(m,null,{default:C(()=>[g(V)]),_:1})]),_:1},8,["disabled"])])}}}),Ne=He(dl,[["__scopeId","data-v-c2ab2c6a"]]),cl={key:0,class:"flex flex-wrap gap-2 items-center"},pl={class:"mt-2 w-full flex justify-end gap-2"},fl={class:"truncate max-w-[170px] block"},ml={key:0,class:"flex justify-end items-center space-x-1"},vl={key:2},gl={key:0,class:"flex items-center space-x-1"},bl={key:4},yl=I({__name:"MultiTypeEditCell",props:{modelValue:{},label:{},disabled:{type:Boolean},type:{},placeholder:{},dateDefaultVal:{},isDate:{type:Boolean},isDict:{type:Boolean},readonly:{type:Boolean},editable:{type:Boolean},title:{},confirmText:{},cancelText:{}},emits:["update:modelValue","save","cancel","info","validate"],setup(e,{emit:p}){const t=D(null),n=e,s=p,r=D([]),d=D(!1),c=D(!1),P=E(()=>Array.isArray(n.modelValue)),m=E(()=>n.isDict&&n.modelValue!==null&&!Array.isArray(n.modelValue)),y=E(()=>typeof n.modelValue=="object"&&n.modelValue!==null&&!Array.isArray(n.modelValue)&&"label"in n.modelValue),u=D(null);function V(){var a;return P.value?r.value:m.value?u.value:y.value?{...n.modelValue,label:((a=u.value)==null?void 0:a.toString())??""}:u.value??""}ve(()=>n.modelValue,()=>{const a=n.modelValue;Array.isArray(a)?(r.value=a.map(i=>typeof i=="string"?i:i.label??""),u.value=""):m.value?(u.value={...a},r.value=[]):typeof a=="number"?(u.value=a,r.value=[]):typeof a=="string"?(u.value=a,r.value=[]):y.value?(u.value=a.label??"",r.value=[]):(u.value="",r.value=[])},{immediate:!0});function $(){d.value=!0}function w(){var i;const a=(i=u.value)==null?void 0:i.toString().trim();if(a){if(r.value.includes(a)){s("info",`"${a}" is already added and cannot be duplicated.`),s("validate",!1),u.value="",c.value=!1;return}s("validate",!0),r.value.push(a),u.value="",c.value=!1}}function S(a){r.value.splice(a,1)}function U(){const a=V();s("update:modelValue",a),s("save",a),d.value=!1}function L(){var a;u.value=typeof n.modelValue=="string"?n.modelValue:((a=n.modelValue)==null?void 0:a.label)??"",s("cancel"),d.value=!1,c.value=!1}function ae(a){u.value=a,s("update:modelValue",a)}ve(d,a=>{a&&la(()=>{var i;return(i=t.value)==null?void 0:i.focus()})});function W(){c.value=!0,u.value="",la(()=>{var a;return(a=t.value)==null?void 0:a.focus()})}return(a,i)=>{const v=pa,T=xe,F=Be("Edit"),Y=_e,q=Pt,B=ut;return f(),k("div",null,[P.value?(f(),k(te,{key:0},[d.value?(f(),k("div",cl,[(f(!0),k(te,null,Pe(r.value,(z,K)=>(f(),A(v,{key:K,closable:"",onClose:he=>S(K),size:"small",disabled:a.disabled,readonly:"readonly"in a?a.readonly:l(re)},{default:C(()=>[ue(Q(z),1)]),_:2},1032,["onClose","disabled","readonly"]))),128)),c.value?(f(),A(v,{key:0,class:"px-0"},{default:C(()=>[g(T,{ref_key:"inputRef",ref:t,modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=z=>u.value=z),class:"w-20",size:"small",onKeyup:ye(w,["enter"]),onBlur:w,style:{border:"none",outline:"none"}},null,8,["modelValue"])]),_:1})):Z("",!0),g(v,{tabindex:"0",onKeydown:ye(Se(W,["prevent"]),["enter"]),onClick:W,type:"info",class:"cursor-pointer",disabled:a.disabled,readonly:"readonly"in a?a.readonly:l(re)},{default:C(()=>[ue(" + "+Q(a.label),1)]),_:1},8,["onKeydown","disabled","readonly"]),ie("div",pl,[g(Ne,{onConfirm:U,onCancel:L})])])):(f(),k("div",{key:1,class:"flex flex-wrap gap-2 cursor-pointer",onClick:$},[(f(!0),k(te,null,Pe(r.value,(z,K)=>(f(),A(v,{key:K,closable:"",onClose:Se(he=>S(K),["stop"]),size:"small",disabled:a.disabled,readonly:"readonly"in a?a.readonly:l(re)},{default:C(()=>[ue(Q(z),1)]),_:2},1032,["onClose","disabled","readonly"]))),128)),g(v,{type:"info",class:"cursor-pointer",disabled:a.disabled,readonly:"readonly"in a?a.readonly:l(re)},{default:C(()=>i[6]||(i[6]=[ue(" + New Tag")])),_:1,__:[6]},8,["disabled","readonly"])]))],64)):(f(),k(te,{key:1},[d.value?a.type==="number"||a.type==="float"?(f(),A(q,{key:1,modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=z=>u.value=z),disabled:a.disabled,readonly:"readonly"in a?a.readonly:l(re),size:"small",class:"w-full",placeholder:a.label},{suffix:C(()=>[g(Ne,{onConfirm:U,onCancel:L})]),_:1},8,["modelValue","disabled","readonly","placeholder"])):a.type==="date"?(f(),k("div",vl,[g(B,{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=z=>u.value=z),readonly:"readonly"in a?a.readonly:l(re),disabled:a.disabled,size:"small",class:"w-full",placeholder:a.label,"default-value":n.dateDefaultVal},null,8,["modelValue","readonly","disabled","placeholder","default-value"]),a.disabled?Z("",!0):(f(),k("div",gl,[g(Ne,{onConfirm:U,onCancel:L})]))])):a.type==="email"?(f(),A(T,{key:3,modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=z=>u.value=z),type:"email",size:"small",class:"w-full",placeholder:a.label,disabled:a.disabled,readonly:"readonly"in a?a.readonly:l(re)},{suffix:C(()=>[g(Ne,{onConfirm:U,onCancel:L})]),_:1},8,["modelValue","placeholder","disabled","readonly"])):a.type==="dict"?(f(),k("div",bl,[ee(a.$slots,"dict",{vModel:u.value,disabled:a.disabled,label:a.label,readonly:"readonly"in a?a.readonly:l(re),type:a.type,placeholder:a.placeholder,isDict:m.value,updateModelValue:ae,save:U,cancel:L},void 0,!0)])):(f(),A(T,{key:5,modelValue:u.value,"onUpdate:modelValue":i[5]||(i[5]=z=>u.value=z),size:"small",class:"w-full",disabled:a.disabled,readonly:"readonly"in a?a.readonly:l(re),placeholder:a.label},{suffix:C(()=>[g(Ne,{onConfirm:U,onCancel:L})]),_:1},8,["modelValue","disabled","readonly","placeholder"])):(f(),k("div",{key:0,class:"cursor-pointer flex justify-between items-center",onClick:i[1]||(i[1]=z=>$())},[ie("span",fl,Q(u.value||n.placeholder||"—"),1),a.disabled?Z("",!0):(f(),k("span",ml,[g(Y,null,{default:C(()=>[g(F)]),_:1})]))]))],64))])}}}),_a=He(yl,[["__scopeId","data-v-467dfa54"]]);function ha(e){const p={};for(const t in e){const n=t.split(".");n.reduce((s,r,d)=>{if(d===n.length-1){s[r]=e[t];return}return s[r]||(s[r]={}),s[r]},p)}return p}const _l=[{label:"Phone Number",key:"admin_info.phone_number",type:"string"},{label:"Admin ID",key:"admin_info.admin_id",type:"string"},{label:"Created At",key:"admin_info.created_at",isDate:!0,type:"date"},{label:"Updated At",key:"admin_info.updated_at",isDate:!0,type:"date"}],hl=[{label:"Phone Number",key:"phone_number",type:"string"},{label:"Teacher Info",key:"teacher_info",children:[{label:"Lecturer ID",key:"teacher_info.lecturer_id",type:"string"},{label:"Lecturer Name",key:"teacher_info.lecturer_name",type:"string"},{label:"Subjects",key:"teacher_info.subjects",isArray:!0,type:"string"},{label:"Created At",key:"teacher_info.created_at",isDate:!0,type:"date"},{label:"Updated At",key:"teacher_info.updated_at",isDate:!0,type:"date"}]}],Cl=[{label:"Student ID",key:"student_info.student_id",type:"string"},{label:"Grade",key:"student_info.grade",type:"number"},{label:"Class IDs",key:"student_info.class_ids",isArray:!0,type:"string"},{label:"Major",key:"student_info.major",type:"string"},{label:"Birth Date",key:"student_info.birth_date",isDate:!0,type:"date"},{label:"Batch",key:"student_info.batch",type:"string"},{label:"Address",key:"student_info.address",type:"string"},{label:"Phone Number",key:"student_info.phone_number",type:"string"},{label:"Email",key:"student_info.email",type:"email"},{label:"Attendance Record",key:"student_info.attendance_record",isDict:!0,type:"dict"},{label:"Courses Enrolled",key:"student_info.courses_enrolled",isArray:!0,type:"string"},{label:"Scholarships",key:"student_info.scholarships",isArray:!0,type:"string"},{label:"Current GPA",key:"student_info.current_gpa",type:"float"},{label:"Remaining Credits",key:"student_info.remaining_credits",type:"float"},{label:"Created At",key:"student_info.created_at",isDate:!0,type:"date"},{label:"Updated At",key:"student_info.updated_at",isDate:!0,type:"date"}];function je(e){if(Array.isArray(e))return e.map(je);if(e!==null&&typeof e=="object"){const p={};for(const t in e){const n=e[t];n instanceof Date?p[t]=n.toISOString():p[t]=je(n)}return p}return e}const Ca=Ha("user",()=>{const e=new Qe,p=De({}),t=D([]),n=De({}),s=De({fetchUsers:!1});return{users:t,loadingStates:s,fetchUsers:async()=>{if(s.fetchUsers)throw new H("Already loading users...","ALREADY_LOADING_USERS",null);s.fetchUsers=!0;try{const m=await e.listUsers();return t.value=m.map(y=>new bt(y)),t.value}catch(m){throw m instanceof H?m:new H("Failed to fetch users","FETCH_USERS_FAILED",m)}finally{s.fetchUsers=!1}},getUserDetails:async m=>{if(n[m])return n[m];if(p[m])throw new H("Already loading user details...","ALREADY_LOADING_USER_DETAILS",null);p[m]=!0;try{const y=await e.getUserDetails(m);if(!y)throw new H(`No user details found for id ${m}`,"USER_NOT_FOUND",null);return n[m]=y,y}catch(y){throw y instanceof H?y:new H("Failed to fetch user details","FETCH_USER_DETAILS_FAILED",y)}finally{delete p[m]}},clearUserDetailsCache:m=>{m?delete n[m]:Object.keys(n).forEach(y=>delete n[y])},updateUserPatch:async(m,y)=>{try{const u=ha(y),V=je(u),$=await e.editUserDetail(m,V);if(!$.status)throw console.error("Update failed with status:",$.status,"and message:",$.msg),new H("Failed to update user details","UPDATE_USER_DETAILS_FAILED",null);return $}catch(u){throw u instanceof H?u:new H("Failed to update user details","UPDATE_USER_DETAILS_FAILED",u)}}}}),Sl=I({__name:"CustomButton",props:{type:{},size:{},disabled:{type:Boolean},loading:{type:Boolean},icon:{},plain:{type:Boolean},round:{type:Boolean},circle:{type:Boolean},text:{type:Boolean},link:{type:Boolean},href:{},target:{},rel:{},customClass:{},classes:{},style:{}},emits:["click"],setup(e,{emit:p}){const t=e,n=p,s=E(()=>[t.classes,t.customClass].filter(Boolean).join(" ")),r=d=>{n("click",d)};return(d,c)=>{const P=Ge;return f(),A(P,Oe(d.$attrs,{type:t.type,size:t.size,disabled:t.disabled,loading:t.loading,icon:t.icon,plain:t.plain,round:t.round,circle:t.circle,text:t.text,link:t.link,href:t.href,class:s.value,target:t.target,rel:t.rel,style:t.style,onClick:r}),{default:C(()=>[ee(d.$slots,"default",{},void 0,!0)]),_:3},16,["type","size","disabled","loading","icon","plain","round","circle","text","link","href","class","target","rel","style"])}}}),Le=He(Sl,[["__scopeId","data-v-8f2477c5"]]),kl=I({__name:"BaseForm",props:{model:{},rules:{},loading:{type:Boolean}},emits:["submit"],setup(e,{emit:p}){const t=p,n=()=>t("submit");return(s,r)=>{const d=Ge,c=ba,P=yt;return f(),A(P,{model:s.model,rules:s.rules,"label-position":"top",onSubmit:Se(n,["prevent"]),class:"space-y-4"},{default:C(()=>[ee(s.$slots,"default"),g(c,null,{default:C(()=>[ee(s.$slots,"actions",{},()=>[g(d,{type:"primary","native-type":"submit",loading:s.loading},{default:C(()=>r[0]||(r[0]=[ue(" Submit ")])),_:1,__:[0]},8,["loading"])])]),_:3})]),_:3},8,["model","rules"])}}}),Pl=I({__name:"CreateUserForm",emits:["created"],setup(e,{emit:p}){const t=D(!1),n=new Qe,{showSuccess:s,showError:r}=fa(),d=Ca(),c=De({username:"",password:"",role:Ee.Student}),P=p,m=async()=>{t.value=!0;try{const y=await n.createUser(c);y.status===201||y.data.success||y.status===200?(s("User created successfully"),P("created"),c.username="",c.password="",c.role=Ee.Student,await d.fetchUsers()):r(y.data.message||"Failed to create user")}catch(y){r((y==null?void 0:y.message)||"Failed to create user")}finally{t.value=!1}};return(y,u)=>{const V=xe,$=ba,w=va,S=ga;return f(),A(kl,{model:c,loading:t.value,onSubmit:m},{default:C(()=>[g($,{label:"Username"},{default:C(()=>[g(V,{modelValue:c.username,"onUpdate:modelValue":u[0]||(u[0]=U=>c.username=U)},null,8,["modelValue"])]),_:1}),g($,{label:"Password"},{default:C(()=>[g(V,{modelValue:c.password,"onUpdate:modelValue":u[1]||(u[1]=U=>c.password=U),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),g($,{label:"Role"},{default:C(()=>[g(S,{modelValue:c.role,"onUpdate:modelValue":u[2]||(u[2]=U=>c.role=U)},{default:C(()=>[g(w,{label:"Admin",value:l(Ee).Admin},null,8,["value"]),g(w,{label:"Teacher",value:l(Ee).Teacher},null,8,["value"]),g(w,{label:"Student",value:l(Ee).Student},null,8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","loading"])}}});var Ke=(e=>(e.Username="username",e.Email="email",e.Password="password",e.Role="role",e))(Ke||{});function wl(e){return e?oa(e).isValid()?oa(e).format("MMM D, YYYY, h:mm A"):"Invalid Date":"N/A"}var Ye=(e=>(e.Number="number",e.Float="float",e.Date="date",e.String="string",e.Email="email",e.Dict="dict",e))(Ye||{});const El={key:1},Ie=I({__name:"EditableColumn",props:{label:{},field:{},fieldsSchema:{},width:{},align:{},placeholder:{},disabled:{type:Boolean}},emits:["save","cancel","edit"],setup(e,{emit:p}){const t=e;Qa();const n=E(()=>t.label),s=E(()=>t.field),r=E(()=>t.width??250),d=E(()=>t.align??"left"),c=E(()=>t.placeholder??""),P=E(()=>{var V;return((V=t.fieldsSchema)==null?void 0:V.type)??Ye.String}),m=E(()=>t.disabled??!1),y=E(()=>{var V;return((V=t.fieldsSchema)==null?void 0:V.readonly)??!1}),u=Ye.Date;return(V,$)=>{const w=ma;return f(),A(w,{label:n.value,width:r.value,align:d.value},{default:C(({row:S})=>[V.$slots.cell?ee(V.$slots,"cell",{key:0,row:S,field:s.value}):P.value===l(u)&&y.value?(f(),k("span",El,Q(l(wl)(S[s.value])),1)):(f(),A(_a,{key:2,default:S[s.value],modelValue:S[s.value],"onUpdate:modelValue":U=>S[s.value]=U,label:s.value,type:P.value,placeholder:c.value,disabled:m.value,readonly:y.value,onSave:U=>V.$emit("save",S,s.value),onCancel:U=>V.$emit("cancel",S,s.value)},null,8,["default","modelValue","onUpdate:modelValue","label","type","placeholder","disabled","readonly","onSave","onCancel"]))]),_:3},8,["label","width","align"])}}}),Nl={class:"flex justify-center items-center w-full"},Vl={class:"flex gap-2 max-w-[270px]"},Dl={class:"flex justify-end mt-4"},zl={class:"mt-4"},Ul={class:"mt-4"},Wl=I({__name:"AdvancedUserTable",setup(e){const p=new Qe,t=Xa(()=>Za(()=>import("./VKWv0cjb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url)),n=D(!1),s=D(!1),r=D(!1),d=D(null),c=D(!1),P=D(1),m=D(20),y=D(!1),u=Ca(),{showSuccess:V,showInfo:$,showError:w}=fa(),S=D(0);qe(async()=>{await u.fetchUsers()});const U=D(null);function L(b,h){h===Ke.Username?b.username=a.value.username??b.username:h===Ke.Email&&(b.email=a.value.email??b.email),W.value={id:null,field:null}}async function ae(b){try{await p.deleteUser(b._id),V("User deleted successfully"),u.fetchUsers()}catch(h){if(h instanceof H)switch(h.code){case"DELETE_USER_FAILED":w(h.message);break;default:w((h==null?void 0:h.message)||"Failed to delete user")}else w((h==null?void 0:h.message)||"Failed to delete user")}}const W=D({id:null,field:null}),a=D({});async function i(b){try{await p.updateUser(b._id,{username:b.username,email:b.email}),W.value={id:null,field:null},V("User updated successfully"),u.fetchUsers()}catch{w("Failed to save inline edit")}}function v(b){$(`Cancel edit detail ${b}`)}function T(b,h){const ne={[b]:h};return ha(ne)}const F=E(()=>{var b,h,ne,be;return((h=(b=d.value)==null?void 0:b.profile)==null?void 0:h.role)==="teacher"?hl:((be=(ne=d.value)==null?void 0:ne.profile)==null?void 0:be.role)==="student"?Cl:_l}),Y=b=>!b.endsWith("created_at")&&!b.endsWith("updated_at"),q=new Date;q.setFullYear(q.getFullYear()-18);function B(b){var h;return((h=b==null?void 0:b.profile)==null?void 0:h.role)==="student"}function z(b){return b.profile.role==="teacher"}function K(b){return b.profile.role==="admin"}const he=E(()=>{if(d.value){if(B(d.value))return d.value.student_info;if(z(d.value))return d.value.teacher_info;if(K(d.value))return d.value.admin_info}});async function o(b){try{c.value=!0,s.value=!1,S.value++,d.value=null,U.value=b;const h=await p.getUserDetails(b);d.value=JSON.parse(JSON.stringify(h)),s.value=!0}catch{w("Failed to fetch user details")}finally{c.value=!1}}async function _(b,h){var be,Ue;if(!he.value)return;const ne=(Ue=(be=d.value)==null?void 0:be.profile)==null?void 0:Ue.id;if(!ne){w("User ID is not found");return}try{await u.updateUserPatch(ne,T(h,b))}catch(se){se instanceof H?w(se.message):w("Failed to update user")}try{const se=await p.getUserDetails(U.value);d.value=JSON.parse(JSON.stringify(se)),await u.fetchUsers(),V("User updated successfully")}catch(se){se instanceof H?w(se.message):w("Failed to fetch user details")}}const N=E({get(){return d.value!==null&&B(d.value)?d.value.student_info.student_info.attendance_record??{}:{}},set(b){d.value!==null&&B(d.value)&&(d.value.student_info.student_info.attendance_record=b)}});function M(b){_(b,"student_info.attendance_record")}const x=()=>{r.value=!0},X={admin:{type:"info",label:"Admin"},teacher:{type:"primary",label:"Teacher"},student:{type:"success",label:"Student"}},G={username:{type:"string"},email:{type:"email"},role:{type:"string"},createdAt:{type:"date",readonly:!0}},pe=E(()=>u.users);return(b,h)=>{var Ze,ea;const ne=il,be=pa,Ue=ma,se=dt,Sa=ft,ka=mt,Pa=Be("User"),wa=_e,Ea=ct,Na=Zt,Va=gt;return f(),k(te,null,[Te(g(ne,{rows:10,animated:"",border:"",class:"h-full",loading:n.value},null,8,["loading"]),[[na,n.value]]),g(Le,{type:"primary",onClick:x},{default:C(()=>h[7]||(h[7]=[ue(" Create User ")])),_:1,__:[7]}),g(ka,{class:"mt-4",gutter:20},{default:C(()=>[g(Sa,{span:24,class:"w-100%"},{default:C(()=>[Te(g(se,{data:pe.value,class:"w-100% mt-4"},{default:C(()=>[g(Ie,{label:"Username",field:"username",fieldsSchema:G.username,type:G.username.type,onSave:i,onCancel:L},null,8,["fieldsSchema","type"]),g(Ie,{label:"Email",field:"email",disabled:!0,fieldsSchema:G.email,type:G.email.type,onSave:i,onCancel:L},null,8,["fieldsSchema","type"]),g(Ie,{label:"Role",field:"role",fieldsSchema:G.role,type:G.role.type,onSave:i,align:"center",onCancel:L},{cell:C(({row:O,field:fe})=>{var Ae;return[g(be,{type:(Ae=X[O[fe]])==null?void 0:Ae.type,class:"w-100% !text-center"},{default:C(()=>{var oe;return[ue(Q((oe=X[O[fe]])==null?void 0:oe.label),1)]}),_:2},1032,["type"])]}),_:1},8,["fieldsSchema","type"]),g(Ie,{label:"Created At",field:"createdAt",fieldsSchema:G.createdAt,type:G.createdAt.type,onSave:i,onCancel:L},null,8,["fieldsSchema","type"]),g(Ue,{fixed:"right",label:"Operations","min-width":"140",align:"center","header-align":"center"},{default:C(({row:O})=>[ie("div",Nl,[ie("div",Vl,[g(Le,{type:"success",link:"",class:"!bg-transparent !border-none",onClick:fe=>o(O._id)},{default:C(()=>h[8]||(h[8]=[ue(" Detail ")])),_:2,__:[8]},1032,["onClick"]),g(Le,{type:"danger",class:"!bg-transparent !border-none",link:"",onClick:fe=>ae(O)},{default:C(()=>h[9]||(h[9]=[ue(" Delete ")])),_:2,__:[9]},1032,["onClick"])])])]),_:1})]),_:1},8,["data"]),[[na,!n.value]])]),_:1})]),_:1}),!n.value&&pe.value.length===0?(f(),A(Ea,{key:0,description:"No users found."},{image:C(()=>[g(wa,null,{default:C(()=>[g(Pa)]),_:1})]),_:1})):Z("",!0),ie("div",Dl,[g(Na,{background:"",layout:"prev, pager, next",total:pe.value.length,"page-size":m.value,"current-page":P.value},null,8,["total","page-size","current-page"])]),ie("div",zl,[(f(),A(l(t),{modelValue:s.value,"onUpdate:modelValue":h[4]||(h[4]=O=>s.value=O),"destroy-on-close":"",loading:c.value,key:S.value,title:(ea=(Ze=d.value)==null?void 0:Ze.profile)==null?void 0:ea.role,infoObject:he.value,fields:F.value,width:"800px !important"},{custom:C(({item:O,value:fe,fields:Ae})=>[g(_a,{"model-value":fe,default:fe,type:O.type||"string",onInfo:h[3]||(h[3]=oe=>l($)(oe)),readonly:!Y(O.key),disabled:!Y(O.key),dateDefaultVal:O.isDate?new Date(new Date().setFullYear(new Date().getFullYear()-18)):void 0,infoObject:fe,fields:Ae,label:O.label,onSave:oe=>_(oe,O.key),onCancel:oe=>v(O.key)},{dict:C(({disabled:oe,label:Da,placeholder:za})=>[(f(),A(pt,{modelValue:N.value,"onUpdate:modelValue":h[0]||(h[0]=we=>N.value=we),draft:y.value,"onUpdate:draft":h[1]||(h[1]=we=>y.value=we),disabled:oe,label:Da,placeholder:za,key:O.key,onSave:h[2]||(h[2]=we=>M(we))},null,8,["modelValue","draft","disabled","label","placeholder"]))]),_:2},1032,["model-value","default","type","readonly","disabled","dateDefaultVal","infoObject","fields","label","onSave","onCancel"])]),_:1},8,["modelValue","loading","title","infoObject","fields"]))]),ie("div",Ul,[g(Va,{modelValue:r.value,"onUpdate:modelValue":h[6]||(h[6]=O=>r.value=O),title:"Create User",width:"500px !important","destroy-on-close":""},{default:C(()=>[g(Pl,{onCreated:h[5]||(h[5]=O=>r.value=!1),onError:l(w)},null,8,["onError"])]),_:1},8,["modelValue"])])],64)}}});export{il as E,Wl as _};
