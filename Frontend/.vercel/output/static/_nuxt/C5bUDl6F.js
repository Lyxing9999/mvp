import{a as Sy,E as _y}from"./CP8Wd66V.js";import{g as Ho,l as Kf,K as qc,U as Ci,y as wy,ap as Jf,u as Yw,B as Zw,x as Xw,A as qw,s as Qw,F as Kw,G as Jw,H as ex,m as xy,t as Qc,I as ju,aE as tx,aF as rx,a as Do,e as Er,ag as eh,ae as th,E as nx}from"./Cv_xL7jc.js";import{bk as rh,bl as V,bm as ax,bn as $u,bo as Ay,bp as ri,bq as T,br as He,bs as Cy,bt as Dy,bu as G,bv as Qe,bw as je,bx as Kn,by as Na,bz as xe,bA as We,bB as Ae,bC as W,bD as ix,bE as ox,bF as sx,bG as lx,bH as Ty,bI as Ey,bJ as nh,bK as ux,bL as cx,bM as it,bN as xt,bO as Oe,bP as Ne,bQ as My,bR as Rr,bS as hr,bT as ni,bU as dx,bV as ah,bW as fx,bX as Iy,bY as de,bZ as hx,b_ as vx,b$ as X,c0 as Ry,c1 as er,c2 as Ly,c3 as Py,c4 as px,c5 as ot,c6 as ky,c7 as Is,c8 as gx,c9 as mx,ca as yx,cb as bx,cc as Sx,cd as _x,ce as wx,cf as xx,cg as Ax,ch as Cx,ci as Dx,cj as ai,ck as Tx,cl as Se,cm as Ex,cn as Oy,co as Kc,cp as Mx,cq as Ix,cr as Rx,cs as $,ct,cu as ih,cv as Lx,cw as Gr,cx as ma,cy as rt,cz as ae,cA as mt,cB as Rs,cC as Ls,cD as Je,cE as se,cF as Px,cG as kx,cH as Ut,cI as vr,cJ as Fr,cK as ce,cL as Lt,cM as jt,cN as At,cO as Ye,cP as ya,cQ as Di,cR as Ps,cS as Z,cT as Ti,cU as Ox,cV as Ct,cW as ke,cX as Pt,cY as rr,cZ as ks,c_ as Nx,c$ as dt,d0 as Sn,d1 as Ei,d2 as Ny,d3 as qt,d4 as yt,d5 as pr,d6 as Yu,d7 as Vx,d8 as Os,d9 as Ns,da as oh,db as _n,dc as Vy,dd as Ge,de as F,df as Bx,dg as zx,dh as Qt,di as Hx,dj as Vs,dk as Gx,dl as Bs,dm as By,dn as wn,dp as ba,dq as le,dr as zy,ds as xn,dt as oa,du as Jc,dv as ed,dw as Fx,dx as Mi,dy as Hy,dz as he,dA as Gy,dB as Wx,dC as pt,dD as cr,dE as td,dF as Tt,dG as Zt,dH as zs,dI as Fy,dJ as Wy,dK as Ux,dL as Hs,dM as Uy,dN as Go,dO as jx,dP as Fo,dQ as jy,dR as mr,dS as rd,dT as It,dU as Zu,dV as gt,dW as nd,dX as $x,dY as Ie,dZ as Ue,d_ as Wr,d$ as $y,e0 as sh,e1 as Va,e2 as lh,e3 as Yy,e4 as Yx,e5 as ye,e6 as Zx,e7 as pl,e8 as gl,e9 as Wo,ea as Ua,eb as uh,ec as Ii,ed as Vr,ee as Ri,ef as Xx,eg as qx,eh as Jn,ei as ch,ej as Xu,ek as Qx,el as qu,em as ad,en as ii,eo as oi,ep as Li,eq as Gs,er as Kx,es as Zy,et as Jx,eu as Xy,ev as eA,ew as tA,ex as dh,ey as An,ez as fh,eA as rA,eB as nA,eC as yr,eD as aA,eE as iA,eF as Fs,eG as qy,eH as id,eI as Uo,eJ as Br,eK as Gt,eL as od,eM as ra,eN as oA,eO as sd,eP as jo,eQ as Qu,eR as Ku,eS as sA,eT as ml,eU as Qy,eV as Fe,eW as ld,eX as Ws,eY as yl,eZ as lA,e_ as uA,e$ as Ba,f0 as cA,f1 as hh,f2 as dA,f3 as vh,f4 as Us,f5 as Ju,f6 as fA,f7 as Sa,f8 as ph,f9 as hA,fa as vA,fb as pA,fc as gh,fd as gA,fe as mA,ff as yA,fg as Pi,fh as si,fi as bA,fj as Ky,fk as mh,fl as SA,fm as Jy,fn as _A,fo as e0,fp as t0,fq as wA,fr as r0,fs as yh,ft as n0,fu as a0,fv as bh,fw as ki,fx as i0,fy as ud,fz as xA,fA as AA,fB as CA,fC as DA,fD as TA,fE as EA,fF as o0,fG as MA,fH as s0,fI as IA,fJ as Sh,fK as RA,fL as LA,fM as PA,fN as kA,fO as OA,fP as NA,fQ as VA,fR as BA,fS as l0,fT as zA,fU as HA,fV as u0,fW as GA,fX as _h,fY as c0,fZ as FA,f_ as WA,f$ as d0,g0 as f0,g1 as Qi,g2 as UA,g3 as cd,g4 as To,g5 as ec,g6 as jA,g7 as $A,g8 as $o,g9 as YA,ga as ZA,gb as XA,gc as js,gd as qA,ge as QA,gf as KA,gg as JA,gh as wh,gi as e1,gj as h0,gk as t1,gl as r1,gm as n1,gn as a1,go as i1,gp as xh,gq as o1,s as s1,a9 as l1,a5 as tc,r as ge,i as $s,F as Xe,g as Ee,c as bt,o as be,d as Re,ah as dd,gr as v0,R as j,Y as Yo,Q as at,af as p0,S as br,N as Et,f as Mt,a4 as Oi,T as fd,q as _a,a6 as g0,W as m0,aq as u1,a3 as Cn,b as c1,P as ja,y as y0,U as hd,ar as d1,e as K,aK as f1,aJ as h1,$ as v1,aF as p1,ad as g1,b9 as m1,ak as y1,w as pe,j as et,a1 as Ni,A as Eo,a7 as b1,I as S1,gs as Zo,gt as vd,gu as _1,gv as bl,gw as w1,gx as x1,gy as A1,gz as C1,gA as D1,gB as T1,gC as E1,gD as M1,gE as I1,gF as R1,B as L1}from"./logkf7nQ.js";import{b as Dr,d as li}from"./CN6nfdWM.js";import{_ as wa,u as Zr,a as pd,w as gd}from"./BN3SMaRa.js";import{c as Ir,E as md}from"./Dtr359OJ.js";import{f as P1}from"./BwEmtvrM.js";import{E as yd}from"./7qPWufmO.js";import{U as Ah}from"./CJQQVJZh.js";import{E as k1}from"./07Nh2Hrn.js";import{_ as O1}from"./DlAUqK2U.js";var N1=1e-8;function Ch(r,e){return Math.abs(r-e)<N1}function fn(r,e,t){var n=0,a=r[0];if(!a)return!1;for(var i=1;i<r.length;i++){var o=r[i];n+=rh(a[0],a[1],o[0],o[1],e,t),a=o}var s=r[0];return(!Ch(a[0],s[0])||!Ch(a[1],s[1]))&&(n+=rh(a[0],a[1],s[0],s[1],e,t)),n!==0}var V1=[];function Sl(r,e){for(var t=0;t<r.length;t++)ri(r[t],r[t],e)}function Dh(r,e,t,n){for(var a=0;a<r.length;a++){var i=r[a];n&&(i=n.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Cy(e,e,i),Dy(t,t,i))}}function B1(r){for(var e=0,t=0,n=0,a=r.length,i=r[a-1][0],o=r[a-1][1],s=0;s<a;s++){var l=r[s][0],u=r[s][1],c=i*u-l*o;e+=c,t+=(i+l)*c,n+=(o+u)*c,i=l,o=u}return e?[t/e/3,n/e/3,e]:[r[0][0]||0,r[0][1]||0]}var b0=function(){function r(e){this.name=e}return r.prototype.setCenter=function(e){this._center=e},r.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},r}(),Th=function(){function r(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return r}(),Eh=function(){function r(e){this.type="linestring",this.points=e}return r}(),S0=function(r){V(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.type="geoJSON",i.geometries=n,i._center=a&&[a[0],a[1]],i}return e.prototype.calcCenter=function(){for(var t=this.geometries,n,a=0,i=0;i<t.length;i++){var o=t[i],s=o.exterior,l=s&&s.length;l>a&&(n=o,a=l)}if(n)return B1(n.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},e.prototype.getBoundingRect=function(t){var n=this._rect;if(n&&!t)return n;var a=[1/0,1/0],i=[-1/0,-1/0],o=this.geometries;return T(o,function(s){s.type==="polygon"?Dh(s.exterior,a,i,t):T(s.points,function(l){Dh(l,a,i,t)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(i[0])&&isFinite(i[1])||(a[0]=a[1]=i[0]=i[1]=0),n=new He(a[0],a[1],i[0]-a[0],i[1]-a[1]),t||(this._rect=n),n},e.prototype.contain=function(t){var n=this.getBoundingRect(),a=this.geometries;if(!n.contain(t[0],t[1]))return!1;e:for(var i=0,o=a.length;i<o;i++){var s=a[i];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(fn(l,t[0],t[1])){for(var c=0;c<(u?u.length:0);c++)if(fn(u[c],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,n,a,i){var o=this.getBoundingRect(),s=o.width/o.height;a?i||(i=a/s):a=s*i;for(var l=new He(t,n,a,i),u=o.calculateTransform(l),c=this.geometries,d=0;d<c.length;d++){var f=c[d];f.type==="polygon"?(Sl(f.exterior,u),T(f.interiors,function(h){Sl(h,u)})):T(f.points,function(h){Sl(h,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var n=new e(t,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e}(b0),z1=function(r){V(e,r);function e(t,n){var a=r.call(this,t)||this;return a.type="geoSVG",a._elOnlyForCalculate=n,a}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,n=t.getBoundingRect(),a=[n.x+n.width/2,n.y+n.height/2],i=ax(V1),o=t;o&&!o.isGeoSVGGraphicRoot;)$u(i,o.getLocalTransform(),i),o=o.parent;return Ay(i,i),ri(a,a,i),a},e}(b0);function H1(r){if(!r.UTF8Encoding)return r;var e=r,t=e.UTF8Scale;t==null&&(t=1024);var n=e.features;return T(n,function(a){var i=a.geometry,o=i.encodeOffsets,s=i.coordinates;if(o)switch(i.type){case"LineString":i.coordinates=_0(s,o,t);break;case"Polygon":_l(s,o,t);break;case"MultiLineString":_l(s,o,t);break;case"MultiPolygon":T(s,function(l,u){return _l(l,o[u],t)})}}),e.UTF8Encoding=!1,e}function _l(r,e,t){for(var n=0;n<r.length;n++)r[n]=_0(r[n],e[n],t)}function _0(r,e,t){for(var n=[],a=e[0],i=e[1],o=0;o<r.length;o+=2){var s=r.charCodeAt(o)-64,l=r.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=a,l+=i,a=s,i=l,n.push([s/t,l/t])}return n}function G1(r,e){return r=H1(r),G(Qe(r.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var n=t.properties,a=t.geometry,i=[];switch(a.type){case"Polygon":var o=a.coordinates;i.push(new Th(o[0],o.slice(1)));break;case"MultiPolygon":T(a.coordinates,function(l){l[0]&&i.push(new Th(l[0],l.slice(1)))});break;case"LineString":i.push(new Eh([a.coordinates]));break;case"MultiLineString":i.push(new Eh(a.coordinates))}var s=new S0(n[e||"name"],i,n.cp);return s.properties=n,s})}function F1(r){if(r){for(var e=[],t=0;t<r.length;t++)e.push(r[t].slice());return e}}function W1(r,e){var t=r.label,n=e&&e.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:F1(n&&n.shape.points)}}var Mh=["align","verticalAlign","width","height","fontSize"],vt=new Kn,wl=je(),U1=je();function Ki(r,e,t){for(var n=0;n<t.length;n++){var a=t[n];e[a]!=null&&(r[a]=e[a])}}var Ji=["x","y","rotation"],j1=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(e,t,n,a,i){var o=a.style,s=a.__hostTarget,l=s.textConfig||{},u=a.getComputedTransform(),c=a.getBoundingRect().plain();He.applyTransform(c,c,u),u?vt.setLocalTransform(u):(vt.x=vt.y=vt.rotation=vt.originX=vt.originY=0,vt.scaleX=vt.scaleY=1),vt.rotation=Na(vt.rotation);var d=a.__hostTarget,f;if(d){f=d.getBoundingRect().plain();var h=d.getComputedTransform();He.applyTransform(f,f,h)}var v=f&&d.getTextGuideLine();this._labelList.push({label:a,labelLine:v,seriesModel:n,dataIndex:e,dataType:t,layoutOption:i,computedLayoutOption:null,rect:c,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:v&&v.ignore,x:vt.x,y:vt.y,scaleX:vt.scaleX,scaleY:vt.scaleY,rotation:vt.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:a.cursor,attachedPos:l.position,attachedRot:l.rotation}})},r.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,a=n.get("labelLayout");(xe(a)||We(a).length)&&e.group.traverse(function(i){if(i.ignore)return!0;var o=i.getTextContent(),s=Ae(i);o&&!o.disableLabelLayout&&t._addLabel(s.dataIndex,s.dataType,n,o,a)})},r.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function a(S,y){return function(){nh(S,y)}}for(var i=0;i<this._labelList.length;i++){var o=this._labelList[i],s=o.label,l=s.__hostTarget,u=o.defaultAttr,c=void 0;xe(o.layoutOption)?c=o.layoutOption(W1(o,l)):c=o.layoutOption,c=c||{},o.computedLayoutOption=c;var d=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:u.attachedPos,rotation:c.rotate!=null?c.rotate*d:u.attachedRot,offset:[c.dx||0,c.dy||0]});var f=!1;if(c.x!=null?(s.x=W(c.x,t),s.setStyle("x",0),f=!0):(s.x=u.x,s.setStyle("x",u.style.x)),c.y!=null?(s.y=W(c.y,n),s.setStyle("y",0),f=!0):(s.y=u.y,s.setStyle("y",u.style.y)),c.labelLinePoints){var h=l.getTextGuideLine();h&&(h.setShape({points:c.labelLinePoints}),f=!1)}var v=wl(s);v.needsUpdateLabelLine=f,s.rotation=c.rotate!=null?c.rotate*d:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var p=0;p<Mh.length;p++){var g=Mh[p];s.setStyle(g,c[g]!=null?c[g]:u.style[g])}if(c.draggable){if(s.draggable=!0,s.cursor="move",l){var m=o.seriesModel;if(o.dataIndex!=null){var b=o.seriesModel.getData(o.dataType);m=b.getItemModel(o.dataIndex)}s.on("drag",a(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},r.prototype.layout=function(e){var t=e.getWidth(),n=e.getHeight(),a=ix(this._labelList),i=Qe(a,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=Qe(a,function(l){return l.layoutOption.moveOverlap==="shiftY"});ox(i,0,t),sx(o,0,n);var s=Qe(a,function(l){return l.layoutOption.hideOverlap});lx(s)},r.prototype.processLabelsOverall=function(){var e=this;T(this._chartViewList,function(t){var n=t.__model,a=t.ignoreLabelLineUpdate,i=n.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!a,l=o.getTextContent();!s&&l&&(s=wl(l).needsUpdateLabelLine),s&&e._updateLabelLine(o,n),i&&e._animateLabels(o,n)})})},r.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),a=Ae(e),i=a.dataIndex;if(n&&i!=null){var o=t.getData(a.dataType),s=o.getItemModel(i),l={},u=o.getItemVisual(i,"style");if(u){var c=o.getVisual("drawType");l.stroke=u[c]}var d=s.getModel("labelLine");Ty(e,Ey(s),l),nh(e,d)}},r.prototype._animateLabels=function(e,t){var n=e.getTextContent(),a=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!ux(e))){var i=wl(n),o=i.oldLayout,s=Ae(e),l=s.dataIndex,u={x:n.x,y:n.y,rotation:n.rotation},c=t.getData(s.dataType);if(o){n.attr(o);var f=e.prevStates;f&&(Oe(f,"select")>=0&&n.attr(i.oldLayoutSelect),Oe(f,"emphasis")>=0&&n.attr(i.oldLayoutEmphasis)),Ne(n,u,t,l)}else if(n.attr(u),!cx(n).valueAnimation){var d=it(n.style.opacity,1);n.style.opacity=0,xt(n,{style:{opacity:d}},t,l)}if(i.oldLayout=u,n.states.select){var h=i.oldLayoutSelect={};Ki(h,u,Ji),Ki(h,n.states.select,Ji)}if(n.states.emphasis){var v=i.oldLayoutEmphasis={};Ki(v,u,Ji),Ki(v,n.states.emphasis,Ji)}My(n,l,c,t,t)}if(a&&!a.ignore&&!a.invisible){var i=U1(a),o=i.oldLayout,p={points:a.shape.points};o?(a.attr({shape:o}),Ne(a,{shape:p},t)):(a.setShape(p),a.style.strokePercent=0,xt(a,{style:{strokePercent:1}},t)),i.oldLayout=p}},r}(),xl=je();function $1(r){r.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){var a=xl(t).labelManager;a||(a=xl(t).labelManager=new j1),a.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(e,t,n){var a=xl(t).labelManager;n.updatedSeries.forEach(function(i){a.addLabelsOfSeries(t.getViewOfSeriesModel(i))}),a.updateLayoutConfig(t),a.layout(t),a.processLabelsOverall()})}var Al=Math.sin,Cl=Math.cos,w0=Math.PI,en=Math.PI*2,Y1=180/w0,x0=function(){function r(){}return r.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},r.prototype.moveTo=function(e,t){this._add("M",e,t)},r.prototype.lineTo=function(e,t){this._add("L",e,t)},r.prototype.bezierCurveTo=function(e,t,n,a,i,o){this._add("C",e,t,n,a,i,o)},r.prototype.quadraticCurveTo=function(e,t,n,a){this._add("Q",e,t,n,a)},r.prototype.arc=function(e,t,n,a,i,o){this.ellipse(e,t,n,n,0,a,i,o)},r.prototype.ellipse=function(e,t,n,a,i,o,s,l){var u=s-o,c=!l,d=Math.abs(u),f=Rr(d-en)||(c?u>=en:-u>=en),h=u>0?u%en:u%en+en,v=!1;f?v=!0:Rr(d)?v=!1:v=h>=w0==!!c;var p=e+n*Cl(o),g=t+a*Al(o);this._start&&this._add("M",p,g);var m=Math.round(i*Y1);if(f){var b=1/this._p,S=(c?1:-1)*(en-b);this._add("A",n,a,m,1,+c,e+n*Cl(o+S),t+a*Al(o+S)),b>.01&&this._add("A",n,a,m,0,+c,p,g)}else{var y=e+n*Cl(s),w=t+a*Al(s);this._add("A",n,a,m,+v,+c,y,w)}},r.prototype.rect=function(e,t,n,a){this._add("M",e,t),this._add("l",n,0),this._add("l",0,a),this._add("l",-n,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(e,t,n,a,i,o,s,l,u){for(var c=[],d=this._p,f=1;f<arguments.length;f++){var h=arguments[f];if(isNaN(h)){this._invalid=!0;return}c.push(Math.round(h*d)/d)}this._d.push(e+c.join(" ")),this._start=e==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}(),bd="none",Z1=Math.round;function X1(r){var e=r.fill;return e!=null&&e!==bd}function q1(r){var e=r.stroke;return e!=null&&e!==bd}var rc=["lineCap","miterLimit","lineJoin"],Q1=G(rc,function(r){return"stroke-"+r.toLowerCase()});function K1(r,e,t,n){var a=e.opacity==null?1:e.opacity;if(t instanceof hr){r("opacity",a);return}if(X1(e)){var i=ni(e.fill);r("fill",i.color);var o=e.fillOpacity!=null?e.fillOpacity*i.opacity*a:i.opacity*a;o<1&&r("fill-opacity",o)}else r("fill",bd);if(q1(e)){var s=ni(e.stroke);r("stroke",s.color);var l=e.strokeNoScale?t.getLineScale():1,u=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*a:s.opacity*a,d=e.strokeFirst;if(u!==1&&r("stroke-width",u),d&&r("paint-order",d?"stroke":"fill"),c<1&&r("stroke-opacity",c),e.lineDash){var f=dx(t),h=f[0],v=f[1];h&&(v=Z1(v||0),r("stroke-dasharray",h.join(",")),(v||n)&&r("stroke-dashoffset",v))}for(var p=0;p<rc.length;p++){var g=rc[p];if(e[g]!==ah[g]){var m=e[g]||ah[g];m&&r(Q1[p],m)}}}}var A0="http://www.w3.org/2000/svg",C0="http://www.w3.org/1999/xlink",J1="http://www.w3.org/2000/xmlns/",eC="http://www.w3.org/XML/1998/namespace",Ih="ecmeta_";function D0(r){return document.createElementNS(A0,r)}function qe(r,e,t,n,a){return{tag:r,attrs:t||{},children:n,text:a,key:e}}function tC(r,e){var t=[];if(e)for(var n in e){var a=e[n],i=n;a!==!1&&(a!==!0&&a!=null&&(i+='="'+a+'"'),t.push(i))}return"<"+r+" "+t.join(" ")+">"}function rC(r){return"</"+r+">"}function Sd(r,e){e=e||{};var t=e.newline?`
`:"";function n(a){var i=a.children,o=a.tag,s=a.attrs,l=a.text;return tC(o,s)+(o!=="style"?fx(l):l||"")+(i?""+t+G(i,function(u){return n(u)}).join(t)+t:"")+rC(o)}return n(r)}function nC(r,e,t){t=t||{};var n=t.newline?`
`:"",a=" {"+n,i=n+"}",o=G(We(r),function(l){return l+a+G(We(r[l]),function(u){return u+":"+r[l][u]+";"}).join(n)+i}).join(n),s=G(We(e),function(l){return"@keyframes "+l+a+G(We(e[l]),function(u){return u+a+G(We(e[l][u]),function(c){var d=e[l][u][c];return c==="d"&&(d='path("'+d+'")'),c+":"+d+";"}).join(n)+i}).join(n)+i}).join(n);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(n)}function nc(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Rh(r,e,t,n){return qe("svg","root",{width:r,height:e,xmlns:A0,"xmlns:xlink":C0,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+r+" "+e:!1},t)}var aC=0;function T0(){return aC++}var Lh={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},rn="transform-origin";function iC(r,e,t){var n=X({},r.shape);X(n,e),r.buildPath(t,n);var a=new x0;return a.reset(Ly(r)),t.rebuildPath(a,1),a.generateStr(),a.getStr()}function oC(r,e){var t=e.originX,n=e.originY;(t||n)&&(r[rn]=t+"px "+n+"px")}var sC={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function E0(r,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=r,t}function lC(r,e,t){var n=r.shape.paths,a={},i,o;if(T(n,function(l){var u=nc(t.zrId);u.animation=!0,Ys(l,{},u,!0);var c=u.cssAnims,d=u.cssNodes,f=We(c),h=f.length;if(h){o=f[h-1];var v=c[o];for(var p in v){var g=v[p];a[p]=a[p]||{d:""},a[p].d+=g.d||""}for(var m in d){var b=d[m].animation;b.indexOf(o)>=0&&(i=b)}}}),!!i){e.d=!1;var s=E0(a,t);return i.replace(o,s)}}function Ph(r){return de(r)?Lh[r]?"cubic-bezier("+Lh[r]+")":hx(r)?r:"":""}function Ys(r,e,t,n){var a=r.animators,i=a.length,o=[];if(r instanceof Iy){var s=lC(r,e,t);if(s)o.push(s);else if(!i)return}else if(!i)return;for(var l={},u=0;u<i;u++){var c=a[u],d=[c.getMaxTime()/1e3+"s"],f=Ph(c.getClip().easing),h=c.getDelay();f?d.push(f):d.push("linear"),h&&d.push(h/1e3+"s"),c.getLoop()&&d.push("infinite");var v=d.join(" ");l[v]=l[v]||[v,[]],l[v][1].push(c)}function p(b){var S=b[1],y=S.length,w={},_={},x={},A="animation-timing-function";function C(ne,Q,fe){for(var ue=ne.getTracks(),De=ne.getMaxTime(),Me=0;Me<ue.length;Me++){var $e=ue[Me];if($e.needsAnimate()){var Te=$e.keyframes,Be=$e.propName;if(fe&&(Be=fe(Be)),Be)for(var Ze=0;Ze<Te.length;Ze++){var st=Te[Ze],Ot=Math.round(st.time/De*100)+"%",ft=Ph(st.easing),Xt=st.rawValue;(de(Xt)||er(Xt))&&(Q[Ot]=Q[Ot]||{},Q[Ot][Be]=st.rawValue,ft&&(Q[Ot][A]=ft))}}}}for(var D=0;D<y;D++){var E=S[D],M=E.targetName;M?M==="shape"&&C(E,_):!n&&C(E,w)}for(var I in w){var R={};vx(R,r),X(R,w[I]);var L=Ry(R),P=w[I][A];x[I]=L?{transform:L}:{},oC(x[I],R),P&&(x[I][A]=P)}var N,z=!0;for(var I in _){x[I]=x[I]||{};var H=!N,P=_[I][A];H&&(N=new Py);var U=N.len();N.reset(),x[I].d=iC(r,_[I],N);var Y=N.len();if(!H&&U!==Y){z=!1;break}P&&(x[I][A]=P)}if(!z)for(var I in x)delete x[I].d;if(!n)for(var D=0;D<y;D++){var E=S[D],M=E.targetName;M==="style"&&C(E,x,function(ue){return sC[ue]})}for(var J=We(x),te=!0,re,D=1;D<J.length;D++){var oe=J[D-1],Ce=J[D];if(x[oe][rn]!==x[Ce][rn]){te=!1;break}re=x[oe][rn]}if(te&&re){for(var I in x)x[I][rn]&&delete x[I][rn];e[rn]=re}if(Qe(J,function(ne){return We(x[ne]).length>0}).length){var nt=E0(x,t);return nt+" "+b[0]+" both"}}for(var g in l){var s=p(l[g]);s&&o.push(s)}if(o.length){var m=t.zrId+"-cls-"+T0();t.cssNodes["."+m]={animation:o.join(",")},e.class=m}}function uC(r,e,t){if(!r.ignore)if(r.isSilent()){var n={"pointer-events":"none"};kh(n,e,t)}else{var a=r.states.emphasis&&r.states.emphasis.style?r.states.emphasis.style:{},i=a.fill;if(!i){var o=r.style&&r.style.fill,s=r.states.select&&r.states.select.style&&r.states.select.style.fill,l=r.currentStates.indexOf("select")>=0&&s||o;l&&(i=px(l))}var u=a.lineWidth;if(u){var c=!a.strokeNoScale&&r.transform?r.transform[0]:1;u=u/c}var n={cursor:"pointer"};i&&(n.fill=i),a.stroke&&(n.stroke=a.stroke),u&&(n["stroke-width"]=u),kh(n,e,t)}}function kh(r,e,t,n){var a=JSON.stringify(r),i=t.cssStyleCache[a];i||(i=t.zrId+"-cls-"+T0(),t.cssStyleCache[a]=i,t.cssNodes["."+i+":hover"]=r),e.class=e.class?e.class+" "+i:i}var ui=Math.round;function M0(r){return r&&de(r.src)}function I0(r){return r&&xe(r.toDataURL)}function _d(r,e,t,n){K1(function(a,i){var o=a==="fill"||a==="stroke";o&&Oy(i)?L0(e,r,a,n):o&&Kc(i)?P0(t,r,a,n):r[a]=i,o&&n.ssr&&i==="none"&&(r["pointer-events"]="visible")},e,t,!1),gC(t,r,n)}function wd(r,e){var t=Mx(e);t&&(t.each(function(n,a){n!=null&&(r[(Ih+a).toLowerCase()]=n+"")}),e.isSilent()&&(r[Ih+"silent"]="true"))}function Oh(r){return Rr(r[0]-1)&&Rr(r[1])&&Rr(r[2])&&Rr(r[3]-1)}function cC(r){return Rr(r[4])&&Rr(r[5])}function xd(r,e,t){if(e&&!(cC(e)&&Oh(e))){var n=1e4;r.transform=Oh(e)?"translate("+ui(e[4]*n)/n+" "+ui(e[5]*n)/n+")":Ex(e)}}function Nh(r,e,t){for(var n=r.points,a=[],i=0;i<n.length;i++)a.push(ui(n[i][0]*t)/t),a.push(ui(n[i][1]*t)/t);e.points=a.join(" ")}function Vh(r){return!r.smooth}function dC(r){var e=G(r,function(t){return typeof t=="string"?[t,t]:t});return function(t,n,a){for(var i=0;i<e.length;i++){var o=e[i],s=t[o[0]];s!=null&&(n[o[1]]=ui(s*a)/a)}}}var fC={circle:[dC(["cx","cy","r"])],polyline:[Nh,Vh],polygon:[Nh,Vh]};function hC(r){for(var e=r.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function R0(r,e){var t=r.style,n=r.shape,a=fC[r.type],i={},o=e.animation,s="path",l=r.style.strokePercent,u=e.compress&&Ly(r)||4;if(a&&!e.willUpdate&&!(a[1]&&!a[1](n))&&!(o&&hC(r))&&!(l<1)){s=r.type;var c=Math.pow(10,u);a[0](n,i,c)}else{var d=!r.path||r.shapeChanged();r.path||r.createPathProxy();var f=r.path;d&&(f.beginPath(),r.buildPath(f,r.shape),r.pathUpdated());var h=f.getVersion(),v=r,p=v.__svgPathBuilder;(v.__svgPathVersion!==h||!p||l!==v.__svgPathStrokePercent)&&(p||(p=v.__svgPathBuilder=new x0),p.reset(u),f.rebuildPath(p,l),p.generateStr(),v.__svgPathVersion=h,v.__svgPathStrokePercent=l),i.d=p.getStr()}return xd(i,r.transform),_d(i,t,r,e),wd(i,r),e.animation&&Ys(r,i,e),e.emphasis&&uC(r,i,e),qe(s,r.id+"",i)}function vC(r,e){var t=r.style,n=t.image;if(n&&!de(n)&&(M0(n)?n=n.src:I0(n)&&(n=n.toDataURL())),!!n){var a=t.x||0,i=t.y||0,o=t.width,s=t.height,l={href:n,width:o,height:s};return a&&(l.x=a),i&&(l.y=i),xd(l,r.transform),_d(l,t,r,e),wd(l,r),e.animation&&Ys(r,l,e),qe("image",r.id+"",l)}}function pC(r,e){var t=r.style,n=t.text;if(n!=null&&(n+=""),!(!n||isNaN(t.x)||isNaN(t.y))){var a=t.font||gx,i=t.x||0,o=mx(t.y||0,yx(a),t.textBaseline),s=bx[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(Sx(t)){var u="",c=t.fontStyle,d=_x(t.fontSize);if(!parseFloat(d))return;var f=t.fontFamily||wx,h=t.fontWeight;u+="font-size:"+d+";font-family:"+f+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),h&&h!=="normal"&&(u+="font-weight:"+h+";"),l.style=u}else l.style="font: "+a;return n.match(/\s/)&&(l["xml:space"]="preserve"),i&&(l.x=i),o&&(l.y=o),xd(l,r.transform),_d(l,t,r,e),wd(l,r),e.animation&&Ys(r,l,e),qe("text",r.id+"",l,void 0,n)}}function Bh(r,e){if(r instanceof ot)return R0(r,e);if(r instanceof hr)return vC(r,e);if(r instanceof ky)return pC(r,e)}function gC(r,e,t){var n=r.style;if(Ix(n)){var a=Rx(r),i=t.shadowCache,o=i[a];if(!o){var s=r.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=n.shadowOffsetX||0,d=n.shadowOffsetY||0,f=n.shadowBlur,h=ni(n.shadowColor),v=h.opacity,p=h.color,g=f/2/l,m=f/2/u,b=g+" "+m;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=qe("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[qe("feDropShadow","",{dx:c/l,dy:d/u,stdDeviation:b,"flood-color":p,"flood-opacity":v})]),i[a]=o}e.filter=Is(o)}}function L0(r,e,t,n){var a=r[t],i,o={gradientUnits:a.global?"userSpaceOnUse":"objectBoundingBox"};if(xx(a))i="linearGradient",o.x1=a.x,o.y1=a.y,o.x2=a.x2,o.y2=a.y2;else if(Ax(a))i="radialGradient",o.cx=it(a.x,.5),o.cy=it(a.y,.5),o.r=it(a.r,.5);else return;for(var s=a.colorStops,l=[],u=0,c=s.length;u<c;++u){var d=Cx(s[u].offset)*100+"%",f=s[u].color,h=ni(f),v=h.color,p=h.opacity,g={offset:d};g["stop-color"]=v,p<1&&(g["stop-opacity"]=p),l.push(qe("stop",u+"",g))}var m=qe(i,"",o,l),b=Sd(m),S=n.gradientCache,y=S[b];y||(y=n.zrId+"-g"+n.gradientIdx++,S[b]=y,o.id=y,n.defs[y]=qe(i,y,o,l)),e[t]=Is(y)}function P0(r,e,t,n){var a=r.style[t],i=r.getBoundingRect(),o={},s=a.repeat,l=s==="no-repeat",u=s==="repeat-x",c=s==="repeat-y",d;if(Dx(a)){var f=a.imageWidth,h=a.imageHeight,v=void 0,p=a.image;if(de(p)?v=p:M0(p)?v=p.src:I0(p)&&(v=p.toDataURL()),typeof Image>"u"){var g="Image width/height must been given explictly in svg-ssr renderer.";ai(f,g),ai(h,g)}else if(f==null||h==null){var m=function(D,E){if(D){var M=D.elm,I=f||E.width,R=h||E.height;D.tag==="pattern"&&(u?(R=1,I/=i.width):c&&(I=1,R/=i.height)),D.attrs.width=I,D.attrs.height=R,M&&(M.setAttribute("width",I),M.setAttribute("height",R))}},b=Tx(v,null,r,function(D){l||m(_,D),m(d,D)});b&&b.width&&b.height&&(f=f||b.width,h=h||b.height)}d=qe("image","img",{href:v,width:f,height:h}),o.width=f,o.height=h}else a.svgElement&&(d=Se(a.svgElement),o.width=a.svgWidth,o.height=a.svgHeight);if(d){var S,y;l?S=y=1:u?(y=1,S=o.width/i.width):c?(S=1,y=o.height/i.height):o.patternUnits="userSpaceOnUse",S!=null&&!isNaN(S)&&(o.width=S),y!=null&&!isNaN(y)&&(o.height=y);var w=Ry(a);w&&(o.patternTransform=w);var _=qe("pattern","",o,[d]),x=Sd(_),A=n.patternCache,C=A[x];C||(C=n.zrId+"-p"+n.patternIdx++,A[x]=C,o.id=C,_=n.defs[C]=qe("pattern",C,o,[d])),e[t]=Is(C)}}function mC(r,e,t){var n=t.clipPathCache,a=t.defs,i=n[r.id];if(!i){i=t.zrId+"-c"+t.clipPathIdx++;var o={id:i};n[r.id]=i,a[i]=qe("clipPath",i,o,[R0(r,t)])}e["clip-path"]=Is(i)}function zh(r){return document.createTextNode(r)}function hn(r,e,t){r.insertBefore(e,t)}function Hh(r,e){r.removeChild(e)}function Gh(r,e){r.appendChild(e)}function k0(r){return r.parentNode}function O0(r){return r.nextSibling}function Dl(r,e){r.textContent=e}var Fh=58,yC=120,bC=qe("","");function ac(r){return r===void 0}function or(r){return r!==void 0}function SC(r,e,t){for(var n={},a=e;a<=t;++a){var i=r[a].key;i!==void 0&&(n[i]=a)}return n}function za(r,e){var t=r.key===e.key,n=r.tag===e.tag;return n&&t}function ci(r){var e,t=r.children,n=r.tag;if(or(n)){var a=r.elm=D0(n);if(Ad(bC,r),$(t))for(e=0;e<t.length;++e){var i=t[e];i!=null&&Gh(a,ci(i))}else or(r.text)&&!ct(r.text)&&Gh(a,zh(r.text))}else r.elm=zh(r.text);return r.elm}function N0(r,e,t,n,a){for(;n<=a;++n){var i=t[n];i!=null&&hn(r,ci(i),e)}}function Xo(r,e,t,n){for(;t<=n;++t){var a=e[t];if(a!=null)if(or(a.tag)){var i=k0(a.elm);Hh(i,a.elm)}else Hh(r,a.elm)}}function Ad(r,e){var t,n=e.elm,a=r&&r.attrs||{},i=e.attrs||{};if(a!==i){for(t in i){var o=i[t],s=a[t];s!==o&&(o===!0?n.setAttribute(t,""):o===!1?n.removeAttribute(t):t==="style"?n.style.cssText=o:t.charCodeAt(0)!==yC?n.setAttribute(t,o):t==="xmlns:xlink"||t==="xmlns"?n.setAttributeNS(J1,t,o):t.charCodeAt(3)===Fh?n.setAttributeNS(eC,t,o):t.charCodeAt(5)===Fh?n.setAttributeNS(C0,t,o):n.setAttribute(t,o))}for(t in a)t in i||n.removeAttribute(t)}}function _C(r,e,t){for(var n=0,a=0,i=e.length-1,o=e[0],s=e[i],l=t.length-1,u=t[0],c=t[l],d,f,h,v;n<=i&&a<=l;)o==null?o=e[++n]:s==null?s=e[--i]:u==null?u=t[++a]:c==null?c=t[--l]:za(o,u)?(Yn(o,u),o=e[++n],u=t[++a]):za(s,c)?(Yn(s,c),s=e[--i],c=t[--l]):za(o,c)?(Yn(o,c),hn(r,o.elm,O0(s.elm)),o=e[++n],c=t[--l]):za(s,u)?(Yn(s,u),hn(r,s.elm,o.elm),s=e[--i],u=t[++a]):(ac(d)&&(d=SC(e,n,i)),f=d[u.key],ac(f)?hn(r,ci(u),o.elm):(h=e[f],h.tag!==u.tag?hn(r,ci(u),o.elm):(Yn(h,u),e[f]=void 0,hn(r,h.elm,o.elm))),u=t[++a]);(n<=i||a<=l)&&(n>i?(v=t[l+1]==null?null:t[l+1].elm,N0(r,v,t,a,l)):Xo(r,e,n,i))}function Yn(r,e){var t=e.elm=r.elm,n=r.children,a=e.children;r!==e&&(Ad(r,e),ac(e.text)?or(n)&&or(a)?n!==a&&_C(t,n,a):or(a)?(or(r.text)&&Dl(t,""),N0(t,null,a,0,a.length-1)):or(n)?Xo(t,n,0,n.length-1):or(r.text)&&Dl(t,""):r.text!==e.text&&(or(n)&&Xo(t,n,0,n.length-1),Dl(t,e.text)))}function wC(r,e){if(za(r,e))Yn(r,e);else{var t=r.elm,n=k0(t);ci(e),n!==null&&(hn(n,e.elm,O0(t)),Xo(n,[r],0,0))}return e}var xC=0,AC=function(){function r(e,t,n){if(this.type="svg",this.refreshHover=Wh(),this.configLayer=Wh(),this.storage=t,this._opts=n=X({},n),this.root=e,this._id="zr"+xC++,this._oldVNode=Rh(n.width,n.height),e&&!n.ssr){var a=this._viewport=document.createElement("div");a.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=D0("svg");Ad(null,this._oldVNode),a.appendChild(i),e.appendChild(a)}this.resize(n.width,n.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",wC(this._oldVNode,e),this._oldVNode=e}},r.prototype.renderOneToVNode=function(e){return Bh(e,nc(this._id))},r.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),n=this._width,a=this._height,i=nc(this._id);i.animation=e.animation,i.willUpdate=e.willUpdate,i.compress=e.compress,i.emphasis=e.emphasis,i.ssr=this._opts.ssr;var o=[],s=this._bgVNode=CC(n,a,this._backgroundColor,i);s&&o.push(s);var l=e.compress?null:this._mainVNode=qe("g","main",{},[]);this._paintList(t,i,l?l.children:o),l&&o.push(l);var u=G(We(i.defs),function(f){return i.defs[f]});if(u.length&&o.push(qe("defs","defs",{},u)),e.animation){var c=nC(i.cssNodes,i.cssAnims,{newline:!0});if(c){var d=qe("style","stl",{},[],c);o.push(d)}}return Rh(n,a,o,e.useViewBox)},r.prototype.renderToString=function(e){return e=e||{},Sd(this.renderToVNode({animation:it(e.cssAnimation,!0),emphasis:it(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:it(e.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(e){this._backgroundColor=e},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(e,t,n){for(var a=e.length,i=[],o=0,s,l,u=0,c=0;c<a;c++){var d=e[c];if(!d.invisible){var f=d.__clipPaths,h=f&&f.length||0,v=l&&l.length||0,p=void 0;for(p=Math.max(h-1,v-1);p>=0&&!(f&&l&&f[p]===l[p]);p--);for(var g=v-1;g>p;g--)o--,s=i[o-1];for(var m=p+1;m<h;m++){var b={};mC(f[m],b,t);var S=qe("g","clip-g-"+u++,b,[]);(s?s.children:n).push(S),i[o++]=S,s=S}l=f;var y=Bh(d,t);y&&(s?s.children:n).push(y)}}},r.prototype.resize=function(e,t){var n=this._opts,a=this.root,i=this._viewport;if(e!=null&&(n.width=e),t!=null&&(n.height=t),a&&i&&(i.style.display="none",e=ih(a,0,n),t=ih(a,1,n),i.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,i){var o=i.style;o.width=e+"px",o.height=t+"px"}if(Kc(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(e){var t=this.renderToString(),n="data:image/svg+xml;";return e?(t=Lx(t),t&&n+"base64,"+t):n+"charset=UTF-8,"+encodeURIComponent(t)},r}();function Wh(r){return function(){}}function CC(r,e,t,n){var a;if(t&&t!=="none")if(a=qe("rect","bg",{width:r,height:e,x:"0",y:"0"}),Oy(t))L0({fill:t},a.attrs,"fill",n);else if(Kc(t))P0({style:{fill:t},dirty:Gr,getBoundingRect:function(){return{width:r,height:e}}},a.attrs,"fill",n);else{var i=ni(t),o=i.color,s=i.opacity;a.attrs.fill=o,s<1&&(a.attrs["fill-opacity"]=s)}return a}function DC(r){r.registerPainter("svg",AC)}var TC=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,n){return ma(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,n,a){return a.point(n.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(rt),V0=4,EC=function(){function r(){}return r}(),MC=function(r){V(e,r);function e(t){var n=r.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.getDefaultShape=function(){return new EC},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,n){var a=n.points,i=n.size,o=this.symbolProxy,s=o.shape,l=t.getContext?t.getContext():t,u=l&&i[0]<V0,c=this.softClipShape,d;if(u){this._ctx=l;return}for(this._ctx=null,d=this._off;d<a.length;){var f=a[d++],h=a[d++];isNaN(f)||isNaN(h)||c&&!c.contain(f,h)||(s.x=f-i[0]/2,s.y=h-i[1]/2,s.width=i[0],s.height=i[1],o.buildPath(t,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,n=t.points,a=t.size,i=this._ctx,o=this.softClipShape,s;if(i){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||i.fillRect(l-a[0]/2,u-a[1]/2,a[0],a[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,n){for(var a=this.shape,i=a.points,o=a.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=i.length/2-1;u>=0;u--){var c=u*2,d=i[c]-s/2,f=i[c+1]-l/2;if(t>=d&&n>=f&&t<=d+s&&n<=f+l)return u}return-1},e.prototype.contain=function(t,n){var a=this.transformCoordToLocal(t,n),i=this.getBoundingRect();if(t=a[0],n=a[1],i.contain(t,n)){var o=this.hoverDataIdx=this.findDataIndex(t,n);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var n=this.shape,a=n.points,i=n.size,o=i[0],s=i[1],l=1/0,u=1/0,c=-1/0,d=-1/0,f=0;f<a.length;){var h=a[f++],v=a[f++];l=Math.min(h,l),c=Math.max(h,c),u=Math.min(v,u),d=Math.max(v,d)}t=this._rect=new He(l-o/2,u-s/2,c-l+o,d-u+s)}return t},e}(ot),IC=function(){function r(){this.group=new ae}return r.prototype.updateData=function(e,t){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,t)},r.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var a=(n.endIndex-n.startIndex)*2,i=n.startIndex*4*2;t=new Float32Array(t.buffer,i,a)}n.setShape("points",t),n.reset()})},r.prototype.incrementalPrepareUpdate=function(e){this._clear()},r.prototype.incrementalUpdate=function(e,t,n){var a=this._newAdded[0],i=t.getLayout("points"),o=a&&a.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+i.length);l.set(o),l.set(i,s),a.endIndex=e.end,a.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,t,n)}},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new MC({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},r.prototype._setCommon=function(e,t,n){var a=t.hostModel;n=n||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=n.clipShape||null,e.symbolProxy=mt(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<V0;e.useStyle(a.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=Ae(e);u.seriesIndex=a.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(u.dataIndex=d+(e.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),RC=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,n,a){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,n,a){this._symbolDraw.incrementalUpdate(t,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=t.end===n.getData().count()},e.prototype.updateTransform=function(t,n,a){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var o=Rs("").reset(t,n,a);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var n=t.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,n){var a=this._symbolDraw,i=n.pipelineContext,o=i.large;return(!a||o!==this._isLargeDraw)&&(a&&a.remove(),a=this._symbolDraw=o?new IC:new Ls,this._isLargeDraw=o,this.group.removeAll()),this.group.add(a.group),a},e.prototype.remove=function(t,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Je);function LC(r){se(Px),r.registerSeriesModel(TC),r.registerChartView(RC),r.registerLayout(Rs("scatter"))}function PC(r){r.eachSeriesByType("radar",function(e){var t=e.getData(),n=[],a=e.coordinateSystem;if(a){var i=a.getIndicatorAxes();T(i,function(o,s){t.each(t.mapDimension(i[s].dim),function(l,u){n[u]=n[u]||[];var c=a.dataToPoint(l,s);n[u][s]=Uh(c)?c:jh(a)})}),t.each(function(o){var s=kx(n[o],function(l){return Uh(l)})||jh(a);n[o].push(s.slice()),t.setItemLayout(o,n[o])})}})}function Uh(r){return!isNaN(r[0])&&!isNaN(r[1])}function jh(r){return[r.cx,r.cy]}function kC(r){var e=r.polar;if(e){$(e)||(e=[e]);var t=[];T(e,function(n,a){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),r.radar=r.radar||[],$(r.radar)||(r.radar=[r.radar]),r.radar.push(n)):t.push(n)}),r.polar=t}T(r.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var OC=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.coordinateSystem,o=this.group,s=t.getData(),l=this._data;function u(f,h){var v=f.getItemVisual(h,"symbol")||"circle";if(v!=="none"){var p=Di(f.getItemVisual(h,"symbolSize")),g=mt(v,-1,-1,2,2),m=f.getItemVisual(h,"symbolRotate")||0;return g.attr({style:{strokeNoScale:!0},z2:100,scaleX:p[0]/2,scaleY:p[1]/2,rotation:m*Math.PI/180||0}),g}}function c(f,h,v,p,g,m){v.removeAll();for(var b=0;b<h.length-1;b++){var S=u(p,g);S&&(S.__dimIdx=b,f[b]?(S.setPosition(f[b]),ya[m?"initProps":"updateProps"](S,{x:h[b][0],y:h[b][1]},t,g)):S.setPosition(h[b]),v.add(S))}}function d(f){return G(f,function(h){return[i.cx,i.cy]})}s.diff(l).add(function(f){var h=s.getItemLayout(f);if(h){var v=new Ut,p=new vr,g={shape:{points:h}};v.shape.points=d(h),p.shape.points=d(h),xt(v,g,t,f),xt(p,g,t,f);var m=new ae,b=new ae;m.add(p),m.add(v),m.add(b),c(p.shape.points,h,b,s,f,!0),s.setItemGraphicEl(f,m)}}).update(function(f,h){var v=l.getItemGraphicEl(h),p=v.childAt(0),g=v.childAt(1),m=v.childAt(2),b={shape:{points:s.getItemLayout(f)}};b.shape.points&&(c(p.shape.points,b.shape.points,m,s,f,!1),Fr(g),Fr(p),Ne(p,b,t),Ne(g,b,t),s.setItemGraphicEl(f,v))}).remove(function(f){o.remove(l.getItemGraphicEl(f))}).execute(),s.eachItemGraphicEl(function(f,h){var v=s.getItemModel(h),p=f.childAt(0),g=f.childAt(1),m=f.childAt(2),b=s.getItemVisual(h,"style"),S=b.fill;o.add(f),p.useStyle(ce(v.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:S})),Lt(p,v,"lineStyle"),Lt(g,v,"areaStyle");var y=v.getModel("areaStyle"),w=y.isEmpty()&&y.parentModel.isEmpty();g.ignore=w,T(["emphasis","select","blur"],function(A){var C=v.getModel([A,"areaStyle"]),D=C.isEmpty()&&C.parentModel.isEmpty();g.ensureState(A).ignore=D&&w}),g.useStyle(ce(y.getAreaStyle(),{fill:S,opacity:.7,decal:b.decal}));var _=v.getModel("emphasis"),x=_.getModel("itemStyle").getItemStyle();m.eachChild(function(A){if(A instanceof hr){var C=A.style;A.useStyle(X({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},b))}else A.useStyle(b),A.setColor(S),A.style.strokeNoScale=!0;var D=A.ensureState("emphasis");D.style=Se(x);var E=s.getStore().get(s.getDimensionIndex(A.__dimIdx),h);(E==null||isNaN(E))&&(E=""),jt(A,At(v),{labelFetcher:s.hostModel,labelDataIndex:h,labelDimIndex:A.__dimIdx,defaultText:E,inheritColor:S,defaultOpacity:b.opacity})}),Ye(f,_.get("focus"),_.get("blurScope"),_.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Je),NC=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ps(Z(this.getData,this),Z(this.getRawData,this))},e.prototype.getInitialData=function(t,n){return Ti(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(t),u=l===""?this.name:l,c=Ox(this,t);return Ct("section",{header:u,sortBlocks:!0,blocks:G(s,function(d){var f=i.get(i.mapDimension(d.dim),t);return Ct("nameValue",{markerType:"subItem",markerColor:c,name:d.name,value:f,sortParam:f})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var n=this.getData(),a=this.coordinateSystem,i=n.getValues(G(a.dimensions,function(u){return n.mapDimension(u)}),t),o=0,s=i.length;o<s;o++)if(!isNaN(i[o])){var l=a.getIndicatorAxes();return a.coordToPoint(l[o].dataToCoord(i[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(rt),Ta=Nx.value;function eo(r,e){return ce({show:e},r)}var VC=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),n=this.get("splitNumber"),a=this.get("scale"),i=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),d=this.get("axisNameGap"),f=this.get("triggerEvent"),h=G(this.get("indicator")||[],function(v){v.max!=null&&v.max>0&&!v.min?v.min=0:v.min!=null&&v.min<0&&!v.max&&(v.max=0);var p=l;v.color!=null&&(p=ce({color:v.color},l));var g=ke(Se(v),{boundaryGap:t,splitNumber:n,scale:a,axisLine:i,axisTick:o,axisLabel:s,name:v.text,showName:u,nameLocation:"end",nameGap:d,nameTextStyle:p,triggerEvent:f},!1);if(de(c)){var m=g.name;g.name=c.replace("{value}",m??"")}else xe(c)&&(g.name=c(g.name,g));var b=new Pt(g,null,this.ecModel);return rr(b,ks.prototype),b.mainType="radar",b.componentIndex=this.componentIndex,b},this);this._indicatorModels=h},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:ke({lineStyle:{color:"#bbb"}},Ta.axisLine),axisLabel:eo(Ta.axisLabel,!1),axisTick:eo(Ta.axisTick,!1),splitLine:eo(Ta.splitLine,!0),splitArea:eo(Ta.splitArea,!0),indicator:[]},e}(dt),BC=["axisLine","axisTickLabel","axisName"],zC=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=this.group;i.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var n=t.coordinateSystem,a=n.getIndicatorAxes(),i=G(a,function(o){var s=o.model.get("showName")?o.name:"",l=new Sn(o.model,{axisName:s,position:[n.cx,n.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});T(i,function(o){T(BC,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var n=t.coordinateSystem,a=n.getIndicatorAxes();if(!a.length)return;var i=t.get("shape"),o=t.getModel("splitLine"),s=t.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),c=o.get("show"),d=s.get("show"),f=l.get("color"),h=u.get("color"),v=$(f)?f:[f],p=$(h)?h:[h],g=[],m=[];function b(L,P,N){var z=N%P.length;return L[z]=L[z]||[],z}if(i==="circle")for(var S=a[0].getTicksCoords(),y=n.cx,w=n.cy,_=0;_<S.length;_++){if(c){var x=b(g,v,_);g[x].push(new Ei({shape:{cx:y,cy:w,r:S[_].coord}}))}if(d&&_<S.length-1){var x=b(m,p,_);m[x].push(new Ny({shape:{cx:y,cy:w,r0:S[_].coord,r:S[_+1].coord}}))}}else for(var A,C=G(a,function(L,P){var N=L.getTicksCoords();return A=A==null?N.length-1:Math.min(N.length-1,A),G(N,function(z){return n.coordToPoint(z.coord,P)})}),D=[],_=0;_<=A;_++){for(var E=[],M=0;M<a.length;M++)E.push(C[M][_]);if(E[0]&&E.push(E[0].slice()),c){var x=b(g,v,_);g[x].push(new vr({shape:{points:E}}))}if(d&&D){var x=b(m,p,_-1);m[x].push(new Ut({shape:{points:E.concat(D)}}))}D=E.slice().reverse()}var I=l.getLineStyle(),R=u.getAreaStyle();T(m,function(L,P){this.group.add(qt(L,{style:ce({stroke:"none",fill:p[P%p.length]},R),silent:!0}))},this),T(g,function(L,P){this.group.add(qt(L,{style:ce({fill:"none",stroke:v[P%v.length]},I),silent:!0}))},this)},e.type="radar",e}(yt),HC=function(r){V(e,r);function e(t,n,a){var i=r.call(this,t,n,a)||this;return i.type="value",i.angle=0,i.name="",i}return e}(pr),GC=function(){function r(e,t,n){this.dimensions=[],this._model=e,this._indicatorAxes=G(e.getIndicatorModels(),function(a,i){var o="indicator_"+i,s=new HC(o,new Yu);return s.name=a.get("name"),s.model=a,a.axis=s,this.dimensions.push(o),s},this),this.resize(e,n)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(e,t){var n=this._indicatorAxes[t];return this.coordToPoint(n.dataToCoord(e),t)},r.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t],a=n.angle,i=this.cx+e*Math.cos(a),o=this.cy-e*Math.sin(a);return[i,o]},r.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,a=Math.sqrt(t*t+n*n);t/=a,n/=a;for(var i=Math.atan2(-n,t),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],d=Math.abs(i-c.angle);d<o&&(s=c,l=u,o=d)}return[l,+(s&&s.coordToData(a))]},r.prototype.resize=function(e,t){var n=e.get("center"),a=t.getWidth(),i=t.getHeight(),o=Math.min(a,i)/2;this.cx=W(n[0],a),this.cy=W(n[1],i),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(de(s)||er(s))&&(s=[0,s]),this.r0=W(s[0],o),this.r=W(s[1],o),T(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var c=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},r.prototype.update=function(e,t){var n=this._indicatorAxes,a=this._model;T(n,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==a)){var u=s.getData();T(n,function(c){c.scale.unionExtentFromData(u,u.mapDimension(c.dim))})}},this);var i=a.get("splitNumber"),o=new Yu;o.setExtent(0,i),o.setInterval(1),T(n,function(s,l){Vx(s.scale,s.model,o)})},r.prototype.convertToPixel=function(e,t,n){return console.warn("Not implemented."),null},r.prototype.convertFromPixel=function(e,t,n){return console.warn("Not implemented."),null},r.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},r.create=function(e,t){var n=[];return e.eachComponent("radar",function(a){var i=new r(a,e,t);n.push(i),a.coordinateSystem=i}),e.eachSeriesByType("radar",function(a){a.get("coordinateSystem")==="radar"&&(a.coordinateSystem=n[a.get("radarIndex")||0])}),n},r.dimensions=[],r}();function FC(r){r.registerCoordinateSystem("radar",GC),r.registerComponentModel(VC),r.registerComponentView(zC),r.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(n){t.setItemVisual(n,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function WC(r){se(FC),r.registerChartView(OC),r.registerSeriesModel(NC),r.registerLayout(PC),r.registerProcessor(Os("radar")),r.registerPreprocessor(kC)}var $h="\0_ec_interaction_mutex";function UC(r,e,t){var n=Cd(r);n[e]=t}function jC(r,e,t){var n=Cd(r),a=n[e];a===t&&(n[e]=null)}function Yh(r,e){return!!Cd(r)[e]}function Cd(r){return r[$h]||(r[$h]={})}Ns({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Gr);var Vi=function(r){V(e,r);function e(t){var n=r.call(this)||this;n._zr=t;var a=Z(n._mousedownHandler,n),i=Z(n._mousemoveHandler,n),o=Z(n._mouseupHandler,n),s=Z(n._mousewheelHandler,n),l=Z(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=ce(Se(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(t.on("mousedown",a),t.on("mousemove",i),t.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(t.on("mousewheel",s),t.on("pinch",l))},n.disable=function(){t.off("mousedown",a),t.off("mousemove",i),t.off("mouseup",o),t.off("mousewheel",s),t.off("pinch",l)},n}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!oh(t)){for(var n=t.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var a=t.offsetX,i=t.offsetY;this.pointerChecker&&this.pointerChecker(t,a,i)&&(this._x=a,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!Mo("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||Yh(this._zr,"globalPan"))){var n=t.offsetX,a=t.offsetY,i=this._x,o=this._y,s=n-i,l=a-o;this._x=n,this._y=a,this._opt.preventDefaultMouseMove&&_n(t.event),B0(this,"pan","moveOnMouseMove",t,{dx:s,dy:l,oldX:i,oldY:o,newX:n,newY:a,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){oh(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var n=Mo("zoomOnMouseWheel",t,this._opt),a=Mo("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,o=Math.abs(i),s=t.offsetX,l=t.offsetY;if(!(i===0||!n&&!a)){if(n){var u=o>3?1.4:o>1?1.2:1.1,c=i>0?u:1/u;Tl(this,"zoom","zoomOnMouseWheel",t,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(a){var d=Math.abs(i),f=(i>0?1:-1)*(d>3?.4:d>1?.15:.05);Tl(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!Yh(this._zr,"globalPan")){var n=t.pinchScale>1?1.1:1/1.1;Tl(this,"zoom",null,t,{scale:n,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(Vy);function Tl(r,e,t,n,a){r.pointerChecker&&r.pointerChecker(n,a.originX,a.originY)&&(_n(n.event),B0(r,e,t,n,a))}function B0(r,e,t,n,a){a.isAvailableBehavior=Z(Mo,null,t,n),r.trigger(e,a)}function Mo(r,e,t){var n=t[r];return!r||n&&(!de(n)||e.event[n+"Key"])}function Dd(r,e,t){var n=r.target;n.x+=e,n.y+=t,n.dirty()}function Td(r,e,t,n){var a=r.target,i=r.zoomLimit,o=r.zoom=r.zoom||1;if(o*=e,i){var s=i.min||0,l=i.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/r.zoom;r.zoom=o,a.x-=(t-a.x)*(u-1),a.y-=(n-a.y)*(u-1),a.scaleX*=u,a.scaleY*=u,a.dirty()}var $C={axisPointer:1,tooltip:1,brush:1};function Zs(r,e,t){var n=e.getComponentByElement(r.topTarget),a=n&&n.coordinateSystem;return n&&n!==t&&!$C.hasOwnProperty(n.mainType)&&a&&a.model!==t}function z0(r){if(de(r)){var e=new DOMParser;r=e.parseFromString(r,"text/xml")}var t=r;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var El,qo={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Zh=We(qo),Qo={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Xh=We(Qo),YC=function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(e,t){t=t||{};var n=z0(e);this._defsUsePending=[];var a=new ae;this._root=a;var i=[],o=n.getAttribute("viewBox")||"",s=parseFloat(n.getAttribute("width")||t.width),l=parseFloat(n.getAttribute("height")||t.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),Dt(n,a,null,!0,!1);for(var u=n.firstChild;u;)this._parseNode(u,a,i,null,!1,!1),u=u.nextSibling;qC(this._defs,this._defsUsePending),this._defsUsePending=[];var c,d;if(o){var f=Xs(o);f.length>=4&&(c={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(c&&s!=null&&l!=null&&(d=G0(c,{x:0,y:0,width:s,height:l}),!t.ignoreViewBox)){var h=a;a=new ae,a.add(h),h.scaleX=h.scaleY=d.scale,h.x=d.x,h.y=d.y}return!t.ignoreRootClip&&s!=null&&l!=null&&a.setClipPath(new Ge({shape:{x:0,y:0,width:s,height:l}})),{root:a,width:s,height:l,viewBoxRect:c,viewBoxTransform:d,named:i}},r.prototype._parseNode=function(e,t,n,a,i,o){var s=e.nodeName.toLowerCase(),l,u=a;if(s==="defs"&&(i=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=t;else{if(!i){var c=El[s];if(c&&F(El,s)){l=c.call(this,e,t);var d=e.getAttribute("name");if(d){var f={name:d,namedFrom:null,svgNodeTagLower:s,el:l};n.push(f),s==="g"&&(u=f)}else a&&n.push({name:a.name,namedFrom:a,svgNodeTagLower:s,el:l});t.add(l)}}var h=qh[s];if(h&&F(qh,s)){var v=h.call(this,e),p=e.getAttribute("id");p&&(this._defs[p]=v)}}if(l&&l.isGroup)for(var g=e.firstChild;g;)g.nodeType===1?this._parseNode(g,l,n,u,i,o):g.nodeType===3&&o&&this._parseText(g,l),g=g.nextSibling},r.prototype._parseText=function(e,t){var n=new ky({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Vt(t,n),Dt(e,n,this._defsUsePending,!1,!1),ZC(n,t);var a=n.style,i=a.fontSize;i&&i<9&&(a.fontSize=9,n.scaleX*=i/9,n.scaleY*=i/9);var o=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");a.font=o;var s=n.getBoundingRect();return this._textX+=s.width,t.add(n),n},r.internalField=function(){El={g:function(e,t){var n=new ae;return Vt(t,n),Dt(e,n,this._defsUsePending,!1,!1),n},rect:function(e,t){var n=new Ge;return Vt(t,n),Dt(e,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(e,t){var n=new Ei;return Vt(t,n),Dt(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),n.silent=!0,n},line:function(e,t){var n=new Qt;return Vt(t,n),Dt(e,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(e,t){var n=new zx;return Vt(t,n),Dt(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(e,t){var n=e.getAttribute("points"),a;n&&(a=Jh(n));var i=new Ut({shape:{points:a||[]},silent:!0});return Vt(t,i),Dt(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,t){var n=e.getAttribute("points"),a;n&&(a=Jh(n));var i=new vr({shape:{points:a||[]},silent:!0});return Vt(t,i),Dt(e,i,this._defsUsePending,!1,!1),i},image:function(e,t){var n=new hr;return Vt(t,n),Dt(e,n,this._defsUsePending,!1,!1),n.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.silent=!0,n},text:function(e,t){var n=e.getAttribute("x")||"0",a=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(a)+parseFloat(o);var s=new ae;return Vt(t,s),Dt(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var n=e.getAttribute("x"),a=e.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),a!=null&&(this._textY=parseFloat(a));var i=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",s=new ae;return Vt(t,s),Dt(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(o),s},path:function(e,t){var n=e.getAttribute("d")||"",a=Bx(n);return Vt(t,a),Dt(e,a,this._defsUsePending,!1,!1),a.silent=!0,a}}}(),r}(),qh={lineargradient:function(r){var e=parseInt(r.getAttribute("x1")||"0",10),t=parseInt(r.getAttribute("y1")||"0",10),n=parseInt(r.getAttribute("x2")||"10",10),a=parseInt(r.getAttribute("y2")||"0",10),i=new Vs(e,t,n,a);return Qh(r,i),Kh(r,i),i},radialgradient:function(r){var e=parseInt(r.getAttribute("cx")||"0",10),t=parseInt(r.getAttribute("cy")||"0",10),n=parseInt(r.getAttribute("r")||"0",10),a=new Hx(e,t,n);return Qh(r,a),Kh(r,a),a}};function Qh(r,e){var t=r.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function Kh(r,e){for(var t=r.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var n=t.getAttribute("offset"),a=void 0;n&&n.indexOf("%")>0?a=parseInt(n,10)/100:n?a=parseFloat(n):a=0;var i={};H0(t,i,i);var o=i.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:a,color:o})}t=t.nextSibling}}function Vt(r,e){r&&r.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),ce(e.__inheritedStyle,r.__inheritedStyle))}function Jh(r){for(var e=Xs(r),t=[],n=0;n<e.length;n+=2){var a=parseFloat(e[n]),i=parseFloat(e[n+1]);t.push([a,i])}return t}function Dt(r,e,t,n,a){var i=e,o=i.__inheritedStyle=i.__inheritedStyle||{},s={};r.nodeType===1&&(JC(r,e),H0(r,o,s),n||eD(r,o,s)),i.style=i.style||{},o.fill!=null&&(i.style.fill=ev(i,"fill",o.fill,t)),o.stroke!=null&&(i.style.stroke=ev(i,"stroke",o.stroke,t)),T(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(i.style[l]=parseFloat(o[l]))}),T(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(i.style[l]=o[l])}),a&&(i.__selfStyle=s),o.lineDash&&(i.style.lineDash=G(Xs(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(i.invisible=!0),o.display==="none"&&(i.ignore=!0)}function ZC(r,e){var t=e.__selfStyle;if(t){var n=t.textBaseline,a=n;!n||n==="auto"||n==="baseline"?a="alphabetic":n==="before-edge"||n==="text-before-edge"?a="top":n==="after-edge"||n==="text-after-edge"?a="bottom":(n==="central"||n==="mathematical")&&(a="middle"),r.style.textBaseline=a}var i=e.__inheritedStyle;if(i){var o=i.textAlign,s=o;o&&(o==="middle"&&(s="center"),r.style.textAlign=s)}}var XC=/^url\(\s*#(.*?)\)/;function ev(r,e,t,n){var a=t&&t.match(XC);if(a){var i=Gx(a[1]);n.push([r,e,i]);return}return t==="none"&&(t=null),t}function qC(r,e){for(var t=0;t<e.length;t++){var n=e[t];n[0].style[n[1]]=r[n[2]]}}var QC=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Xs(r){return r.match(QC)||[]}var KC=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Ml=Math.PI/180;function JC(r,e){var t=r.getAttribute("transform");if(t){t=t.replace(/,/g," ");var n=[],a=null;t.replace(KC,function(d,f,h){return n.push(f,h),""});for(var i=n.length-1;i>0;i-=2){var o=n[i],s=n[i-1],l=Xs(o);switch(a=a||ba(),s){case"translate":wn(a,a,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":By(a,a,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Bs(a,a,-parseFloat(l[0])*Ml,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*Ml);$u(a,[1,0,u,1,0,0],a);break;case"skewY":var c=Math.tan(parseFloat(l[0])*Ml);$u(a,[1,c,0,1,0,0],a);break;case"matrix":a[0]=parseFloat(l[0]),a[1]=parseFloat(l[1]),a[2]=parseFloat(l[2]),a[3]=parseFloat(l[3]),a[4]=parseFloat(l[4]),a[5]=parseFloat(l[5]);break}}e.setLocalTransform(a)}}var tv=/([^\s:;]+)\s*:\s*([^:;]+)/g;function H0(r,e,t){var n=r.getAttribute("style");if(n){tv.lastIndex=0;for(var a;(a=tv.exec(n))!=null;){var i=a[1],o=F(qo,i)?qo[i]:null;o&&(e[o]=a[2]);var s=F(Qo,i)?Qo[i]:null;s&&(t[s]=a[2])}}}function eD(r,e,t){for(var n=0;n<Zh.length;n++){var a=Zh[n],i=r.getAttribute(a);i!=null&&(e[qo[a]]=i)}for(var n=0;n<Xh.length;n++){var a=Xh[n],i=r.getAttribute(a);i!=null&&(t[Qo[a]]=i)}}function G0(r,e){var t=e.width/r.width,n=e.height/r.height,a=Math.min(t,n);return{scale:a,x:-(r.x+r.width/2)*a+(e.x+e.width/2),y:-(r.y+r.height/2)*a+(e.y+e.height/2)}}function tD(r,e){var t=new YC;return t.parse(r,e)}var rD=le(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),nD=function(){function r(e,t){this.type="geoSVG",this._usedGraphicMap=le(),this._freedGraphics=[],this._mapName=e,this._parsedXML=z0(t)}return r.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=iD(e.named),n=t.regions,a=t.regionsMap;this._regions=n,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(e){var t,n;try{t=e&&tD(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=t.root,ai(n!=null)}catch(g){throw new Error(`Invalid svg format
`+g.message)}var a=new ae;a.add(n),a.isGeoSVGGraphicRoot=!0;var i=t.width,o=t.height,s=t.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,d=void 0,f=void 0;if(i!=null?(u=0,d=i):s&&(u=s.x,d=s.width),o!=null?(c=0,f=o):s&&(c=s.y,f=s.height),u==null||c==null){var h=n.getBoundingRect();u==null&&(u=h.x,d=h.width),c==null&&(c=h.y,f=h.height)}l=this._boundingRect=new He(u,c,d,f)}if(s){var v=G0(s,l);n.scaleX=n.scaleY=v.scale,n.x=v.x,n.y=v.y}a.setClipPath(new Ge({shape:l.plain()}));var p=[];return T(t.named,function(g){rD.get(g.svgNodeTagLower)!=null&&(p.push(g),aD(g.el))}),{root:a,boundingRect:l,named:p}},r.prototype.useGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,n),n)},r.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);n&&(t.removeKey(e),this._freedGraphics.push(n))},r}();function aD(r){r.silent=!1,r.isGroup&&r.traverse(function(e){e.silent=!1})}function iD(r){var e=[],t=le();return T(r,function(n){if(n.namedFrom==null){var a=new z1(n.name,n.el);e.push(a),t.set(n.name,a)}}),{regions:e,regionsMap:t}}var ic=[126,25],rv="南海诸岛",nn=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var tn=0;tn<nn.length;tn++)for(var zn=0;zn<nn[tn].length;zn++)nn[tn][zn][0]/=10.5,nn[tn][zn][1]/=-10.5/.75,nn[tn][zn][0]+=ic[0],nn[tn][zn][1]+=ic[1];function oD(r,e){if(r==="china"){for(var t=0;t<e.length;t++)if(e[t].name===rv)return;e.push(new S0(rv,G(nn,function(n){return{type:"polygon",exterior:n}}),ic))}}var sD={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function lD(r,e){if(r==="china"){var t=sD[e.name];if(t){var n=e.getCenter();n[0]+=t[0]/10.5,n[1]+=-t[1]/(10.5/.75),e.setCenter(n)}}}var uD=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function cD(r,e){r==="china"&&e.name==="台湾"&&e.geometries.push({type:"polygon",exterior:uD[0]})}var dD="name",fD=function(){function r(e,t,n){this.type="geoJSON",this._parsedMap=le(),this._mapName=e,this._specialAreas=n,this._geoJSON=vD(t)}return r.prototype.load=function(e,t){t=t||dD;var n=this._parsedMap.get(t);if(!n){var a=this._parseToRegions(t);n=this._parsedMap.set(t,{regions:a,boundingRect:hD(a)})}var i=le(),o=[];return T(n.regions,function(s){var l=s.name;e&&F(e,l)&&(s=s.cloneShallow(l=e[l])),o.push(s),i.set(l,s)}),{regions:o,boundingRect:n.boundingRect||new He(0,0,0,0),regionsMap:i}},r.prototype._parseToRegions=function(e){var t=this._mapName,n=this._geoJSON,a;try{a=n?G1(n,e):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return oD(t,a),T(a,function(i){var o=i.name;lD(t,i),cD(t,i);var s=this._specialAreas&&this._specialAreas[o];s&&i.transformTo(s.left,s.top,s.width,s.height)},this),a},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r}();function hD(r){for(var e,t=0;t<r.length;t++){var n=r[t].getBoundingRect();e=e||n.clone(),e.union(n)}return e}function vD(r){return de(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}var Ea=le();const wr={registerMap:function(r,e,t){if(e.svg){var n=new nD(r,e.svg);Ea.set(r,n)}else{var a=e.geoJson||e.geoJSON;a&&!e.features?t=e.specialAreas:a=e;var n=new fD(r,a,t);Ea.set(r,n)}},getGeoResource:function(r){return Ea.get(r)},getMapForUser:function(r){var e=Ea.get(r);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(r,e,t){var n=Ea.get(r);if(n)return n.load(e,t)}};var Ed=["rect","circle","line","ellipse","polygon","polyline","path"],pD=le(Ed),gD=le(Ed.concat(["g"])),mD=le(Ed.concat(["g"])),F0=je();function to(r){var e=r.getItemStyle(),t=r.get("areaColor");return t!=null&&(e.fill=t),e}function nv(r){var e=r.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var W0=function(){function r(e){var t=new ae;this.uid=zy("ec_map_draw"),this._controller=new Vi(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new ae),t.add(this._svgGroup=new ae)}return r.prototype.draw=function(e,t,n,a,i){var o=e.mainType==="geo",s=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===e&&(s=m.getData())});var l=e.coordinateSystem,u=this._regionsGroup,c=this.group,d=l.getTransformInfo(),f=d.raw,h=d.roam,v=!u.childAt(0)||i;v?(c.x=h.x,c.y=h.y,c.scaleX=h.scaleX,c.scaleY=h.scaleY,c.dirty()):Ne(c,h,e);var p=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,g={api:n,geo:l,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:p,isGeo:o,transformInfoRaw:f};l.resourceType==="geoJSON"?this._buildGeoJSON(g):l.resourceType==="geoSVG"&&this._buildSVG(g),this._updateController(e,t,n),this._updateMapSelectHandler(e,u,n,a)},r.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=le(),n=le(),a=this._regionsGroup,i=e.transformInfoRaw,o=e.mapOrGeoModel,s=e.data,l=e.geo.projection,u=l&&l.stream;function c(h,v){return v&&(h=v(h)),h&&[h[0]*i.scaleX+i.x,h[1]*i.scaleY+i.y]}function d(h){for(var v=[],p=!u&&l&&l.project,g=0;g<h.length;++g){var m=c(h[g],p);m&&v.push(m)}return v}function f(h){return{shape:{points:d(h)}}}a.removeAll(),T(e.geo.regions,function(h){var v=h.name,p=t.get(v),g=n.get(v)||{},m=g.dataIdx,b=g.regionModel;if(!p){p=t.set(v,new ae),a.add(p),m=s?s.indexOfName(v):null,b=e.isGeo?o.getRegionModel(v):s?s.getItemModel(m):null;var S=b.get("silent",!0);S!=null&&(p.silent=S),n.set(v,{dataIdx:m,regionModel:b})}var y=[],w=[];T(h.geometries,function(A){if(A.type==="polygon"){var C=[A.exterior].concat(A.interiors||[]);u&&(C=uv(C,u)),T(C,function(E){y.push(new Ut(f(E)))})}else{var D=A.points;u&&(D=uv(D,u,!0)),T(D,function(E){w.push(new vr(f(E)))})}});var _=c(h.getCenter(),l&&l.project);function x(A,C){if(A.length){var D=new Iy({culling:!0,segmentIgnoreThreshold:1,shape:{paths:A}});p.add(D),av(e,D,m,b),iv(e,D,v,b,o,m,_),C&&(nv(D),T(D.states,nv))}}x(y),x(w,!0)}),t.each(function(h,v){var p=n.get(v),g=p.dataIdx,m=p.regionModel;ov(e,h,v,m,o,g),sv(e,h,v,m,o),lv(e,h,v,m,o)},this)},r.prototype._buildSVG=function(e){var t=e.geo.map,n=e.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var a=this._svgDispatcherMap=le(),i=!1;T(this._svgGraphicRecord.named,function(o){var s=o.name,l=e.mapOrGeoModel,u=e.data,c=o.svgNodeTagLower,d=o.el,f=u?u.indexOfName(s):null,h=l.getRegionModel(s);pD.get(c)!=null&&d instanceof xn&&av(e,d,f,h),d instanceof xn&&(d.culling=!0);var v=h.get("silent",!0);if(v!=null&&(d.silent=v),d.z2EmphasisLift=0,!o.namedFrom&&(mD.get(c)!=null&&iv(e,d,s,h,l,f,null),ov(e,d,s,h,l,f),sv(e,d,s,h,l),gD.get(c)!=null)){var p=lv(e,d,s,h,l);p==="self"&&(i=!0);var g=a.get(s)||a.set(s,[]);g.push(d)}},this),this._enableBlurEntireSVG(i,e)},r.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var n=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),a=n.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){oa(i);var o=i.ensureState("blur").style||{};o.opacity==null&&a!=null&&(o.opacity=a),i.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var n=t.coordinateSystem;if(n.resourceType==="geoJSON"){var a=this._regionsGroupByName;if(a){var i=a.get(e);return i?[i]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},r.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},r.prototype._useSVG=function(e){var t=wr.getGeoResource(e);if(t&&t.type==="geoSVG"){var n=t.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=e}},r.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=wr.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(e,t,n){var a=e.coordinateSystem,i=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=a.getZoom(),i.enable(e.get("roam")||!1);var s=e.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=e.id,u}i.off("pan").on("pan",function(u){this._mouseDownFlag=!1,Dd(o,u.dx,u.dy),n.dispatchAction(X(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,Td(o,u.scale,u.originX,u.originY),n.dispatchAction(X(l(),{totalZoom:o.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(u,c,d){return a.containPoint([c,d])&&!Zs(u,n,e)})},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=F0(t).ignore)})},r.prototype._updateMapSelectHandler=function(e,t,n,a){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){i._mouseDownFlag=!0}),t.on("click",function(o){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},r}();function av(r,e,t,n){var a=n.getModel("itemStyle"),i=n.getModel(["emphasis","itemStyle"]),o=n.getModel(["blur","itemStyle"]),s=n.getModel(["select","itemStyle"]),l=to(a),u=to(i),c=to(s),d=to(o),f=r.data;if(f){var h=f.getItemVisual(t,"style"),v=f.getItemVisual(t,"decal");r.isVisualEncodedByVisualMap&&h.fill&&(l.fill=h.fill),v&&(l.decal=Jc(v,r.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=u,e.ensureState("select").style=c,e.ensureState("blur").style=d,oa(e)}function iv(r,e,t,n,a,i,o){var s=r.data,l=r.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),i)),c=s&&s.getItemLayout(i);if(l||u||c&&c.showLabel){var d=l?t:i,f=void 0;(!s||i>=0)&&(f=a);var h=o?{normal:{align:"center",verticalAlign:"middle"}}:null;jt(e,At(n),{labelFetcher:f,labelDataIndex:d,defaultText:t},h);var v=e.getTextContent();if(v&&(F0(v).ignore=v.ignore,e.textConfig&&o)){var p=e.getBoundingRect().clone();e.textConfig.layoutRect=p,e.textConfig.position=[(o[0]-p.x)/p.width*100+"%",(o[1]-p.y)/p.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function ov(r,e,t,n,a,i){r.data?r.data.setItemGraphicEl(i,e):Ae(e).eventData={componentType:"geo",componentIndex:a.componentIndex,geoIndex:a.componentIndex,name:t,region:n&&n.option||{}}}function sv(r,e,t,n,a){r.data||ed({el:e,componentModel:a,itemName:t,itemTooltipOption:n.get("tooltip")})}function lv(r,e,t,n,a){e.highDownSilentOnTouch=!!a.get("selectedMode");var i=n.getModel("emphasis"),o=i.get("focus");return Ye(e,o,i.get("blurScope"),i.get("disabled")),r.isGeo&&Fx(e,a,t),o}function uv(r,e,t){var n=[],a;function i(){a=[]}function o(){a.length&&(n.push(a),a=[])}var s=e({polygonStart:i,polygonEnd:o,lineStart:i,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&a.push([l,u])},sphere:function(){}});return!t&&s.polygonStart(),T(r,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!t&&s.polygonEnd(),n}var yD=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===t.id){var s=this._mapDraw;s&&o.add(s.group)}else if(t.needsDrawMap){var s=this._mapDraw||new W0(a);o.add(s.group),s.draw(t,n,a,this,i),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(t,n,a)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,n,a){var i=t.originalData,o=this.group;i.each(i.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=i.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,d=u.offset,f=new Ei({style:{fill:t.getData().getVisual("style").fill},shape:{cx:c[0]+d*9,cy:c[1],r:3},silent:!0,z2:8+(d?0:Mi+1)});if(!d){var h=t.mainSeries.getData(),v=i.getName(l),p=h.indexOfName(v),g=i.getItemModel(l),m=g.getModel("label"),b=h.getItemGraphicEl(p);jt(f,At(g),{labelFetcher:{getFormattedLabel:function(S,y){return t.getFormattedLabel(p,y)}},defaultText:v}),f.disableLabelAnimation=!0,m.get("position")||f.setTextConfig({position:"bottom"}),b.onHoverStateChange=function(S){Hy(f,S)}}o.add(f)}}})},e.type="map",e}(Je),bD=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(n){if(n!=null){var a=this.getData().getName(n),i=this.coordinateSystem,o=i.getRegion(a);return o&&i.dataToPoint(o.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var n=Ti(this,{coordDimensions:["value"],encodeDefaulter:he(Gy,this)}),a=le(),i=[],o=0,s=n.count();o<s;o++){var l=n.getName(o);a.set(l,o)}var u=wr.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return T(u.regions,function(c){var d=c.name,f=a.get(d),h=c.properties&&c.properties.echartsStyle,v;f==null?(v={name:d},i.push(v)):v=n.getRawDataItem(f),h&&ke(v,h)}),n.appendData(i),n},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var n=this.getData();return n.get(n.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var n=this.getData();return n.getItemModel(n.indexOfName(t))},e.prototype.formatTooltip=function(t,n,a){for(var i=this.getData(),o=this.getRawValue(t),s=i.getName(t),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var d=l[c].originalData.indexOfName(s),f=i.mapDimension("value");isNaN(l[c].originalData.get(f,d))||u.push(l[c].name)}return Ct("section",{header:u.join(", "),noHeader:!u.length,blocks:[Ct("nameValue",{name:s,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var n=t.icon||"roundRect",a=mt(n,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return a.setStyle(t.itemStyle),a.style.stroke="none",n.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(rt);function SD(r,e){var t={};return T(r,function(n){n.each(n.mapDimension("value"),function(a,i){var o="ec-"+n.getName(i);t[o]=t[o]||[],isNaN(a)||t[o].push(a)})}),r[0].map(r[0].mapDimension("value"),function(n,a){for(var i="ec-"+r[0].getName(a),o=0,s=1/0,l=-1/0,u=t[i].length,c=0;c<u;c++)s=Math.min(s,t[i][c]),l=Math.max(l,t[i][c]),o+=t[i][c];var d;return e==="min"?d=s:e==="max"?d=l:e==="average"?d=o/u:d=o,u===0?NaN:d})}function _D(r){var e={};r.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),a=n?"o"+n.id:"i"+t.getMapType();(e[a]=e[a]||[]).push(t)}),T(e,function(t,n){for(var a=SD(G(t,function(o){return o.getData()}),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(var i=0;i<t.length;i++)t[i].seriesGroup=t,t[i].needsDrawMap=i===0&&!t[i].getHostGeoModel(),t[i].setData(a.cloneShallow()),t[i].mainSeries=t[0]})}function wD(r){var e={};r.eachSeriesByType("map",function(t){var n=t.getMapType();if(!(t.getHostGeoModel()||e[n])){var a={};T(t.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&r.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var d=l.getName(c),f=s.getRegion(d);if(!(!f||isNaN(u))){var h=a[d]||0,v=s.dataToPoint(f.getCenter());a[d]=h+1,l.setItemLayout(c,{point:v,offset:h})}})});var i=t.getData();i.each(function(o){var s=i.getName(o),l=i.getItemLayout(o)||{};l.showLabel=!a[s],i.setItemLayout(o,l)}),e[n]=!0}})}var cv=ri,Bi=function(r){V(e,r);function e(t){var n=r.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Kn,n._rawTransformable=new Kn,n.name=t,n}return e.prototype.setBoundingRect=function(t,n,a,i){return this._rect=new He(t,n,a,i),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,n,a,i){this._transformTo(t,n,a,i),this._viewRect=new He(t,n,a,i)},e.prototype._transformTo=function(t,n,a,i){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new He(t,n,a,i));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(t,n){t&&(this._center=[W(t[0],n.getWidth()),W(t[1],n.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var n=this.zoomLimit;n&&(n.max!=null&&(t=Math.min(n.max,t)),n.min!=null&&(t=Math.max(n.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),n=t.x+t.width/2,a=t.y+t.height/2;return[n,a]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,a=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=ri([],i,t),a=ri([],a,t),n.originX=i[0],n.originY=i[1],n.x=a[0]-i[0],n.y=a[1]-i[1],n.scaleX=n.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,n=this._rawTransformable;n.parent=t,t.updateTransform(),n.updateTransform(),Wx(this.transform||(this.transform=[]),n.transform||ba()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],Ay(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,n=this._roamTransformable,a=new Kn;return a.transform=n.transform,a.decomposeTransform(),{roam:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,n,a){var i=n?this._rawTransform:this.transform;return a=a||[],i?cv(a,t,i):pt(a,t)},e.prototype.pointToData=function(t){var n=this.invTransform;return n?cv([],t,n):[t[0],t[1]]},e.prototype.convertToPixel=function(t,n,a){var i=dv(n);return i===this?i.dataToPoint(a):null},e.prototype.convertFromPixel=function(t,n,a){var i=dv(n);return i===this?i.pointToData(a):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(Kn);function dv(r){var e=r.seriesModel;return e?e.coordinateSystem:null}var xD={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},U0=["lng","lat"],oc=function(r){V(e,r);function e(t,n,a){var i=r.call(this,t)||this;i.dimensions=U0,i.type="geo",i._nameCoordMap=le(),i.map=n;var o=a.projection,s=wr.load(n,a.nameMap,a.nameProperty),l=wr.getGeoResource(n);i.resourceType=l?l.type:null;var u=i.regions=s.regions,c=xD[l.type];i._regionsMap=s.regionsMap,i.regions=s.regions,i.projection=o;var d;if(o)for(var f=0;f<u.length;f++){var h=u[f].getBoundingRect(o);d=d||h.clone(),d.union(h)}else d=s.boundingRect;return i.setBoundingRect(d.x,d.y,d.width,d.height),i.aspectScale=o?1:it(a.aspectScale,c.aspectScale),i._invertLongitute=o?!1:c.invertLongitute,i}return e.prototype._transformTo=function(t,n,a,i){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new He(t,n,a,i));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var n=this.regions,a=0;a<n.length;a++){var i=n[a];if(i.type==="geoJSON"&&i.contain(t))return n[a]}},e.prototype.addGeoCoord=function(t,n){this._nameCoordMap.set(t,n)},e.prototype.getGeoCoord=function(t){var n=this._regionsMap.get(t);return this._nameCoordMap.get(t)||n&&n.getCenter()},e.prototype.dataToPoint=function(t,n,a){if(de(t)&&(t=this.getGeoCoord(t)),t){var i=this.projection;return i&&(t=i.project(t)),t&&this.projectedToPoint(t,n,a)}},e.prototype.pointToData=function(t){var n=this.projection;return n&&(t=n.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return r.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,n,a){return r.prototype.dataToPoint.call(this,t,n,a)},e.prototype.convertToPixel=function(t,n,a){var i=fv(n);return i===this?i.dataToPoint(a):null},e.prototype.convertFromPixel=function(t,n,a){var i=fv(n);return i===this?i.pointToData(a):null},e}(Bi);rr(oc,Bi);function fv(r){var e=r.geoModel,t=r.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",cr).models[0]||{}).coordinateSystem:null}function hv(r,e){var t=r.get("boundingCoords");if(t!=null){var n=t[0],a=t[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])){var i=this.projection;if(i){var o=n[0],s=n[1],l=a[0],u=a[1];n=[1/0,1/0],a=[-1/0,-1/0];var c=function(_,x,A,C){for(var D=A-_,E=C-x,M=0;M<=100;M++){var I=M/100,R=i.project([_+D*I,x+E*I]);Cy(n,n,R),Dy(a,a,R)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(n[0],n[1],a[0]-n[0],a[1]-n[1])}}var d=this.getBoundingRect(),f=r.get("layoutCenter"),h=r.get("layoutSize"),v=e.getWidth(),p=e.getHeight(),g=d.width/d.height*this.aspectScale,m=!1,b,S;f&&h&&(b=[W(f[0],v),W(f[1],p)],S=W(h,Math.min(v,p)),!isNaN(b[0])&&!isNaN(b[1])&&!isNaN(S)&&(m=!0));var y;if(m)y={},g>1?(y.width=S,y.height=S/g):(y.height=S,y.width=S*g),y.y=b[1]-y.height/2,y.x=b[0]-y.width/2;else{var w=r.getBoxLayoutParams();w.aspect=g,y=Zt(w,{width:v,height:p})}this.setViewRect(y.x,y.y,y.width,y.height),this.setCenter(r.get("center"),e),this.setZoom(r.get("zoom"))}function AD(r,e){T(e.get("geoCoord"),function(t,n){r.addGeoCoord(n,t)})}var CD=function(){function r(){this.dimensions=U0}return r.prototype.create=function(e,t){var n=[];function a(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,s){var l=o.get("map"),u=new oc(l+s,l,X({nameMap:o.get("nameMap")},a(o)));u.zoomLimit=o.get("scaleLimit"),n.push(u),o.coordinateSystem=u,u.model=o,u.resize=hv,u.resize(o,t)}),e.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=n[l]}});var i={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();i[s]=i[s]||[],i[s].push(o)}}),T(i,function(o,s){var l=G(o,function(c){return c.get("nameMap")}),u=new oc(s,s,X({nameMap:td(l)},a(o[0])));u.zoomLimit=Tt.apply(null,G(o,function(c){return c.get("scaleLimit")})),n.push(u),u.resize=hv,u.resize(o[0],t),T(o,function(c){c.coordinateSystem=u,AD(u,c)})}),n},r.prototype.getFilledRegions=function(e,t,n,a){for(var i=(e||[]).slice(),o=le(),s=0;s<i.length;s++)o.set(i[s].name,i[s]);var l=wr.load(t,n,a);return T(l.regions,function(u){var c=u.name,d=o.get(c),f=u.properties&&u.properties.echartsStyle;d||(d={name:c},i.push(d)),f&&ke(d,f)}),i},r}(),j0=new CD,DD=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n,a){var i=wr.getGeoResource(t.map);if(i&&i.type==="geoJSON"){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(t,a),zs(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,n=this.option;n.regions=j0.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var a={};this._optionModelMap=Fy(n.regions||[],function(i,o){var s=o.name;return s&&(i.set(s,new Pt(o,t,t.ecModel)),o.selected&&(a[s]=!0)),i},le()),n.selectedMap||(n.selectedMap=a)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Pt(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,n){var a=this.getRegionModel(t),i=n==="normal"?a.get(["label","formatter"]):a.get(["emphasis","label","formatter"]),o={name:t};if(xe(i))return o.status=n,i(o);if(de(i))return i.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var n=this.option,a=n.selectedMode;if(a){a!=="multiple"&&(n.selectedMap=null);var i=n.selectedMap||(n.selectedMap={});i[t]=!0}},e.prototype.unSelect=function(t){var n=this.option.selectedMap;n&&(n[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var n=this.option.selectedMap;return!!(n&&n[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(dt);function vv(r,e){return r.pointToProjected?r.pointToProjected(e):r.pointToData(e)}function Md(r,e,t,n){var a=r.getZoom(),i=r.getCenter(),o=e.zoom,s=r.projectedToPoint?r.projectedToPoint(i):r.dataToPoint(i);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,r.setCenter(vv(r,s),n)),o!=null){if(t){var l=t.min||0,u=t.max||1/0;o=Math.max(Math.min(a*o,u),l)/a}r.scaleX*=o,r.scaleY*=o;var c=(e.originX-r.x)*(o-1),d=(e.originY-r.y)*(o-1);r.x-=c,r.y-=d,r.updateTransform(),r.setCenter(vv(r,s),n),r.setZoom(o*a)}return{center:r.getCenter(),zoom:r.getZoom()}}var TD=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,n){this._api=n},e.prototype.render=function(t,n,a,i){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new W0(a));var o=this._mapDraw;o.draw(t,n,a,this,i),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,n,a)},e.prototype._handleRegionClick=function(t){var n;Wy(t.target,function(a){return(n=Ae(a).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},e.prototype.updateSelectStatus=function(t,n,a){var i=this;this._mapDraw.group.traverse(function(o){var s=Ae(o).eventData;if(s)return i._model.isSelected(s.name)?a.enterSelect(o):a.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(yt);function ED(r,e,t){wr.registerMap(r,e,t)}function $0(r){r.registerCoordinateSystem("geo",j0),r.registerComponentModel(DD),r.registerComponentView(TD),r.registerImpl("registerMap",ED),r.registerImpl("getMap",function(t){return wr.getMapForUser(t)});function e(t,n){n.update="geo:updateSelectStatus",r.registerAction(n,function(a,i){var o={},s=[];return i.eachComponent({mainType:"geo",query:a},function(l){l[t](a.name);var u=l.coordinateSystem;T(u.regions,function(d){o[d.name]=l.isSelected(d.name)||!1});var c=[];T(o,function(d,f){o[f]&&c.push(f)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:a.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,n,a){var i=t.componentType||"series";n.eachComponent({mainType:i,query:t},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=Md(s,t,o.get("scaleLimit"),a);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),i==="series"&&T(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function MD(r){se($0),r.registerChartView(yD),r.registerSeriesModel(bD),r.registerLayout(wD),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,_D),Ux("map",r.registerAction)}function ID(r){var e=r;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],n,a;n=t.pop();)if(a=n.children,n.isExpand&&a.length)for(var i=a.length,o=i-1;o>=0;o--){var s=a[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},t.push(s)}}function RD(r,e){var t=r.isExpand?r.children:[],n=r.parentNode.children,a=r.hierNode.i?n[r.hierNode.i-1]:null;if(t.length){kD(r);var i=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;a?(r.hierNode.prelim=a.hierNode.prelim+e(r,a),r.hierNode.modifier=r.hierNode.prelim-i):r.hierNode.prelim=i}else a&&(r.hierNode.prelim=a.hierNode.prelim+e(r,a));r.parentNode.hierNode.defaultAncestor=OD(r,a,r.parentNode.hierNode.defaultAncestor||n[0],e)}function LD(r){var e=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:e},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function pv(r){return arguments.length?r:BD}function Ha(r,e){return r-=Math.PI/2,{x:e*Math.cos(r),y:e*Math.sin(r)}}function PD(r,e){return Zt(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function kD(r){for(var e=r.children,t=e.length,n=0,a=0;--t>=0;){var i=e[t];i.hierNode.prelim+=n,i.hierNode.modifier+=n,a+=i.hierNode.change,n+=i.hierNode.shift+a}}function OD(r,e,t,n){if(e){for(var a=r,i=r,o=i.parentNode.children[0],s=e,l=a.hierNode.modifier,u=i.hierNode.modifier,c=o.hierNode.modifier,d=s.hierNode.modifier;s=Il(s),i=Rl(i),s&&i;){a=Il(a),o=Rl(o),a.hierNode.ancestor=r;var f=s.hierNode.prelim+d-i.hierNode.prelim-u+n(s,i);f>0&&(VD(ND(s,r,t),r,f),u+=f,l+=f),d+=s.hierNode.modifier,u+=i.hierNode.modifier,l+=a.hierNode.modifier,c+=o.hierNode.modifier}s&&!Il(a)&&(a.hierNode.thread=s,a.hierNode.modifier+=d-l),i&&!Rl(o)&&(o.hierNode.thread=i,o.hierNode.modifier+=u-c,t=r)}return t}function Il(r){var e=r.children;return e.length&&r.isExpand?e[e.length-1]:r.hierNode.thread}function Rl(r){var e=r.children;return e.length&&r.isExpand?e[0]:r.hierNode.thread}function ND(r,e,t){return r.hierNode.ancestor.parentNode===e.parentNode?r.hierNode.ancestor:t}function VD(r,e,t){var n=t/(e.hierNode.i-r.hierNode.i);e.hierNode.change-=n,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,r.hierNode.change+=n}function BD(r,e){return r.parentNode===e.parentNode?1:2}var zD=function(){function r(){this.parentPoint=[],this.childPoints=[]}return r}(),HD=function(r){V(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new zD},e.prototype.buildPath=function(t,n){var a=n.childPoints,i=a.length,o=n.parentPoint,s=a[0],l=a[i-1];if(i===1){t.moveTo(o[0],o[1]),t.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,d=1-c,f=W(n.forkPosition,1),h=[];h[c]=o[c],h[d]=o[d]+(l[d]-o[d])*f,t.moveTo(o[0],o[1]),t.lineTo(h[0],h[1]),t.moveTo(s[0],s[1]),h[c]=s[c],t.lineTo(h[0],h[1]),h[c]=l[c],t.lineTo(h[0],h[1]),t.lineTo(l[0],l[1]);for(var v=1;v<i-1;v++){var p=a[v];t.moveTo(p[0],p[1]),h[c]=p[c],t.lineTo(h[0],h[1])}},e}(ot),GD=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new ae,t}return e.prototype.init=function(t,n){this._controller=new Vi(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,n,a){var i=t.getData(),o=t.layoutInfo,s=this._mainGroup,l=t.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(t,a),this._updateController(t,n,a);var u=this._data;i.diff(u).add(function(c){gv(i,c)&&mv(i,c,null,s,t)}).update(function(c,d){var f=u.getItemGraphicEl(d);if(!gv(i,c)){f&&bv(u,d,f,s,t);return}mv(i,c,f,s,t)}).remove(function(c){var d=u.getItemGraphicEl(c);d&&bv(u,c,d,s,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(c,d){c.off("click").on("click",function(){a.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:d})})}),this._data=i},e.prototype._updateViewCoordSys=function(t,n){var a=t.getData(),i=[];a.each(function(d){var f=a.getItemLayout(d);f&&!isNaN(f.x)&&!isNaN(f.y)&&i.push([+f.x,+f.y])});var o=[],s=[];Hs(i,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var c=t.coordinateSystem=new Bi;c.zoomLimit=t.get("scaleLimit"),c.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),c.setCenter(t.get("center"),n),c.setZoom(t.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(t,n,a){var i=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,c,d){var f=l.getBoundingRect();return f.applyTransform(l.transform),f.contain(c,d)&&!Zs(u,a,t)}),o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Dd(s,u.dx,u.dy),a.dispatchAction({seriesId:t.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Td(s,u.scale,u.originX,u.originY),a.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),i._updateNodeAndLinkScale(t),a.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var n=t.getData(),a=this._getNodeGlobalScale(t);n.eachItemGraphicEl(function(i,o){i.setSymbolScale(a)})},e.prototype._getNodeGlobalScale=function(t){var n=t.coordinateSystem;if(n.type!=="view")return 1;var a=this._nodeScaleRatio,i=n.scaleX||1,o=n.getZoom(),s=(o-1)*a+1;return s/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Je);function gv(r,e){var t=r.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function mv(r,e,t,n,a){var i=!t,o=r.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",c=r.tree.root,d=o.parentNode===c?o:o.parentNode||o,f=r.getItemGraphicEl(d.dataIndex),h=d.getLayout(),v=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:h,p=o.getLayout();i?(t=new Uy(r,e,null,{symbolInnerColor:u,useNameLabel:!0}),t.x=v.x,t.y=v.y):t.updateData(r,e,null,{symbolInnerColor:u,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=p.rawX,t.__radialRawY=p.rawY,n.add(t),r.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,Ne(t,{x:p.x,y:p.y},a);var g=t.getSymbolPath();if(a.get("layout")==="radial"){var m=c.children[0],b=m.getLayout(),S=m.children.length,y=void 0,w=void 0;if(p.x===b.x&&o.isExpand===!0&&m.children.length){var _={x:(m.children[0].getLayout().x+m.children[S-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[S-1].getLayout().y)/2};y=Math.atan2(_.y-b.y,_.x-b.x),y<0&&(y=Math.PI*2+y),w=_.x<b.x,w&&(y=y-Math.PI)}else y=Math.atan2(p.y-b.y,p.x-b.x),y<0&&(y=Math.PI*2+y),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(w=p.x<b.x,w&&(y=y-Math.PI)):(w=p.x>b.x,w||(y=y-Math.PI));var x=w?"left":"right",A=s.getModel("label"),C=A.get("rotate"),D=C*(Math.PI/180),E=g.getTextContent();E&&(g.setTextConfig({position:A.get("position")||x,rotation:C==null?-y:D,origin:"center"}),E.setStyle("verticalAlign","middle"))}var M=s.get(["emphasis","focus"]),I=M==="relative"?Go(o.getAncestorsIndices(),o.getDescendantIndices()):M==="ancestor"?o.getAncestorsIndices():M==="descendant"?o.getDescendantIndices():null;I&&(Ae(t).focus=I),FD(a,o,c,t,v,h,p,n),t.__edge&&(t.onHoverStateChange=function(R){if(R!=="blur"){var L=o.parentNode&&r.getItemGraphicEl(o.parentNode.dataIndex);L&&L.hoverState===jx||Hy(t.__edge,R)}})}function FD(r,e,t,n,a,i,o,s){var l=e.getModel(),u=r.get("edgeShape"),c=r.get("layout"),d=r.getOrient(),f=r.get(["lineStyle","curveness"]),h=r.get("edgeForkPosition"),v=l.getModel("lineStyle").getLineStyle(),p=n.__edge;if(u==="curve")e.parentNode&&e.parentNode!==t&&(p||(p=n.__edge=new jy({shape:sc(c,d,f,a,a)})),Ne(p,{shape:sc(c,d,f,i,o)},r));else if(u==="polyline"&&c==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var g=e.children,m=[],b=0;b<g.length;b++){var S=g[b].getLayout();m.push([S.x,S.y])}p||(p=n.__edge=new HD({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:d,forkPosition:h}})),Ne(p,{shape:{parentPoint:[o.x,o.y],childPoints:m}},r)}p&&!(u==="polyline"&&!e.isExpand)&&(p.useStyle(ce({strokeNoScale:!0,fill:null},v)),Lt(p,l,"lineStyle"),oa(p),s.add(p))}function yv(r,e,t,n,a){var i=e.tree.root,o=Y0(i,r),s=o.source,l=o.sourceLayout,u=e.getItemGraphicEl(r.dataIndex);if(u){var c=e.getItemGraphicEl(s.dataIndex),d=c.__edge,f=u.__edge||(s.isExpand===!1||s.children.length===1?d:void 0),h=n.get("edgeShape"),v=n.get("layout"),p=n.get("orient"),g=n.get(["lineStyle","curveness"]);f&&(h==="curve"?Fo(f,{shape:sc(v,p,g,l,l),style:{opacity:0}},n,{cb:function(){t.remove(f)},removeOpt:a}):h==="polyline"&&n.get("layout")==="orthogonal"&&Fo(f,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){t.remove(f)},removeOpt:a}))}}function Y0(r,e){for(var t=e.parentNode===r?e:e.parentNode||e,n;n=t.getLayout(),n==null;)t=t.parentNode===r?t:t.parentNode||t;return{source:t,sourceLayout:n}}function bv(r,e,t,n,a){var i=r.tree.getNodeByDataIndex(e),o=r.tree.root,s=Y0(o,i).sourceLayout,l={duration:a.get("animationDurationUpdate"),easing:a.get("animationEasingUpdate")};Fo(t,{x:s.x+1,y:s.y+1},a,{cb:function(){n.remove(t),r.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:l}),i.children.forEach(function(u){yv(u,r,n,a,l)}),yv(i,r,n,a,l)}function sc(r,e,t,n,a){var i,o,s,l,u,c,d,f;if(r==="radial"){u=n.rawX,d=n.rawY,c=a.rawX,f=a.rawY;var h=Ha(u,d),v=Ha(u,d+(f-d)*t),p=Ha(c,f+(d-f)*t),g=Ha(c,f);return{x1:h.x||0,y1:h.y||0,x2:g.x||0,y2:g.y||0,cpx1:v.x||0,cpy1:v.y||0,cpx2:p.x||0,cpy2:p.y||0}}else u=n.x,d=n.y,c=a.x,f=a.y,(e==="LR"||e==="RL")&&(i=u+(c-u)*t,o=d,s=c+(u-c)*t,l=f),(e==="TB"||e==="BT")&&(i=u,o=d+(f-d)*t,s=c,l=f+(d-f)*t);return{x1:u,y1:d,x2:c,y2:f,cpx1:i,cpy1:o,cpx2:s,cpy2:l}}var Ft=je();function Z0(r){var e=r.mainData,t=r.datas;t||(t={main:e},r.datasAttr={main:"data"}),r.datas=r.mainData=null,X0(e,t,r),T(t,function(n){T(e.TRANSFERABLE_METHODS,function(a){n.wrapMethod(a,he(WD,r))})}),e.wrapMethod("cloneShallow",he(jD,r)),T(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,he(UD,r))}),ai(t[e.dataType]===e)}function WD(r,e){if(ZD(this)){var t=X({},Ft(this).datas);t[this.dataType]=e,X0(e,t,r)}else Id(e,this.dataType,Ft(this).mainData,r);return e}function UD(r,e){return r.struct&&r.struct.update(),e}function jD(r,e){return T(Ft(e).datas,function(t,n){t!==e&&Id(t.cloneShallow(),n,e,r)}),e}function $D(r){var e=Ft(this).mainData;return r==null||e==null?e:Ft(e).datas[r]}function YD(){var r=Ft(this).mainData;return r==null?[{data:r}]:G(We(Ft(r).datas),function(e){return{type:e,data:Ft(r).datas[e]}})}function ZD(r){return Ft(r).mainData===r}function X0(r,e,t){Ft(r).datas={},T(e,function(n,a){Id(n,a,r,t)})}function Id(r,e,t,n){Ft(t).datas[e]=r,Ft(r).mainData=t,r.dataType=e,n.struct&&(r[n.structAttr]=n.struct,n.struct[n.datasAttr[e]]=r),r.getLinkedData=$D,r.getLinkedDataAll=YD}var XD=function(){function r(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(e,t,n){xe(e)&&(n=t,t=e,e=null),e=e||{},de(e)&&(e={order:e});var a=e.order||"preorder",i=this[e.attr||"children"],o;a==="preorder"&&(o=t.call(n,this));for(var s=0;!o&&s<i.length;s++)i[s].eachNode(e,t,n);a==="postorder"&&t.call(n,this)},r.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var a=this.children[n];a.updateDepthAndHeight(e+1),a.height>t&&(t=a.height)}this.height=t+1},r.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].getNodeById(e);if(i)return i}},r.prototype.contains=function(e){if(e===this)return!0;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].contains(e);if(i)return i}},r.prototype.getAncestors=function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},r.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},r.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},r.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},r.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,n=t.data.getItemModel(this.dataIndex);return n.getModel(e)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},r.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},r.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},r.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},r}(),Rd=function(){function r(e){this.type="tree",this._nodes=[],this.hostModel=e}return r.prototype.eachNode=function(e,t,n){this.root.eachNode(e,t,n)},r.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},r.prototype.getNodeById=function(e){return this.root.getNodeById(e)},r.prototype.update=function(){for(var e=this.data,t=this._nodes,n=0,a=t.length;n<a;n++)t[n].dataIndex=-1;for(var n=0,a=e.count();n<a;n++)t[e.getRawIndex(n)].dataIndex=n},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(e,t,n){var a=new r(t),i=[],o=1;s(e);function s(c,d){var f=c.value;o=Math.max(o,$(f)?f.length:1),i.push(c);var h=new XD(mr(c.name,""),a);d?qD(h,d):a.root=h,a._nodes.push(h);var v=c.children;if(v)for(var p=0;p<v.length;p++)s(v[p],h)}a.root.updateDepthAndHeight(0);var l=rd(i,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new It(l,t);return u.initData(i),n&&n(u),Z0({mainData:u,struct:a,structAttr:"tree"}),a.update(),a},r}();function qD(r,e){var t=e.children;r.parentNode!==e&&(t.push(r),r.parentNode=e)}function di(r,e,t){if(r&&Oe(e,r.type)>=0){var n=t.getData().tree.root,a=r.targetNode;if(de(a)&&(a=n.getNodeById(a)),a&&n.contains(a))return{node:a};var i=r.targetNodeId;if(i!=null&&(a=n.getNodeById(i)))return{node:a}}}function q0(r){for(var e=[];r;)r=r.parentNode,r&&e.push(r);return e.reverse()}function Ld(r,e){var t=q0(r);return Oe(t,e)>=0}function qs(r,e){for(var t=[];r;){var n=r.dataIndex;t.push({name:r.name,dataIndex:n,value:e.getRawValue(n)}),r=r.parentNode}return t.reverse(),t}var QD=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var n={name:t.name,children:t.data},a=t.leaves||{},i=new Pt(a,this,this.ecModel),o=Rd.createTree(n,this,s);function s(d){d.wrapMethod("getItemModel",function(f,h){var v=o.getNodeByDataIndex(h);return v&&v.children.length&&v.isExpand||(f.parentModel=i),f})}var l=0;o.eachNode("preorder",function(d){d.depth>l&&(l=d.depth)});var u=t.expandAndCollapse,c=u&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return o.root.eachNode("preorder",function(d){var f=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=f&&f.collapsed!=null?!f.collapsed:d.depth<=c}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,n,a){for(var i=this.getData().tree,o=i.root.children[0],s=i.getNodeByDataIndex(t),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return Ct("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var n=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=qs(a,this),n.collapsed=!a.isExpand,n},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(rt);function KD(r,e,t){for(var n=[r],a=[],i;i=n.pop();)if(a.push(i),i.isExpand){var o=i.children;if(o.length)for(var s=0;s<o.length;s++)n.push(o[s])}for(;i=a.pop();)e(i,t)}function Ma(r,e){for(var t=[r],n;n=t.pop();)if(e(n),n.isExpand){var a=n.children;if(a.length)for(var i=a.length-1;i>=0;i--)t.push(a[i])}}function JD(r,e){r.eachSeriesByType("tree",function(t){eT(t,e)})}function eT(r,e){var t=PD(r,e);r.layoutInfo=t;var n=r.get("layout"),a=0,i=0,o=null;n==="radial"?(a=2*Math.PI,i=Math.min(t.height,t.width)/2,o=pv(function(S,y){return(S.parentNode===y.parentNode?1:2)/S.depth})):(a=t.width,i=t.height,o=pv());var s=r.getData().tree.root,l=s.children[0];if(l){ID(s),KD(l,RD,o),s.hierNode.modifier=-l.hierNode.prelim,Ma(l,LD);var u=l,c=l,d=l;Ma(l,function(S){var y=S.getLayout().x;y<u.getLayout().x&&(u=S),y>c.getLayout().x&&(c=S),S.depth>d.depth&&(d=S)});var f=u===c?1:o(u,c)/2,h=f-u.getLayout().x,v=0,p=0,g=0,m=0;if(n==="radial")v=a/(c.getLayout().x+f+h),p=i/(d.depth-1||1),Ma(l,function(S){g=(S.getLayout().x+h)*v,m=(S.depth-1)*p;var y=Ha(g,m);S.setLayout({x:y.x,y:y.y,rawX:g,rawY:m},!0)});else{var b=r.getOrient();b==="RL"||b==="LR"?(p=i/(c.getLayout().x+f+h),v=a/(d.depth-1||1),Ma(l,function(S){m=(S.getLayout().x+h)*p,g=b==="LR"?(S.depth-1)*v:a-(S.depth-1)*v,S.setLayout({x:g,y:m},!0)})):(b==="TB"||b==="BT")&&(v=a/(c.getLayout().x+f+h),p=i/(d.depth-1||1),Ma(l,function(S){g=(S.getLayout().x+h)*v,m=b==="TB"?(S.depth-1)*p:i-(S.depth-1)*p,S.setLayout({x:g,y:m},!0)}))}}}function tT(r){r.eachSeriesByType("tree",function(e){var t=e.getData(),n=t.tree;n.eachNode(function(a){var i=a.getModel(),o=i.getModel("itemStyle").getItemStyle(),s=t.ensureUniqueItemVisual(a.dataIndex,"style");X(s,o)})})}function rT(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var a=e.dataIndex,i=n.getData().tree,o=i.getNodeByDataIndex(a);o.isExpand=!o.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,n){t.eachComponent({mainType:"series",subType:"tree",query:e},function(a){var i=a.coordinateSystem,o=Md(i,e,void 0,n);a.setCenter&&a.setCenter(o.center),a.setZoom&&a.setZoom(o.zoom)})})}function nT(r){r.registerChartView(GD),r.registerSeriesModel(QD),r.registerLayout(JD),r.registerVisual(tT),rT(r)}var Sv=["treemapZoomToNode","treemapRender","treemapMove"];function aT(r){for(var e=0;e<Sv.length;e++)r.registerAction({type:Sv[e],update:"updateView"},Gr);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,n){n.eachComponent({mainType:"series",subType:"treemap",query:t},a);function a(i,o){var s=["treemapZoomToNode","treemapRootToNode"],l=di(t,s,i);if(l){var u=i.getViewRoot();u&&(t.direction=Ld(u,l.node)?"rollUp":"drillDown"),i.resetViewRoot(l.node)}}})}function Q0(r){var e=r.getData(),t=e.tree,n={};t.eachNode(function(a){for(var i=a;i&&i.depth>1;)i=i.parentNode;var o=Zu(r.ecModel,i.name||i.dataIndex+"",n);a.setVisual("decal",o)})}var iT=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,n){var a={name:t.name,children:t.data};K0(a);var i=t.levels||[],o=this.designatedVisualItemStyle={},s=new Pt({itemStyle:o},this,n);i=t.levels=oT(i,n);var l=G(i||[],function(d){return new Pt(d,s,n)},this),u=Rd.createTree(a,this,c);function c(d){d.wrapMethod("getItemModel",function(f,h){var v=u.getNodeByDataIndex(h),p=v?l[v.depth]:null;return f.parentModel=p||s,f})}return u.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),o=this.getRawValue(t),s=i.getName(t);return Ct("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(t){var n=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=qs(a,this),n.treePathInfo=n.treeAncestors,n},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},X(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var n=this._idIndexMap;n||(n=this._idIndexMap=le(),this._idIndexMapCount=0);var a=n.get(t);return a==null&&n.set(t,a=this._idIndexMapCount++),a},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var n=this.getRawData().tree.root;(!t||t!==n&&!n.contains(t))&&(this._viewRoot=n)},e.prototype.enableAriaDecal=function(){Q0(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(rt);function K0(r){var e=0;T(r.children,function(n){K0(n);var a=n.value;$(a)&&(a=a[0]),e+=a});var t=r.value;$(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),$(r.value)?r.value[0]=t:r.value=t}function oT(r,e){var t=gt(e.get("color")),n=gt(e.get(["aria","decal","decals"]));if(t){r=r||[];var a,i;T(r,function(s){var l=new Pt(s),u=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(a=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(i=!0)});var o=r[0]||(r[0]={});return a||(o.color=t.slice()),!i&&n&&(o.decal=n.slice()),r}}var sT=8,_v=8,Ll=5,lT=function(){function r(e){this.group=new ae,e.add(this.group)}return r.prototype.render=function(e,t,n,a){var i=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!i.get("show")||!n)){var s=i.getModel("itemStyle"),l=i.getModel("emphasis"),u=s.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),d={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,d,u),this._renderContent(e,d,s,l,u,c,a),nd(o,d.pos,d.box)}},r.prototype._prepare=function(e,t,n){for(var a=e;a;a=a.parentNode){var i=mr(a.getModel().get("name"),""),o=n.getTextRect(i),s=Math.max(o.width+sT*2,t.emptyItemWidth);t.totalWidth+=s+_v,t.renderList.push({node:a,text:i,width:s})}},r.prototype._renderContent=function(e,t,n,a,i,o,s){for(var l=0,u=t.emptyItemWidth,c=e.get(["breadcrumb","height"]),d=$x(t.pos,t.box),f=t.totalWidth,h=t.renderList,v=a.getModel("itemStyle").getItemStyle(),p=h.length-1;p>=0;p--){var g=h[p],m=g.node,b=g.width,S=g.text;f>d.width&&(f-=b-u,b=u,S=null);var y=new Ut({shape:{points:uT(l,0,b,c,p===h.length-1,p===0)},style:ce(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ie({style:Ue(i,{text:S})}),textConfig:{position:"inside"},z2:Mi*1e4,onclick:he(s,m)});y.disableLabelAnimation=!0,y.getTextContent().ensureState("emphasis").style=Ue(o,{text:S}),y.ensureState("emphasis").style=v,Ye(y,a.get("focus"),a.get("blurScope"),a.get("disabled")),this.group.add(y),cT(y,e,m),l+=b+_v}},r.prototype.remove=function(){this.group.removeAll()},r}();function uT(r,e,t,n,a,i){var o=[[a?r:r-Ll,e],[r+t,e],[r+t,e+n],[a?r:r-Ll,e+n]];return!i&&o.splice(2,0,[r+t+Ll,e+n/2]),!a&&o.push([r,e+n/2]),o}function cT(r,e,t){Ae(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&qs(t,e)}}var dT=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(e,t,n,a,i){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:n,delay:a,easing:i}),!0)},r.prototype.finished=function(e){return this._finishedCallback=e,this},r.prototype.start=function(){for(var e=this,t=this._storage.length,n=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},a=0,i=this._storage.length;a<i;a++){var o=this._storage[a];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:n,aborted:n})}return this},r}();function fT(){return new dT}var lc=ae,wv=Ge,xv=3,Av="label",Cv="upperLabel",hT=Mi*10,vT=Mi*2,pT=Mi*3,an=Yy([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Dv=function(r){var e=an(r);return e.stroke=e.fill=e.lineWidth=null,e},Ko=je(),gT=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=Ia(),t}return e.prototype.render=function(t,n,a,i){var o=n.findComponents({mainType:"series",subType:"treemap",query:i});if(!(Oe(o,t)<0)){this.seriesModel=t,this.api=a,this.ecModel=n;var s=["treemapZoomToNode","treemapRootToNode"],l=di(i,s,t),u=i&&i.type,c=t.layoutInfo,d=!this._oldTree,f=this._storage,h=u==="treemapRootToNode"&&l&&f?{rootNodeGroup:f.nodeGroup[l.node.getRawIndex()],direction:i.direction}:null,v=this._giveContainerGroup(c),p=t.get("animation"),g=this._doRender(v,t,h);p&&!d&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(v,g,t,h):g.renderFinally(),this._resetController(a),this._renderBreadcrumb(t,a,l)}},e.prototype._giveContainerGroup=function(t){var n=this._containerGroup;return n||(n=this._containerGroup=new lc,this._initEvents(n),this.group.add(n)),n.x=t.x,n.y=t.y,n},e.prototype._doRender=function(t,n,a){var i=n.getData().tree,o=this._oldTree,s=Ia(),l=Ia(),u=this._storage,c=[];function d(b,S,y,w){return mT(n,l,u,a,s,c,b,S,y,w)}p(i.root?[i.root]:[],o&&o.root?[o.root]:[],t,i===o||!o,0);var f=g(u);if(this._oldTree=i,this._storage=l,this._controllerHost){var h=this.seriesModel.layoutInfo,v=i.root.getLayout();v.width===h.width&&v.height===h.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:f,renderFinally:m};function p(b,S,y,w,_){w?(S=b,T(b,function(C,D){!C.isRemoved()&&A(D,D)})):new Wr(S,b,x,x).add(A).update(A).remove(he(A,null)).execute();function x(C){return C.getId()}function A(C,D){var E=C!=null?b[C]:null,M=D!=null?S[D]:null,I=d(E,M,y,_);I&&p(E&&E.viewChildren||[],M&&M.viewChildren||[],I,w,_+1)}}function g(b){var S=Ia();return b&&T(b,function(y,w){var _=S[w];T(y,function(x){x&&(_.push(x),Ko(x).willDelete=!0)})}),S}function m(){T(f,function(b){T(b,function(S){S.parent&&S.parent.remove(S)})}),T(c,function(b){b.invisible=!0,b.dirty()})}},e.prototype._doAnimation=function(t,n,a,i){var o=a.get("animationDurationUpdate"),s=a.get("animationEasing"),l=(xe(o)?0:o)||0,u=(xe(s)?null:s)||"cubicOut",c=fT();T(n.willDeleteEls,function(d,f){T(d,function(h,v){if(!h.invisible){var p=h.parent,g,m=Ko(p);if(i&&i.direction==="drillDown")g=p===i.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var b=0,S=0;m.willDelete||(b=m.nodeWidth/2,S=m.nodeHeight/2),g=f==="nodeGroup"?{x:b,y:S,style:{opacity:0}}:{shape:{x:b,y:S,width:0,height:0},style:{opacity:0}}}g&&c.add(h,g,l,0,u)}})}),T(this._storage,function(d,f){T(d,function(h,v){var p=n.lastsForAnimation[f][v],g={};p&&(h instanceof ae?p.oldX!=null&&(g.x=h.x,g.y=h.y,h.x=p.oldX,h.y=p.oldY):(p.oldShape&&(g.shape=X({},h.shape),h.setShape(p.oldShape)),p.fadein?(h.setStyle("opacity",0),g.style={opacity:1}):h.style.opacity!==1&&(g.style={opacity:1})),c.add(h,g,l,0,u))})},this),this._state="animating",c.finished(Z(function(){this._state="ready",n.renderFinally()},this)).start()},e.prototype._resetController=function(t){var n=this._controller,a=this._controllerHost;a||(this._controllerHost={target:this.group},a=this._controllerHost),n||(n=this._controller=new Vi(t.getZr()),n.enable(this.seriesModel.get("roam")),a.zoomLimit=this.seriesModel.get("scaleLimit"),a.zoom=this.seriesModel.get("zoom"),n.on("pan",Z(this._onPan,this)),n.on("zoom",Z(this._onZoom,this)));var i=new He(0,0,t.getWidth(),t.getHeight());n.setPointerChecker(function(o,s,l){return i.contain(s,l)})},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>xv||Math.abs(t.dy)>xv)){var n=this.seriesModel.getData().tree.root;if(!n)return;var a=n.getLayout();if(!a)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+t.dx,y:a.y+t.dy,width:a.width,height:a.height}})}},e.prototype._onZoom=function(t){var n=t.originX,a=t.originY,i=t.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new He(s.x,s.y,s.width,s.height),u=null,c=this._controllerHost;u=c.zoomLimit;var d=c.zoom=c.zoom||1;if(d*=i,u){var f=u.min||0,h=u.max||1/0;d=Math.max(Math.min(h,d),f)}var v=d/c.zoom;c.zoom=d;var p=this.seriesModel.layoutInfo;n-=p.x,a-=p.y;var g=ba();wn(g,g,[-n,-a]),By(g,g,[v,v]),wn(g,g,[n,a]),l.applyTransform(g),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(t){var n=this;t.on("click",function(a){if(n._state==="ready"){var i=n.seriesModel.get("nodeClick",!0);if(i){var o=n.findTarget(a.offsetX,a.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)n._rootToNode(o);else if(i==="zoomToNode")n._zoomToNode(o);else if(i==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),c=l.get("target",!0)||"blank";u&&$y(u,c)}}}}},this)},e.prototype._renderBreadcrumb=function(t,n,a){var i=this;a||(a=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),a||(a={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new lT(this.group))).render(t,n,a.node,function(o){i._state!=="animating"&&(Ld(t.getViewRoot(),o)?i._rootToNode({node:o}):i._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Ia(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,n){var a,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(t,n),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)a={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),a},e.type="treemap",e}(Je);function Ia(){return{nodeGroup:[],background:[],content:[]}}function mT(r,e,t,n,a,i,o,s,l,u){if(!o)return;var c=o.getLayout(),d=r.getData(),f=o.getModel();if(d.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var h=c.width,v=c.height,p=c.borderWidth,g=c.invisible,m=o.getRawIndex(),b=s&&s.getRawIndex(),S=o.viewChildren,y=c.upperHeight,w=S&&S.length,_=f.getModel("itemStyle"),x=f.getModel(["emphasis","itemStyle"]),A=f.getModel(["blur","itemStyle"]),C=f.getModel(["select","itemStyle"]),D=_.get("borderRadius")||0,E=oe("nodeGroup",lc);if(!E)return;if(l.add(E),E.x=c.x||0,E.y=c.y||0,E.markRedraw(),Ko(E).nodeWidth=h,Ko(E).nodeHeight=v,c.isAboveViewRoot)return E;var M=oe("background",wv,u,vT);M&&U(E,M,w&&c.upperLabelHeight);var I=f.getModel("emphasis"),R=I.get("focus"),L=I.get("blurScope"),P=I.get("disabled"),N=R==="ancestor"?o.getAncestorsIndices():R==="descendant"?o.getDescendantIndices():R;if(w)sh(E)&&Va(E,!1),M&&(Va(M,!P),d.setItemGraphicEl(o.dataIndex,M),lh(M,N,L));else{var z=oe("content",wv,u,pT);z&&Y(E,z),M.disableMorphing=!0,M&&sh(M)&&Va(M,!1),Va(E,!P),d.setItemGraphicEl(o.dataIndex,E);var H=f.getShallow("cursor");H&&z.attr("cursor",H),lh(E,N,L)}return E;function U(ne,Q,fe){var ue=Ae(Q);if(ue.dataIndex=o.dataIndex,ue.seriesIndex=r.seriesIndex,Q.setShape({x:0,y:0,width:h,height:v,r:D}),g)J(Q);else{Q.invisible=!1;var De=o.getVisual("style"),Me=De.stroke,$e=Dv(_);$e.fill=Me;var Te=an(x);Te.fill=x.get("borderColor");var Be=an(A);Be.fill=A.get("borderColor");var Ze=an(C);if(Ze.fill=C.get("borderColor"),fe){var st=h-2*p;te(Q,Me,De.opacity,{x:p,y:0,width:st,height:y})}else Q.removeTextContent();Q.setStyle($e),Q.ensureState("emphasis").style=Te,Q.ensureState("blur").style=Be,Q.ensureState("select").style=Ze,oa(Q)}ne.add(Q)}function Y(ne,Q){var fe=Ae(Q);fe.dataIndex=o.dataIndex,fe.seriesIndex=r.seriesIndex;var ue=Math.max(h-2*p,0),De=Math.max(v-2*p,0);if(Q.culling=!0,Q.setShape({x:p,y:p,width:ue,height:De,r:D}),g)J(Q);else{Q.invisible=!1;var Me=o.getVisual("style"),$e=Me.fill,Te=Dv(_);Te.fill=$e,Te.decal=Me.decal;var Be=an(x),Ze=an(A),st=an(C);te(Q,$e,Me.opacity,null),Q.setStyle(Te),Q.ensureState("emphasis").style=Be,Q.ensureState("blur").style=Ze,Q.ensureState("select").style=st,oa(Q)}ne.add(Q)}function J(ne){!ne.invisible&&i.push(ne)}function te(ne,Q,fe,ue){var De=f.getModel(ue?Cv:Av),Me=mr(f.get("name"),null),$e=De.getShallow("show");jt(ne,At(f,ue?Cv:Av),{defaultText:$e?Me:null,inheritColor:Q,defaultOpacity:fe,labelFetcher:r,labelDataIndex:o.dataIndex});var Te=ne.getTextContent();if(Te){var Be=Te.style,Ze=Yx(Be.padding||0);ue&&(ne.setTextConfig({layoutRect:ue}),Te.disableLabelLayout=!0),Te.beforeUpdate=function(){var Ot=Math.max((ue?ue.width:ne.shape.width)-Ze[1]-Ze[3],0),ft=Math.max((ue?ue.height:ne.shape.height)-Ze[0]-Ze[2],0);(Be.width!==Ot||Be.height!==ft)&&Te.setStyle({width:Ot,height:ft})},Be.truncateMinChar=2,Be.lineOverflow="truncate",re(Be,ue,c);var st=Te.getState("emphasis");re(st?st.style:null,ue,c)}}function re(ne,Q,fe){var ue=ne?ne.text:null;if(!Q&&fe.isLeafRoot&&ue!=null){var De=r.get("drillDownIcon",!0);ne.text=De?De+" "+ue:ue}}function oe(ne,Q,fe,ue){var De=b!=null&&t[ne][b],Me=a[ne];return De?(t[ne][b]=null,Ce(Me,De)):g||(De=new Q,De instanceof xn&&(De.z2=yT(fe,ue)),nt(Me,De)),e[ne][m]=De}function Ce(ne,Q){var fe=ne[m]={};Q instanceof lc?(fe.oldX=Q.x,fe.oldY=Q.y):fe.oldShape=X({},Q.shape)}function nt(ne,Q){var fe=ne[m]={},ue=o.parentNode,De=Q instanceof ae;if(ue&&(!n||n.direction==="drillDown")){var Me=0,$e=0,Te=a.background[ue.getRawIndex()];!n&&Te&&Te.oldShape&&(Me=Te.oldShape.width,$e=Te.oldShape.height),De?(fe.oldX=0,fe.oldY=$e):fe.oldShape={x:Me,y:$e,width:0,height:0}}fe.fadein=!De}}function yT(r,e){return r*hT+e}var fi=T,bT=ct,Jo=-1,Ke=function(){function r(e){var t=e.mappingMethod,n=e.type,a=this.option=Se(e);this.type=n,this.mappingMethod=t,this._normalizeData=wT[t];var i=r.visualHandlers[n];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[t],t==="piecewise"?(Pl(a),ST(a)):t==="category"?a.categories?_T(a):Pl(a,!0):(ai(t!=="linear"||a.dataExtent),Pl(a))}return r.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},r.prototype.getNormalizer=function(){return Z(this._normalizeData,this)},r.listVisualTypes=function(){return We(r.visualHandlers)},r.isValidType=function(e){return r.visualHandlers.hasOwnProperty(e)},r.eachVisual=function(e,t,n){ct(e)?T(e,t,n):t.call(n,e)},r.mapVisual=function(e,t,n){var a,i=$(e)?[]:ct(e)?{}:(a=!0,null);return r.eachVisual(e,function(o,s){var l=t.call(n,o,s);a?i=l:i[s]=l}),i},r.retrieveVisuals=function(e){var t={},n;return e&&fi(r.visualHandlers,function(a,i){e.hasOwnProperty(i)&&(t[i]=e[i],n=!0)}),n?t:null},r.prepareVisualTypes=function(e){if($(e))e=e.slice();else if(bT(e)){var t=[];fi(e,function(n,a){t.push(a)}),e=t}else return[];return e.sort(function(n,a){return a==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),e},r.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},r.findPieceIndex=function(e,t,n){for(var a,i=1/0,o=0,s=t.length;o<s;o++){var l=t[o].value;if(l!=null){if(l===e||de(l)&&l===e+"")return o;n&&f(l,o)}}for(var o=0,s=t.length;o<s;o++){var u=t[o],c=u.interval,d=u.close;if(c){if(c[0]===-1/0){if(no(d[1],e,c[1]))return o}else if(c[1]===1/0){if(no(d[0],c[0],e))return o}else if(no(d[0],c[0],e)&&no(d[1],e,c[1]))return o;n&&f(c[0],o),n&&f(c[1],o)}}if(n)return e===1/0?t.length-1:e===-1/0?0:a;function f(h,v){var p=Math.abs(h-e);p<i&&(i=p,a=v)}},r.visualHandlers={color:{applyVisual:Ra("color"),getColorMapper:function(){var e=this.option;return Z(e.mappingMethod==="category"?function(t,n){return!n&&(t=this._normalizeData(t)),Ga.call(this,t)}:function(t,n,a){var i=!!a;return!n&&(t=this._normalizeData(t)),a=gl(t,e.parsedVisual,a),i?a:pl(a,"rgba")},this)},_normalizedToVisual:{linear:function(e){return pl(gl(e,this.option.parsedVisual),"rgba")},category:Ga,piecewise:function(e,t){var n=cc.call(this,t);return n==null&&(n=pl(gl(e,this.option.parsedVisual),"rgba")),n},fixed:on}},colorHue:ro(function(e,t){return Ua(e,t)}),colorSaturation:ro(function(e,t){return Ua(e,null,t)}),colorLightness:ro(function(e,t){return Ua(e,null,null,t)}),colorAlpha:ro(function(e,t){return Wo(e,t)}),decal:{applyVisual:Ra("decal"),_normalizedToVisual:{linear:null,category:Ga,piecewise:null,fixed:null}},opacity:{applyVisual:Ra("opacity"),_normalizedToVisual:uc([0,1])},liftZ:{applyVisual:Ra("liftZ"),_normalizedToVisual:{linear:on,category:on,piecewise:on,fixed:on}},symbol:{applyVisual:function(e,t,n){var a=this.mapValueToVisual(e);n("symbol",a)},_normalizedToVisual:{linear:Tv,category:Ga,piecewise:function(e,t){var n=cc.call(this,t);return n==null&&(n=Tv.call(this,e)),n},fixed:on}},symbolSize:{applyVisual:Ra("symbolSize"),_normalizedToVisual:uc([0,1])}},r}();function ST(r){var e=r.pieceList;r.hasSpecialVisual=!1,T(e,function(t,n){t.originIndex=n,t.visual!=null&&(r.hasSpecialVisual=!0)})}function _T(r){var e=r.categories,t=r.categoryMap={},n=r.visual;if(fi(e,function(o,s){t[o]=s}),!$(n)){var a=[];ct(n)?fi(n,function(o,s){var l=t[s];a[l??Jo]=o}):a[Jo]=n,n=J0(r,a)}for(var i=e.length-1;i>=0;i--)n[i]==null&&(delete t[e[i]],e.pop())}function Pl(r,e){var t=r.visual,n=[];ct(t)?fi(t,function(i){n.push(i)}):t!=null&&n.push(t);var a={color:1,symbol:1};!e&&n.length===1&&!a.hasOwnProperty(r.type)&&(n[1]=n[0]),J0(r,n)}function ro(r){return{applyVisual:function(e,t,n){var a=this.mapValueToVisual(e);n("color",r(t("color"),a))},_normalizedToVisual:uc([0,1])}}function Tv(r){var e=this.option.visual;return e[Math.round(ye(r,[0,1],[0,e.length-1],!0))]||{}}function Ra(r){return function(e,t,n){n(r,this.mapValueToVisual(e))}}function Ga(r){var e=this.option.visual;return e[this.option.loop&&r!==Jo?r%e.length:r]}function on(){return this.option.visual[0]}function uc(r){return{linear:function(e){return ye(e,r,this.option.visual,!0)},category:Ga,piecewise:function(e,t){var n=cc.call(this,t);return n==null&&(n=ye(e,r,this.option.visual,!0)),n},fixed:on}}function cc(r){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var n=Ke.findPieceIndex(r,t),a=t[n];if(a&&a.visual)return a.visual[this.type]}}function J0(r,e){return r.visual=e,r.type==="color"&&(r.parsedVisual=G(e,function(t){var n=Zx(t);return n||[0,0,0,1]})),e}var wT={linear:function(r){return ye(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var e=this.option.pieceList,t=Ke.findPieceIndex(r,e,!0);if(t!=null)return ye(t,[0,e.length-1],[0,1],!0)},category:function(r){var e=this.option.categories?this.option.categoryMap[r]:r;return e??Jo},fixed:Gr};function no(r,e,t){return r?e<=t:e<t}var xT="itemStyle",eb=je();const AT={seriesType:"treemap",reset:function(r){var e=r.getData().tree,t=e.root;t.isRemoved()||tb(t,{},r.getViewRoot().getAncestors(),r)}};function tb(r,e,t,n){var a=r.getModel(),i=r.getLayout(),o=r.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var s=a.getModel(xT),l=CT(s,e,n),u=o.ensureUniqueItemVisual(r.dataIndex,"style"),c=s.get("borderColor"),d=s.get("borderColorSaturation"),f;d!=null&&(f=Ev(l),c=DT(d,f)),u.stroke=c;var h=r.viewChildren;if(!h||!h.length)f=Ev(l),u.fill=f;else{var v=TT(r,a,i,s,l,h);T(h,function(p,g){if(p.depth>=t.length||p===t[p.depth]){var m=ET(a,l,p,g,v,n);tb(p,m,t,n)}})}}}function CT(r,e,t){var n=X({},e),a=t.designatedVisualItemStyle;return T(["color","colorAlpha","colorSaturation"],function(i){a[i]=e[i];var o=r.get(i);a[i]=null,o!=null&&(n[i]=o)}),n}function Ev(r){var e=kl(r,"color");if(e){var t=kl(r,"colorAlpha"),n=kl(r,"colorSaturation");return n&&(e=Ua(e,null,null,n)),t&&(e=Wo(e,t)),e}}function DT(r,e){return e!=null?Ua(e,null,null,r):null}function kl(r,e){var t=r[e];if(t!=null&&t!=="none")return t}function TT(r,e,t,n,a,i){if(!(!i||!i.length)){var o=Ol(e,"color")||a.color!=null&&a.color!=="none"&&(Ol(e,"colorAlpha")||Ol(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),u=t.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var c=e.get("colorMappingBy"),d={type:o.name,dataExtent:u,visual:o.range};d.type==="color"&&(c==="index"||c==="id")?(d.mappingMethod="category",d.loop=!0):d.mappingMethod="linear";var f=new Ke(d);return eb(f).drColorMappingBy=c,f}}}function Ol(r,e){var t=r.get(e);return $(t)&&t.length?{name:e,range:t}:null}function ET(r,e,t,n,a,i){var o=X({},e);if(a){var s=a.type,l=s==="color"&&eb(a).drColorMappingBy,u=l==="index"?n:l==="id"?i.mapIdToIndex(t.getId()):t.getValue(r.get("visualDimension"));o[s]=a.mapValueToVisual(u)}return o}var hi=Math.max,es=Math.min,Mv=Tt,Pd=T,rb=["itemStyle","borderWidth"],MT=["itemStyle","gapWidth"],IT=["upperLabel","show"],RT=["upperLabel","height"];const LT={seriesType:"treemap",reset:function(r,e,t,n){var a=t.getWidth(),i=t.getHeight(),o=r.option,s=Zt(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),l=o.size||[],u=W(Mv(s.width,l[0]),a),c=W(Mv(s.height,l[1]),i),d=n&&n.type,f=["treemapZoomToNode","treemapRootToNode"],h=di(n,f,r),v=d==="treemapRender"||d==="treemapMove"?n.rootRect:null,p=r.getViewRoot(),g=q0(p);if(d!=="treemapMove"){var m=d==="treemapZoomToNode"?BT(r,h,p,u,c):v?[v.width,v.height]:[u,c],b=o.sort;b&&b!=="asc"&&b!=="desc"&&(b="desc");var S={squareRatio:o.squareRatio,sort:b,leafDepth:o.leafDepth};p.hostTree.clearLayouts();var y={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(y),nb(p,S,!1,0),y=p.getLayout(),Pd(g,function(_,x){var A=(g[x+1]||p).getValue();_.setLayout(X({dataExtent:[A,A],borderWidth:0,upperHeight:0},y))})}var w=r.getData().tree.root;w.setLayout(zT(s,v,h),!0),r.setLayoutInfo(s),ab(w,new He(-s.x,-s.y,a,i),g,p,0)}};function nb(r,e,t,n){var a,i;if(!r.isRemoved()){var o=r.getLayout();a=o.width,i=o.height;var s=r.getModel(),l=s.get(rb),u=s.get(MT)/2,c=ib(s),d=Math.max(l,c),f=l-u,h=d-u;r.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:c},!0),a=hi(a-2*f,0),i=hi(i-f-h,0);var v=a*i,p=PT(r,s,v,e,t,n);if(p.length){var g={x:f,y:h,width:a,height:i},m=es(a,i),b=1/0,S=[];S.area=0;for(var y=0,w=p.length;y<w;){var _=p[y];S.push(_),S.area+=_.getLayout().area;var x=VT(S,m,e.squareRatio);x<=b?(y++,b=x):(S.area-=S.pop().getLayout().area,Iv(S,m,g,u,!1),m=es(g.width,g.height),S.length=S.area=0,b=1/0)}if(S.length&&Iv(S,m,g,u,!0),!t){var A=s.get("childrenVisibleMin");A!=null&&v<A&&(t=!0)}for(var y=0,w=p.length;y<w;y++)nb(p[y],e,t,n+1)}}}function PT(r,e,t,n,a,i){var o=r.children||[],s=n.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=n.leafDepth!=null&&n.leafDepth<=i;if(a&&!l)return r.viewChildren=[];o=Qe(o,function(h){return!h.isRemoved()}),OT(o,s);var u=NT(e,o,s);if(u.sum===0)return r.viewChildren=[];if(u.sum=kT(e,t,u.sum,s,o),u.sum===0)return r.viewChildren=[];for(var c=0,d=o.length;c<d;c++){var f=o[c].getValue()/u.sum*t;o[c].setLayout({area:f})}return l&&(o.length&&r.setLayout({isLeafRoot:!0},!0),o.length=0),r.viewChildren=o,r.setLayout({dataExtent:u.dataExtent},!0),o}function kT(r,e,t,n,a){if(!n)return t;for(var i=r.get("visibleMin"),o=a.length,s=o,l=o-1;l>=0;l--){var u=a[n==="asc"?o-l-1:l].getValue();u/t*e<i&&(s=l,t-=u)}return n==="asc"?a.splice(0,o-s):a.splice(s,o-s),t}function OT(r,e){return e&&r.sort(function(t,n){var a=e==="asc"?t.getValue()-n.getValue():n.getValue()-t.getValue();return a===0?e==="asc"?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:a}),r}function NT(r,e,t){for(var n=0,a=0,i=e.length;a<i;a++)n+=e[a].getValue();var o=r.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&t?(s=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&s.reverse()):(s=[1/0,-1/0],Pd(e,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:n,dataExtent:s}}function VT(r,e,t){for(var n=0,a=1/0,i=0,o=void 0,s=r.length;i<s;i++)o=r[i].getLayout().area,o&&(o<a&&(a=o),o>n&&(n=o));var l=r.area*r.area,u=e*e*t;return l?hi(u*n/l,l/(u*a)):1/0}function Iv(r,e,t,n,a){var i=e===t.width?0:1,o=1-i,s=["x","y"],l=["width","height"],u=t[s[i]],c=e?r.area/e:0;(a||c>t[l[o]])&&(c=t[l[o]]);for(var d=0,f=r.length;d<f;d++){var h=r[d],v={},p=c?h.getLayout().area/c:0,g=v[l[o]]=hi(c-2*n,0),m=t[s[i]]+t[l[i]]-u,b=d===f-1||m<p?m:p,S=v[l[i]]=hi(b-2*n,0);v[s[o]]=t[s[o]]+es(n,g/2),v[s[i]]=u+es(n,S/2),u+=b,h.setLayout(v,!0)}t[s[o]]+=c,t[l[o]]-=c}function BT(r,e,t,n,a){var i=(e||{}).node,o=[n,a];if(!i||i===t)return o;for(var s,l=n*a,u=l*r.option.zoomToNodeRatio;s=i.parentNode;){for(var c=0,d=s.children,f=0,h=d.length;f<h;f++)c+=d[f].getValue();var v=i.getValue();if(v===0)return o;u*=c/v;var p=s.getModel(),g=p.get(rb),m=Math.max(g,ib(p));u+=4*g*g+(3*g+m)*Math.pow(u,.5),u>uh&&(u=uh),i=s}u<l&&(u=l);var b=Math.pow(u/l,.5);return[n*b,a*b]}function zT(r,e,t){if(e)return{x:e.x,y:e.y};var n={x:0,y:0};if(!t)return n;var a=t.node,i=a.getLayout();if(!i)return n;for(var o=[i.width/2,i.height/2],s=a;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:r.width/2-o[0],y:r.height/2-o[1]}}function ab(r,e,t,n,a){var i=r.getLayout(),o=t[a],s=o&&o===r;if(!(o&&!s||a===t.length&&r!==n)){r.setLayout({isInView:!0,invisible:!s&&!e.intersect(i),isAboveViewRoot:s},!0);var l=new He(e.x-i.x,e.y-i.y,e.width,e.height);Pd(r.viewChildren||[],function(u){ab(u,l,t,n,a+1)})}}function ib(r){return r.get(IT)?r.get(RT):0}function HT(r){r.registerSeriesModel(iT),r.registerChartView(gT),r.registerVisual(AT),r.registerLayout(LT),aT(r)}function GT(r){var e=r.findComponents({mainType:"legend"});!e||!e.length||r.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),a=t.getGraph(),i=a.data,o=n.mapArray(n.getName);i.filterSelf(function(s){var l=i.getItemModel(s),u=l.getShallow("category");if(u!=null){er(u)&&(u=o[u]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(u))return!1}return!0})})}function FT(r){var e={};r.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),a=t.getData(),i={};n.each(function(o){var s=n.getName(o);i["ec-"+s]=o;var l=n.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=t.getColorFromPalette(s,e)),n.setItemVisual(o,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],d=0;d<c.length;d++){var f=l.getShallow(c[d],!0);f!=null&&n.setItemVisual(o,c[d],f)}}),n.count()&&a.each(function(o){var s=a.getItemModel(o),l=s.getShallow("category");if(l!=null){de(l)&&(l=i["ec-"+l]);var u=n.getItemVisual(l,"style"),c=a.ensureUniqueItemVisual(o,"style");X(c,u);for(var d=["symbol","symbolSize","symbolKeepAspect"],f=0;f<d.length;f++)a.setItemVisual(o,d[f],n.getItemVisual(l,d[f]))}})})}function ao(r){return r instanceof Array||(r=[r,r]),r}function WT(r){r.eachSeriesByType("graph",function(e){var t=e.getGraph(),n=e.getEdgeData(),a=ao(e.get("edgeSymbol")),i=ao(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",a&&a[0]),n.setVisual("toSymbol",a&&a[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each(function(o){var s=n.getItemModel(o),l=t.getEdgeByIndex(o),u=ao(s.getShallow("symbol",!0)),c=ao(s.getShallow("symbolSize",!0)),d=s.getModel("lineStyle").getLineStyle(),f=n.ensureUniqueItemVisual(o,"style");switch(X(f,d),f.stroke){case"source":{var h=l.node1.getVisual("style");f.stroke=h&&h.fill;break}case"target":{var h=l.node2.getVisual("style");f.stroke=h&&h.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var dc="-->",Qs=function(r){return r.get("autoCurveness")||null},ob=function(r,e){var t=Qs(r),n=20,a=[];if(er(t))n=t;else if($(t)){r.__curvenessList=t;return}e>n&&(n=e);var i=n%2?n+2:n+3;a=[];for(var o=0;o<i;o++)a.push((o%2?o+1:o)/10*(o%2?-1:1));r.__curvenessList=a},vi=function(r,e,t){var n=[r.id,r.dataIndex].join("."),a=[e.id,e.dataIndex].join(".");return[t.uid,n,a].join(dc)},sb=function(r){var e=r.split(dc);return[e[0],e[2],e[1]].join(dc)},UT=function(r,e){var t=vi(r.node1,r.node2,e);return e.__edgeMap[t]},jT=function(r,e){var t=fc(vi(r.node1,r.node2,e),e),n=fc(vi(r.node2,r.node1,e),e);return t+n},fc=function(r,e){var t=e.__edgeMap;return t[r]?t[r].length:0};function $T(r){Qs(r)&&(r.__curvenessList=[],r.__edgeMap={},ob(r))}function YT(r,e,t,n){if(Qs(t)){var a=vi(r,e,t),i=t.__edgeMap,o=i[sb(a)];i[a]&&!o?i[a].isForward=!0:o&&i[a]&&(o.isForward=!0,i[a].isForward=!1),i[a]=i[a]||[],i[a].push(n)}}function kd(r,e,t,n){var a=Qs(e),i=$(a);if(!a)return null;var o=UT(r,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===t){s=l;break}var u=jT(r,e);ob(e,u),r.lineStyle=r.lineStyle||{};var c=vi(r.node1,r.node2,e),d=e.__curvenessList,f=i||u%2?0:1;if(o.isForward)return d[f+s];var h=sb(c),v=fc(h,e),p=d[s+v+f];return n?i?a&&a[0]===0?(v+f)%2?p:-p:((v%2?0:1)+f)%2?p:-p:(v+f)%2?p:-p:d[s+v+f]}function lb(r){var e=r.coordinateSystem;if(!(e&&e.type!=="view")){var t=r.getGraph();t.eachNode(function(n){var a=n.getModel();n.setLayout([+a.get("x"),+a.get("y")])}),Od(t,r)}}function Od(r,e){r.eachEdge(function(t,n){var a=Ii(t.getModel().get(["lineStyle","curveness"]),-kd(t,e,n,!0),0),i=Vr(t.node1.getLayout()),o=Vr(t.node2.getLayout()),s=[i,o];+a&&s.push([(i[0]+o[0])/2-(i[1]-o[1])*a,(i[1]+o[1])/2-(o[0]-i[0])*a]),t.setLayout(s)})}function ZT(r,e){r.eachSeriesByType("graph",function(t){var n=t.get("layout"),a=t.coordinateSystem;if(a&&a.type!=="view"){var i=t.getData(),o=[];T(a.dimensions,function(f){o=o.concat(i.mapDimensionsAll(f))});for(var s=0;s<i.count();s++){for(var l=[],u=!1,c=0;c<o.length;c++){var d=i.get(o[c],s);isNaN(d)||(u=!0),l.push(d)}u?i.setItemLayout(s,a.dataToPoint(l)):i.setItemLayout(s,[NaN,NaN])}Od(i.graph,t)}else(!n||n==="none")&&lb(t)})}function Fa(r){var e=r.coordinateSystem;if(e.type!=="view")return 1;var t=r.option.nodeScaleRatio,n=e.scaleX,a=e.getZoom(),i=(a-1)*t+1;return i/n}function Wa(r){var e=r.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var Rv=Math.PI,Nl=[];function Nd(r,e,t,n){var a=r.coordinateSystem;if(!(a&&a.type!=="view")){var i=a.getBoundingRect(),o=r.getData(),s=o.graph,l=i.width/2+i.x,u=i.height/2+i.y,c=Math.min(i.width,i.height)/2,d=o.count();if(o.setLayout({cx:l,cy:u}),!!d){if(t){var f=a.pointToData(n),h=f[0],v=f[1],p=[h-l,v-u];Ri(p,p),Xx(p,p,c),t.setLayout([l+p[0],u+p[1]],!0);var g=r.get(["circular","rotateLabel"]);ub(t,g,l,u)}XT[e](r,s,o,c,l,u,d),s.eachEdge(function(m,b){var S=Ii(m.getModel().get(["lineStyle","curveness"]),kd(m,r,b),0),y=Vr(m.node1.getLayout()),w=Vr(m.node2.getLayout()),_,x=(y[0]+w[0])/2,A=(y[1]+w[1])/2;+S&&(S*=3,_=[l*S+x*(1-S),u*S+A*(1-S)]),m.setLayout([y,w,_])})}}}var XT={value:function(r,e,t,n,a,i,o){var s=0,l=t.getSum("value"),u=Math.PI*2/(l||o);e.eachNode(function(c){var d=c.getValue("value"),f=u*(l?d:1)/2;s+=f,c.setLayout([n*Math.cos(s)+a,n*Math.sin(s)+i]),s+=f})},symbolSize:function(r,e,t,n,a,i,o){var s=0;Nl.length=o;var l=Fa(r);e.eachNode(function(d){var f=Wa(d);isNaN(f)&&(f=2),f<0&&(f=0),f*=l;var h=Math.asin(f/2/n);isNaN(h)&&(h=Rv/2),Nl[d.dataIndex]=h,s+=h*2});var u=(2*Rv-s)/o/2,c=0;e.eachNode(function(d){var f=u+Nl[d.dataIndex];c+=f,(!d.getLayout()||!d.getLayout().fixed)&&d.setLayout([n*Math.cos(c)+a,n*Math.sin(c)+i]),c+=f})}};function ub(r,e,t,n){var a=r.getGraphicEl();if(a){var i=r.getModel(),o=i.get(["label","rotate"])||0,s=a.getSymbolPath();if(e){var l=r.getLayout(),u=Math.atan2(l[1]-n,l[0]-t);u<0&&(u=Math.PI*2+u);var c=l[0]<t;c&&(u=u-Math.PI);var d=c?"left":"right";s.setTextConfig({rotation:-u,position:d,origin:"center"});var f=s.ensureState("emphasis");X(f.textConfig||(f.textConfig={}),{position:d})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function qT(r){r.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&Nd(e,"symbolSize")})}var Hn=Xu;function QT(r,e,t){for(var n=r,a=e,i=t.rect,o=i.width,s=i.height,l=[i.x+o/2,i.y+s/2],u=t.gravity==null?.1:t.gravity,c=0;c<n.length;c++){var d=n[c];d.p||(d.p=qx(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=Vr(d.p),d.edges=null}var f=t.friction==null?.6:t.friction,h=f,v,p;return{warmUp:function(){h=f*.8},setFixed:function(g){n[g].fixed=!0},setUnfixed:function(g){n[g].fixed=!1},beforeStep:function(g){v=g},afterStep:function(g){p=g},step:function(g){v&&v(n,a);for(var m=[],b=n.length,S=0;S<a.length;S++){var y=a[S];if(!y.ignoreForceLayout){var w=y.n1,_=y.n2;Jn(m,_.p,w.p);var x=ch(m)-y.d,A=_.w/(w.w+_.w);isNaN(A)&&(A=0),Ri(m,m),!w.fixed&&Hn(w.p,w.p,m,A*x*h),!_.fixed&&Hn(_.p,_.p,m,-(1-A)*x*h)}}for(var S=0;S<b;S++){var C=n[S];C.fixed||(Jn(m,l,C.p),Hn(C.p,C.p,m,u*h))}for(var S=0;S<b;S++)for(var w=n[S],D=S+1;D<b;D++){var _=n[D];Jn(m,_.p,w.p);var x=ch(m);x===0&&(Qx(m,Math.random()-.5,Math.random()-.5),x=1);var E=(w.rep+_.rep)/x/x;!w.fixed&&Hn(w.pp,w.pp,m,E),!_.fixed&&Hn(_.pp,_.pp,m,-E)}for(var M=[],S=0;S<b;S++){var C=n[S];C.fixed||(Jn(M,C.p,C.pp),Hn(C.p,C.p,M,h),pt(C.pp,C.p))}h=h*.992;var I=h<.01;p&&p(n,a,I),g&&g(I)}}}function KT(r){r.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var n=e.preservedPoints||{},a=e.getGraph(),i=a.data,o=a.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?i.each(function(S){var y=i.getId(S);i.setItemLayout(S,n[y]||[NaN,NaN])}):!l||l==="none"?lb(e):l==="circular"&&Nd(e,"value");var u=i.getDataExtent("value"),c=o.getDataExtent("value"),d=s.get("repulsion"),f=s.get("edgeLength"),h=$(d)?d:[d,d],v=$(f)?f:[f,f];v=[v[1],v[0]];var p=i.mapArray("value",function(S,y){var w=i.getItemLayout(y),_=ye(S,u,h);return isNaN(_)&&(_=(h[0]+h[1])/2),{w:_,rep:_,fixed:i.getItemModel(y).get("fixed"),p:!w||isNaN(w[0])||isNaN(w[1])?null:w}}),g=o.mapArray("value",function(S,y){var w=a.getEdgeByIndex(y),_=ye(S,c,v);isNaN(_)&&(_=(v[0]+v[1])/2);var x=w.getModel(),A=Ii(w.getModel().get(["lineStyle","curveness"]),-kd(w,e,y,!0),0);return{n1:p[w.node1.dataIndex],n2:p[w.node2.dataIndex],d:_,curveness:A,ignoreForceLayout:x.get("ignoreForceLayout")}}),m=t.getBoundingRect(),b=QT(p,g,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});b.beforeStep(function(S,y){for(var w=0,_=S.length;w<_;w++)S[w].fixed&&pt(S[w].p,a.getNodeByIndex(w).getLayout())}),b.afterStep(function(S,y,w){for(var _=0,x=S.length;_<x;_++)S[_].fixed||a.getNodeByIndex(_).setLayout(S[_].p),n[i.getId(_)]=S[_].p;for(var _=0,x=y.length;_<x;_++){var A=y[_],C=a.getEdgeByIndex(_),D=A.n1.p,E=A.n2.p,M=C.getLayout();M=M?M.slice():[],M[0]=M[0]||[],M[1]=M[1]||[],pt(M[0],D),pt(M[1],E),+A.curveness&&(M[2]=[(D[0]+E[0])/2-(D[1]-E[1])*A.curveness,(D[1]+E[1])/2-(E[0]-D[0])*A.curveness]),C.setLayout(M)}}),e.forceLayout=b,e.preservedPoints=n,b.step()}else e.forceLayout=null})}function JT(r,e,t){var n=X(r.getBoxLayoutParams(),{aspect:t});return Zt(n,{width:e.getWidth(),height:e.getHeight()})}function eE(r,e){var t=[];return r.eachSeriesByType("graph",function(n){var a=n.get("coordinateSystem");if(!a||a==="view"){var i=n.getData(),o=i.mapArray(function(g){var m=i.getItemModel(g);return[+m.get("x"),+m.get("y")]}),s=[],l=[];Hs(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),c=JT(n,e,u);isNaN(u)&&(s=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var d=l[0]-s[0],f=l[1]-s[1],h=c.width,v=c.height,p=n.coordinateSystem=new Bi;p.zoomLimit=n.get("scaleLimit"),p.setBoundingRect(s[0],s[1],d,f),p.setViewRect(c.x,c.y,h,v),p.setCenter(n.get("center"),e),p.setZoom(n.get("zoom")),t.push(p)}}),t}var Lv=Qt.prototype,Vl=jy.prototype,cb=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}();(function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(cb);function Bl(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var tE=function(r){V(e,r);function e(t){var n=r.call(this,t)||this;return n.type="ec-line",n}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new cb},e.prototype.buildPath=function(t,n){Bl(n)?Lv.buildPath.call(this,t,n):Vl.buildPath.call(this,t,n)},e.prototype.pointAt=function(t){return Bl(this.shape)?Lv.pointAt.call(this,t):Vl.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var n=this.shape,a=Bl(n)?[n.x2-n.x1,n.y2-n.y1]:Vl.tangentAt.call(this,t);return Ri(a,a)},e}(ot),zl=["fromSymbol","toSymbol"];function Pv(r){return"_"+r+"Type"}function kv(r,e,t){var n=e.getItemVisual(t,r);if(!n||n==="none")return n;var a=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),o=e.getItemVisual(t,r+"Offset"),s=e.getItemVisual(t,r+"KeepAspect"),l=Di(a),u=Li(o||0,l);return n+l+u+(i||"")+(s||"")}function Ov(r,e,t){var n=e.getItemVisual(t,r);if(!(!n||n==="none")){var a=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),o=e.getItemVisual(t,r+"Offset"),s=e.getItemVisual(t,r+"KeepAspect"),l=Di(a),u=Li(o||0,l),c=mt(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=r,c}}function rE(r){var e=new tE({name:"line",subPixelOptimize:!0});return hc(e.shape,r),e}function hc(r,e){r.x1=e[0][0],r.y1=e[0][1],r.x2=e[1][0],r.y2=e[1][1],r.percent=1;var t=e[2];t?(r.cpx1=t[0],r.cpy1=t[1]):(r.cpx1=NaN,r.cpy1=NaN)}var Vd=function(r){V(e,r);function e(t,n,a){var i=r.call(this)||this;return i._createLine(t,n,a),i}return e.prototype._createLine=function(t,n,a){var i=t.hostModel,o=t.getItemLayout(n),s=rE(o);s.shape.percent=0,xt(s,{shape:{percent:1}},i,n),this.add(s),T(zl,function(l){var u=Ov(l,t,n);this.add(u),this[Pv(l)]=kv(l,t,n)},this),this._updateCommonStl(t,n,a)},e.prototype.updateData=function(t,n,a){var i=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(n),l={shape:{}};hc(l.shape,s),Ne(o,l,i,n),T(zl,function(u){var c=kv(u,t,n),d=Pv(u);if(this[d]!==c){this.remove(this.childOfName(u));var f=Ov(u,t,n);this.add(f)}this[d]=c},this),this._updateCommonStl(t,n,a)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,n,a){var i=t.hostModel,o=this.childOfName("line"),s=a&&a.emphasisLineStyle,l=a&&a.blurLineStyle,u=a&&a.selectLineStyle,c=a&&a.labelStatesModels,d=a&&a.emphasisDisabled,f=a&&a.focus,h=a&&a.blurScope;if(!a||t.hasItemOption){var v=t.getItemModel(n),p=v.getModel("emphasis");s=p.getModel("lineStyle").getLineStyle(),l=v.getModel(["blur","lineStyle"]).getLineStyle(),u=v.getModel(["select","lineStyle"]).getLineStyle(),d=p.get("disabled"),f=p.get("focus"),h=p.get("blurScope"),c=At(v)}var g=t.getItemVisual(n,"style"),m=g.stroke;o.useStyle(g),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,T(zl,function(_){var x=this.childOfName(_);if(x){x.setColor(m),x.style.opacity=g.opacity;for(var A=0;A<qu.length;A++){var C=qu[A],D=o.getState(C);if(D){var E=D.style||{},M=x.ensureState(C),I=M.style||(M.style={});E.stroke!=null&&(I[x.__isEmptyBrush?"stroke":"fill"]=E.stroke),E.opacity!=null&&(I.opacity=E.opacity)}}x.markRedraw()}},this);var b=i.getRawValue(n);jt(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(_,x){return i.getFormattedLabel(_,x,t.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(b==null?t.getName(n):isFinite(b)?ad(b):b)+""});var S=this.getTextContent();if(S){var y=c.normal;S.__align=S.style.align,S.__verticalAlign=S.style.verticalAlign,S.__position=y.get("position")||"middle";var w=y.get("distance");$(w)||(w=[w,w]),S.__labelDistance=w}this.setTextConfig({position:null,local:!0,inside:!1}),Ye(this,f,h,d)},e.prototype.highlight=function(){ii(this)},e.prototype.downplay=function(){oi(this)},e.prototype.updateLayout=function(t,n){this.setLinePoints(t.getItemLayout(n))},e.prototype.setLinePoints=function(t){var n=this.childOfName("line");hc(n.shape,t),n.dirty()},e.prototype.beforeUpdate=function(){var t=this,n=t.childOfName("fromSymbol"),a=t.childOfName("toSymbol"),i=t.getTextContent();if(!n&&!a&&(!i||i.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),d=l.pointAt(u),f=Jn([],d,c);Ri(f,f);function h(D,E){var M=D.__specifiedRotation;if(M==null){var I=l.tangentAt(E);D.attr("rotation",(E===1?-1:1)*Math.PI/2-Math.atan2(I[1],I[0]))}else D.attr("rotation",M)}if(n&&(n.setPosition(c),h(n,0),n.scaleX=n.scaleY=o*u,n.markRedraw()),a&&(a.setPosition(d),h(a,1),a.scaleX=a.scaleY=o*u,a.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var v=void 0,p=void 0,g=i.__labelDistance,m=g[0]*o,b=g[1]*o,S=u/2,y=l.tangentAt(S),w=[y[1],-y[0]],_=l.pointAt(S);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var x=y[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var A=-Math.atan2(y[1],y[0]);d[0]<c[0]&&(A=Math.PI+A),i.rotation=A}var C=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-b,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=b,p="top";break;default:C=0,p="middle"}switch(i.__position){case"end":i.x=f[0]*m+d[0],i.y=f[1]*b+d[1],v=f[0]>.8?"left":f[0]<-.8?"right":"center",p=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":i.x=-f[0]*m+c[0],i.y=-f[1]*b+c[1],v=f[0]>.8?"right":f[0]<-.8?"left":"center",p=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=m*x+c[0],i.y=c[1]+C,v=y[0]<0?"right":"left",i.originX=-m*x,i.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=_[0],i.y=_[1]+C,v="center",i.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-m*x+d[0],i.y=d[1]+C,v=y[0]>=0?"right":"left",i.originX=m*x,i.originY=-C;break}i.scaleX=i.scaleY=o,i.setStyle({verticalAlign:i.__verticalAlign||p,align:i.__align||v})}},e}(ae),Bd=function(){function r(e){this.group=new ae,this._LineCtor=e||Vd}return r.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var n=this,a=n.group,i=n._lineData;n._lineData=e,i||a.removeAll();var o=Nv(e);e.diff(i).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(i,e,l,s,o)}).remove(function(s){a.remove(i.getItemGraphicEl(s))}).execute()},r.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Nv(e),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function n(s){!s.isGroup&&!nE(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var i=t.getItemLayout(a);if(Hl(i)){var o=new this._LineCtor(t,a,this._seriesScope);o.traverse(n),this.group.add(o),t.setItemGraphicEl(a,o),this._progressiveEls.push(o)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(e){Gs(this._progressiveEls||this.group,e)},r.prototype._doAdd=function(e,t,n){var a=e.getItemLayout(t);if(Hl(a)){var i=new this._LineCtor(e,t,n);e.setItemGraphicEl(t,i),this.group.add(i)}},r.prototype._doUpdate=function(e,t,n,a,i){var o=e.getItemGraphicEl(n);if(!Hl(t.getItemLayout(a))){this.group.remove(o);return}o?o.updateData(t,a,i):o=new this._LineCtor(t,a,i),t.setItemGraphicEl(a,o),this.group.add(o)},r}();function nE(r){return r.animators&&r.animators.length>0}function Nv(r){var e=r.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:At(e)}}function Vv(r){return isNaN(r[0])||isNaN(r[1])}function Hl(r){return r&&!Vv(r[0])&&!Vv(r[1])}var Gl=[],Fl=[],Wl=[],Gn=Zy,Ul=Jx,Bv=Math.abs;function zv(r,e,t){for(var n=r[0],a=r[1],i=r[2],o=1/0,s,l=t*t,u=.1,c=.1;c<=.9;c+=.1){Gl[0]=Gn(n[0],a[0],i[0],c),Gl[1]=Gn(n[1],a[1],i[1],c);var d=Bv(Ul(Gl,e)-l);d<o&&(o=d,s=c)}for(var f=0;f<32;f++){var h=s+u;Fl[0]=Gn(n[0],a[0],i[0],s),Fl[1]=Gn(n[1],a[1],i[1],s),Wl[0]=Gn(n[0],a[0],i[0],h),Wl[1]=Gn(n[1],a[1],i[1],h);var d=Ul(Fl,e)-l;if(Bv(d)<.01)break;var v=Ul(Wl,e)-l;u/=2,d<0?v>=0?s=s+u:s=s-u:v>=0?s=s-u:s=s+u}return s}function jl(r,e){var t=[],n=Kx,a=[[],[],[]],i=[[],[]],o=[];e/=2,r.eachEdge(function(s,l){var u=s.getLayout(),c=s.getVisual("fromSymbol"),d=s.getVisual("toSymbol");u.__original||(u.__original=[Vr(u[0]),Vr(u[1])],u[2]&&u.__original.push(Vr(u[2])));var f=u.__original;if(u[2]!=null){if(pt(a[0],f[0]),pt(a[1],f[2]),pt(a[2],f[1]),c&&c!=="none"){var h=Wa(s.node1),v=zv(a,f[0],h*e);n(a[0][0],a[1][0],a[2][0],v,t),a[0][0]=t[3],a[1][0]=t[4],n(a[0][1],a[1][1],a[2][1],v,t),a[0][1]=t[3],a[1][1]=t[4]}if(d&&d!=="none"){var h=Wa(s.node2),v=zv(a,f[1],h*e);n(a[0][0],a[1][0],a[2][0],v,t),a[1][0]=t[1],a[2][0]=t[2],n(a[0][1],a[1][1],a[2][1],v,t),a[1][1]=t[1],a[2][1]=t[2]}pt(u[0],a[0]),pt(u[1],a[2]),pt(u[2],a[1])}else{if(pt(i[0],f[0]),pt(i[1],f[1]),Jn(o,i[1],i[0]),Ri(o,o),c&&c!=="none"){var h=Wa(s.node1);Xu(i[0],i[0],o,h*e)}if(d&&d!=="none"){var h=Wa(s.node2);Xu(i[1],i[1],o,-h*e)}pt(u[0],i[0]),pt(u[1],i[1])}})}function Hv(r){return r.type==="view"}var aE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){var a=new Ls,i=new Bd,o=this.group;this._controller=new Vi(n.getZr()),this._controllerHost={target:o},o.add(a.group),o.add(i.group),this._symbolDraw=a,this._lineDraw=i,this._firstRender=!0},e.prototype.render=function(t,n,a){var i=this,o=t.coordinateSystem;this._model=t;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(Hv(o)){var c={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(c):Ne(u,c,t)}jl(t.getGraph(),Fa(t));var d=t.getData();s.updateData(d);var f=t.getEdgeData();l.updateData(f),this._updateNodeAndLinkScale(),this._updateController(t,n,a),clearTimeout(this._layoutTimeout);var h=t.forceLayout,v=t.get(["force","layoutAnimation"]);h&&this._startForceLayoutIteration(h,v);var p=t.get("layout");d.graph.eachNode(function(S){var y=S.dataIndex,w=S.getGraphicEl(),_=S.getModel();if(w){w.off("drag").off("dragend");var x=_.get("draggable");x&&w.on("drag",function(C){switch(p){case"force":h.warmUp(),!i._layouting&&i._startForceLayoutIteration(h,v),h.setFixed(y),d.setItemLayout(y,[w.x,w.y]);break;case"circular":d.setItemLayout(y,[w.x,w.y]),S.setLayout({fixed:!0},!0),Nd(t,"symbolSize",S,[C.offsetX,C.offsetY]),i.updateLayout(t);break;case"none":default:d.setItemLayout(y,[w.x,w.y]),Od(t.getGraph(),t),i.updateLayout(t);break}}).on("dragend",function(){h&&h.setUnfixed(y)}),w.setDraggable(x,!!_.get("cursor"));var A=_.get(["emphasis","focus"]);A==="adjacency"&&(Ae(w).focus=S.getAdjacentDataIndices())}}),d.graph.eachEdge(function(S){var y=S.getGraphicEl(),w=S.getModel().get(["emphasis","focus"]);y&&w==="adjacency"&&(Ae(y).focus={edge:[S.dataIndex],node:[S.node1.dataIndex,S.node2.dataIndex]})});var g=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),m=d.getLayout("cx"),b=d.getLayout("cy");d.graph.eachNode(function(S){ub(S,g,m,b)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,n){var a=this;(function i(){t.step(function(o){a.updateLayout(a._model),(a._layouting=!o)&&(n?a._layoutTimeout=setTimeout(i,16):i())})})()},e.prototype._updateController=function(t,n,a){var i=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,c,d){var f=l.getBoundingRect();return f.applyTransform(l.transform),f.contain(c,d)&&!Zs(u,a,t)}),!Hv(t.coordinateSystem)){o.disable();return}o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Dd(s,u.dx,u.dy),a.dispatchAction({seriesId:t.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Td(s,u.scale,u.originX,u.originY),a.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),i._updateNodeAndLinkScale(),jl(t.getGraph(),Fa(t)),i._lineDraw.updateLayout(),a.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,n=t.getData(),a=Fa(t);n.eachItemGraphicEl(function(i,o){i&&i.setSymbolScale(a)})},e.prototype.updateLayout=function(t){jl(t.getGraph(),Fa(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Je);function Fn(r){return"_EC_"+r}var iE=function(){function r(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var n=this._nodesMap;if(!n[Fn(e)]){var a=new sn(e,t);return a.hostGraph=this,this.nodes.push(a),n[Fn(e)]=a,a}},r.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},r.prototype.getNodeById=function(e){return this._nodesMap[Fn(e)]},r.prototype.addEdge=function(e,t,n){var a=this._nodesMap,i=this._edgesMap;if(er(e)&&(e=this.nodes[e]),er(t)&&(t=this.nodes[t]),e instanceof sn||(e=a[Fn(e)]),t instanceof sn||(t=a[Fn(t)]),!(!e||!t)){var o=e.id+"-"+t.id,s=new db(e,t,n);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),i[o]=s,s}},r.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},r.prototype.getEdge=function(e,t){e instanceof sn&&(e=e.id),t instanceof sn&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},r.prototype.eachNode=function(e,t){for(var n=this.nodes,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&e.call(t,n[i],i)},r.prototype.eachEdge=function(e,t){for(var n=this.edges,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&e.call(t,n[i],i)},r.prototype.breadthFirstTraverse=function(e,t,n,a){if(t instanceof sn||(t=this._nodesMap[Fn(t)]),!!t){for(var i=n==="out"?"outEdges":n==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(a,t,null))for(var s=[t];s.length;)for(var l=s.shift(),u=l[i],o=0;o<u.length;o++){var c=u[o],d=c.node1===l?c.node2:c.node1;if(!d.__visited){if(e.call(a,d,l))return;s.push(d),d.__visited=!0}}}},r.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,a=this.edges,i=0,o=n.length;i<o;i++)n[i].dataIndex=-1;for(var i=0,o=e.count();i<o;i++)n[e.getRawIndex(i)].dataIndex=i;t.filterSelf(function(s){var l=a[t.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var i=0,o=a.length;i<o;i++)a[i].dataIndex=-1;for(var i=0,o=t.count();i<o;i++)a[t.getRawIndex(i)].dataIndex=i},r.prototype.clone=function(){for(var e=new r(this._directed),t=this.nodes,n=this.edges,a=0;a<t.length;a++)e.addNode(t[a].id,t[a].dataIndex);for(var a=0;a<n.length;a++){var i=n[a];e.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return e},r}(),sn=function(){function r(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,n=t.data.getItemModel(this.dataIndex);return n.getModel(e)}},r.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},r.prototype.getTrajectoryDataIndices=function(){for(var e=le(),t=le(),n=0;n<this.edges.length;n++){var a=this.edges[n];if(!(a.dataIndex<0)){e.set(a.dataIndex,!0);for(var i=[a.node1],o=[a.node2],s=0;s<i.length;){var l=i[s];s++,t.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)e.set(l.inEdges[u].dataIndex,!0),i.push(l.inEdges[u].node1)}for(s=0;s<o.length;){var c=o[s];s++,t.set(c.dataIndex,!0);for(var u=0;u<c.outEdges.length;u++)e.set(c.outEdges[u].dataIndex,!0),o.push(c.outEdges[u].node2)}}}return{edge:e.keys(),node:t.keys()}},r}(),db=function(){function r(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=n??-1}return r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,n=t.edgeData.getItemModel(this.dataIndex);return n.getModel(e)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var e=le(),t=le();e.set(this.dataIndex,!0);for(var n=[this.node1],a=[this.node2],i=0;i<n.length;){var o=n[i];i++,t.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),n.push(o.inEdges[s].node1)}for(i=0;i<a.length;){var l=a[i];i++,t.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),a.push(l.outEdges[s].node2)}return{edge:e.keys(),node:t.keys()}},r}();function fb(r,e){return{getValue:function(t){var n=this[r][e];return n.getStore().get(n.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,n){this.dataIndex>=0&&this[r][e].setItemVisual(this.dataIndex,t,n)},getVisual:function(t){return this[r][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,n){this.dataIndex>=0&&this[r][e].setItemLayout(this.dataIndex,t,n)},getLayout:function(){return this[r][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][e].getRawIndex(this.dataIndex)}}}rr(sn,fb("hostGraph","data"));rr(db,fb("hostGraph","edgeData"));function hb(r,e,t,n,a){for(var i=new iE(n),o=0;o<r.length;o++)i.addNode(Tt(r[o].id,r[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<e.length;o++){var c=e[o],d=c.source,f=c.target;i.addEdge(d,f,u)&&(l.push(c),s.push(Tt(mr(c.id,null),d+" > "+f)),u++)}var h=t.get("coordinateSystem"),v;if(h==="cartesian2d"||h==="polar")v=ma(r,t);else{var p=Xy.get(h),g=p?p.dimensions||[]:[];Oe(g,"value")<0&&g.concat(["value"]);var m=rd(r,{coordDimensions:g,encodeDefine:t.getEncode()}).dimensions;v=new It(m,t),v.initData(r)}var b=new It(["value"],t);return b.initData(l,s),a&&a(v,b),Z0({mainData:v,struct:i,structAttr:"graph",datas:{node:v,edge:b},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var oE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments);var n=this;function a(){return n._categoriesData}this.legendVisualProvider=new Ps(a,a),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){r.prototype.mergeDefaultAndTheme.apply(this,arguments),zs(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,n){var a=t.edges||t.links||[],i=t.data||t.nodes||[],o=this;if(i&&a){$T(this);var s=hb(i,a,this,!0,l);return T(s.edges,function(u){YT(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,c){u.wrapMethod("getItemModel",function(v){var p=o._categoriesModels,g=v.getShallow("category"),m=p[g];return m&&(m.parentModel=v.parentModel,v.parentModel=m),v});var d=Pt.prototype.getModel;function f(v,p){var g=d.call(this,v,p);return g.resolveParentPath=h,g}c.wrapMethod("getItemModel",function(v){return v.resolveParentPath=h,v.getModel=f,v});function h(v){if(v&&(v[0]==="label"||v[1]==="label")){var p=v.slice();return v[0]==="label"?p[0]="edgeLabel":v[1]==="label"&&(p[1]="edgeLabel"),p}return v}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,n,a){if(a==="edge"){var i=this.getData(),o=this.getDataParams(t,a),s=i.graph.getEdgeByIndex(t),l=i.getName(s.node1.dataIndex),u=i.getName(s.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),Ct("nameValue",{name:c.join(" > "),value:o.value,noValue:o.value==null})}var d=eA({series:this,dataIndex:t,multipleSeries:n});return d},e.prototype._updateCategoriesData=function(){var t=G(this.option.categories||[],function(a){return a.value!=null?a:X({value:0},a)}),n=new It(["value"],this);n.initData(t),this._categoriesData=n,this._categoriesModels=n.mapArray(function(a){return n.getItemModel(a)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(rt),sE={type:"graphRoam",event:"graphRoam",update:"none"};function lE(r){r.registerChartView(aE),r.registerSeriesModel(oE),r.registerProcessor(GT),r.registerVisual(FT),r.registerVisual(WT),r.registerLayout(ZT),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,qT),r.registerLayout(KT),r.registerCoordinateSystem("graphView",{dimensions:Bi.dimensions,create:eE}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Gr),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Gr),r.registerAction(sE,function(e,t,n){t.eachComponent({mainType:"series",query:e},function(a){var i=a.coordinateSystem,o=Md(i,e,void 0,n);a.setCenter&&a.setCenter(o.center),a.setZoom&&a.setZoom(o.zoom)})})}var uE=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),cE=function(r){V(e,r);function e(t){var n=r.call(this,t)||this;return n.type="pointer",n}return e.prototype.getDefaultShape=function(){return new uE},e.prototype.buildPath=function(t,n){var a=Math.cos,i=Math.sin,o=n.r,s=n.width,l=n.angle,u=n.x-a(l)*s*(s>=o/3?1:2),c=n.y-i(l)*s*(s>=o/3?1:2);l=n.angle-Math.PI/2,t.moveTo(u,c),t.lineTo(n.x+a(l)*s,n.y+i(l)*s),t.lineTo(n.x+a(n.angle)*o,n.y+i(n.angle)*o),t.lineTo(n.x-a(l)*s,n.y-i(l)*s),t.lineTo(u,c)},e}(ot);function dE(r,e){var t=r.get("center"),n=e.getWidth(),a=e.getHeight(),i=Math.min(n,a),o=W(t[0],e.getWidth()),s=W(t[1],e.getHeight()),l=W(r.get("radius"),i/2);return{cx:o,cy:s,r:l}}function io(r,e){var t=r==null?"":r+"";return e&&(de(e)?t=e.replace("{value}",t):xe(e)&&(t=e(r))),t}var fE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){this.group.removeAll();var i=t.get(["axisLine","lineStyle","color"]),o=dE(t,a);this._renderMain(t,n,a,i,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,n,a,i,o){var s=this.group,l=t.get("clockwise"),u=-t.get("startAngle")/180*Math.PI,c=-t.get("endAngle")/180*Math.PI,d=t.getModel("axisLine"),f=d.get("roundCap"),h=f?dh:An,v=d.get("show"),p=d.getModel("lineStyle"),g=p.get("width"),m=[u,c];tA(m,!l),u=m[0],c=m[1];for(var b=c-u,S=u,y=[],w=0;v&&w<i.length;w++){var _=Math.min(Math.max(i[w][0],0),1);c=u+b*_;var x=new h({shape:{startAngle:S,endAngle:c,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-g,r:o.r},silent:!0});x.setStyle({fill:i[w][1]}),x.setStyle(p.getLineStyle(["color","width"])),y.push(x),S=c}y.reverse(),T(y,function(C){return s.add(C)});var A=function(C){if(C<=0)return i[0][1];var D;for(D=0;D<i.length;D++)if(i[D][0]>=C&&(D===0?0:i[D-1][0])<C)return i[D][1];return i[D-1][1]};this._renderTicks(t,n,a,A,o,u,c,l,g),this._renderTitleAndDetail(t,n,a,A,o),this._renderAnchor(t,o),this._renderPointer(t,n,a,A,o,u,c,l,g)},e.prototype._renderTicks=function(t,n,a,i,o,s,l,u,c){for(var d=this.group,f=o.cx,h=o.cy,v=o.r,p=+t.get("min"),g=+t.get("max"),m=t.getModel("splitLine"),b=t.getModel("axisTick"),S=t.getModel("axisLabel"),y=t.get("splitNumber"),w=b.get("splitNumber"),_=W(m.get("length"),v),x=W(b.get("length"),v),A=s,C=(l-s)/y,D=C/w,E=m.getModel("lineStyle").getLineStyle(),M=b.getModel("lineStyle").getLineStyle(),I=m.get("distance"),R,L,P=0;P<=y;P++){if(R=Math.cos(A),L=Math.sin(A),m.get("show")){var N=I?I+c:c,z=new Qt({shape:{x1:R*(v-N)+f,y1:L*(v-N)+h,x2:R*(v-_-N)+f,y2:L*(v-_-N)+h},style:E,silent:!0});E.stroke==="auto"&&z.setStyle({stroke:i(P/y)}),d.add(z)}if(S.get("show")){var N=S.get("distance")+I,H=io(ad(P/y*(g-p)+p),S.get("formatter")),U=i(P/y),Y=R*(v-_-N)+f,J=L*(v-_-N)+h,te=S.get("rotate"),re=0;te==="radial"?(re=-A+2*Math.PI,re>Math.PI/2&&(re+=Math.PI)):te==="tangential"?re=-A-Math.PI/2:er(te)&&(re=te*Math.PI/180),re===0?d.add(new Ie({style:Ue(S,{text:H,x:Y,y:J,verticalAlign:L<-.8?"top":L>.8?"bottom":"middle",align:R<-.4?"left":R>.4?"right":"center"},{inheritColor:U}),silent:!0})):d.add(new Ie({style:Ue(S,{text:H,x:Y,y:J,verticalAlign:"middle",align:"center"},{inheritColor:U}),silent:!0,originX:Y,originY:J,rotation:re}))}if(b.get("show")&&P!==y){var N=b.get("distance");N=N?N+c:c;for(var oe=0;oe<=w;oe++){R=Math.cos(A),L=Math.sin(A);var Ce=new Qt({shape:{x1:R*(v-N)+f,y1:L*(v-N)+h,x2:R*(v-x-N)+f,y2:L*(v-x-N)+h},silent:!0,style:M});M.stroke==="auto"&&Ce.setStyle({stroke:i((P+oe/w)/y)}),d.add(Ce),A+=D}A-=D}else A+=C}},e.prototype._renderPointer=function(t,n,a,i,o,s,l,u,c){var d=this.group,f=this._data,h=this._progressEls,v=[],p=t.get(["pointer","show"]),g=t.getModel("progress"),m=g.get("show"),b=t.getData(),S=b.mapDimension("value"),y=+t.get("min"),w=+t.get("max"),_=[y,w],x=[s,l];function A(D,E){var M=b.getItemModel(D),I=M.getModel("pointer"),R=W(I.get("width"),o.r),L=W(I.get("length"),o.r),P=t.get(["pointer","icon"]),N=I.get("offsetCenter"),z=W(N[0],o.r),H=W(N[1],o.r),U=I.get("keepAspect"),Y;return P?Y=mt(P,z-R/2,H-L,R,L,null,U):Y=new cE({shape:{angle:-Math.PI/2,width:R,r:L,x:z,y:H}}),Y.rotation=-(E+Math.PI/2),Y.x=o.cx,Y.y=o.cy,Y}function C(D,E){var M=g.get("roundCap"),I=M?dh:An,R=g.get("overlap"),L=R?g.get("width"):c/b.count(),P=R?o.r-L:o.r-(D+1)*L,N=R?o.r:o.r-D*L,z=new I({shape:{startAngle:s,endAngle:E,cx:o.cx,cy:o.cy,clockwise:u,r0:P,r:N}});return R&&(z.z2=ye(b.get(S,D),[y,w],[100,0],!0)),z}(m||p)&&(b.diff(f).add(function(D){var E=b.get(S,D);if(p){var M=A(D,s);xt(M,{rotation:-((isNaN(+E)?x[0]:ye(E,_,x,!0))+Math.PI/2)},t),d.add(M),b.setItemGraphicEl(D,M)}if(m){var I=C(D,s),R=g.get("clip");xt(I,{shape:{endAngle:ye(E,_,x,R)}},t),d.add(I),fh(t.seriesIndex,b.dataType,D,I),v[D]=I}}).update(function(D,E){var M=b.get(S,D);if(p){var I=f.getItemGraphicEl(E),R=I?I.rotation:s,L=A(D,R);L.rotation=R,Ne(L,{rotation:-((isNaN(+M)?x[0]:ye(M,_,x,!0))+Math.PI/2)},t),d.add(L),b.setItemGraphicEl(D,L)}if(m){var P=h[E],N=P?P.shape.endAngle:s,z=C(D,N),H=g.get("clip");Ne(z,{shape:{endAngle:ye(M,_,x,H)}},t),d.add(z),fh(t.seriesIndex,b.dataType,D,z),v[D]=z}}).execute(),b.each(function(D){var E=b.getItemModel(D),M=E.getModel("emphasis"),I=M.get("focus"),R=M.get("blurScope"),L=M.get("disabled");if(p){var P=b.getItemGraphicEl(D),N=b.getItemVisual(D,"style"),z=N.fill;if(P instanceof hr){var H=P.style;P.useStyle(X({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},N))}else P.useStyle(N),P.type!=="pointer"&&P.setColor(z);P.setStyle(E.getModel(["pointer","itemStyle"]).getItemStyle()),P.style.fill==="auto"&&P.setStyle("fill",i(ye(b.get(S,D),_,[0,1],!0))),P.z2EmphasisLift=0,Lt(P,E),Ye(P,I,R,L)}if(m){var U=v[D];U.useStyle(b.getItemVisual(D,"style")),U.setStyle(E.getModel(["progress","itemStyle"]).getItemStyle()),U.z2EmphasisLift=0,Lt(U,E),Ye(U,I,R,L)}}),this._progressEls=v)},e.prototype._renderAnchor=function(t,n){var a=t.getModel("anchor"),i=a.get("show");if(i){var o=a.get("size"),s=a.get("icon"),l=a.get("offsetCenter"),u=a.get("keepAspect"),c=mt(s,n.cx-o/2+W(l[0],n.r),n.cy-o/2+W(l[1],n.r),o,o,null,u);c.z2=a.get("showAbove")?1:0,c.setStyle(a.getModel("itemStyle").getItemStyle()),this.group.add(c)}},e.prototype._renderTitleAndDetail=function(t,n,a,i,o){var s=this,l=t.getData(),u=l.mapDimension("value"),c=+t.get("min"),d=+t.get("max"),f=new ae,h=[],v=[],p=t.isAnimationEnabled(),g=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){h[m]=new Ie({silent:!0}),v[m]=new Ie({silent:!0})}).update(function(m,b){h[m]=s._titleEls[b],v[m]=s._detailEls[b]}).execute(),l.each(function(m){var b=l.getItemModel(m),S=l.get(u,m),y=new ae,w=i(ye(S,[c,d],[0,1],!0)),_=b.getModel("title");if(_.get("show")){var x=_.get("offsetCenter"),A=o.cx+W(x[0],o.r),C=o.cy+W(x[1],o.r),D=h[m];D.attr({z2:g?0:2,style:Ue(_,{x:A,y:C,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:w})}),y.add(D)}var E=b.getModel("detail");if(E.get("show")){var M=E.get("offsetCenter"),I=o.cx+W(M[0],o.r),R=o.cy+W(M[1],o.r),L=W(E.get("width"),o.r),P=W(E.get("height"),o.r),N=t.get(["progress","show"])?l.getItemVisual(m,"style").fill:w,D=v[m],z=E.get("formatter");D.attr({z2:g?0:2,style:Ue(E,{x:I,y:R,text:io(S,z),width:isNaN(L)?null:L,height:isNaN(P)?null:P,align:"center",verticalAlign:"middle"},{inheritColor:N})}),rA(D,{normal:E},S,function(U){return io(U,z)}),p&&My(D,m,l,t,{getFormattedLabel:function(U,Y,J,te,re,oe){return io(oe?oe.interpolatedValue:S,z)}}),y.add(D)}f.add(y)}),this.group.add(f),this._titleEls=h,this._detailEls=v},e.type="gauge",e}(Je),hE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,n){return Ti(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(rt);function vE(r){r.registerChartView(fE),r.registerSeriesModel(hE)}var pE=["itemStyle","opacity"],gE=function(r){V(e,r);function e(t,n){var a=r.call(this)||this,i=a,o=new vr,s=new Ie;return i.setTextContent(s),a.setTextGuideLine(o),a.updateData(t,n,!0),a}return e.prototype.updateData=function(t,n,a){var i=this,o=t.hostModel,s=t.getItemModel(n),l=t.getItemLayout(n),u=s.getModel("emphasis"),c=s.get(pE);c=c??1,a||Fr(i),i.useStyle(t.getItemVisual(n,"style")),i.style.lineJoin="round",a?(i.setShape({points:l.points}),i.style.opacity=0,xt(i,{style:{opacity:c}},o,n)):Ne(i,{style:{opacity:c},shape:{points:l.points}},o,n),Lt(i,s),this._updateLabel(t,n),Ye(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,n){var a=this,i=this.getTextGuideLine(),o=a.getTextContent(),s=t.hostModel,l=t.getItemModel(n),u=t.getItemLayout(n),c=u.label,d=t.getItemVisual(n,"style"),f=d.fill;jt(o,At(l),{labelFetcher:t.hostModel,labelDataIndex:n,defaultOpacity:d.opacity,defaultText:t.getName(n)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),a.setTextConfig({local:!0,inside:!!c.inside,insideStroke:f,outsideFill:f});var h=c.linePoints;i.setShape({points:h}),a.textGuideLineConfig={anchor:h?new yr(h[0][0],h[0][1]):null},Ne(o,{style:{x:c.x,y:c.y}},s,n),o.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),Ty(a,Ey(l),{stroke:f})},e}(Ut),mE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,n,a){var i=t.getData(),o=this._data,s=this.group;i.diff(o).add(function(l){var u=new gE(i,l);i.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var c=o.getItemGraphicEl(u);c.updateData(i,l),s.add(c),i.setItemGraphicEl(l,c)}).remove(function(l){var u=o.getItemGraphicEl(l);nA(u,t,l)}).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Je),yE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ps(Z(this.getData,this),Z(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,n){return Ti(this,{coordDimensions:["value"],encodeDefaulter:he(Gy,this)})},e.prototype._defaultLabelLine=function(t){zs(t,"labelLine",["show"]);var n=t.labelLine,a=t.emphasis.labelLine;n.show=n.show&&t.label.show,a.show=a.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var n=this.getData(),a=r.prototype.getDataParams.call(this,t),i=n.mapDimension("value"),o=n.getSum(i);return a.percent=o?+(n.get(i,t)/o*100).toFixed(2):0,a.$vars.push("percent"),a},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(rt);function bE(r,e){return Zt(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function SE(r,e){for(var t=r.mapDimension("value"),n=r.mapArray(t,function(l){return l}),a=[],i=e==="ascending",o=0,s=r.count();o<s;o++)a[o]=o;return xe(e)?a.sort(e):e!=="none"&&a.sort(function(l,u){return i?n[l]-n[u]:n[u]-n[l]}),a}function _E(r){var e=r.hostModel,t=e.get("orient");r.each(function(n){var a=r.getItemModel(n),i=a.getModel("label"),o=i.get("position"),s=a.getModel("labelLine"),l=r.getItemLayout(n),u=l.points,c=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",d,f,h,v;if(c)o==="insideLeft"?(f=(u[0][0]+u[3][0])/2+5,h=(u[0][1]+u[3][1])/2,d="left"):o==="insideRight"?(f=(u[1][0]+u[2][0])/2-5,h=(u[1][1]+u[2][1])/2,d="right"):(f=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,h=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,d="center"),v=[[f,h],[f,h]];else{var p=void 0,g=void 0,m=void 0,b=void 0,S=s.get("length");o==="left"?(p=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,m=p-S,f=m-5,d="right"):o==="right"?(p=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,m=p+S,f=m+5,d="left"):o==="top"?(p=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,b=g-S,h=b-5,d="center"):o==="bottom"?(p=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,b=g+S,h=b+5,d="center"):o==="rightTop"?(p=t==="horizontal"?u[3][0]:u[1][0],g=t==="horizontal"?u[3][1]:u[1][1],t==="horizontal"?(b=g-S,h=b-5,d="center"):(m=p+S,f=m+5,d="top")):o==="rightBottom"?(p=u[2][0],g=u[2][1],t==="horizontal"?(b=g+S,h=b+5,d="center"):(m=p+S,f=m+5,d="bottom")):o==="leftTop"?(p=u[0][0],g=t==="horizontal"?u[0][1]:u[1][1],t==="horizontal"?(b=g-S,h=b-5,d="center"):(m=p-S,f=m-5,d="right")):o==="leftBottom"?(p=t==="horizontal"?u[1][0]:u[3][0],g=t==="horizontal"?u[1][1]:u[2][1],t==="horizontal"?(b=g+S,h=b+5,d="center"):(m=p-S,f=m-5,d="right")):(p=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,t==="horizontal"?(b=g+S,h=b+5,d="center"):(m=p+S,f=m+5,d="left")),t==="horizontal"?(m=p,f=m):(b=g,h=b),v=[[p,g],[m,b]]}l.label={linePoints:v,x:f,y:h,verticalAlign:"middle",textAlign:d,inside:c}})}function wE(r,e){r.eachSeriesByType("funnel",function(t){var n=t.getData(),a=n.mapDimension("value"),i=t.get("sort"),o=bE(t,e),s=t.get("orient"),l=o.width,u=o.height,c=SE(n,i),d=o.x,f=o.y,h=s==="horizontal"?[W(t.get("minSize"),u),W(t.get("maxSize"),u)]:[W(t.get("minSize"),l),W(t.get("maxSize"),l)],v=n.getDataExtent(a),p=t.get("min"),g=t.get("max");p==null&&(p=Math.min(v[0],0)),g==null&&(g=v[1]);var m=t.get("funnelAlign"),b=t.get("gap"),S=s==="horizontal"?l:u,y=(S-b*(n.count()-1))/n.count(),w=function(R,L){if(s==="horizontal"){var P=n.get(a,R)||0,N=ye(P,[p,g],h,!0),z=void 0;switch(m){case"top":z=f;break;case"center":z=f+(u-N)/2;break;case"bottom":z=f+(u-N);break}return[[L,z],[L,z+N]]}var H=n.get(a,R)||0,U=ye(H,[p,g],h,!0),Y;switch(m){case"left":Y=d;break;case"center":Y=d+(l-U)/2;break;case"right":Y=d+l-U;break}return[[Y,L],[Y+U,L]]};i==="ascending"&&(y=-y,b=-b,s==="horizontal"?d+=l:f+=u,c=c.reverse());for(var _=0;_<c.length;_++){var x=c[_],A=c[_+1],C=n.getItemModel(x);if(s==="horizontal"){var D=C.get(["itemStyle","width"]);D==null?D=y:(D=W(D,l),i==="ascending"&&(D=-D));var E=w(x,d),M=w(A,d+D);d+=D+b,n.setItemLayout(x,{points:E.concat(M.slice().reverse())})}else{var I=C.get(["itemStyle","height"]);I==null?I=y:(I=W(I,u),i==="ascending"&&(I=-I));var E=w(x,f),M=w(A,f+I);f+=I+b,n.setItemLayout(x,{points:E.concat(M.slice().reverse())})}}_E(n)})}function xE(r){r.registerChartView(mE),r.registerSeriesModel(yE),r.registerLayout(wE),r.registerProcessor(Os("funnel"))}var AE=.3,CE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new ae,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,n,a,i){this._progressiveEls=null;var o=this._dataGroup,s=t.getData(),l=this._data,u=t.coordinateSystem,c=u.dimensions,d=Fv(t);s.diff(l).add(f).update(h).remove(v).execute();function f(g){var m=Gv(s,o,g,c,u);$l(m,s,g,d)}function h(g,m){var b=l.getItemGraphicEl(m),S=vb(s,g,c,u);s.setItemGraphicEl(g,b),Ne(b,{shape:{points:S}},t,g),Fr(b),$l(b,s,g,d)}function v(g){var m=l.getItemGraphicEl(g);o.remove(m)}if(!this._initialized){this._initialized=!0;var p=DE(u,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(p)}this._data=s},e.prototype.incrementalPrepareRender=function(t,n,a){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,n,a){for(var i=n.getData(),o=n.coordinateSystem,s=o.dimensions,l=Fv(n),u=this._progressiveEls=[],c=t.start;c<t.end;c++){var d=Gv(i,this._dataGroup,c,s,o);d.incremental=!0,$l(d,i,c,l),u.push(d)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Je);function DE(r,e,t){var n=r.model,a=r.getRect(),i=new Ge({shape:{x:a.x,y:a.y,width:a.width,height:a.height}}),o=n.get("layout")==="horizontal"?"width":"height";return i.setShape(o,0),xt(i,{shape:{width:a.width,height:a.height}},e,t),i}function vb(r,e,t,n){for(var a=[],i=0;i<t.length;i++){var o=t[i],s=r.get(r.mapDimension(o),e);TE(s,n.getAxis(o).type)||a.push(n.dataToPoint(s,o))}return a}function Gv(r,e,t,n,a){var i=vb(r,t,n,a),o=new vr({shape:{points:i},z2:10});return e.add(o),r.setItemGraphicEl(t,o),o}function Fv(r){var e=r.get("smooth",!0);return e===!0&&(e=AE),e=aA(e),iA(e)&&(e=0),{smooth:e}}function $l(r,e,t,n){r.useStyle(e.getItemVisual(t,"style")),r.style.fill=null,r.setShape("smooth",n.smooth);var a=e.getItemModel(t),i=a.getModel("emphasis");Lt(r,a,"lineStyle"),Ye(r,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function TE(r,e){return e==="category"?r==null:r==null||isNaN(r)}var EE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,n){return ma(null,this,{useEncodeDefaulter:Z(ME,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var n=this.coordinateSystem,a=this.getData(),i=[];return n.eachActiveState(a,function(o,s){t===o&&i.push(a.getRawIndex(s))}),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(rt);function ME(r){var e=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(e){var t={};return T(e.dimensions,function(n){var a=IE(n);t[n]=a}),t}}function IE(r){return+r.replace("dim","")}var RE=["lineStyle","opacity"],LE={seriesType:"parallel",reset:function(r,e){var t=r.coordinateSystem,n={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(a,i){t.eachActiveState(i,function(o,s){var l=n[o];if(o==="normal"&&i.hasItemOption){var u=i.getItemModel(s).get(RE,!0);u!=null&&(l=u)}var c=i.ensureUniqueItemVisual(s,"style");c.opacity=l},a.start,a.end)}}}};function PE(r){kE(r),OE(r)}function kE(r){if(!r.parallel){var e=!1;T(r.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(r.parallel=[{}])}}function OE(r){var e=gt(r.parallelAxis);T(e,function(t){if(ct(t)){var n=t.parallelIndex||0,a=gt(r.parallel)[n];a&&a.parallelAxisDefault&&ke(t,a.parallelAxisDefault,!1)}})}var NE=5,VE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){this._model=t,this._api=a,this._handlers||(this._handlers={},T(BE,function(i,o){a.getZr().on(o,this._handlers[o]=Z(i,this))},this)),Fs(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,n){qy(this,"_throttledDispatchExpand"),T(this._handlers,function(a,i){n.getZr().off(i,a)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(X({type:"parallelAxisExpand"},t))},e.type="parallel",e}(yt),BE={mousedown:function(r){Yl(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var e=this._mouseDownPoint;if(Yl(this,"click")&&e){var t=[r.offsetX,r.offsetY],n=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(n>NE)return;var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);a.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!(this._mouseDownPoint||!Yl(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),n=t.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function Yl(r,e){var t=r._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var zE=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var n=this.option;t&&ke(n,t,!0),this._initDimensions()},e.prototype.contains=function(t,n){var a=t.get("parallelIndex");return a!=null&&n.getComponent("parallel",a)===this},e.prototype.setAxisExpand=function(t){T(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){t.hasOwnProperty(n)&&(this.option[n]=t[n])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],n=this.parallelAxisIndex=[],a=Qe(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(i){return(i.get("parallelIndex")||0)===this.componentIndex},this);T(a,function(i){t.push("dim"+i.get("dim")),n.push(i.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(dt),HE=function(r){V(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n,a)||this;return s.type=i||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(pr);function Rn(r,e,t,n,a,i){r=r||0;var o=t[1]-t[0];if(a!=null&&(a=Wn(a,[0,o])),i!=null&&(i=Math.max(i,a??0)),n==="all"){var s=Math.abs(e[1]-e[0]);s=Wn(s,[0,o]),a=i=Wn(s,[a,i]),n=0}e[0]=Wn(e[0],t),e[1]=Wn(e[1],t);var l=Zl(e,n);e[n]+=r;var u=a||0,c=t.slice();l.sign<0?c[0]+=u:c[1]-=u,e[n]=Wn(e[n],c);var d;return d=Zl(e,n),a!=null&&(d.sign!==l.sign||d.span<a)&&(e[1-n]=e[n]+l.sign*a),d=Zl(e,n),i!=null&&d.span>i&&(e[1-n]=e[n]+d.sign*i),e}function Zl(r,e){var t=r[e]-r[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function Wn(r,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,r))}var Xl=T,pb=Math.min,gb=Math.max,Wv=Math.floor,GE=Math.ceil,Uv=ad,FE=Math.PI,WE=function(){function r(e,t,n){this.type="parallel",this._axesMap=le(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}return r.prototype._init=function(e,t,n){var a=e.dimensions,i=e.parallelAxisIndex;Xl(a,function(o,s){var l=i[s],u=t.getComponent("parallelAxis",l),c=this._axesMap.set(o,new HE(o,id(u),[0,0],u.get("type"),l)),d=c.type==="category";c.onBand=d&&u.get("boundaryGap"),c.inverse=u.get("inverse"),u.axis=c,c.model=u,c.coordinateSystem=u.coordinateSystem=this},this)},r.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},r.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),n=t.axisBase,a=t.layoutBase,i=t.pixelDimIndex,o=e[1-i],s=e[i];return o>=n&&o<=n+t.axisLength&&s>=a&&s<=a+t.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var a=n.getData();Xl(this.dimensions,function(i){var o=this._axesMap.get(i);o.scale.unionExtentFromData(a,a.mapDimension(i)),Uo(o.scale,o.model)},this)}},this)},r.prototype.resize=function(e,t){this._rect=Zt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,n=["x","y"],a=["width","height"],i=e.get("layout"),o=i==="horizontal"?0:1,s=t[a[o]],l=[0,s],u=this.dimensions.length,c=oo(e.get("axisExpandWidth"),l),d=oo(e.get("axisExpandCount")||0,[0,u]),f=e.get("axisExpandable")&&u>3&&u>d&&d>1&&c>0&&s>0,h=e.get("axisExpandWindow"),v;if(h)v=oo(h[1]-h[0],l),h[1]=h[0]+v;else{v=oo(c*(d-1),l);var p=e.get("axisExpandCenter")||Wv(u/2);h=[c*p-v/2],h[1]=h[0]+v}var g=(s-v)/(u-d);g<3&&(g=0);var m=[Wv(Uv(h[0]/c,1))+1,GE(Uv(h[1]/c,1))-1],b=g/c*h[0];return{layout:i,pixelDimIndex:o,layoutBase:t[n[o]],layoutLength:s,axisBase:t[n[1-o]],axisLength:t[a[1-o]],axisExpandable:f,axisExpandWidth:c,axisCollapseWidth:g,axisExpandWindow:h,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:b}},r.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,n=this.dimensions,a=this._makeLayoutInfo(),i=a.layout;t.each(function(o){var s=[0,a.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),Xl(n,function(o,s){var l=(a.axisExpandable?jE:UE)(s,a),u={horizontal:{x:l.position,y:a.axisLength},vertical:{x:0,y:l.position}},c={horizontal:FE/2,vertical:0},d=[u[i].x+e.x,u[i].y+e.y],f=c[i],h=ba();Bs(h,h,f),wn(h,h,d),this._axesLayout[o]={position:d,rotation:f,transform:h,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(e){return this._axesMap.get(e)},r.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},r.prototype.eachActiveState=function(e,t,n,a){n==null&&(n=0),a==null&&(a=e.count());var i=this._axesMap,o=this.dimensions,s=[],l=[];T(o,function(g){s.push(e.mapDimension(g)),l.push(i.get(g).model)});for(var u=this.hasAxisBrushed(),c=n;c<a;c++){var d=void 0;if(!u)d="normal";else{d="active";for(var f=e.getValues(s,c),h=0,v=o.length;h<v;h++){var p=l[h].getActiveState(f[h]);if(p==="inactive"){d="inactive";break}}}t(d,c)}},r.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,n=!1,a=0,i=e.length;a<i;a++)t.get(e[a]).model.getActiveState()!=="normal"&&(n=!0);return n},r.prototype.axisCoordToPoint=function(e,t){var n=this._axesLayout[t];return Br([e,0],n.transform)},r.prototype.getAxisLayout=function(e){return Se(this._axesLayout[e])},r.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,a=t.axisExpandWindow.slice(),i=a[1]-a[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:a};var s=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l,u="slide",c=t.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),f=d[0]!=null;if(c)f&&c&&s<i*d[0]?(u="jump",l=s-i*d[2]):f&&c&&s>i*(1-d[0])?(u="jump",l=s-i*(1-d[2])):(l=s-i*d[1])>=0&&(l=s-i*(1-d[1]))<=0&&(l=0),l*=t.axisExpandWidth/c,l?Rn(l,a,o,"all"):u="none";else{var h=a[1]-a[0],v=o[1]*s/h;a=[gb(0,v-h/2)],a[1]=pb(o[1],a[0]+h),a[0]=a[1]-h}return{axisExpandWindow:a,behavior:u}},r}();function oo(r,e){return pb(gb(r,e[0]),e[1])}function UE(r,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*r,axisNameAvailableWidth:t,axisLabelShow:!0}}function jE(r,e){var t=e.layoutLength,n=e.axisExpandWidth,a=e.axisCount,i=e.axisCollapseWidth,o=e.winInnerIndices,s,l=i,u=!1,c;return r<o[0]?(s=r*i,c=i):r<=o[1]?(s=e.axisExpandWindow0Pos+r*n-e.axisExpandWindow[0],l=n,u=!0):(s=t-(a-1-r)*i,c=i),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:c}}function $E(r,e){var t=[];return r.eachComponent("parallel",function(n,a){var i=new WE(n,r,e);i.name="parallel_"+a,i.resize(n,e),n.coordinateSystem=i,i.model=n,t.push(i)}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var a=n.getReferringComponents("parallel",cr).models[0];n.coordinateSystem=a.coordinateSystem}}),t}var YE={create:$E},vc=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return Yy([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var n=this.activeIntervals=Se(t);if(n)for(var a=n.length-1;a>=0;a--)Gt(n[a])},e.prototype.getActiveState=function(t){var n=this.activeIntervals;if(!n.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(n.length===1){var a=n[0];if(a[0]<=t&&t<=a[1])return"active"}else for(var i=0,o=n.length;i<o;i++)if(n[i][0]<=t&&t<=n[i][1])return"active";return"inactive"},e}(dt);rr(vc,ks);var Dn=!0,pi=Math.min,sa=Math.max,ZE=Math.pow,XE=1e4,qE=6,QE=6,jv="globalPan",KE={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},JE={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},$v={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},eM=0,zd=function(r){V(e,r);function e(t){var n=r.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new ae,n._uid="brushController_"+eM++,T(sM,function(a,i){this._handlers[i]=Z(a,this)},n),n}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var n=this._zr;this._enableGlobalPan||UC(n,jv,this._uid),T(this._handlers,function(a,i){n.on(i,a)}),this._brushType=t.brushType,this._brushOption=ke(Se($v),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;jC(t,jv,this._uid),T(this._handlers,function(n,a){t.off(a,n)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var n=this._panels={};T(t,function(a){n[a.panelId]=Se(a)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=n.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=G(t,function(f){return ke(Se($v),f,!0)});var n="\0-brush-index-",a=this._covers,i=this._covers=[],o=this,s=this._creatingCover;return new Wr(a,t,u,l).add(c).update(c).remove(d).execute(),this;function l(f,h){return(f.id!=null?f.id:n+h)+"-"+f.brushType}function u(f,h){return l(f.__brushOption,h)}function c(f,h){var v=t[f];if(h!=null&&a[h]===s)i[f]=a[h];else{var p=i[f]=h!=null?(a[h].__brushOption=v,a[h]):yb(o,mb(o,v));Hd(o,p)}}function d(f){a[f]!==s&&o.group.remove(a[f])}},e.prototype.unmount=function(){return this.enableBrush(!1),pc(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Vy);function mb(r,e){var t=Ks[e.brushType].createCover(r,e);return t.__brushOption=e,Sb(t,e),r.group.add(t),t}function yb(r,e){var t=Gd(e);return t.endCreating&&(t.endCreating(r,e),Sb(e,e.__brushOption)),e}function bb(r,e){var t=e.__brushOption;Gd(e).updateCoverShape(r,e,t.range,t)}function Sb(r,e){var t=e.z;t==null&&(t=XE),r.traverse(function(n){n.z=t,n.z2=t})}function Hd(r,e){Gd(e).updateCommon(r,e),bb(r,e)}function Gd(r){return Ks[r.__brushOption.brushType]}function Fd(r,e,t){var n=r._panels;if(!n)return Dn;var a,i=r._transform;return T(n,function(o){o.isTargetByCursor(e,t,i)&&(a=o)}),a}function _b(r,e){var t=r._panels;if(!t)return Dn;var n=e.__brushOption.panelId;return n!=null?t[n]:Dn}function pc(r){var e=r._covers,t=e.length;return T(e,function(n){r.group.remove(n)},r),e.length=0,!!t}function Tn(r,e){var t=G(r._covers,function(n){var a=n.__brushOption,i=Se(a.range);return{brushType:a.brushType,panelId:a.panelId,range:i}});r.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function tM(r){var e=r._track;if(!e.length)return!1;var t=e[e.length-1],n=e[0],a=t[0]-n[0],i=t[1]-n[1],o=ZE(a*a+i*i,.5);return o>qE}function wb(r){var e=r.length-1;return e<0&&(e=0),[r[0],r[e]]}function xb(r,e,t,n){var a=new ae;return a.add(new Ge({name:"main",style:Wd(t),silent:!0,draggable:!0,cursor:"move",drift:he(Yv,r,e,a,["n","s","w","e"]),ondragend:he(Tn,e,{isEnd:!0})})),T(n,function(i){a.add(new Ge({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:he(Yv,r,e,a,i),ondragend:he(Tn,e,{isEnd:!0})}))}),a}function Ab(r,e,t,n){var a=n.brushStyle.lineWidth||0,i=sa(a,QE),o=t[0][0],s=t[1][0],l=o-a/2,u=s-a/2,c=t[0][1],d=t[1][1],f=c-i+a/2,h=d-i+a/2,v=c-o,p=d-s,g=v+a,m=p+a;gr(r,e,"main",o,s,v,p),n.transformable&&(gr(r,e,"w",l,u,i,m),gr(r,e,"e",f,u,i,m),gr(r,e,"n",l,u,g,i),gr(r,e,"s",l,h,g,i),gr(r,e,"nw",l,u,i,i),gr(r,e,"ne",f,u,i,i),gr(r,e,"sw",l,h,i,i),gr(r,e,"se",f,h,i,i))}function gc(r,e){var t=e.__brushOption,n=t.transformable,a=e.childAt(0);a.useStyle(Wd(t)),a.attr({silent:!n,cursor:n?"move":"default"}),T([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=e.childOfName(i.join("")),s=i.length===1?mc(r,i[0]):nM(r,i);o&&o.attr({silent:!n,invisible:!n,cursor:n?JE[s]+"-resize":null})})}function gr(r,e,t,n,a,i,o){var s=e.childOfName(t);s&&s.setShape(iM(Ud(r,e,[[n,a],[n+i,a+o]])))}function Wd(r){return ce({strokeNoScale:!0},r.brushStyle)}function Cb(r,e,t,n){var a=[pi(r,t),pi(e,n)],i=[sa(r,t),sa(e,n)];return[[a[0],i[0]],[a[1],i[1]]]}function rM(r){return ra(r.group)}function mc(r,e){var t={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},a=od(t[e],rM(r));return n[a]}function nM(r,e){var t=[mc(r,e[0]),mc(r,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Yv(r,e,t,n,a,i){var o=t.__brushOption,s=r.toRectRange(o.range),l=Db(e,a,i);T(n,function(u){var c=KE[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=r.fromRectRange(Cb(s[0][0],s[1][0],s[0][1],s[1][1])),Hd(e,t),Tn(e,{isEnd:!1})}function aM(r,e,t,n){var a=e.__brushOption.range,i=Db(r,t,n);T(a,function(o){o[0]+=i[0],o[1]+=i[1]}),Hd(r,e),Tn(r,{isEnd:!1})}function Db(r,e,t){var n=r.group,a=n.transformCoordToLocal(e,t),i=n.transformCoordToLocal(0,0);return[a[0]-i[0],a[1]-i[1]]}function Ud(r,e,t){var n=_b(r,e);return n&&n!==Dn?n.clipPath(t,r._transform):Se(t)}function iM(r){var e=pi(r[0][0],r[1][0]),t=pi(r[0][1],r[1][1]),n=sa(r[0][0],r[1][0]),a=sa(r[0][1],r[1][1]);return{x:e,y:t,width:n-e,height:a-t}}function oM(r,e,t){if(!(!r._brushType||lM(r,e.offsetX,e.offsetY))){var n=r._zr,a=r._covers,i=Fd(r,e,t);if(!r._dragging)for(var o=0;o<a.length;o++){var s=a[o].__brushOption;if(i&&(i===Dn||s.panelId===i.panelId)&&Ks[s.brushType].contain(a[o],t[0],t[1]))return}i&&n.setCursorStyle("crosshair")}}function yc(r){var e=r.event;e.preventDefault&&e.preventDefault()}function bc(r,e,t){return r.childOfName("main").contain(e,t)}function Tb(r,e,t,n){var a=r._creatingCover,i=r._creatingPanel,o=r._brushOption,s;if(r._track.push(t.slice()),tM(r)||a){if(i&&!a){o.brushMode==="single"&&pc(r);var l=Se(o);l.brushType=Zv(l.brushType,i),l.panelId=i===Dn?null:i.panelId,a=r._creatingCover=mb(r,l),r._covers.push(a)}if(a){var u=Ks[Zv(r._brushType,i)],c=a.__brushOption;c.range=u.getCreatingRange(Ud(r,a,r._track)),n&&(yb(r,a),u.updateCommon(r,a)),bb(r,a),s={isEnd:n}}}else n&&o.brushMode==="single"&&o.removeOnClick&&Fd(r,e,t)&&pc(r)&&(s={isEnd:n,removeOnClick:!0});return s}function Zv(r,e){return r==="auto"?e.defaultBrushType:r}var sM={mousedown:function(r){if(this._dragging)Xv(this,r);else if(!r.target||!r.target.draggable){yc(r);var e=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var t=this._creatingPanel=Fd(this,r,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(r){var e=r.offsetX,t=r.offsetY,n=this.group.transformCoordToLocal(e,t);if(oM(this,r,n),this._dragging){yc(r);var a=Tb(this,r,n,!1);a&&Tn(this,a)}},mouseup:function(r){Xv(this,r)}};function Xv(r,e){if(r._dragging){yc(e);var t=e.offsetX,n=e.offsetY,a=r.group.transformCoordToLocal(t,n),i=Tb(r,e,a,!0);r._dragging=!1,r._track=[],r._creatingCover=null,i&&Tn(r,i)}}function lM(r,e,t){var n=r._zr;return e<0||e>n.getWidth()||t<0||t>n.getHeight()}var Ks={lineX:qv(0),lineY:qv(1),rect:{createCover:function(r,e){function t(n){return n}return xb({toRectRange:t,fromRectRange:t},r,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var e=wb(r);return Cb(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(r,e,t,n){Ab(r,e,t,n)},updateCommon:gc,contain:bc},polygon:{createCover:function(r,e){var t=new ae;return t.add(new vr({name:"main",style:Wd(e),silent:!0})),t},getCreatingRange:function(r){return r},endCreating:function(r,e){e.remove(e.childAt(0)),e.add(new Ut({name:"main",draggable:!0,drift:he(aM,r,e),ondragend:he(Tn,r,{isEnd:!0})}))},updateCoverShape:function(r,e,t,n){e.childAt(0).setShape({points:Ud(r,e,t)})},updateCommon:gc,contain:bc}};function qv(r){return{createCover:function(e,t){return xb({toRectRange:function(n){var a=[n,[0,100]];return r&&a.reverse(),a},fromRectRange:function(n){return n[r]}},e,t,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(e){var t=wb(e),n=pi(t[0][r],t[1][r]),a=sa(t[0][r],t[1][r]);return[n,a]},updateCoverShape:function(e,t,n,a){var i,o=_b(e,t);if(o!==Dn&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(r);else{var s=e._zr;i=[0,[s.getWidth(),s.getHeight()][1-r]]}var l=[n,i];r&&l.reverse(),Ab(e,t,l,a)},updateCommon:gc,contain:bc}}function Eb(r){return r=jd(r),function(e){return oA(e,r)}}function Mb(r,e){return r=jd(r),function(t){var n=e??t,a=n?r.width:r.height,i=n?r.x:r.y;return[i,i+(a||0)]}}function Ib(r,e,t){var n=jd(r);return function(a,i){return n.contain(i[0],i[1])&&!Zs(a,e,t)}}function jd(r){return He.create(r)}var uM=["axisLine","axisTickLabel","axisName"],cM=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){r.prototype.init.apply(this,arguments),(this._brushController=new zd(n.getZr())).on("brush",Z(this._onBrush,this))},e.prototype.render=function(t,n,a,i){if(!dM(t,n,i)){this.axisModel=t,this.api=a,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new ae,this.group.add(this._axisGroup),!!t.get("show")){var s=hM(t,n),l=s.coordinateSystem,u=t.getAreaSelectStyle(),c=u.width,d=t.axis.dim,f=l.getAxisLayout(d),h=X({strokeContainThreshold:c},f),v=new Sn(t,h);T(uM,v.add,v),this._axisGroup.add(v.getGroup()),this._refreshBrushController(h,u,t,s,c,a),sd(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,n,a,i,o,s){var l=a.axis.getExtent(),u=l[1]-l[0],c=Math.min(30,Math.abs(u)*.1),d=He.create({x:l[0],y:-o/2,width:u,height:o});d.x-=c,d.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:Eb(d),isTargetByCursor:Ib(d,s,i),getLinearBrushOtherExtent:Mb(d,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(fM(a))},e.prototype._onBrush=function(t){var n=t.areas,a=this.axisModel,i=a.axis,o=G(n,function(s){return[i.coordToData(s.range[0],!0),i.coordToData(s.range[1],!0)]});(!a.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:a.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(yt);function dM(r,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===r}function fM(r){var e=r.axis;return G(r.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function hM(r,e){return e.getComponent("parallel",r.get("parallelIndex"))}var vM={type:"axisAreaSelect",event:"axisAreaSelected"};function pM(r){r.registerAction(vM,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(n){n.axis.model.setActiveIntervals(e.intervals)})}),r.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(n){n.setAxisExpand(e)})})}var gM={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Rb(r){r.registerComponentView(VE),r.registerComponentModel(zE),r.registerCoordinateSystem("parallel",YE),r.registerPreprocessor(PE),r.registerComponentModel(vc),r.registerComponentView(cM),jo(r,"parallel",vc,gM),pM(r)}function mM(r){se(Rb),r.registerChartView(CE),r.registerSeriesModel(EE),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,LE)}var yM=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r}(),bM=function(r){V(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new yM},e.prototype.buildPath=function(t,n){var a=n.extent;t.moveTo(n.x1,n.y1),t.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(t.lineTo(n.x2+a,n.y2),t.bezierCurveTo(n.cpx2+a,n.cpy2,n.cpx1+a,n.cpy1,n.x1+a,n.y1)):(t.lineTo(n.x2,n.y2+a),t.bezierCurveTo(n.cpx2,n.cpy2+a,n.cpx1,n.cpy1+a,n.x1,n.y1+a)),t.closePath()},e.prototype.highlight=function(){ii(this)},e.prototype.downplay=function(){oi(this)},e}(ot),SM=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,n,a){var i=this,o=t.getGraph(),s=this.group,l=t.layoutInfo,u=l.width,c=l.height,d=t.getData(),f=t.getData("edge"),h=t.get("orient");this._model=t,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(v){var p=new bM,g=Ae(p);g.dataIndex=v.dataIndex,g.seriesIndex=t.seriesIndex,g.dataType="edge";var m=v.getModel(),b=m.getModel("lineStyle"),S=b.get("curveness"),y=v.node1.getLayout(),w=v.node1.getModel(),_=w.get("localX"),x=w.get("localY"),A=v.node2.getLayout(),C=v.node2.getModel(),D=C.get("localX"),E=C.get("localY"),M=v.getLayout(),I,R,L,P,N,z,H,U;p.shape.extent=Math.max(1,M.dy),p.shape.orient=h,h==="vertical"?(I=(_!=null?_*u:y.x)+M.sy,R=(x!=null?x*c:y.y)+y.dy,L=(D!=null?D*u:A.x)+M.ty,P=E!=null?E*c:A.y,N=I,z=R*(1-S)+P*S,H=L,U=R*S+P*(1-S)):(I=(_!=null?_*u:y.x)+y.dx,R=(x!=null?x*c:y.y)+M.sy,L=D!=null?D*u:A.x,P=(E!=null?E*c:A.y)+M.ty,N=I*(1-S)+L*S,z=R,H=I*S+L*(1-S),U=P),p.setShape({x1:I,y1:R,x2:L,y2:P,cpx1:N,cpy1:z,cpx2:H,cpy2:U}),p.useStyle(b.getItemStyle()),Qv(p.style,h,v);var Y=""+m.get("value"),J=At(m,"edgeLabel");jt(p,J,{labelFetcher:{getFormattedLabel:function(oe,Ce,nt,ne,Q,fe){return t.getFormattedLabel(oe,Ce,"edge",ne,Ii(Q,J.normal&&J.normal.get("formatter"),Y),fe)}},labelDataIndex:v.dataIndex,defaultText:Y}),p.setTextConfig({position:"inside"});var te=m.getModel("emphasis");Lt(p,m,"lineStyle",function(oe){var Ce=oe.getItemStyle();return Qv(Ce,h,v),Ce}),s.add(p),f.setItemGraphicEl(v.dataIndex,p);var re=te.get("focus");Ye(p,re==="adjacency"?v.getAdjacentDataIndices():re==="trajectory"?v.getTrajectoryDataIndices():re,te.get("blurScope"),te.get("disabled"))}),o.eachNode(function(v){var p=v.getLayout(),g=v.getModel(),m=g.get("localX"),b=g.get("localY"),S=g.getModel("emphasis"),y=g.get(["itemStyle","borderRadius"])||0,w=new Ge({shape:{x:m!=null?m*u:p.x,y:b!=null?b*c:p.y,width:p.dx,height:p.dy,r:y},style:g.getModel("itemStyle").getItemStyle(),z2:10});jt(w,At(g),{labelFetcher:{getFormattedLabel:function(x,A){return t.getFormattedLabel(x,A,"node")}},labelDataIndex:v.dataIndex,defaultText:v.id}),w.disableLabelAnimation=!0,w.setStyle("fill",v.getVisual("color")),w.setStyle("decal",v.getVisual("style").decal),Lt(w,g),s.add(w),d.setItemGraphicEl(v.dataIndex,w),Ae(w).dataType="node";var _=S.get("focus");Ye(w,_==="adjacency"?v.getAdjacentDataIndices():_==="trajectory"?v.getTrajectoryDataIndices():_,S.get("blurScope"),S.get("disabled"))}),d.eachItemGraphicEl(function(v,p){var g=d.getItemModel(p);g.get("draggable")&&(v.drift=function(m,b){i._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=b,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:d.getRawIndex(p),localX:this.shape.x/u,localY:this.shape.y/c})},v.ondragend=function(){i._focusAdjacencyDisabled=!1},v.draggable=!0,v.cursor="move")}),!this._data&&t.isAnimationEnabled()&&s.setClipPath(_M(s.getBoundingRect(),t,function(){s.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Je);function Qv(r,e,t){switch(r.fill){case"source":r.fill=t.node1.getVisual("color"),r.decal=t.node1.getVisual("style").decal;break;case"target":r.fill=t.node2.getVisual("color"),r.decal=t.node2.getVisual("style").decal;break;case"gradient":var n=t.node1.getVisual("color"),a=t.node2.getVisual("color");de(n)&&de(a)&&(r.fill=new Vs(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:n,offset:0},{color:a,offset:1}]))}}function _M(r,e,t){var n=new Ge({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return xt(n,{shape:{width:r.width+20}},e,t),n}var wM=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,n){var a=t.edges||t.links||[],i=t.data||t.nodes||[],o=t.levels||[];this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new Pt(o[l],this,n));var u=hb(i,a,this,!0,c);return u.data;function c(d,f){d.wrapMethod("getItemModel",function(h,v){var p=h.parentModel,g=p.getData().getItemLayout(v);if(g){var m=g.depth,b=p.levelModels[m];b&&(h.parentModel=b)}return h}),f.wrapMethod("getItemModel",function(h,v){var p=h.parentModel,g=p.getGraph().getEdgeByIndex(v),m=g.node1.getLayout();if(m){var b=m.depth,S=p.levelModels[b];S&&(h.parentModel=S)}return h})}},e.prototype.setNodePosition=function(t,n){var a=this.option.data||this.option.nodes,i=a[t];i.localX=n[0],i.localY=n[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,n,a){function i(h){return isNaN(h)||h==null}if(a==="edge"){var o=this.getDataParams(t,a),s=o.data,l=o.value,u=s.source+" -- "+s.target;return Ct("nameValue",{name:u,value:l,noValue:i(l)})}else{var c=this.getGraph().getNodeByIndex(t),d=c.getLayout().value,f=this.getDataParams(t,a).data.name;return Ct("nameValue",{name:f!=null?f+"":null,value:d,noValue:i(d)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,n){var a=r.prototype.getDataParams.call(this,t,n);if(a.value==null&&n==="node"){var i=this.getGraph().getNodeByIndex(t),o=i.getLayout().value;a.value=o}return a},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(rt);function xM(r,e){r.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),a=t.get("nodeGap"),i=AM(t,e);t.layoutInfo=i;var o=i.width,s=i.height,l=t.getGraph(),u=l.nodes,c=l.edges;DM(u);var d=Qe(u,function(p){return p.getLayout().value===0}),f=d.length!==0?0:t.get("layoutIterations"),h=t.get("orient"),v=t.get("nodeAlign");CM(u,c,n,a,o,s,f,h,v)})}function AM(r,e){return Zt(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function CM(r,e,t,n,a,i,o,s,l){TM(r,e,t,a,i,s,l),RM(r,e,i,a,n,o,s),HM(r,s)}function DM(r){T(r,function(e){var t=zr(e.outEdges,ts),n=zr(e.inEdges,ts),a=e.getValue()||0,i=Math.max(t,n,a);e.setLayout({value:i},!0)})}function TM(r,e,t,n,a,i,o){for(var s=[],l=[],u=[],c=[],d=0,f=0;f<e.length;f++)s[f]=1;for(var f=0;f<r.length;f++)l[f]=r[f].inEdges.length,l[f]===0&&u.push(r[f]);for(var h=-1;u.length;){for(var v=0;v<u.length;v++){var p=u[v],g=p.hostGraph.data.getRawDataItem(p.dataIndex),m=g.depth!=null&&g.depth>=0;m&&g.depth>h&&(h=g.depth),p.setLayout({depth:m?g.depth:d},!0),i==="vertical"?p.setLayout({dy:t},!0):p.setLayout({dx:t},!0);for(var b=0;b<p.outEdges.length;b++){var S=p.outEdges[b],y=e.indexOf(S);s[y]=0;var w=S.node2,_=r.indexOf(w);--l[_]===0&&c.indexOf(w)<0&&c.push(w)}}++d,u=c,c=[]}for(var f=0;f<s.length;f++)if(s[f]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var x=h>d-1?h:d-1;o&&o!=="left"&&EM(r,o,i,x);var A=i==="vertical"?(a-t)/x:(n-t)/x;IM(r,A,i)}function Lb(r){var e=r.hostGraph.data.getRawDataItem(r.dataIndex);return e.depth!=null&&e.depth>=0}function EM(r,e,t,n){if(e==="right"){for(var a=[],i=r,o=0;i.length;){for(var s=0;s<i.length;s++){var l=i[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];a.indexOf(c.node1)<0&&a.push(c.node1)}}i=a,a=[],++o}T(r,function(d){Lb(d)||d.setLayout({depth:Math.max(0,n-d.getLayout().skNodeHeight)},!0)})}else e==="justify"&&MM(r,n)}function MM(r,e){T(r,function(t){!Lb(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function IM(r,e,t){T(r,function(n){var a=n.getLayout().depth*e;t==="vertical"?n.setLayout({y:a},!0):n.setLayout({x:a},!0)})}function RM(r,e,t,n,a,i,o){var s=LM(r,o);PM(s,e,t,n,a,o),ql(s,a,t,n,o);for(var l=1;i>0;i--)l*=.99,kM(s,l,o),ql(s,a,t,n,o),zM(s,l,o),ql(s,a,t,n,o)}function LM(r,e){var t=[],n=e==="vertical"?"y":"x",a=Qu(r,function(i){return i.getLayout()[n]});return a.keys.sort(function(i,o){return i-o}),T(a.keys,function(i){t.push(a.buckets.get(i))}),t}function PM(r,e,t,n,a,i){var o=1/0;T(r,function(s){var l=s.length,u=0;T(s,function(d){u+=d.getLayout().value});var c=i==="vertical"?(n-(l-1)*a)/u:(t-(l-1)*a)/u;c<o&&(o=c)}),T(r,function(s){T(s,function(l,u){var c=l.getLayout().value*o;i==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),T(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function ql(r,e,t,n,a){var i=a==="vertical"?"x":"y";T(r,function(o){o.sort(function(p,g){return p.getLayout()[i]-g.getLayout()[i]});for(var s,l,u,c=0,d=o.length,f=a==="vertical"?"dx":"dy",h=0;h<d;h++)l=o[h],u=c-l.getLayout()[i],u>0&&(s=l.getLayout()[i]+u,a==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[i]+l.getLayout()[f]+e;var v=a==="vertical"?n:t;if(u=c-e-v,u>0){s=l.getLayout()[i]-u,a==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),c=s;for(var h=d-2;h>=0;--h)l=o[h],u=l.getLayout()[i]+l.getLayout()[f]+e-c,u>0&&(s=l.getLayout()[i]-u,a==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[i]}})}function kM(r,e,t){T(r.slice().reverse(),function(n){T(n,function(a){if(a.outEdges.length){var i=zr(a.outEdges,OM,t)/zr(a.outEdges,ts);if(isNaN(i)){var o=a.outEdges.length;i=o?zr(a.outEdges,NM,t)/o:0}if(t==="vertical"){var s=a.getLayout().x+(i-Ur(a,t))*e;a.setLayout({x:s},!0)}else{var l=a.getLayout().y+(i-Ur(a,t))*e;a.setLayout({y:l},!0)}}})})}function OM(r,e){return Ur(r.node2,e)*r.getValue()}function NM(r,e){return Ur(r.node2,e)}function VM(r,e){return Ur(r.node1,e)*r.getValue()}function BM(r,e){return Ur(r.node1,e)}function Ur(r,e){return e==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function ts(r){return r.getValue()}function zr(r,e,t){for(var n=0,a=r.length,i=-1;++i<a;){var o=+e(r[i],t);isNaN(o)||(n+=o)}return n}function zM(r,e,t){T(r,function(n){T(n,function(a){if(a.inEdges.length){var i=zr(a.inEdges,VM,t)/zr(a.inEdges,ts);if(isNaN(i)){var o=a.inEdges.length;i=o?zr(a.inEdges,BM,t)/o:0}if(t==="vertical"){var s=a.getLayout().x+(i-Ur(a,t))*e;a.setLayout({x:s},!0)}else{var l=a.getLayout().y+(i-Ur(a,t))*e;a.setLayout({y:l},!0)}}})})}function HM(r,e){var t=e==="vertical"?"x":"y";T(r,function(n){n.outEdges.sort(function(a,i){return a.node2.getLayout()[t]-i.node2.getLayout()[t]}),n.inEdges.sort(function(a,i){return a.node1.getLayout()[t]-i.node1.getLayout()[t]})}),T(r,function(n){var a=0,i=0;T(n.outEdges,function(o){o.setLayout({sy:a},!0),a+=o.getLayout().dy}),T(n.inEdges,function(o){o.setLayout({ty:i},!0),i+=o.getLayout().dy})})}function GM(r){r.eachSeriesByType("sankey",function(e){var t=e.getGraph(),n=t.nodes,a=t.edges;if(n.length){var i=1/0,o=-1/0;T(n,function(s){var l=s.getLayout().value;l<i&&(i=l),l>o&&(o=l)}),T(n,function(s){var l=new Ke({type:"color",mappingMethod:"linear",dataExtent:[i,o],visual:e.get("color")}),u=l.mapValueToVisual(s.getLayout().value),c=s.getModel().get(["itemStyle","color"]);c!=null?(s.setVisual("color",c),s.setVisual("style",{fill:c})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}a.length&&T(a,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function FM(r){r.registerChartView(SM),r.registerSeriesModel(wM),r.registerLayout(xM),r.registerVisual(GM),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){n.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var Pb=function(){function r(){}return r.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},r.prototype.getInitialData=function(e,t){var n,a=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),o=a.get("type"),s=i.get("type"),l;o==="category"?(e.layout="horizontal",n=a.getOrdinalMeta(),l=!this._hasEncodeRule("x")):s==="category"?(e.layout="vertical",n=i.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,d=this._baseAxisDim=u[c],f=u[1-c],h=[a,i],v=h[c].get("type"),p=h[1-c].get("type"),g=e.data;if(g&&l){var m=[];T(g,function(y,w){var _;$(y)?(_=y.slice(),y.unshift(w)):$(y.value)?(_=X({},y),_.value=_.value.slice(),y.value.unshift(w)):_=y,m.push(_)}),e.data=m}var b=this.defaultValueDimensions,S=[{name:d,type:Ku(v),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:Ku(p),dimsDef:b.slice()}];return Ti(this,{coordDimensions:S,dimensionsCount:b.length+1,encodeDefaulter:he(sA,S,this)})},r.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},r}(),kb=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(rt);rr(kb,Pb,!0);var WM=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=t.get("layout")==="horizontal"?1:0;i.diff(s).add(function(u){if(i.hasValue(u)){var c=i.getItemLayout(u),d=Kv(c,i,u,l,!0);i.setItemGraphicEl(u,d),o.add(d)}}).update(function(u,c){var d=s.getItemGraphicEl(c);if(!i.hasValue(u)){o.remove(d);return}var f=i.getItemLayout(u);d?(Fr(d),Ob(f,d,i,u)):d=Kv(f,i,u,l),o.add(d),i.setItemGraphicEl(u,d)}).remove(function(u){var c=s.getItemGraphicEl(u);c&&o.remove(c)}).execute(),this._data=i},e.prototype.remove=function(t){var n=this.group,a=this._data;this._data=null,a&&a.eachItemGraphicEl(function(i){i&&n.remove(i)})},e.type="boxplot",e}(Je),UM=function(){function r(){}return r}(),jM=function(r){V(e,r);function e(t){var n=r.call(this,t)||this;return n.type="boxplotBoxPath",n}return e.prototype.getDefaultShape=function(){return new UM},e.prototype.buildPath=function(t,n){var a=n.points,i=0;for(t.moveTo(a[i][0],a[i][1]),i++;i<4;i++)t.lineTo(a[i][0],a[i][1]);for(t.closePath();i<a.length;i++)t.moveTo(a[i][0],a[i][1]),i++,t.lineTo(a[i][0],a[i][1])},e}(ot);function Kv(r,e,t,n,a){var i=r.ends,o=new jM({shape:{points:a?$M(i,n,r):i}});return Ob(r,o,e,t,a),o}function Ob(r,e,t,n,a){var i=t.hostModel,o=ya[a?"initProps":"updateProps"];o(e,{shape:{points:r.ends}},i,n),e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=t.getItemModel(n),l=s.getModel("emphasis");Lt(e,s),Ye(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function $M(r,e,t){return G(r,function(n){return n=n.slice(),n[e]=t.initBaseline,n})}var $a=T;function YM(r){var e=ZM(r);$a(e,function(t){var n=t.seriesModels;n.length&&(XM(t),$a(n,function(a,i){qM(a,t.boxOffsetList[i],t.boxWidthList[i])}))})}function ZM(r){var e=[],t=[];return r.eachSeriesByType("boxplot",function(n){var a=n.getBaseAxis(),i=Oe(t,a);i<0&&(i=t.length,t[i]=a,e[i]={axis:a,seriesModels:[]}),e[i].seriesModels.push(n)}),e}function XM(r){var e=r.axis,t=r.seriesModels,n=t.length,a=r.boxWidthList=[],i=r.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;$a(t,function(v){l=Math.max(l,v.getData().count())});var u=e.getExtent();s=Math.abs(u[1]-u[0])/l}$a(t,function(v){var p=v.get("boxWidth");$(p)||(p=[p,p]),o.push([W(p[0],s)||0,W(p[1],s)||0])});var c=s*.8-2,d=c/n*.3,f=(c-d*(n-1))/n,h=f/2-c/2;$a(t,function(v,p){i.push(h),h+=d+f,a.push(Math.min(Math.max(f,o[p][0]),o[p][1]))})}function qM(r,e,t){var n=r.coordinateSystem,a=r.getData(),i=t/2,o=r.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=a.mapDimension(l[o]),c=a.mapDimensionsAll(l[s]);if(u==null||c.length<5)return;for(var d=0;d<a.count();d++){var f=a.get(u,d),h=S(f,c[2],d),v=S(f,c[0],d),p=S(f,c[1],d),g=S(f,c[3],d),m=S(f,c[4],d),b=[];y(b,p,!1),y(b,g,!0),b.push(v,p,m,g),w(b,v),w(b,m),w(b,h),a.setItemLayout(d,{initBaseline:h[s],ends:b})}function S(_,x,A){var C=a.get(x,A),D=[];D[o]=_,D[s]=C;var E;return isNaN(_)||isNaN(C)?E=[NaN,NaN]:(E=n.dataToPoint(D),E[o]+=e),E}function y(_,x,A){var C=x.slice(),D=x.slice();C[o]+=i,D[o]-=i,A?_.push(C,D):_.push(D,C)}function w(_,x){var A=x.slice(),C=x.slice();A[o]-=i,C[o]+=i,_.push(A,C)}}function QM(r,e){e=e||{};for(var t=[],n=[],a=e.boundIQR,i=a==="none"||a===0,o=0;o<r.length;o++){var s=Gt(r[o].slice()),l=ml(s,.25),u=ml(s,.5),c=ml(s,.75),d=s[0],f=s[s.length-1],h=(a??1.5)*(c-l),v=i?d:Math.max(d,l-h),p=i?f:Math.min(f,c+h),g=e.itemNameFormatter,m=xe(g)?g({value:o}):de(g)?g.replace("{value}",o+""):o+"";t.push([m,v,l,u,c,p]);for(var b=0;b<s.length;b++){var S=s[b];if(S<v||S>p){var y=[m,S];n.push(y)}}}return{boxData:t,outliers:n}}var KM={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Qy){var n="";Fe(n)}var a=QM(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:a.boxData},{data:a.outliers}]}};function JM(r){r.registerSeriesModel(kb),r.registerChartView(WM),r.registerLayout(YM),r.registerTransform(KM)}var eI=["itemStyle","borderColor"],tI=["itemStyle","borderColor0"],rI=["itemStyle","borderColorDoji"],nI=["itemStyle","color"],aI=["itemStyle","color0"];function $d(r,e){return e.get(r>0?nI:aI)}function Yd(r,e){return e.get(r===0?rI:r>0?eI:tI)}var iI={seriesType:"candlestick",plan:ld(),performRawSeries:!0,reset:function(r,e){if(!e.isSeriesFiltered(r)){var t=r.pipelineContext.large;return!t&&{progress:function(n,a){for(var i;(i=n.next())!=null;){var o=a.getItemModel(i),s=a.getItemLayout(i).sign,l=o.getItemStyle();l.fill=$d(s,o),l.stroke=Yd(s,o)||l.fill;var u=a.ensureUniqueItemVisual(i,"style");X(u,l)}}}}}},oI=["color","borderColor"],sI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,n,a){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,n,a,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,n):this._incrementalRenderNormal(t,n)},e.prototype.eachRendered=function(t){Gs(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var n=t.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},e.prototype._renderNormal=function(t){var n=t.getData(),a=this._data,i=this.group,o=n.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,u=l.getArea&&l.getArea();this._data||i.removeAll(),n.diff(a).add(function(c){if(n.hasValue(c)){var d=n.getItemLayout(c);if(s&&Jv(u,d))return;var f=Ql(d,c,!0);xt(f,{shape:{points:d.ends}},t,c),Kl(f,n,c,o),i.add(f),n.setItemGraphicEl(c,f)}}).update(function(c,d){var f=a.getItemGraphicEl(d);if(!n.hasValue(c)){i.remove(f);return}var h=n.getItemLayout(c);if(s&&Jv(u,h)){i.remove(f);return}f?(Ne(f,{shape:{points:h.ends}},t,c),Fr(f)):f=Ql(h),Kl(f,n,c,o),i.add(f),n.setItemGraphicEl(c,f)}).remove(function(c){var d=a.getItemGraphicEl(c);d&&i.remove(d)}).execute(),this._data=n},e.prototype._renderLarge=function(t){this._clear(),ep(t,this.group);var n=t.get("clip",!0)?Ws(t.coordinateSystem,!1,t):null;n?this.group.setClipPath(n):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,n){for(var a=n.getData(),i=a.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=a.getItemLayout(o),l=Ql(s);Kl(l,a,o,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,n){ep(n,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Je),lI=function(){function r(){}return r}(),uI=function(r){V(e,r);function e(t){var n=r.call(this,t)||this;return n.type="normalCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new lI},e.prototype.buildPath=function(t,n){var a=n.points;this.__simpleBox?(t.moveTo(a[4][0],a[4][1]),t.lineTo(a[6][0],a[6][1])):(t.moveTo(a[0][0],a[0][1]),t.lineTo(a[1][0],a[1][1]),t.lineTo(a[2][0],a[2][1]),t.lineTo(a[3][0],a[3][1]),t.closePath(),t.moveTo(a[4][0],a[4][1]),t.lineTo(a[5][0],a[5][1]),t.moveTo(a[6][0],a[6][1]),t.lineTo(a[7][0],a[7][1]))},e}(ot);function Ql(r,e,t){var n=r.ends;return new uI({shape:{points:t?cI(n,r):n},z2:100})}function Jv(r,e){for(var t=!0,n=0;n<e.ends.length;n++)if(r.contain(e.ends[n][0],e.ends[n][1])){t=!1;break}return t}function Kl(r,e,t,n){var a=e.getItemModel(t);r.useStyle(e.getItemVisual(t,"style")),r.style.strokeNoScale=!0,r.__simpleBox=n,Lt(r,a);var i=e.getItemLayout(t).sign;T(r.states,function(s,l){var u=a.getModel(l),c=$d(i,u),d=Yd(i,u)||c,f=s.style||(s.style={});c&&(f.fill=c),d&&(f.stroke=d)});var o=a.getModel("emphasis");Ye(r,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function cI(r,e){return G(r,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var dI=function(){function r(){}return r}(),Jl=function(r){V(e,r);function e(t){var n=r.call(this,t)||this;return n.type="largeCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new dI},e.prototype.buildPath=function(t,n){for(var a=n.points,i=0;i<a.length;)if(this.__sign===a[i++]){var o=a[i++];t.moveTo(o,a[i++]),t.lineTo(o,a[i++])}else i+=3},e}(ot);function ep(r,e,t,n){var a=r.getData(),i=a.getLayout("largePoints"),o=new Jl({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new Jl({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new Jl({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),eu(1,o,r),eu(-1,s,r),eu(0,l,r),n&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function eu(r,e,t,n){var a=Yd(r,t)||$d(r,t),i=t.getModel("itemStyle").getItemStyle(oI);e.useStyle(i),e.style.fill=null,e.style.stroke=a}var Nb=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,n,a){var i=n.getItemLayout(t);return i&&a.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(rt);rr(Nb,Pb,!0);function fI(r){!r||!$(r.series)||T(r.series,function(e){ct(e)&&e.type==="k"&&(e.type="candlestick")})}var hI={seriesType:"candlestick",plan:ld(),reset:function(r){var e=r.coordinateSystem,t=r.getData(),n=vI(r,t),a=0,i=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[a])),l=G(t.mapDimensionsAll(o[i]),t.getDimensionIndex,t),u=l[0],c=l[1],d=l[2],f=l[3];if(t.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),s<0||l.length<4)return;return{progress:r.pipelineContext.large?v:h};function h(p,g){for(var m,b=g.getStore();(m=p.next())!=null;){var S=b.get(s,m),y=b.get(u,m),w=b.get(c,m),_=b.get(d,m),x=b.get(f,m),A=Math.min(y,w),C=Math.max(y,w),D=N(A,S),E=N(C,S),M=N(_,S),I=N(x,S),R=[];z(R,E,0),z(R,D,1),R.push(U(I),U(E),U(M),U(D));var L=g.getItemModel(m),P=!!L.get(["itemStyle","borderColorDoji"]);g.setItemLayout(m,{sign:tp(b,m,y,w,c,P),initBaseline:y>w?E[i]:D[i],ends:R,brushRect:H(_,x,S)})}function N(Y,J){var te=[];return te[a]=J,te[i]=Y,isNaN(J)||isNaN(Y)?[NaN,NaN]:e.dataToPoint(te)}function z(Y,J,te){var re=J.slice(),oe=J.slice();re[a]=yl(re[a]+n/2,1,!1),oe[a]=yl(oe[a]-n/2,1,!0),te?Y.push(re,oe):Y.push(oe,re)}function H(Y,J,te){var re=N(Y,te),oe=N(J,te);return re[a]-=n/2,oe[a]-=n/2,{x:re[0],y:re[1],width:n,height:oe[1]-re[1]}}function U(Y){return Y[a]=yl(Y[a],1),Y}}function v(p,g){for(var m=lA(p.count*4),b=0,S,y=[],w=[],_,x=g.getStore(),A=!!r.get(["itemStyle","borderColorDoji"]);(_=p.next())!=null;){var C=x.get(s,_),D=x.get(u,_),E=x.get(c,_),M=x.get(d,_),I=x.get(f,_);if(isNaN(C)||isNaN(M)||isNaN(I)){m[b++]=NaN,b+=3;continue}m[b++]=tp(x,_,D,E,c,A),y[a]=C,y[i]=M,S=e.dataToPoint(y,null,w),m[b++]=S?S[0]:NaN,m[b++]=S?S[1]:NaN,y[i]=I,S=e.dataToPoint(y,null,w),m[b++]=S?S[1]:NaN}g.setLayout("largePoints",m)}}};function tp(r,e,t,n,a,i){var o;return t>n?o=-1:t<n?o=1:o=i?0:e>0?r.get(a,e-1)<=n?1:-1:1,o}function vI(r,e){var t=r.getBaseAxis(),n,a=t.type==="category"?t.getBandWidth():(n=t.getExtent(),Math.abs(n[1]-n[0])/e.count()),i=W(it(r.get("barMaxWidth"),a),a),o=W(it(r.get("barMinWidth"),1),a),s=r.get("barWidth");return s!=null?W(s,a):Math.max(Math.min(a/2,i),o)}function pI(r){r.registerChartView(sI),r.registerSeriesModel(Nb),r.registerPreprocessor(fI),r.registerVisual(iI),r.registerLayout(hI)}function rp(r,e){var t=e.rippleEffectColor||e.color;r.eachChild(function(n){n.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var gI=function(r){V(e,r);function e(t,n){var a=r.call(this)||this,i=new Uy(t,n),o=new ae;return a.add(i),a.add(o),a.updateData(t,n),a}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var n=t.symbolType,a=t.color,i=t.rippleNumber,o=this.childAt(1),s=0;s<i;s++){var l=mt(n,-1,-1,2,2,a);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/i*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(u).start(),o.add(l)}rp(o,t)},e.prototype.updateEffectAnimation=function(t){for(var n=this._effectCfg,a=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],o=0;o<i.length;o++){var s=i[o];if(n[s]!==t[s]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}rp(a,t)},e.prototype.highlight=function(){ii(this)},e.prototype.downplay=function(){oi(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,n){var a=this,i=t.hostModel;this.childAt(0).updateData(t,n);var o=this.childAt(1),s=t.getItemModel(n),l=t.getItemVisual(n,"symbol"),u=Di(t.getItemVisual(n,"symbolSize")),c=t.getItemVisual(n,"style"),d=c&&c.fill,f=s.getModel("emphasis");o.setScale(u),o.traverse(function(g){g.setStyle("fill",d)});var h=Li(t.getItemVisual(n,"symbolOffset"),u);h&&(o.x=h[0],o.y=h[1]);var v=t.getItemVisual(n,"symbolRotate");o.rotation=(v||0)*Math.PI/180||0;var p={};p.showEffectOn=i.get("showEffectOn"),p.rippleScale=s.get(["rippleEffect","scale"]),p.brushType=s.get(["rippleEffect","brushType"]),p.period=s.get(["rippleEffect","period"])*1e3,p.effectOffset=n/t.count(),p.z=i.getShallow("z")||0,p.zlevel=i.getShallow("zlevel")||0,p.symbolType=l,p.color=d,p.rippleEffectColor=s.get(["rippleEffect","color"]),p.rippleNumber=s.get(["rippleEffect","number"]),p.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(g){g==="emphasis"?p.showEffectOn!=="render"&&a.startEffectAnimation(p):g==="normal"&&p.showEffectOn!=="render"&&a.stopEffectAnimation()}),this._effectCfg=p,Ye(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(ae),mI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new Ls(gI)},e.prototype.render=function(t,n,a){var i=t.getData(),o=this._symbolDraw;o.updateData(i,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var n=t.coordinateSystem,a=n&&n.getArea&&n.getArea();return t.get("clip",!0)?a:null},e.prototype.updateTransform=function(t,n,a){var i=t.getData();this.group.dirty();var o=Rs("").reset(t,n,a);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var n=t.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=uA(n.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,n){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Je),yI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,n){return ma(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,n,a){return a.point(n.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(rt);function bI(r){r.registerChartView(mI),r.registerSeriesModel(yI),r.registerLayout(Rs("effectScatter"))}var Vb=function(r){V(e,r);function e(t,n,a){var i=r.call(this)||this;return i.add(i.createLine(t,n,a)),i._updateEffectSymbol(t,n),i}return e.prototype.createLine=function(t,n,a){return new Vd(t,n,a)},e.prototype._updateEffectSymbol=function(t,n){var a=t.getItemModel(n),i=a.getModel("effect"),o=i.get("symbolSize"),s=i.get("symbol");$(o)||(o=[o,o]);var l=t.getItemVisual(n,"style"),u=i.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==s&&(this.remove(c),c=mt(s,-.5,-.5,1,1,u),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",u),c.setStyle(i.getItemStyle(["color"])),c.scaleX=o[0],c.scaleY=o[1],c.setColor(u),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(t,i,n))},e.prototype._updateEffectAnimation=function(t,n,a){var i=this.childAt(1);if(i){var o=t.getItemLayout(a),s=n.get("period")*1e3,l=n.get("loop"),u=n.get("roundTrip"),c=n.get("constantSpeed"),d=Tt(n.get("delay"),function(h){return h/t.count()*s/3});if(i.ignore=!0,this._updateAnimationPoints(i,o),c>0&&(s=this._getLineLength(i)/c*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){i.stopAnimation();var f=void 0;xe(d)?f=d(a):f=d,i.__t>0&&(f=-s*i.__t),this._animateSymbol(i,s,f,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},e.prototype._animateSymbol=function(t,n,a,i,o){if(n>0){t.__t=0;var s=this,l=t.animate("",i).when(o?n*2:n,{__t:o?2:1}).delay(a).during(function(){s._updateSymbolPosition(t)});i||l.done(function(){s.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return Ba(t.__p1,t.__cp1)+Ba(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,n){t.__p1=n[0],t.__p2=n[1],t.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},e.prototype.updateData=function(t,n,a){this.childAt(0).updateData(t,n,a),this._updateEffectSymbol(t,n)},e.prototype._updateSymbolPosition=function(t){var n=t.__p1,a=t.__p2,i=t.__cp1,o=t.__t<1?t.__t:2-t.__t,s=[t.x,t.y],l=s.slice(),u=Zy,c=cA;s[0]=u(n[0],i[0],a[0],o),s[1]=u(n[1],i[1],a[1],o);var d=t.__t<1?c(n[0],i[0],a[0],o):c(a[0],i[0],n[0],1-o),f=t.__t<1?c(n[1],i[1],a[1],o):c(a[1],i[1],n[1],1-o);t.rotation=-Math.atan2(f,d)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=Ba(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*Ba(n,s):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=s[0],t.y=s[1]},e.prototype.updateLayout=function(t,n){this.childAt(0).updateLayout(t,n);var a=t.getItemModel(n).getModel("effect");this._updateEffectAnimation(t,a,n)},e}(ae),Bb=function(r){V(e,r);function e(t,n,a){var i=r.call(this)||this;return i._createPolyline(t,n,a),i}return e.prototype._createPolyline=function(t,n,a){var i=t.getItemLayout(n),o=new vr({shape:{points:i}});this.add(o),this._updateCommonStl(t,n,a)},e.prototype.updateData=function(t,n,a){var i=t.hostModel,o=this.childAt(0),s={shape:{points:t.getItemLayout(n)}};Ne(o,s,i,n),this._updateCommonStl(t,n,a)},e.prototype._updateCommonStl=function(t,n,a){var i=this.childAt(0),o=t.getItemModel(n),s=a&&a.emphasisLineStyle,l=a&&a.focus,u=a&&a.blurScope,c=a&&a.emphasisDisabled;if(!a||t.hasItemOption){var d=o.getModel("emphasis");s=d.getModel("lineStyle").getLineStyle(),c=d.get("disabled"),l=d.get("focus"),u=d.get("blurScope")}i.useStyle(t.getItemVisual(n,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var f=i.ensureState("emphasis");f.style=s,Ye(this,l,u,c)},e.prototype.updateLayout=function(t,n){var a=this.childAt(0);a.setShape("points",t.getItemLayout(n))},e}(ae),SI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,n,a){return new Bb(t,n,a)},e.prototype._updateAnimationPoints=function(t,n){this._points=n;for(var a=[0],i=0,o=1;o<n.length;o++){var s=n[o-1],l=n[o];i+=Ba(s,l),a.push(i)}if(i===0){this._length=0;return}for(var o=0;o<a.length;o++)a[o]/=i;this._offsets=a,this._length=i},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var n=t.__t<1?t.__t:2-t.__t,a=this._points,i=this._offsets,o=a.length;if(i){var s=this._lastFrame,l;if(n<this._lastFramePercent){var u=Math.min(s+1,o-1);for(l=u;l>=0&&!(i[l]<=n);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(i[l]>n);l++);l=Math.min(l-1,o-2)}var c=(n-i[l])/(i[l+1]-i[l]),d=a[l],f=a[l+1];t.x=d[0]*(1-c)+c*f[0],t.y=d[1]*(1-c)+c*f[1];var h=t.__t<1?f[0]-d[0]:d[0]-f[0],v=t.__t<1?f[1]-d[1]:d[1]-f[1];t.rotation=-Math.atan2(v,h)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=n,t.ignore=!1}},e}(Vb),_I=function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r}(),wI=function(r){V(e,r);function e(t){var n=r.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new _I},e.prototype.buildPath=function(t,n){var a=n.segs,i=n.curveness,o;if(n.polyline)for(o=this._off;o<a.length;){var s=a[o++];if(s>0){t.moveTo(a[o++],a[o++]);for(var l=1;l<s;l++)t.lineTo(a[o++],a[o++])}}else for(o=this._off;o<a.length;){var u=a[o++],c=a[o++],d=a[o++],f=a[o++];if(t.moveTo(u,c),i>0){var h=(u+d)/2-(c-f)*i,v=(c+f)/2-(d-u)*i;t.quadraticCurveTo(h,v,d,f)}else t.lineTo(d,f)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(t,n){var a=this.shape,i=a.segs,o=a.curveness,s=this.style.lineWidth;if(a.polyline)for(var l=0,u=0;u<i.length;){var c=i[u++];if(c>0)for(var d=i[u++],f=i[u++],h=1;h<c;h++){var v=i[u++],p=i[u++];if(hh(d,f,v,p,s,t,n))return l}l++}else for(var l=0,u=0;u<i.length;){var d=i[u++],f=i[u++],v=i[u++],p=i[u++];if(o>0){var g=(d+v)/2-(f-p)*o,m=(f+p)/2-(v-d)*o;if(dA(d,f,g,m,v,p,s,t,n))return l}else if(hh(d,f,v,p,s,t,n))return l;l++}return-1},e.prototype.contain=function(t,n){var a=this.transformCoordToLocal(t,n),i=this.getBoundingRect();if(t=a[0],n=a[1],i.contain(t,n)){var o=this.hoverDataIdx=this.findDataIndex(t,n);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var n=this.shape,a=n.segs,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a.length;){var c=a[u++],d=a[u++];i=Math.min(c,i),s=Math.max(c,s),o=Math.min(d,o),l=Math.max(d,l)}t=this._rect=new He(i,o,s,l)}return t},e}(ot),xI=function(){function r(){this.group=new ae}return r.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},r.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(e,t){var n=this._newAdded[0],a=t.getLayout("linesPoints"),i=n&&n.shape.segs;if(i&&i.length<2e4){var o=i.length,s=new Float32Array(o+a.length);s.set(i),s.set(a,o),n.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:a}),this._setCommon(l,t),l.__startIndex=e.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new wI({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},r.prototype._setCommon=function(e,t,n){var a=t.hostModel;e.setShape({polyline:a.get("polyline"),curveness:a.get(["lineStyle","curveness"])}),e.useStyle(a.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("style");i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null);var o=Ae(e);o.seriesIndex=a.seriesIndex,e.on("mousemove",function(s){o.dataIndex=null;var l=e.hoverDataIdx;l>0&&(o.dataIndex=l+e.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),zb={seriesType:"lines",plan:ld(),reset:function(r){var e=r.coordinateSystem;if(e){var t=r.get("polyline"),n=r.pipelineContext.large;return{progress:function(a,i){var o=[];if(n){var s=void 0,l=a.end-a.start;if(t){for(var u=0,c=a.start;c<a.end;c++)u+=r.getLineCoordsCount(c);s=new Float32Array(l+u*2)}else s=new Float32Array(l*4);for(var d=0,f=[],c=a.start;c<a.end;c++){var h=r.getLineCoords(c,o);t&&(s[d++]=h);for(var v=0;v<h;v++)f=e.dataToPoint(o[v],!1,f),s[d++]=f[0],s[d++]=f[1]}i.setLayout("linesPoints",s)}else for(var c=a.start;c<a.end;c++){var p=i.getItemModel(c),h=r.getLineCoords(c,o),g=[];if(t)for(var m=0;m<h;m++)g.push(e.dataToPoint(o[m]));else{g[0]=e.dataToPoint(o[0]),g[1]=e.dataToPoint(o[1]);var b=p.get(["lineStyle","curveness"]);+b&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*b,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*b])}i.setItemLayout(c,g)}}}}}},AI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.getData(),o=this._updateLineDraw(i,t),s=t.get("zlevel"),l=t.get(["effect","trailLength"]),u=a.getZr(),c=u.painter.getType()==="svg";c||u.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!c&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(c||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(i);var d=t.get("clip",!0)&&Ws(t.coordinateSystem,!1,t);d?this.group.setClipPath(d):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,n,a){var i=t.getData(),o=this._updateLineDraw(i,t);o.incrementalPrepareUpdate(i),this._clearLayer(a),this._finished=!1},e.prototype.incrementalRender=function(t,n,a){this._lineDraw.incrementalUpdate(t,n.getData()),this._finished=t.end===n.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,n,a){var i=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=zb.reset(t,n,a);s.progress&&s.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(a)},e.prototype._updateLineDraw=function(t,n){var a=this._lineDraw,i=this._showEffect(n),o=!!n.get("polyline"),s=n.pipelineContext,l=s.large;return(!a||i!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(a&&a.remove(),a=this._lineDraw=l?new xI:new Bd(o?i?SI:Bb:i?Vb:Vd),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=l),this.group.add(a.group),a},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var n=t.getZr(),a=n.painter.getType()==="svg";!a&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},e.prototype.dispose=function(t,n){this.remove(t,n)},e.type="lines",e}(Je),CI=typeof Uint32Array>"u"?Array:Uint32Array,DI=typeof Float64Array>"u"?Array:Float64Array;function np(r){var e=r.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(r.data=G(e,function(t){var n=[t[0].coord,t[1].coord],a={coords:n};return t[0].name&&(a.fromName=t[0].name),t[1].name&&(a.toName=t[1].name),td([a,t[0],t[1]])}))}var TI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],np(t);var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count)),r.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(np(t),t.data){var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count))}r.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var n=this._processFlatCoordsArray(t.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=Go(this._flatCoords,n.flatCoords),this._flatCoordsOffset=Go(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),t.data=new Float32Array(n.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var n=this.getData().getItemModel(t),a=n.option instanceof Array?n.option:n.getShallow("coords");return a},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,n){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[t*2],i=this._flatCoordsOffset[t*2+1],o=0;o<i;o++)n[o]=n[o]||[],n[o][0]=this._flatCoords[a+o*2],n[o][1]=this._flatCoords[a+o*2+1];return i}else{for(var s=this._getCoordsFromItemModel(t),o=0;o<s.length;o++)n[o]=n[o]||[],n[o][0]=s[o][0],n[o][1]=s[o][1];return s.length}},e.prototype._processFlatCoordsArray=function(t){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),er(t[0])){for(var a=t.length,i=new CI(a),o=new DI(a),s=0,l=0,u=0,c=0;c<a;){u++;var d=t[c++];i[l++]=s+n,i[l++]=d;for(var f=0;f<d;f++){var h=t[c++],v=t[c++];o[s++]=h,o[s++]=v}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,l),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,n){var a=new It(["value"],this);return a.hasItemOption=!1,a.initData(t.data,[],function(i,o,s,l){if(i instanceof Array)return NaN;a.hasItemOption=!0;var u=i.value;if(u!=null)return u instanceof Array?u[l]:u}),a},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),o=i.getItemModel(t),s=o.get("name");if(s)return s;var l=o.get("fromName"),u=o.get("toName"),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),Ct("nameValue",{name:c.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),n=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&n>0?n+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(rt);function so(r){return r instanceof Array||(r=[r,r]),r}var EI={seriesType:"lines",reset:function(r){var e=so(r.get("symbol")),t=so(r.get("symbolSize")),n=r.getData();n.setVisual("fromSymbol",e&&e[0]),n.setVisual("toSymbol",e&&e[1]),n.setVisual("fromSymbolSize",t&&t[0]),n.setVisual("toSymbolSize",t&&t[1]);function a(i,o){var s=i.getItemModel(o),l=so(s.getShallow("symbol",!0)),u=so(s.getShallow("symbolSize",!0));l[0]&&i.setItemVisual(o,"fromSymbol",l[0]),l[1]&&i.setItemVisual(o,"toSymbol",l[1]),u[0]&&i.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&i.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:n.hasItemOption?a:null}}};function MI(r){r.registerChartView(AI),r.registerSeriesModel(TI),r.registerLayout(zb),r.registerVisual(EI)}var II=256,RI=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=vh.createCanvas();this.canvas=e}return r.prototype.update=function(e,t,n,a,i,o){var s=this._getBrush(),l=this._getGradient(i,"inRange"),u=this._getGradient(i,"outOfRange"),c=this.pointSize+this.blurSize,d=this.canvas,f=d.getContext("2d"),h=e.length;d.width=t,d.height=n;for(var v=0;v<h;++v){var p=e[v],g=p[0],m=p[1],b=p[2],S=a(b);f.globalAlpha=S,f.drawImage(s,g-c,m-c)}if(!d.width||!d.height)return d;for(var y=f.getImageData(0,0,d.width,d.height),w=y.data,_=0,x=w.length,A=this.minOpacity,C=this.maxOpacity,D=C-A;_<x;){var S=w[_+3]/256,E=Math.floor(S*(II-1))*4;if(S>0){var M=o(S)?l:u;S>0&&(S=S*D+A),w[_++]=M[E],w[_++]=M[E+1],w[_++]=M[E+2],w[_++]=M[E+3]*S*256}else _+=4}return f.putImageData(y,0,0),d},r.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=vh.createCanvas()),t=this.pointSize+this.blurSize,n=t*2;e.width=n,e.height=n;var a=e.getContext("2d");return a.clearRect(0,0,n,n),a.shadowOffsetX=n,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-t,t,this.pointSize,0,Math.PI*2,!0),a.closePath(),a.fill(),e},r.prototype._getGradient=function(e,t){for(var n=this._gradientPixels,a=n[t]||(n[t]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],o=0,s=0;s<256;s++)e[t](s/255,!0,i),a[o++]=i[0],a[o++]=i[1],a[o++]=i[2],a[o++]=i[3];return a},r}();function LI(r,e,t){var n=r[1]-r[0];e=G(e,function(o){return{interval:[(o.interval[0]-r[0])/n,(o.interval[1]-r[0])/n]}});var a=e.length,i=0;return function(o){var s;for(s=i;s<a;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){i=s;break}}if(s===a)for(s=i-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){i=s;break}}return s>=0&&s<a&&t[s]}}function PI(r,e){var t=r[1]-r[0];return e=[(e[0]-r[0])/t,(e[1]-r[0])/t],function(n){return n>=e[0]&&n<=e[1]}}function ap(r){var e=r.dimensions;return e[0]==="lng"&&e[1]==="lat"}var kI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i;n.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(i=s)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(t,a,0,t.getData().count()):ap(o)&&this._renderOnGeo(o,t,i,a)},e.prototype.incrementalPrepareRender=function(t,n,a){this.group.removeAll()},e.prototype.incrementalRender=function(t,n,a,i){var o=n.coordinateSystem;o&&(ap(o)?this.render(n,a,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,i,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Gs(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,n,a,i,o){var s=t.coordinateSystem,l=Us(s,"cartesian2d"),u,c,d,f;if(l){var h=s.getAxis("x"),v=s.getAxis("y");u=h.getBandWidth()+.5,c=v.getBandWidth()+.5,d=h.scale.getExtent(),f=v.scale.getExtent()}for(var p=this.group,g=t.getData(),m=t.getModel(["emphasis","itemStyle"]).getItemStyle(),b=t.getModel(["blur","itemStyle"]).getItemStyle(),S=t.getModel(["select","itemStyle"]).getItemStyle(),y=t.get(["itemStyle","borderRadius"]),w=At(t),_=t.getModel("emphasis"),x=_.get("focus"),A=_.get("blurScope"),C=_.get("disabled"),D=l?[g.mapDimension("x"),g.mapDimension("y"),g.mapDimension("value")]:[g.mapDimension("time"),g.mapDimension("value")],E=a;E<i;E++){var M=void 0,I=g.getItemVisual(E,"style");if(l){var R=g.get(D[0],E),L=g.get(D[1],E);if(isNaN(g.get(D[2],E))||isNaN(R)||isNaN(L)||R<d[0]||R>d[1]||L<f[0]||L>f[1])continue;var P=s.dataToPoint([R,L]);M=new Ge({shape:{x:P[0]-u/2,y:P[1]-c/2,width:u,height:c},style:I})}else{if(isNaN(g.get(D[1],E)))continue;M=new Ge({z2:1,shape:s.dataToRect([g.get(D[0],E)]).contentShape,style:I})}if(g.hasItemOption){var N=g.getItemModel(E),z=N.getModel("emphasis");m=z.getModel("itemStyle").getItemStyle(),b=N.getModel(["blur","itemStyle"]).getItemStyle(),S=N.getModel(["select","itemStyle"]).getItemStyle(),y=N.get(["itemStyle","borderRadius"]),x=z.get("focus"),A=z.get("blurScope"),C=z.get("disabled"),w=At(N)}M.shape.r=y;var H=t.getRawValue(E),U="-";H&&H[2]!=null&&(U=H[2]+""),jt(M,w,{labelFetcher:t,labelDataIndex:E,defaultOpacity:I.opacity,defaultText:U}),M.ensureState("emphasis").style=m,M.ensureState("blur").style=b,M.ensureState("select").style=S,Ye(M,x,A,C),M.incremental=o,o&&(M.states.emphasis.hoverLayer=!0),p.add(M),g.setItemGraphicEl(E,M),this._progressiveEls&&this._progressiveEls.push(M)}},e.prototype._renderOnGeo=function(t,n,a,i){var o=a.targetVisuals.inRange,s=a.targetVisuals.outOfRange,l=n.getData(),u=this._hmLayer||this._hmLayer||new RI;u.blurSize=n.get("blurSize"),u.pointSize=n.get("pointSize"),u.minOpacity=n.get("minOpacity"),u.maxOpacity=n.get("maxOpacity");var c=t.getViewRect().clone(),d=t.getRoamTransform();c.applyTransform(d);var f=Math.max(c.x,0),h=Math.max(c.y,0),v=Math.min(c.width+c.x,i.getWidth()),p=Math.min(c.height+c.y,i.getHeight()),g=v-f,m=p-h,b=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],S=l.mapArray(b,function(x,A,C){var D=t.dataToPoint([x,A]);return D[0]-=f,D[1]-=h,D.push(C),D}),y=a.getExtent(),w=a.type==="visualMap.continuous"?PI(y,a.option.range):LI(y,a.getPieceList(),a.option.selected);u.update(S,g,m,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},w);var _=new hr({style:{width:g,height:m,x:f,y:h,image:u.canvas},silent:!0});this.group.add(_)},e.type="heatmap",e}(Je),OI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,n){return ma(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=Xy.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(rt);function NI(r){r.registerChartView(kI),r.registerSeriesModel(OI)}var VI=["itemStyle","borderWidth"],ip=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],tu=new Ei,BI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=this.group,o=t.getData(),s=this._data,l=t.coordinateSystem,u=l.getBaseAxis(),c=u.isHorizontal(),d=l.master.getRect(),f={ecSize:{width:a.getWidth(),height:a.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[d.x,d.x+d.width],[d.y,d.y+d.height]],isHorizontal:c,valueDim:ip[+c],categoryDim:ip[1-+c]};o.diff(s).add(function(v){if(o.hasValue(v)){var p=sp(o,v),g=op(o,v,p,f),m=lp(o,f,g);o.setItemGraphicEl(v,m),i.add(m),cp(m,f,g)}}).update(function(v,p){var g=s.getItemGraphicEl(p);if(!o.hasValue(v)){i.remove(g);return}var m=sp(o,v),b=op(o,v,m,f),S=jb(o,b);g&&S!==g.__pictorialShapeStr&&(i.remove(g),o.setItemGraphicEl(v,null),g=null),g?jI(g,f,b):g=lp(o,f,b,!0),o.setItemGraphicEl(v,g),g.__pictorialSymbolMeta=b,i.add(g),cp(g,f,b)}).remove(function(v){var p=s.getItemGraphicEl(v);p&&up(s,v,p.__pictorialSymbolMeta.animationModel,p)}).execute();var h=t.get("clip",!0)?Ws(t.coordinateSystem,!1,t):null;return h?i.setClipPath(h):i.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(t,n){var a=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(o){up(i,Ae(o).dataIndex,t,o)}):a.removeAll()},e.type="pictorialBar",e}(Je);function op(r,e,t,n){var a=r.getItemLayout(e),i=t.get("symbolRepeat"),o=t.get("symbolClip"),s=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),u=(l||0)*Math.PI/180||0,c=t.get("symbolPatternSize")||2,d=t.isAnimationEnabled(),f={dataIndex:e,layout:a,itemModel:t,symbolType:r.getItemVisual(e,"symbol")||"circle",style:r.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:i,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:d?t:null,hoverScale:d&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};zI(t,i,a,n,f),HI(r,e,a,i,o,f.boundingLength,f.pxSign,c,n,f),GI(t,f.symbolScale,u,n,f);var h=f.symbolSize,v=Li(t.get("symbolOffset"),h);return FI(t,h,a,i,o,v,s,f.valueLineWidth,f.boundingLength,f.repeatCutLength,n,f),f}function zI(r,e,t,n,a){var i=n.valueDim,o=r.get("symbolBoundingData"),s=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(t[i.wh]<=0),c;if($(o)){var d=[ru(s,o[0])-l,ru(s,o[1])-l];d[1]<d[0]&&d.reverse(),c=d[u]}else o!=null?c=ru(s,o)-l:e?c=n.coordSysExtent[i.index][u]-l:c=t[i.wh];a.boundingLength=c,e&&(a.repeatCutLength=t[i.wh]);var f=i.xy==="x",h=s.inverse;a.pxSign=f&&!h||!f&&h?c>=0?1:-1:c>0?1:-1}function ru(r,e){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(e)))}function HI(r,e,t,n,a,i,o,s,l,u){var c=l.valueDim,d=l.categoryDim,f=Math.abs(t[d.wh]),h=r.getItemVisual(e,"symbolSize"),v;$(h)?v=h.slice():h==null?v=["100%","100%"]:v=[h,h],v[d.index]=W(v[d.index],f),v[c.index]=W(v[c.index],n?f:Math.abs(i)),u.symbolSize=v;var p=u.symbolScale=[v[0]/s,v[1]/s];p[c.index]*=(l.isHorizontal?-1:1)*o}function GI(r,e,t,n,a){var i=r.get(VI)||0;i&&(tu.attr({scaleX:e[0],scaleY:e[1],rotation:t}),tu.updateTransform(),i/=tu.getLineScale(),i*=e[n.valueDim.index]),a.valueLineWidth=i||0}function FI(r,e,t,n,a,i,o,s,l,u,c,d){var f=c.categoryDim,h=c.valueDim,v=d.pxSign,p=Math.max(e[h.index]+s,0),g=p;if(n){var m=Math.abs(l),b=Tt(r.get("symbolMargin"),"15%")+"",S=!1;b.lastIndexOf("!")===b.length-1&&(S=!0,b=b.slice(0,b.length-1));var y=W(b,e[h.index]),w=Math.max(p+y*2,0),_=S?0:y*2,x=fA(n),A=x?n:dp((m+_)/w),C=m-A*p;y=C/2/(S?A:Math.max(A-1,1)),w=p+y*2,_=S?0:y*2,!x&&n!=="fixed"&&(A=u?dp((Math.abs(u)+_)/w):0),g=A*w-_,d.repeatTimes=A,d.symbolMargin=y}var D=v*(g/2),E=d.pathPosition=[];E[f.index]=t[f.wh]/2,E[h.index]=o==="start"?D:o==="end"?l-D:l/2,i&&(E[0]+=i[0],E[1]+=i[1]);var M=d.bundlePosition=[];M[f.index]=t[f.xy],M[h.index]=t[h.xy];var I=d.barRectShape=X({},t);I[h.wh]=v*Math.max(Math.abs(t[h.wh]),Math.abs(E[h.index]+D)),I[f.wh]=t[f.wh];var R=d.clipShape={};R[f.xy]=-t[f.xy],R[f.wh]=c.ecSize[f.wh],R[h.xy]=0,R[h.wh]=t[h.wh]}function Hb(r){var e=r.symbolPatternSize,t=mt(r.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function Gb(r,e,t,n){var a=r.__pictorialBundle,i=t.symbolSize,o=t.valueLineWidth,s=t.pathPosition,l=e.valueDim,u=t.repeatTimes||0,c=0,d=i[e.valueDim.index]+o+t.symbolMargin*2;for(Zd(r,function(p){p.__pictorialAnimationIndex=c,p.__pictorialRepeatTimes=u,c<u?na(p,null,v(c),t,n):na(p,null,{scaleX:0,scaleY:0},t,n,function(){a.remove(p)}),c++});c<u;c++){var f=Hb(t);f.__pictorialAnimationIndex=c,f.__pictorialRepeatTimes=u,a.add(f);var h=v(c);na(f,{x:h.x,y:h.y,scaleX:0,scaleY:0},{scaleX:h.scaleX,scaleY:h.scaleY,rotation:h.rotation},t,n)}function v(p){var g=s.slice(),m=t.pxSign,b=p;return(t.symbolRepeatDirection==="start"?m>0:m<0)&&(b=u-1-p),g[l.index]=d*(b-u/2+.5)+s[l.index],{x:g[0],y:g[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function Fb(r,e,t,n){var a=r.__pictorialBundle,i=r.__pictorialMainPath;i?na(i,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,n):(i=r.__pictorialMainPath=Hb(t),a.add(i),na(i,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,n))}function Wb(r,e,t){var n=X({},e.barRectShape),a=r.__pictorialBarRect;a?na(a,null,{shape:n},e,t):(a=r.__pictorialBarRect=new Ge({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),a.disableMorphing=!0,r.add(a))}function Ub(r,e,t,n){if(t.symbolClip){var a=r.__pictorialClipPath,i=X({},t.clipShape),o=e.valueDim,s=t.animationModel,l=t.dataIndex;if(a)Ne(a,{shape:i},s,l);else{i[o.wh]=0,a=new Ge({shape:i}),r.__pictorialBundle.setClipPath(a),r.__pictorialClipPath=a;var u={};u[o.wh]=t.clipShape[o.wh],ya[n?"updateProps":"initProps"](a,{shape:u},s,l)}}}function sp(r,e){var t=r.getItemModel(e);return t.getAnimationDelayParams=WI,t.isAnimationEnabled=UI,t}function WI(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function UI(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function lp(r,e,t,n){var a=new ae,i=new ae;return a.add(i),a.__pictorialBundle=i,i.x=t.bundlePosition[0],i.y=t.bundlePosition[1],t.symbolRepeat?Gb(a,e,t):Fb(a,e,t),Wb(a,t,n),Ub(a,e,t,n),a.__pictorialShapeStr=jb(r,t),a.__pictorialSymbolMeta=t,a}function jI(r,e,t){var n=t.animationModel,a=t.dataIndex,i=r.__pictorialBundle;Ne(i,{x:t.bundlePosition[0],y:t.bundlePosition[1]},n,a),t.symbolRepeat?Gb(r,e,t,!0):Fb(r,e,t,!0),Wb(r,t,!0),Ub(r,e,t,!0)}function up(r,e,t,n){var a=n.__pictorialBarRect;a&&a.removeTextContent();var i=[];Zd(n,function(o){i.push(o)}),n.__pictorialMainPath&&i.push(n.__pictorialMainPath),n.__pictorialClipPath&&(t=null),T(i,function(o){Fo(o,{scaleX:0,scaleY:0},t,e,function(){n.parent&&n.parent.remove(n)})}),r.setItemGraphicEl(e,null)}function jb(r,e){return[r.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function Zd(r,e,t){T(r.__pictorialBundle.children(),function(n){n!==r.__pictorialBarRect&&e.call(t,n)})}function na(r,e,t,n,a,i){e&&r.attr(e),n.symbolClip&&!a?t&&r.attr(t):t&&ya[a?"updateProps":"initProps"](r,t,n.animationModel,n.dataIndex,i)}function cp(r,e,t){var n=t.dataIndex,a=t.itemModel,i=a.getModel("emphasis"),o=i.getModel("itemStyle").getItemStyle(),s=a.getModel(["blur","itemStyle"]).getItemStyle(),l=a.getModel(["select","itemStyle"]).getItemStyle(),u=a.getShallow("cursor"),c=i.get("focus"),d=i.get("blurScope"),f=i.get("scale");Zd(r,function(p){if(p instanceof hr){var g=p.style;p.useStyle(X({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},t.style))}else p.useStyle(t.style);var m=p.ensureState("emphasis");m.style=o,f&&(m.scaleX=p.scaleX*1.1,m.scaleY=p.scaleY*1.1),p.ensureState("blur").style=s,p.ensureState("select").style=l,u&&(p.cursor=u),p.z2=t.z2});var h=e.valueDim.posDesc[+(t.boundingLength>0)],v=r.__pictorialBarRect;v.ignoreClip=!0,jt(v,At(a),{labelFetcher:e.seriesModel,labelDataIndex:n,defaultText:Ju(e.seriesModel.getData(),n),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:h}),Ye(r,c,d,i.get("disabled"))}function dp(r){var e=Math.round(r);return Math.abs(r-e)<1e-4?e:Math.ceil(r)}var $I=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,r.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Sa(ph.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(ph);function YI(r){r.registerChartView(BI),r.registerSeriesModel($I),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,he(hA,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,vA("pictorialBar"))}var ZI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,n,a){var i=t.getData(),o=this,s=this.group,l=t.getLayerSeries(),u=i.getLayout("layoutInfo"),c=u.rect,d=u.boundaryGap;s.x=0,s.y=c.y+d[0];function f(g){return g.name}var h=new Wr(this._layersSeries||[],l,f,f),v=[];h.add(Z(p,this,"add")).update(Z(p,this,"update")).remove(Z(p,this,"remove")).execute();function p(g,m,b){var S=o._layers;if(g==="remove"){s.remove(S[m]);return}for(var y=[],w=[],_,x=l[m].indices,A=0;A<x.length;A++){var C=i.getItemLayout(x[A]),D=C.x,E=C.y0,M=C.y;y.push(D,E),w.push(D,E+M),_=i.getItemVisual(x[A],"style")}var I,R=i.getItemLayout(x[0]),L=t.getModel("label"),P=L.get("margin"),N=t.getModel("emphasis");if(g==="add"){var z=v[m]=new ae;I=new pA({shape:{points:y,stackedOnPoints:w,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),z.add(I),s.add(z),t.isAnimationEnabled()&&I.setClipPath(XI(I.getBoundingRect(),t,function(){I.removeClipPath()}))}else{var z=S[b];I=z.childAt(0),s.add(z),v[m]=z,Ne(I,{shape:{points:y,stackedOnPoints:w}},t),Fr(I)}jt(I,At(t),{labelDataIndex:x[A-1],defaultText:i.getName(x[A-1]),inheritColor:_.fill},{normal:{verticalAlign:"middle"}}),I.setTextConfig({position:null,local:!0});var H=I.getTextContent();H&&(H.x=R.x-P,H.y=R.y0+R.y/2),I.useStyle(_),i.setItemGraphicEl(m,I),Lt(I,t),Ye(I,N.get("focus"),N.get("blurScope"),N.get("disabled"))}this._layersSeries=l,this._layers=v},e.type="themeRiver",e}(Je);function XI(r,e,t){var n=new Ge({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return xt(n,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},e,t),n}var nu=2,qI=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ps(Z(this.getData,this),Z(this.getRawData,this))},e.prototype.fixData=function(t){var n=t.length,a={},i=Qu(t,function(f){return a.hasOwnProperty(f[0]+"")||(a[f[0]+""]=-1),f[2]}),o=[];i.buckets.each(function(f,h){o.push({name:h,dataList:f})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,c=0;c<o[l].dataList.length;++c){var d=o[l].dataList[c][0]+"";a[d]=l}for(var d in a)a.hasOwnProperty(d)&&a[d]!==l&&(a[d]=l,t[n]=[d,0,u],n++)}return t},e.prototype.getInitialData=function(t,n){for(var a=this.getReferringComponents("singleAxis",cr).models[0],i=a.get("type"),o=Qe(t.data,function(v){return v[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=le(),c=0,d=0;d<s.length;++d)l.push(s[d][nu]),u.get(s[d][nu])||(u.set(s[d][nu],c),c++);var f=rd(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Ku(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,h=new It(f,this);return h.initData(s),h},e.prototype.getLayerSeries=function(){for(var t=this.getData(),n=t.count(),a=[],i=0;i<n;++i)a[i]=i;var o=t.mapDimension("single"),s=Qu(a,function(u){return t.get("name",u)}),l=[];return s.buckets.each(function(u,c){u.sort(function(d,f){return t.get(o,d)-t.get(o,f)}),l.push({name:c,indices:u})}),l},e.prototype.getAxisTooltipData=function(t,n,a){$(t)||(t=t?[t]:[]);for(var i=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,c=0;c<l;++c){for(var d=Number.MAX_VALUE,f=-1,h=o[c].indices.length,v=0;v<h;++v){var p=i.get(t[0],o[c].indices[v]),g=Math.abs(p-n);g<=d&&(u=p,d=g,f=o[c].indices[v])}s.push(f)}return{dataIndices:s,nestestValue:u}},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),o=i.getName(t),s=i.get(i.mapDimension("value"),t);return Ct("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(rt);function QI(r,e){r.eachSeriesByType("themeRiver",function(t){var n=t.getData(),a=t.coordinateSystem,i={},o=a.getRect();i.rect=o;var s=t.get("boundaryGap"),l=a.getAxis();if(i.boundaryGap=s,l.orient==="horizontal"){s[0]=W(s[0],o.height),s[1]=W(s[1],o.height);var u=o.height-s[0]-s[1];fp(n,t,u)}else{s[0]=W(s[0],o.width),s[1]=W(s[1],o.width);var c=o.width-s[0]-s[1];fp(n,t,c)}n.setLayout("layoutInfo",i)})}function fp(r,e,t){if(r.count())for(var n=e.coordinateSystem,a=e.getLayerSeries(),i=r.mapDimension("single"),o=r.mapDimension("value"),s=G(a,function(g){return G(g.indices,function(m){var b=n.dataToPoint(r.get(i,m));return b[1]=r.get(o,m),b})}),l=KI(s),u=l.y0,c=t/l.max,d=a.length,f=a[0].indices.length,h,v=0;v<f;++v){h=u[v]*c,r.setItemLayout(a[0].indices[v],{layerIndex:0,x:s[0][v][0],y0:h,y:s[0][v][1]*c});for(var p=1;p<d;++p)h+=s[p-1][v][1]*c,r.setItemLayout(a[p].indices[v],{layerIndex:p,x:s[p][v][0],y0:h,y:s[p][v][1]*c})}}function KI(r){for(var e=r.length,t=r[0].length,n=[],a=[],i=0,o=0;o<t;++o){for(var s=0,l=0;l<e;++l)s+=r[l][o][1];s>i&&(i=s),n.push(s)}for(var u=0;u<t;++u)a[u]=(i-n[u])/2;i=0;for(var c=0;c<t;++c){var d=n[c]+a[c];d>i&&(i=d)}return{y0:a,max:i}}function JI(r){r.registerChartView(ZI),r.registerSeriesModel(qI),r.registerLayout(QI),r.registerProcessor(Os("themeRiver"))}var eR=2,tR=4,hp=function(r){V(e,r);function e(t,n,a,i){var o=r.call(this)||this;o.z2=eR,o.textConfig={inside:!0},Ae(o).seriesIndex=n.seriesIndex;var s=new Ie({z2:tR,silent:t.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,t,n,a,i),o}return e.prototype.updateData=function(t,n,a,i,o){this.node=n,n.piece=this,a=a||this._seriesModel,i=i||this._ecModel;var s=this;Ae(s).dataIndex=n.dataIndex;var l=n.getModel(),u=l.getModel("emphasis"),c=n.getLayout(),d=X({},c);d.label=null;var f=n.getVisual("style");f.lineJoin="bevel";var h=n.getVisual("decal");h&&(f.decal=Jc(h,o));var v=gh(l.getModel("itemStyle"),d,!0);X(d,v),T(qu,function(b){var S=s.ensureState(b),y=l.getModel([b,"itemStyle"]);S.style=y.getItemStyle();var w=gh(y,d);w&&(S.shape=w)}),t?(s.setShape(d),s.shape.r=c.r0,xt(s,{shape:{r:c.r}},a,n.dataIndex)):(Ne(s,{shape:d},a),Fr(s)),s.useStyle(f),this._updateLabel(a);var p=l.getShallow("cursor");p&&s.attr("cursor",p),this._seriesModel=a||this._seriesModel,this._ecModel=i||this._ecModel;var g=u.get("focus"),m=g==="relative"?Go(n.getAncestorsIndices(),n.getDescendantIndices()):g==="ancestor"?n.getAncestorsIndices():g==="descendant"?n.getDescendantIndices():g;Ye(this,m,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t){var n=this,a=this.node.getModel(),i=a.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),c=Math.sin(l),d=this,f=d.getTextContent(),h=this.node.dataIndex,v=i.get("minAngle")/180*Math.PI,p=i.get("show")&&!(v!=null&&Math.abs(s)<v);f.ignore=!p,T(mA,function(m){var b=m==="normal"?a.getModel("label"):a.getModel([m,"label"]),S=m==="normal",y=S?f:f.ensureState(m),w=t.getFormattedLabel(h,m);S&&(w=w||n.node.name),y.style=Ue(b,{},null,m!=="normal",!0),w&&(y.style.text=w);var _=b.get("show");_!=null&&!S&&(y.ignore=!_);var x=g(b,"position"),A=S?d:d.states[m],C=A.style.fill;A.textConfig={outsideFill:b.get("color")==="inherit"?C:null,inside:x!=="outside"};var D,E=g(b,"distance")||0,M=g(b,"align"),I=g(b,"rotate"),R=Math.PI*.5,L=Math.PI*1.5,P=Na(I==="tangential"?Math.PI/2-l:l),N=P>R&&!gA(P-R)&&P<L;x==="outside"?(D=o.r+E,M=N?"right":"left"):!M||M==="center"?(s===2*Math.PI&&o.r0===0?D=0:D=(o.r+o.r0)/2,M="center"):M==="left"?(D=o.r0+E,M=N?"right":"left"):M==="right"&&(D=o.r-E,M=N?"left":"right"),y.style.align=M,y.style.verticalAlign=g(b,"verticalAlign")||"middle",y.x=D*u+o.cx,y.y=D*c+o.cy;var z=0;I==="radial"?z=Na(-l)+(N?Math.PI:0):I==="tangential"?z=Na(Math.PI/2-l)+(N?Math.PI:0):er(I)&&(z=I*Math.PI/180),y.rotation=Na(z)});function g(m,b){var S=m.get(b);return S??i.get(b)}f.dirtyStyle()},e}(An),Sc="sunburstRootToNode",vp="sunburstHighlight",rR="sunburstUnhighlight";function nR(r){r.registerAction({type:Sc,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},n);function n(a,i){var o=di(e,[Sc],a);if(o){var s=a.getViewRoot();s&&(e.direction=Ld(s,o.node)?"rollUp":"drillDown"),a.resetViewRoot(o.node)}}}),r.registerAction({type:vp,update:"none"},function(e,t,n){e=X({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},a);function a(i){var o=di(e,[vp],i);o&&(e.dataIndex=o.node.dataIndex)}n.dispatchAction(X(e,{type:"highlight"}))}),r.registerAction({type:rR,update:"updateView"},function(e,t,n){e=X({},e),n.dispatchAction(X(e,{type:"downplay"}))})}var aR=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){var o=this;this.seriesModel=t,this.api=a,this.ecModel=n;var s=t.getData(),l=s.tree.root,u=t.getViewRoot(),c=this.group,d=t.get("renderLabelForZeroData"),f=[];u.eachNode(function(b){f.push(b)});var h=this._oldChildren||[];v(f,h),m(l,u),this._initEvents(),this._oldChildren=f;function v(b,S){if(b.length===0&&S.length===0)return;new Wr(S,b,y,y).add(w).update(w).remove(he(w,null)).execute();function y(_){return _.getId()}function w(_,x){var A=_==null?null:b[_],C=x==null?null:S[x];p(A,C)}}function p(b,S){if(!d&&b&&!b.getValue()&&(b=null),b!==l&&S!==l){if(S&&S.piece)b?(S.piece.updateData(!1,b,t,n,a),s.setItemGraphicEl(b.dataIndex,S.piece)):g(S);else if(b){var y=new hp(b,t,n,a);c.add(y),s.setItemGraphicEl(b.dataIndex,y)}}}function g(b){b&&b.piece&&(c.remove(b.piece),b.piece=null)}function m(b,S){S.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,b,t,n,a):(o.virtualPiece=new hp(b,t,n,a),c.add(o.virtualPiece)),S.piece.off("click"),o.virtualPiece.on("click",function(y){o._rootToNode(S.parentNode)})):o.virtualPiece&&(c.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(n){var a=!1,i=t.seriesModel.getViewRoot();i.eachNode(function(o){if(!a&&o.piece&&o.piece===n.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")t._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";$y(u,c)}}a=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Sc,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,n){var a=n.getData(),i=a.getItemLayout(0);if(i){var o=t[0]-i.cx,s=t[1]-i.cy,l=Math.sqrt(o*o+s*s);return l<=i.r&&l>=i.r0}},e.type="sunburst",e}(Je),iR=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,n){var a={name:t.name,children:t.data};$b(a);var i=this._levelModels=G(t.levels||[],function(l){return new Pt(l,this,n)},this),o=Rd.createTree(a,this,s);function s(l){l.wrapMethod("getItemModel",function(u,c){var d=o.getNodeByDataIndex(c),f=i[d.depth];return f&&(u.parentModel=f),u})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var n=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treePathInfo=qs(a,this),n},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var n=this.getRawData().tree.root;(!t||t!==n&&!n.contains(t))&&(this._viewRoot=n)},e.prototype.enableAriaDecal=function(){Q0(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(rt);function $b(r){var e=0;T(r.children,function(n){$b(n);var a=n.value;$(a)&&(a=a[0]),e+=a});var t=r.value;$(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),$(r.value)?r.value[0]=t:r.value=t}var pp=Math.PI/180;function oR(r,e,t){e.eachSeriesByType(r,function(n){var a=n.get("center"),i=n.get("radius");$(i)||(i=[0,i]),$(a)||(a=[a,a]);var o=t.getWidth(),s=t.getHeight(),l=Math.min(o,s),u=W(a[0],o),c=W(a[1],s),d=W(i[0],l/2),f=W(i[1],l/2),h=-n.get("startAngle")*pp,v=n.get("minAngle")*pp,p=n.getData().tree.root,g=n.getViewRoot(),m=g.depth,b=n.get("sort");b!=null&&Yb(g,b);var S=0;T(g.children,function(P){!isNaN(P.getValue())&&S++});var y=g.getValue(),w=Math.PI/(y||S)*2,_=g.depth>0,x=g.height-(_?-1:1),A=(f-d)/(x||1),C=n.get("clockwise"),D=n.get("stillShowZeroSum"),E=C?1:-1,M=function(P,N){if(P){var z=N;if(P!==p){var H=P.getValue(),U=y===0&&D?w:H*w;U<v&&(U=v),z=N+E*U;var Y=P.depth-m-(_?-1:1),J=d+A*Y,te=d+A*(Y+1),re=n.getLevelModel(P);if(re){var oe=re.get("r0",!0),Ce=re.get("r",!0),nt=re.get("radius",!0);nt!=null&&(oe=nt[0],Ce=nt[1]),oe!=null&&(J=W(oe,l/2)),Ce!=null&&(te=W(Ce,l/2))}P.setLayout({angle:U,startAngle:N,endAngle:z,clockwise:C,cx:u,cy:c,r0:J,r:te})}if(P.children&&P.children.length){var ne=0;T(P.children,function(Q){ne+=M(Q,N+ne)})}return z-N}};if(_){var I=d,R=d+A,L=Math.PI*2;p.setLayout({angle:L,startAngle:h,endAngle:h+L,clockwise:C,cx:u,cy:c,r0:I,r:R})}M(g,h)})}function Yb(r,e){var t=r.children||[];r.children=sR(t,e),t.length&&T(r.children,function(n){Yb(n,e)})}function sR(r,e){if(xe(e)){var t=G(r,function(a,i){var o=a.getValue();return{params:{depth:a.depth,height:a.height,dataIndex:a.dataIndex,getValue:function(){return o}},index:i}});return t.sort(function(a,i){return e(a.params,i.params)}),G(t,function(a){return r[a.index]})}else{var n=e==="asc";return r.sort(function(a,i){var o=(a.getValue()-i.getValue())*(n?1:-1);return o===0?(a.dataIndex-i.dataIndex)*(n?-1:1):o})}}function lR(r){var e={};function t(n,a,i){for(var o=n;o&&o.depth>1;)o=o.parentNode;var s=a.getColorFromPalette(o.name||o.dataIndex+"",e);return n.depth>1&&de(s)&&(s=yA(s,(n.depth-1)/(i-1)*.5)),s}r.eachSeriesByType("sunburst",function(n){var a=n.getData(),i=a.tree;i.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(o,n,i.root.height));var u=a.ensureUniqueItemVisual(o.dataIndex,"style");X(u,l)})})}function uR(r){r.registerChartView(aR),r.registerSeriesModel(iR),r.registerLayout(he(oR,"sunburst")),r.registerProcessor(he(Os,"sunburst")),r.registerVisual(lR),nR(r)}var gp={color:"fill",borderColor:"stroke"},cR={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Sr=je(),dR=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,n){return ma(null,this)},e.prototype.getDataParams=function(t,n,a){var i=r.prototype.getDataParams.call(this,t,n);return a&&(i.info=Sr(a).info),i},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(rt);function fR(r,e){return e=e||[0,0],G(["x","y"],function(t,n){var a=this.getAxis(t),i=e[n],o=r[n]/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(i-o)-a.dataToCoord(i+o))},this)}function hR(r){var e=r.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return r.dataToPoint(t)},size:Z(fR,r)}}}function vR(r,e){return e=e||[0,0],G([0,1],function(t){var n=e[t],a=r[t]/2,i=[],o=[];return i[t]=n-a,o[t]=n+a,i[1-t]=o[1-t]=e[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(o)[t])},this)}function pR(r){var e=r.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:r.getZoom()},api:{coord:function(t){return r.dataToPoint(t)},size:Z(vR,r)}}}function gR(r,e){var t=this.getAxis(),n=e instanceof Array?e[0]:e,a=(r instanceof Array?r[0]:r)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(n-a)-t.dataToCoord(n+a))}function mR(r){var e=r.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return r.dataToPoint(t)},size:Z(gR,r)}}}function yR(r,e){return e=e||[0,0],G(["Radius","Angle"],function(t,n){var a="get"+t+"Axis",i=this[a](),o=e[n],s=r[n]/2,l=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-s)-i.dataToCoord(o+s));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function bR(r){var e=r.getRadiusAxis(),t=r.getAngleAxis(),n=e.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:n[1],r0:n[0]},api:{coord:function(a){var i=e.dataToRadius(a[0]),o=t.dataToAngle(a[1]),s=r.coordToPoint([i,o]);return s.push(i,o*Math.PI/180),s},size:Z(yR,r)}}}function SR(r){var e=r.getRect(),t=r.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(n,a){return r.dataToPoint(n,a)}}}}function Zb(r,e,t,n){return r&&(r.legacy||r.legacy!==!1&&!t&&!n&&e!=="tspan"&&(e==="text"||F(r,"text")))}function Xb(r,e,t){var n=r,a,i,o;if(e==="text")o=n;else{o={},F(n,"text")&&(o.text=n.text),F(n,"rich")&&(o.rich=n.rich),F(n,"textFill")&&(o.fill=n.textFill),F(n,"textStroke")&&(o.stroke=n.textStroke),F(n,"fontFamily")&&(o.fontFamily=n.fontFamily),F(n,"fontSize")&&(o.fontSize=n.fontSize),F(n,"fontStyle")&&(o.fontStyle=n.fontStyle),F(n,"fontWeight")&&(o.fontWeight=n.fontWeight),i={type:"text",style:o,silent:!0},a={};var s=F(n,"textPosition");t?a.position=s?n.textPosition:"inside":s&&(a.position=n.textPosition),F(n,"textPosition")&&(a.position=n.textPosition),F(n,"textOffset")&&(a.offset=n.textOffset),F(n,"textRotation")&&(a.rotation=n.textRotation),F(n,"textDistance")&&(a.distance=n.textDistance)}return mp(o,r),T(o.rich,function(l){mp(l,l)}),{textConfig:a,textContent:i}}function mp(r,e){e&&(e.font=e.textFont||e.font,F(e,"textStrokeWidth")&&(r.lineWidth=e.textStrokeWidth),F(e,"textAlign")&&(r.align=e.textAlign),F(e,"textVerticalAlign")&&(r.verticalAlign=e.textVerticalAlign),F(e,"textLineHeight")&&(r.lineHeight=e.textLineHeight),F(e,"textWidth")&&(r.width=e.textWidth),F(e,"textHeight")&&(r.height=e.textHeight),F(e,"textBackgroundColor")&&(r.backgroundColor=e.textBackgroundColor),F(e,"textPadding")&&(r.padding=e.textPadding),F(e,"textBorderColor")&&(r.borderColor=e.textBorderColor),F(e,"textBorderWidth")&&(r.borderWidth=e.textBorderWidth),F(e,"textBorderRadius")&&(r.borderRadius=e.textBorderRadius),F(e,"textBoxShadowColor")&&(r.shadowColor=e.textBoxShadowColor),F(e,"textBoxShadowBlur")&&(r.shadowBlur=e.textBoxShadowBlur),F(e,"textBoxShadowOffsetX")&&(r.shadowOffsetX=e.textBoxShadowOffsetX),F(e,"textBoxShadowOffsetY")&&(r.shadowOffsetY=e.textBoxShadowOffsetY))}function yp(r,e,t){var n=r;n.textPosition=n.textPosition||t.position||"inside",t.offset!=null&&(n.textOffset=t.offset),t.rotation!=null&&(n.textRotation=t.rotation),t.distance!=null&&(n.textDistance=t.distance);var a=n.textPosition.indexOf("inside")>=0,i=r.fill||"#000";bp(n,e);var o=n.textFill==null;return a?o&&(n.textFill=t.insideFill||"#fff",!n.textStroke&&t.insideStroke&&(n.textStroke=t.insideStroke),!n.textStroke&&(n.textStroke=i),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(o&&(n.textFill=r.fill||t.outsideFill||"#000"),!n.textStroke&&t.outsideStroke&&(n.textStroke=t.outsideStroke)),n.text=e.text,n.rich=e.rich,T(e.rich,function(s){bp(s,s)}),n}function bp(r,e){e&&(F(e,"fill")&&(r.textFill=e.fill),F(e,"stroke")&&(r.textStroke=e.fill),F(e,"lineWidth")&&(r.textStrokeWidth=e.lineWidth),F(e,"font")&&(r.font=e.font),F(e,"fontStyle")&&(r.fontStyle=e.fontStyle),F(e,"fontWeight")&&(r.fontWeight=e.fontWeight),F(e,"fontSize")&&(r.fontSize=e.fontSize),F(e,"fontFamily")&&(r.fontFamily=e.fontFamily),F(e,"align")&&(r.textAlign=e.align),F(e,"verticalAlign")&&(r.textVerticalAlign=e.verticalAlign),F(e,"lineHeight")&&(r.textLineHeight=e.lineHeight),F(e,"width")&&(r.textWidth=e.width),F(e,"height")&&(r.textHeight=e.height),F(e,"backgroundColor")&&(r.textBackgroundColor=e.backgroundColor),F(e,"padding")&&(r.textPadding=e.padding),F(e,"borderColor")&&(r.textBorderColor=e.borderColor),F(e,"borderWidth")&&(r.textBorderWidth=e.borderWidth),F(e,"borderRadius")&&(r.textBorderRadius=e.borderRadius),F(e,"shadowColor")&&(r.textBoxShadowColor=e.shadowColor),F(e,"shadowBlur")&&(r.textBoxShadowBlur=e.shadowBlur),F(e,"shadowOffsetX")&&(r.textBoxShadowOffsetX=e.shadowOffsetX),F(e,"shadowOffsetY")&&(r.textBoxShadowOffsetY=e.shadowOffsetY),F(e,"textShadowColor")&&(r.textShadowColor=e.textShadowColor),F(e,"textShadowBlur")&&(r.textShadowBlur=e.textShadowBlur),F(e,"textShadowOffsetX")&&(r.textShadowOffsetX=e.textShadowOffsetX),F(e,"textShadowOffsetY")&&(r.textShadowOffsetY=e.textShadowOffsetY))}var qb={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Sp=We(qb);Fy(si,function(r,e){return r[e]=1,r},{});si.join(", ");var rs=["","style","shape","extra"],la=je();function Xd(r,e,t,n,a){var i=r+"Animation",o=Pi(r,n,a)||{},s=la(e).userDuring;return o.duration>0&&(o.during=s?Z(CR,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=r),X(o,t[i]),o}function Io(r,e,t,n){n=n||{};var a=n.dataIndex,i=n.isInit,o=n.clearStyle,s=t.isAnimationEnabled(),l=la(r),u=e.style;l.userDuring=e.during;var c={},d={};if(TR(r,e,d),wp("shape",e,d),wp("extra",e,d),!i&&s&&(DR(r,e,c),_p("shape",r,e,c),_p("extra",r,e,c),ER(r,e,u,c)),d.style=u,_R(r,d,o),xR(r,e),s)if(i){var f={};T(rs,function(v){var p=v?e[v]:e;p&&p.enterFrom&&(v&&(f[v]=f[v]||{}),X(v?f[v]:f,p.enterFrom))});var h=Xd("enter",r,e,t,a);h.duration>0&&r.animateFrom(f,h)}else wR(r,e,a||0,t,c);Qb(r,e),u?r.dirty():r.markRedraw()}function Qb(r,e){for(var t=la(r).leaveToProps,n=0;n<rs.length;n++){var a=rs[n],i=a?e[a]:e;i&&i.leaveTo&&(t||(t=la(r).leaveToProps={}),a&&(t[a]=t[a]||{}),X(a?t[a]:t,i.leaveTo))}}function Js(r,e,t,n){if(r){var a=r.parent,i=la(r).leaveToProps;if(i){var o=Xd("update",r,e,t,0);o.done=function(){a.remove(r)},r.animateTo(i,o)}else a.remove(r)}}function mn(r){return r==="all"}function _R(r,e,t){var n=e.style;if(!r.isGroup&&n){if(t){r.useStyle({});for(var a=r.animators,i=0;i<a.length;i++){var o=a[i];o.targetName==="style"&&o.changeTarget(r.style)}}r.setStyle(n)}e&&(e.style=null,e&&r.attr(e),e.style=n)}function wR(r,e,t,n,a){if(a){var i=Xd("update",r,e,n,t);i.duration>0&&r.animateFrom(a,i)}}function xR(r,e){F(e,"silent")&&(r.silent=e.silent),F(e,"ignore")&&(r.ignore=e.ignore),r instanceof xn&&F(e,"invisible")&&(r.invisible=e.invisible),r instanceof ot&&F(e,"autoBatch")&&(r.autoBatch=e.autoBatch)}var ar={},AR={setTransform:function(r,e){return ar.el[r]=e,this},getTransform:function(r){return ar.el[r]},setShape:function(r,e){var t=ar.el,n=t.shape||(t.shape={});return n[r]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(r){var e=ar.el.shape;if(e)return e[r]},setStyle:function(r,e){var t=ar.el,n=t.style;return n&&(n[r]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(r){var e=ar.el.style;if(e)return e[r]},setExtra:function(r,e){var t=ar.el.extra||(ar.el.extra={});return t[r]=e,this},getExtra:function(r){var e=ar.el.extra;if(e)return e[r]}};function CR(){var r=this,e=r.el;if(e){var t=la(e).userDuring,n=r.userDuring;if(t!==n){r.el=r.userDuring=null;return}ar.el=e,n(AR)}}function _p(r,e,t,n){var a=t[r];if(a){var i=e[r],o;if(i){var s=t.transition,l=a.transition;if(l)if(!o&&(o=n[r]={}),mn(l))X(o,i);else for(var u=gt(l),c=0;c<u.length;c++){var d=u[c],f=i[d];o[d]=f}else if(mn(s)||Oe(s,r)>=0){!o&&(o=n[r]={});for(var h=We(i),c=0;c<h.length;c++){var d=h[c],f=i[d];MR(a[d],f)&&(o[d]=f)}}}}}function wp(r,e,t){var n=e[r];if(n)for(var a=t[r]={},i=We(n),o=0;o<i.length;o++){var s=i[o];a[s]=bA(n[s])}}function DR(r,e,t){for(var n=e.transition,a=mn(n)?si:gt(n||[]),i=0;i<a.length;i++){var o=a[i];if(!(o==="style"||o==="shape"||o==="extra")){var s=r[o];t[o]=s}}}function TR(r,e,t){for(var n=0;n<Sp.length;n++){var a=Sp[n],i=qb[a],o=e[a];o&&(t[i[0]]=o[0],t[i[1]]=o[1])}for(var n=0;n<si.length;n++){var s=si[n];e[s]!=null&&(t[s]=e[s])}}function ER(r,e,t,n){if(t){var a=r.style,i;if(a){var o=t.transition,s=e.transition;if(o&&!mn(o)){var l=gt(o);!i&&(i=n.style={});for(var u=0;u<l.length;u++){var c=l[u],d=a[c];i[c]=d}}else if(r.getAnimationStyleProps&&(mn(s)||mn(o)||Oe(s,"style")>=0)){var f=r.getAnimationStyleProps(),h=f?f.style:null;if(h){!i&&(i=n.style={});for(var v=We(t),u=0;u<v.length;u++){var c=v[u];if(h[c]){var d=a[c];i[c]=d}}}}}}}function MR(r,e){return Ky(r)?r!==e:r!=null&&isFinite(r)}var Kb=je(),IR=["percent","easing","shape","style","extra"];function Jb(r){r.stopAnimation("keyframe"),r.attr(Kb(r))}function ns(r,e,t){if(!(!t.isAnimationEnabled()||!e)){if($(e)){T(e,function(s){ns(r,s,t)});return}var n=e.keyframes,a=e.duration;if(t&&a==null){var i=Pi("enter",t,0);a=i&&i.duration}if(!(!n||!a)){var o=Kb(r);T(rs,function(s){if(!(s&&!r[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),T(n,function(u){var c=r.animators,d=s?u[s]:u;if(d){var f=We(d);if(s||(f=Qe(f,function(p){return Oe(IR,p)<0})),!!f.length){l||(l=r.animate(s,e.loop,!0),l.scope="keyframe");for(var h=0;h<c.length;h++)c[h]!==l&&c[h].targetName===l.targetName&&c[h].stopTracks(f);s&&(o[s]=o[s]||{});var v=s?o[s]:o;T(f,function(p){v[p]=((s?r[s]:r)||{})[p]}),l.whenWithKeys(a*u.percent,d,f,u.easing)}}}),l&&l.delay(e.delay||0).duration(a).start(e.easing)}})}}}var _r="emphasis",Lr="normal",qd="blur",Qd="select",jr=[Lr,_r,qd,Qd],au={normal:["itemStyle"],emphasis:[_r,"itemStyle"],blur:[qd,"itemStyle"],select:[Qd,"itemStyle"]},iu={normal:["label"],emphasis:[_r,"label"],blur:[qd,"label"],select:[Qd,"label"]},RR=["x","y"],LR="e\0\0",Bt={normal:{},emphasis:{},blur:{},select:{}},PR={cartesian2d:hR,geo:pR,single:mR,polar:bR,calendar:SR};function _c(r){return r instanceof ot}function wc(r){return r instanceof xn}function kR(r,e){e.copyTransform(r),wc(e)&&wc(r)&&(e.setStyle(r.style),e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel,e.invisible=r.invisible,e.ignore=r.ignore,_c(e)&&_c(r)&&e.setShape(r.shape))}var OR=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){this._progressiveEls=null;var o=this._data,s=t.getData(),l=this.group,u=xp(t,s,n,a);o||l.removeAll(),s.diff(o).add(function(d){ou(a,null,d,u(d,i),t,l,s)}).remove(function(d){var f=o.getItemGraphicEl(d);f&&Js(f,Sr(f).option,t)}).update(function(d,f){var h=o.getItemGraphicEl(f);ou(a,h,d,u(d,i),t,l,s)}).execute();var c=t.get("clip",!0)?Ws(t.coordinateSystem,!1,t):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},e.prototype.incrementalPrepareRender=function(t,n,a){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,n,a,i,o){var s=n.getData(),l=xp(n,s,a,i),u=this._progressiveEls=[];function c(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var d=t.start;d<t.end;d++){var f=ou(null,null,d,l(d,o),n,this.group,s);f&&(f.traverse(c),u.push(f))}},e.prototype.eachRendered=function(t){Gs(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,n,a,i){var o=n.element;if(o==null||a.name===o)return!0;for(;(a=a.__hostTarget||a.parent)&&a!==this.group;)if(a.name===o)return!0;return!1},e.type="custom",e}(Je);function Kd(r){var e=r.type,t;if(e==="path"){var n=r.shape,a=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,i=rS(n);t=_A(i,null,a,n.layout||"center"),Sr(t).customPathData=i}else if(e==="image")t=new hr({}),Sr(t).customImagePath=r.style.image;else if(e==="text")t=new Ie({});else if(e==="group")t=new ae;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=e0(e);if(!o){var s="";Fe(s)}t=new o}return Sr(t).customGraphicType=e,t.name=r.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function Jd(r,e,t,n,a,i,o){Jb(e);var s=a&&a.normal.cfg;s&&e.setTextConfig(s),n&&n.transition==null&&(n.transition=RR);var l=n&&n.style;if(l){if(e.type==="text"){var u=l;F(u,"textFill")&&(u.fill=u.textFill),F(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,d=_c(e)?l.decal:null;r&&d&&(d.dirty=!0,c=Jc(d,r)),l.__decalPattern=c}if(wc(e)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Io(e,n,i,{dataIndex:t,isInit:o,clearStyle:!0}),ns(e,n.keyframeAnimation,i)}function eS(r,e,t,n,a){var i=e.isGroup?null:e,o=a&&a[r].cfg;if(i){var s=i.ensureState(r);if(n===!1){var l=i.getState(r);l&&(l.style=null)}else s.style=n||null;o&&(s.textConfig=o),oa(i)}}function NR(r,e,t){if(!r.isGroup){var n=r,a=t.currentZ,i=t.currentZLevel;n.z=a,n.zlevel=i;var o=e.z2;o!=null&&(n.z2=o||0);for(var s=0;s<jr.length;s++)VR(n,e,jr[s])}}function VR(r,e,t){var n=t===Lr,a=n?e:as(e,t),i=a?a.z2:null,o;i!=null&&(o=n?r:r.ensureState(t),o.z2=i||0)}function xp(r,e,t,n){var a=r.get("renderItem"),i=r.coordinateSystem,o={};i&&(o=i.prepareCustoms?i.prepareCustoms(i):PR[i.type](i));for(var s=ce({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:y,style:_,ordinalRawValue:w,styleEmphasis:x,visual:D,barLayout:E,currentSeriesIndices:M,font:I},o.api||{}),l={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:BR(r.getData())},u,c,d={},f={},h={},v={},p=0;p<jr.length;p++){var g=jr[p];h[g]=r.getModel(au[g]),v[g]=r.getModel(iu[g])}function m(R){return R===u?c||(c=e.getItemModel(R)):e.getItemModel(R)}function b(R,L){return e.hasItemOption?R===u?d[L]||(d[L]=m(R).getModel(au[L])):m(R).getModel(au[L]):h[L]}function S(R,L){return e.hasItemOption?R===u?f[L]||(f[L]=m(R).getModel(iu[L])):m(R).getModel(iu[L]):v[L]}return function(R,L){return u=R,c=null,d={},f={},a&&a(ce({dataIndexInside:R,dataIndex:e.getRawIndex(R),actionType:L?L.type:null},l),s)};function y(R,L){return L==null&&(L=u),e.getStore().get(e.getDimensionIndex(R||0),L)}function w(R,L){L==null&&(L=u),R=R||0;var P=e.getDimensionInfo(R);if(!P){var N=e.getDimensionIndex(R);return N>=0?e.getStore().get(N,L):void 0}var z=e.get(P.name,L),H=P&&P.ordinalMeta;return H?H.categories[z]:z}function _(R,L){L==null&&(L=u);var P=e.getItemVisual(L,"style"),N=P&&P.fill,z=P&&P.opacity,H=b(L,Lr).getItemStyle();N!=null&&(H.fill=N),z!=null&&(H.opacity=z);var U={inheritColor:de(N)?N:"#000"},Y=S(L,Lr),J=Ue(Y,null,U,!1,!0);J.text=Y.getShallow("show")?it(r.getFormattedLabel(L,Lr),Ju(e,L)):null;var te=mh(Y,U,!1);return C(R,H),H=yp(H,J,te),R&&A(H,R),H.legacy=!0,H}function x(R,L){L==null&&(L=u);var P=b(L,_r).getItemStyle(),N=S(L,_r),z=Ue(N,null,null,!0,!0);z.text=N.getShallow("show")?Ii(r.getFormattedLabel(L,_r),r.getFormattedLabel(L,Lr),Ju(e,L)):null;var H=mh(N,null,!0);return C(R,P),P=yp(P,z,H),R&&A(P,R),P.legacy=!0,P}function A(R,L){for(var P in L)F(L,P)&&(R[P]=L[P])}function C(R,L){R&&(R.textFill&&(L.textFill=R.textFill),R.textPosition&&(L.textPosition=R.textPosition))}function D(R,L){if(L==null&&(L=u),F(gp,R)){var P=e.getItemVisual(L,"style");return P?P[gp[R]]:null}if(F(cR,R))return e.getItemVisual(L,R)}function E(R){if(i.type==="cartesian2d"){var L=i.getBaseAxis();return SA(ce({axis:L},R))}}function M(){return t.getCurrentSeriesIndices()}function I(R){return Jy(R,t)}}function BR(r){var e={};return T(r.dimensions,function(t){var n=r.getDimensionInfo(t);if(!n.isExtraCoord){var a=n.coordDim,i=e[a]=e[a]||[];i[n.coordDimIndex]=r.getDimensionIndex(t)}}),e}function ou(r,e,t,n,a,i,o){if(!n){i.remove(e);return}var s=ef(r,e,t,n,a,i);return s&&o.setItemGraphicEl(t,s),s&&Ye(s,n.focus,n.blurScope,n.emphasisDisabled),s}function ef(r,e,t,n,a,i){var o=-1,s=e;e&&tS(e,n,a)&&(o=Oe(i.childrenRef(),e),e=null);var l=!e,u=e;u?u.clearStates():(u=Kd(n),s&&kR(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Bt.normal.cfg=Bt.normal.conOpt=Bt.emphasis.cfg=Bt.emphasis.conOpt=Bt.blur.cfg=Bt.blur.conOpt=Bt.select.cfg=Bt.select.conOpt=null,Bt.isLegacy=!1,HR(u,t,n,a,l,Bt),zR(u,t,n,a,l),Jd(r,u,t,n,Bt,a,l),F(n,"info")&&(Sr(u).info=n.info);for(var c=0;c<jr.length;c++){var d=jr[c];if(d!==Lr){var f=as(n,d),h=tf(n,f,d);eS(d,u,f,h,Bt)}}return NR(u,n,a),n.type==="group"&&GR(r,u,t,n,a),o>=0?i.replaceAt(u,o):i.add(u),u}function tS(r,e,t){var n=Sr(r),a=e.type,i=e.shape,o=e.style;return t.isUniversalTransitionEnabled()||a!=null&&a!==n.customGraphicType||a==="path"&&jR(i)&&rS(i)!==n.customPathData||a==="image"&&F(o,"image")&&o.image!==n.customImagePath}function zR(r,e,t,n,a){var i=t.clipPath;if(i===!1)r&&r.getClipPath()&&r.removeClipPath();else if(i){var o=r.getClipPath();o&&tS(o,i,n)&&(o=null),o||(o=Kd(i),r.setClipPath(o)),Jd(null,o,e,i,null,n,a)}}function HR(r,e,t,n,a,i){if(!r.isGroup){Ap(t,null,i),Ap(t,_r,i);var o=i.normal.conOpt,s=i.emphasis.conOpt,l=i.blur.conOpt,u=i.select.conOpt;if(o!=null||s!=null||u!=null||l!=null){var c=r.getTextContent();if(o===!1)c&&r.removeTextContent();else{o=i.normal.conOpt=o||{type:"text"},c?c.clearStates():(c=Kd(o),r.setTextContent(c)),Jd(null,c,e,o,null,n,a);for(var d=o&&o.style,f=0;f<jr.length;f++){var h=jr[f];if(h!==Lr){var v=i[h].conOpt;eS(h,c,v,tf(o,v,h),null)}}d?c.dirty():c.markRedraw()}}}}function Ap(r,e,t){var n=e?as(r,e):r,a=e?tf(r,n,_r):r.style,i=r.type,o=n?n.textConfig:null,s=r.textContent,l=s?e?as(s,e):s:null;if(a&&(t.isLegacy||Zb(a,i,!!o,!!l))){t.isLegacy=!0;var u=Xb(a,i,!e);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!e&&l){var c=l;!c.type&&(c.type="text")}var d=e?t[e]:t.normal;d.cfg=o,d.conOpt=l}function as(r,e){return e?r?r[e]:null:r}function tf(r,e,t){var n=e&&e.style;return n==null&&t===_r&&r&&(n=r.styleEmphasis),n}function GR(r,e,t,n,a){var i=n.children,o=i?i.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!o&&!l&&!u)){if(l){WR({api:r,oldChildren:e.children()||[],newChildren:i||[],dataIndex:t,seriesModel:a,group:e});return}u&&e.removeAll();for(var c=0;c<o;c++){var d=i[c],f=e.childAt(c);d?(d.ignore==null&&(d.ignore=!1),ef(r,f,t,d,a,e)):f.ignore=!0}for(var h=e.childCount()-1;h>=c;h--){var v=e.childAt(h);FR(e,v,a)}}}function FR(r,e,t){e&&Js(e,Sr(r).option,t)}function WR(r){new Wr(r.oldChildren,r.newChildren,Cp,Cp,r).add(Dp).update(Dp).remove(UR).execute()}function Cp(r,e){var t=r&&r.name;return t??LR+e}function Dp(r,e){var t=this.context,n=r!=null?t.newChildren[r]:null,a=e!=null?t.oldChildren[e]:null;ef(t.api,a,t.dataIndex,n,t.seriesModel,t.group)}function UR(r){var e=this.context,t=e.oldChildren[r];t&&Js(t,Sr(t).option,e.seriesModel)}function rS(r){return r&&(r.pathData||r.d)}function jR(r){return r&&(F(r,"pathData")||F(r,"d"))}function $R(r){r.registerChartView(OR),r.registerSeriesModel(dR)}var YR=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,n,a,i,o){var s=a.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,u=l.getOtherAxis(s),c=u.getExtent(),d=s.dataToCoord(n),f=i.get("type");if(f&&f!=="none"){var h=t0(i),v=XR[f](s,l,d,c);v.style=h,t.graphicKey=v.type,t.pointer=v}var p=i.get(["label","margin"]),g=ZR(n,a,i,l,p);wA(t,a,i,o,g)},e}(r0);function ZR(r,e,t,n,a){var i=e.axis,o=i.dataToCoord(r),s=n.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=n.getRadiusAxis().getExtent(),u,c,d;if(i.dim==="radius"){var f=ba();Bs(f,f,s),wn(f,f,[n.cx,n.cy]),u=Br([o,-a],f);var h=e.getModel("axisLabel").get("rotate")||0,v=Sn.innerTextLayout(s,h*Math.PI/180,-1);c=v.textAlign,d=v.textVerticalAlign}else{var p=l[1];u=n.coordToPoint([p+a,o]);var g=n.cx,m=n.cy;c=Math.abs(u[0]-g)/p<.3?"center":u[0]>g?"left":"right",d=Math.abs(u[1]-m)/p<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:c,verticalAlign:d}}var XR={line:function(r,e,t,n){return r.dim==="angle"?{type:"Line",shape:n0(e.coordToPoint([n[0],t]),e.coordToPoint([n[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(r,e,t,n){var a=Math.max(1,r.getBandWidth()),i=Math.PI/180;return r.dim==="angle"?{type:"Sector",shape:yh(e.cx,e.cy,n[0],n[1],(-t-a/2)*i,(-t+a/2)*i)}:{type:"Sector",shape:yh(e.cx,e.cy,t-a/2,t+a/2,0,Math.PI*2)}}},qR=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var n,a=this.ecModel;return a.eachComponent(t,function(i){i.getCoordSysModel()===this&&(n=i)},this),n},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(dt),rf=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",cr).models[0]},e.type="polarAxis",e}(dt);rr(rf,ks);var QR=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(rf),KR=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(rf),nf=function(r){V(e,r);function e(t,n){return r.call(this,"radius",t,n)||this}return e.prototype.pointToData=function(t,n){return this.polar.pointToData(t,n)[this.dim==="radius"?0:1]},e}(pr);nf.prototype.dataToRadius=pr.prototype.dataToCoord;nf.prototype.radiusToData=pr.prototype.coordToData;var JR=je(),af=function(r){V(e,r);function e(t,n){return r.call(this,"angle",t,n||[0,360])||this}return e.prototype.pointToData=function(t,n){return this.polar.pointToData(t,n)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,n=t.getLabelModel(),a=t.scale,i=a.getExtent(),o=a.count();if(i[1]-i[0]<1)return 0;var s=i[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),u=Math.abs(l),c=a0(s==null?"":s+"",n.getFont(),"center","top"),d=Math.max(c.height,7),f=d/u;isNaN(f)&&(f=1/0);var h=Math.max(0,Math.floor(f)),v=JR(t.model),p=v.lastAutoInterval,g=v.lastTickCount;return p!=null&&g!=null&&Math.abs(p-h)<=1&&Math.abs(g-o)<=1&&p>h?h=p:(v.lastTickCount=o,v.lastAutoInterval=h),h},e}(pr);af.prototype.dataToAngle=pr.prototype.dataToCoord;af.prototype.angleToData=pr.prototype.coordToData;var nS=["radius","angle"],e2=function(){function r(e){this.dimensions=nS,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new nf,this._angleAxis=new af,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},r.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},r.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(e){var t=[],n=this._angleAxis,a=this._radiusAxis;return n.scale.type===e&&t.push(n),a.scale.type===e&&t.push(a),t},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},r.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},r.prototype.pointToData=function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},r.prototype.pointToCoord=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,a=this.getAngleAxis(),i=a.getExtent(),o=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]);a.inverse?o=s-360:s=o+360;var l=Math.sqrt(t*t+n*n);t/=l,n/=l;for(var u=Math.atan2(-n,t)/Math.PI*180,c=u<o?1:-1;u<o||u>s;)u+=c*360;return[l,u]},r.prototype.coordToPoint=function(e){var t=e[0],n=e[1]/180*Math.PI,a=Math.cos(n)*t+this.cx,i=-Math.sin(n)*t+this.cy;return[a,i]},r.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),n=t.getExtent().slice();n[0]>n[1]&&n.reverse();var a=e.getExtent(),i=Math.PI/180,o=1e-4;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-a[0]*i,endAngle:-a[1]*i,clockwise:e.inverse,contain:function(s,l){var u=s-this.cx,c=l-this.cy,d=u*u+c*c,f=this.r,h=this.r0;return f!==h&&d-o<=f*f&&d+o>=h*h}}},r.prototype.convertToPixel=function(e,t,n){var a=Tp(t);return a===this?this.dataToPoint(n):null},r.prototype.convertFromPixel=function(e,t,n){var a=Tp(t);return a===this?this.pointToData(n):null},r}();function Tp(r){var e=r.seriesModel,t=r.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function t2(r,e,t){var n=e.get("center"),a=t.getWidth(),i=t.getHeight();r.cx=W(n[0],a),r.cy=W(n[1],i);var o=r.getRadiusAxis(),s=Math.min(a,i)/2,l=e.get("radius");l==null?l=[0,"100%"]:$(l)||(l=[0,l]);var u=[W(l[0],s),W(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function r2(r,e){var t=this,n=t.getAngleAxis(),a=t.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),a.scale.setExtent(1/0,-1/0),r.eachSeries(function(s){if(s.coordinateSystem===t){var l=s.getData();T(bh(l,"radius"),function(u){a.scale.unionExtentFromData(l,u)}),T(bh(l,"angle"),function(u){n.scale.unionExtentFromData(l,u)})}}),Uo(n.scale,n.model),Uo(a.scale,a.model),n.type==="category"&&!n.onBand){var i=n.getExtent(),o=360/n.scale.count();n.inverse?i[1]+=o:i[1]-=o,n.setExtent(i[0],i[1])}}function n2(r){return r.mainType==="angleAxis"}function Ep(r,e){var t;if(r.type=e.get("type"),r.scale=id(e),r.onBand=e.get("boundaryGap")&&r.type==="category",r.inverse=e.get("inverse"),n2(e)){r.inverse=r.inverse!==e.get("clockwise");var n=e.get("startAngle"),a=(t=e.get("endAngle"))!==null&&t!==void 0?t:n+(r.inverse?-360:360);r.setExtent(n,a)}e.axis=r,r.model=e}var a2={dimensions:nS,create:function(r,e){var t=[];return r.eachComponent("polar",function(n,a){var i=new e2(a+"");i.update=r2;var o=i.getRadiusAxis(),s=i.getAngleAxis(),l=n.findAxisModel("radiusAxis"),u=n.findAxisModel("angleAxis");Ep(o,l),Ep(s,u),t2(i,n,e),t.push(i),n.coordinateSystem=i,i.model=n}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var a=n.getReferringComponents("polar",cr).models[0];n.coordinateSystem=a.coordinateSystem}}),t}},i2=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function lo(r,e,t){e[1]>e[0]&&(e=e.slice().reverse());var n=r.coordToPoint([e[0],t]),a=r.coordToPoint([e[1],t]);return{x1:n[0],y1:n[1],x2:a[0],y2:a[1]}}function uo(r){var e=r.getRadiusAxis();return e.inverse?0:1}function Mp(r){var e=r[0],t=r[r.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&r.pop()}var o2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,n){if(this.group.removeAll(),!!t.get("show")){var a=t.axis,i=a.polar,o=i.getRadiusAxis().getExtent(),s=a.getTicksCoords(),l=a.getMinorTicksCoords(),u=G(a.getViewLabels(),function(c){c=Se(c);var d=a.scale,f=d.type==="ordinal"?d.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=a.dataToCoord(f),c});Mp(u),Mp(s),T(i2,function(c){t.get([c,"show"])&&(!a.scale.isBlank()||c==="axisLine")&&s2[c](this.group,t,i,s,l,o,u)},this)}},e.type="angleAxis",e}(ki),s2={axisLine:function(r,e,t,n,a,i){var o=e.getModel(["axisLine","lineStyle"]),s=t.getAngleAxis(),l=Math.PI/180,u=s.getExtent(),c=uo(t),d=c?0:1,f,h=Math.abs(u[1]-u[0])===360?"Circle":"Arc";i[d]===0?f=new ya[h]({shape:{cx:t.cx,cy:t.cy,r:i[c],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):f=new Ny({shape:{cx:t.cx,cy:t.cy,r:i[c],r0:i[d]},style:o.getLineStyle(),z2:1,silent:!0}),f.style.fill=null,r.add(f)},axisTick:function(r,e,t,n,a,i){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=i[uo(t)],u=G(n,function(c){return new Qt({shape:lo(t,[l,l+s],c.coord)})});r.add(qt(u,{style:ce(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,e,t,n,a,i){if(a.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=i[uo(t)],c=[],d=0;d<a.length;d++)for(var f=0;f<a[d].length;f++)c.push(new Qt({shape:lo(t,[u,u+l],a[d][f].coord)}));r.add(qt(c,{style:ce(s.getModel("lineStyle").getLineStyle(),ce(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,e,t,n,a,i,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),u=l.get("margin"),c=e.get("triggerEvent");T(o,function(d,f){var h=l,v=d.tickValue,p=i[uo(t)],g=t.coordToPoint([p+u,d.coord]),m=t.cx,b=t.cy,S=Math.abs(g[0]-m)/p<.3?"center":g[0]>m?"left":"right",y=Math.abs(g[1]-b)/p<.3?"middle":g[1]>b?"top":"bottom";if(s&&s[v]){var w=s[v];ct(w)&&w.textStyle&&(h=new Pt(w.textStyle,l,l.ecModel))}var _=new Ie({silent:Sn.isLabelSilent(e),style:Ue(h,{x:g[0],y:g[1],fill:h.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:d.formattedLabel,align:S,verticalAlign:y})});if(r.add(_),c){var x=Sn.makeAxisEventDataBase(e);x.targetType="axisLabel",x.value=d.rawLabel,Ae(_).eventData=x}},this)},splitLine:function(r,e,t,n,a,i){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],d=0;d<n.length;d++){var f=u++%l.length;c[f]=c[f]||[],c[f].push(new Qt({shape:lo(t,i,n[d].coord)}))}for(var d=0;d<c.length;d++)r.add(qt(c[d],{style:ce({stroke:l[d%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(r,e,t,n,a,i){if(a.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],u=0;u<a.length;u++)for(var c=0;c<a[u].length;c++)l.push(new Qt({shape:lo(t,i,a[u][c].coord)}));r.add(qt(l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(r,e,t,n,a,i){if(n.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],d=Math.PI/180,f=-n[0].coord*d,h=Math.min(i[0],i[1]),v=Math.max(i[0],i[1]),p=e.get("clockwise"),g=1,m=n.length;g<=m;g++){var b=g===m?n[0].coord:n[g].coord,S=u++%l.length;c[S]=c[S]||[],c[S].push(new An({shape:{cx:t.cx,cy:t.cy,r0:h,r:v,startAngle:f,endAngle:-b*d,clockwise:p},silent:!0})),f=-b*d}for(var g=0;g<c.length;g++)r.add(qt(c[g],{style:ce({fill:l[g%l.length]},s.getAreaStyle()),silent:!0}))}}},l2=["axisLine","axisTickLabel","axisName"],u2=["splitLine","splitArea","minorSplitLine"],c2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,n){if(this.group.removeAll(),!!t.get("show")){var a=this._axisGroup,i=this._axisGroup=new ae;this.group.add(i);var o=t.axis,s=o.polar,l=s.getAngleAxis(),u=o.getTicksCoords(),c=o.getMinorTicksCoords(),d=l.getExtent()[0],f=o.getExtent(),h=f2(s,t,d),v=new Sn(t,h);T(l2,v.add,v),i.add(v.getGroup()),sd(a,i,t),T(u2,function(p){t.get([p,"show"])&&!o.scale.isBlank()&&d2[p](this.group,t,s,d,f,u,c)},this)}},e.type="radiusAxis",e}(ki),d2={splitLine:function(r,e,t,n,a,i){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0,c=t.getAngleAxis(),d=Math.PI/180,f=c.getExtent(),h=Math.abs(f[1]-f[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var v=[],p=0;p<i.length;p++){var g=u++%l.length;v[g]=v[g]||[],v[g].push(new ya[h]({shape:{cx:t.cx,cy:t.cy,r:Math.max(i[p].coord,0),startAngle:-f[0]*d,endAngle:-f[1]*d,clockwise:c.inverse}}))}for(var p=0;p<v.length;p++)r.add(qt(v[p],{style:ce({stroke:l[p%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(r,e,t,n,a,i,o){if(o.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],c=0;c<o.length;c++)for(var d=0;d<o[c].length;d++)u.push(new Ei({shape:{cx:t.cx,cy:t.cy,r:o[c][d].coord}}));r.add(qt(u,{style:ce({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(r,e,t,n,a,i){if(i.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],d=i[0].coord,f=1;f<i.length;f++){var h=u++%l.length;c[h]=c[h]||[],c[h].push(new An({shape:{cx:t.cx,cy:t.cy,r0:d,r:i[f].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),d=i[f].coord}for(var f=0;f<c.length;f++)r.add(qt(c[f],{style:ce({fill:l[f%l.length]},s.getAreaStyle()),silent:!0}))}}};function f2(r,e,t){return{position:[r.cx,r.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function aS(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function iS(r,e){return e.dim+r.model.componentIndex}function h2(r,e,t){var n={},a=v2(Qe(e.getSeriesByType(r),function(i){return!e.isSeriesFiltered(i)&&i.coordinateSystem&&i.coordinateSystem.type==="polar"}));e.eachSeriesByType(r,function(i){if(i.coordinateSystem.type==="polar"){var o=i.getData(),s=i.coordinateSystem,l=s.getBaseAxis(),u=iS(s,l),c=aS(i),d=a[u][c],f=d.offset,h=d.width,v=s.getOtherAxis(l),p=i.coordinateSystem.cx,g=i.coordinateSystem.cy,m=i.get("barMinHeight")||0,b=i.get("barMinAngle")||0;n[c]=n[c]||[];for(var S=o.mapDimension(v.dim),y=o.mapDimension(l.dim),w=i0(o,S),_=l.dim!=="radius"||!i.get("roundCap",!0),x=v.model,A=x.get("startValue"),C=v.dataToCoord(A||0),D=0,E=o.count();D<E;D++){var M=o.get(S,D),I=o.get(y,D),R=M>=0?"p":"n",L=C;w&&(n[c][I]||(n[c][I]={p:C,n:C}),L=n[c][I][R]);var P=void 0,N=void 0,z=void 0,H=void 0;if(v.dim==="radius"){var U=v.dataToCoord(M)-C,Y=l.dataToCoord(I);Math.abs(U)<m&&(U=(U<0?-1:1)*m),P=L,N=L+U,z=Y-f,H=z-h,w&&(n[c][I][R]=N)}else{var J=v.dataToCoord(M,_)-C,te=l.dataToCoord(I);Math.abs(J)<b&&(J=(J<0?-1:1)*b),P=te+f,N=P+h,z=L,H=L+J,w&&(n[c][I][R]=H)}o.setItemLayout(D,{cx:p,cy:g,r0:P,r:N,startAngle:-z*Math.PI/180,endAngle:-H*Math.PI/180,clockwise:z>=H})}}})}function v2(r){var e={};T(r,function(n,a){var i=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=iS(o,s),u=s.getExtent(),c=s.type==="category"?s.getBandWidth():Math.abs(u[1]-u[0])/i.count(),d=e[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=d.stacks;e[l]=d;var h=aS(n);f[h]||d.autoWidthCount++,f[h]=f[h]||{width:0,maxWidth:0};var v=W(n.get("barWidth"),c),p=W(n.get("barMaxWidth"),c),g=n.get("barGap"),m=n.get("barCategoryGap");v&&!f[h].width&&(v=Math.min(d.remainedWidth,v),f[h].width=v,d.remainedWidth-=v),p&&(f[h].maxWidth=p),g!=null&&(d.gap=g),m!=null&&(d.categoryGap=m)});var t={};return T(e,function(n,a){t[a]={};var i=n.stacks,o=n.bandWidth,s=W(n.categoryGap,o),l=W(n.gap,1),u=n.remainedWidth,c=n.autoWidthCount,d=(u-s)/(c+(c-1)*l);d=Math.max(d,0),T(i,function(p,g){var m=p.maxWidth;m&&m<d&&(m=Math.min(m,u),p.width&&(m=Math.min(m,p.width)),u-=m,p.width=m,c--)}),d=(u-s)/(c+(c-1)*l),d=Math.max(d,0);var f=0,h;T(i,function(p,g){p.width||(p.width=d),h=p,f+=p.width*(1+l)}),h&&(f-=h.width*l);var v=-f/2;T(i,function(p,g){t[a][g]=t[a][g]||{offset:v,width:p.width},v+=p.width*(1+l)})}),t}var p2={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},g2={splitNumber:5},m2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(yt);function y2(r){se(ud),ki.registerAxisPointerClass("PolarAxisPointer",YR),r.registerCoordinateSystem("polar",a2),r.registerComponentModel(qR),r.registerComponentView(m2),jo(r,"angle",QR,p2),jo(r,"radius",KR,g2),r.registerComponentView(o2),r.registerComponentView(c2),r.registerLayout(he(h2,"bar"))}function xc(r,e){e=e||{};var t=r.coordinateSystem,n=r.axis,a={},i=n.position,o=n.orient,s=t.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};a.position=[o==="vertical"?u.vertical[i]:l[0],o==="horizontal"?u.horizontal[i]:l[3]];var c={horizontal:0,vertical:1};a.rotation=Math.PI/2*c[o];var d={top:-1,bottom:1,right:1,left:-1};a.labelDirection=a.tickDirection=a.nameDirection=d[i],r.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Tt(e.labelInside,r.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var f=e.rotate;return f==null&&(f=r.get(["axisLabel","rotate"])),a.labelRotation=i==="top"?-f:f,a.z2=1,a}var b2=["axisLine","axisTickLabel","axisName"],S2=["splitArea","splitLine"],_2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,n,a,i){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new ae;var l=xc(t),u=new Sn(t,l);T(b2,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),T(S2,function(c){t.get([c,"show"])&&w2[c](this,this.group,this._axisGroup,t)},this),sd(s,this._axisGroup,t),r.prototype.render.call(this,t,n,a,i)},e.prototype.remove=function(){xA(this)},e.type="singleAxis",e}(ki),w2={splitLine:function(r,e,t,n){var a=n.axis;if(!a.scale.isBlank()){var i=n.getModel("splitLine"),o=i.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=n.coordinateSystem.getRect(),c=a.isHorizontal(),d=[],f=0,h=a.getTicksCoords({tickModel:i}),v=[],p=[],g=0;g<h.length;++g){var m=a.toGlobalCoord(h[g].coord);c?(v[0]=m,v[1]=u.y,p[0]=m,p[1]=u.y+u.height):(v[0]=u.x,v[1]=m,p[0]=u.x+u.width,p[1]=m);var b=new Qt({shape:{x1:v[0],y1:v[1],x2:p[0],y2:p[1]},silent:!0});CA(b.shape,l);var S=f++%s.length;d[S]=d[S]||[],d[S].push(b)}for(var y=o.getLineStyle(["color"]),g=0;g<d.length;++g)e.add(qt(d[g],{style:ce({stroke:s[g%s.length]},y),silent:!0}))}},splitArea:function(r,e,t,n){AA(r,t,n,n)}},Ro=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(dt);rr(Ro,ks.prototype);var x2=function(r){V(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n,a)||this;return s.type=i||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,n){return this.coordinateSystem.pointToData(t)[0]},e}(pr),oS=["single"],A2=function(){function r(e,t,n){this.type="single",this.dimension="single",this.dimensions=oS,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,n)}return r.prototype._init=function(e,t,n){var a=this.dimension,i=new x2(a,id(e),[0,0],e.get("type"),e.get("position")),o=i.type==="category";i.onBand=o&&e.get("boundaryGap"),i.inverse=e.get("inverse"),i.orient=e.get("orient"),e.axis=i,i.model=e,i.coordinateSystem=this,this._axis=i},r.prototype.update=function(e,t){e.eachSeries(function(n){if(n.coordinateSystem===this){var a=n.getData();T(a.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(a,i)},this),Uo(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(e,t){this._rect=Zt({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),a=n?[0,e.width]:[0,e.height],i=t.inverse?1:0;t.setExtent(a[i],a[1-i]),this._updateAxisTransform(t,n?e.x:e.y)},r.prototype._updateAxisTransform=function(e,t){var n=e.getExtent(),a=n[0]+n[1],i=e.isHorizontal();e.toGlobalCoord=i?function(o){return o+t}:function(o){return a-o+t},e.toLocalCoord=i?function(o){return o-t}:function(o){return a-o+t}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(e){var t=this.getRect(),n=this.getAxis(),a=n.orient;return a==="horizontal"?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},r.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},r.prototype.dataToPoint=function(e){var t=this.getAxis(),n=this.getRect(),a=[],i=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),a[i]=t.toGlobalCoord(t.dataToCoord(+e)),a[1-i]=i===0?n.y+n.height/2:n.x+n.width/2,a},r.prototype.convertToPixel=function(e,t,n){var a=Ip(t);return a===this?this.dataToPoint(n):null},r.prototype.convertFromPixel=function(e,t,n){var a=Ip(t);return a===this?this.pointToData(n):null},r}();function Ip(r){var e=r.seriesModel,t=r.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function C2(r,e){var t=[];return r.eachComponent("singleAxis",function(n,a){var i=new A2(n,r,e);i.name="single_"+a,i.resize(n,e),n.coordinateSystem=i,t.push(i)}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var a=n.getReferringComponents("singleAxis",cr).models[0];n.coordinateSystem=a&&a.coordinateSystem}}),t}var D2={create:C2,dimensions:oS},Rp=["x","y"],T2=["width","height"],E2=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,n,a,i,o){var s=a.axis,l=s.coordinateSystem,u=su(l,1-is(s)),c=l.dataToPoint(n)[0],d=i.get("type");if(d&&d!=="none"){var f=t0(i),h=M2[d](s,c,u);h.style=f,t.graphicKey=h.type,t.pointer=h}var v=xc(a);DA(n,t,v,a,i,o)},e.prototype.getHandleTransform=function(t,n,a){var i=xc(n,{labelInside:!1});i.labelMargin=a.get(["handle","margin"]);var o=TA(n.axis,t,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,n,a,i){var o=a.axis,s=o.coordinateSystem,l=is(o),u=su(s,l),c=[t.x,t.y];c[l]+=n[l],c[l]=Math.min(u[1],c[l]),c[l]=Math.max(u[0],c[l]);var d=su(s,1-l),f=(d[1]+d[0])/2,h=[f,f];return h[l]=c[l],{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},e}(r0),M2={line:function(r,e,t){var n=n0([e,t[0]],[e,t[1]],is(r));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(r,e,t){var n=r.getBandWidth(),a=t[1]-t[0];return{type:"Rect",shape:EA([e-n/2,t[0]],[n,a],is(r))}}};function is(r){return r.isHorizontal()?0:1}function su(r,e){var t=r.getRect();return[t[Rp[e]],t[Rp[e]]+t[T2[e]]]}var I2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(yt);function R2(r){se(ud),ki.registerAxisPointerClass("SingleAxisPointer",E2),r.registerComponentView(I2),r.registerComponentView(_2),r.registerComponentModel(Ro),jo(r,"single",Ro,Ro.defaultOption),r.registerCoordinateSystem("single",D2)}var L2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n,a){var i=o0(t);r.prototype.init.apply(this,arguments),Lp(t,i)},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),Lp(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(dt);function Lp(r,e){var t=r.cellSize,n;$(t)?n=t:n=r.cellSize=[t,t],n.length===1&&(n[1]=n[0]);var a=G([0,1],function(i){return MA(e,i)&&(n[i]="auto"),n[i]!=null&&n[i]!=="auto"});s0(r,e,{type:"box",ignoreSize:a})}var P2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=this.group;i.removeAll();var o=t.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),u=n.getLocaleModel();this._renderDayRect(t,s,i),this._renderLines(t,s,l,i),this._renderYearText(t,s,l,i),this._renderMonthText(t,u,l,i),this._renderWeekText(t,u,s,l,i)},e.prototype._renderDayRect=function(t,n,a){for(var i=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),s=i.getCellWidth(),l=i.getCellHeight(),u=n.start.time;u<=n.end.time;u=i.getNextNDay(u,1).time){var c=i.dataToRect([u],!1).tl,d=new Ge({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:o});a.add(d)}},e.prototype._renderLines=function(t,n,a,i){var o=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),u=t.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=n.start,f=0;d.time<=n.end.time;f++){v(d.formatedDate),f===0&&(d=s.getDateInfo(n.start.y+"-"+n.start.m));var h=d.date;h.setMonth(h.getMonth()+1),d=s.getDateInfo(h)}v(s.getNextNDay(n.end.time,1).formatedDate);function v(p){o._firstDayOfMonth.push(s.getDateInfo(p)),o._firstDayPoints.push(s.dataToRect([p],!1).tl);var g=o._getLinePointsOfOneWeek(t,p,a);o._tlpoints.push(g[0]),o._blpoints.push(g[g.length-1]),u&&o._drawSplitline(g,l,i)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,c,a),l,i),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,c,a),l,i)},e.prototype._getEdgesPoints=function(t,n,a){var i=[t[0].slice(),t[t.length-1].slice()],o=a==="horizontal"?0:1;return i[0][o]=i[0][o]-n/2,i[1][o]=i[1][o]+n/2,i},e.prototype._drawSplitline=function(t,n,a){var i=new vr({z2:20,shape:{points:t},style:n});a.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,n,a){for(var i=t.coordinateSystem,o=i.getDateInfo(n),s=[],l=0;l<7;l++){var u=i.getNextNDay(o.time,l),c=i.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[a==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,n){return de(t)&&t?IA(t,n):xe(t)?t(n):n.nameMap},e.prototype._yearTextPositionControl=function(t,n,a,i,o){var s=n[0],l=n[1],u=["center","bottom"];i==="bottom"?(l+=o,u=["center","top"]):i==="left"?s-=o:i==="right"?(s+=o,u=["center","top"]):l-=o;var c=0;return(i==="left"||i==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(t,n,a,i){var o=t.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=a!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,d=(u[0][1]+u[1][1])/2,f=a==="horizontal"?0:1,h={top:[c,u[f][1]],bottom:[c,u[1-f][1]],left:[u[1-f][0],d],right:[u[f][0],d]},v=n.start.y;+n.end.y>+n.start.y&&(v=v+"-"+n.end.y);var p=o.get("formatter"),g={start:n.start.y,end:n.end.y,nameMap:v},m=this._formatterLabel(p,g),b=new Ie({z2:30,style:Ue(o,{text:m}),silent:o.get("silent")});b.attr(this._yearTextPositionControl(b,h[l],a,l,s)),i.add(b)}},e.prototype._monthTextPositionControl=function(t,n,a,i,o){var s="left",l="top",u=t[0],c=t[1];return a==="horizontal"?(c=c+o,n&&(s="center"),i==="start"&&(l="bottom")):(u=u+o,n&&(l="middle"),i==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(t,n,a,i){var o=t.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),u=o.get("position"),c=o.get("align"),d=[this._tlpoints,this._blpoints];(!s||de(s))&&(s&&(n=Sh(s)||n),s=n.get(["time","monthAbbr"])||[]);var f=u==="start"?0:1,h=a==="horizontal"?0:1;l=u==="start"?-l:l;for(var v=c==="center",p=o.get("silent"),g=0;g<d[f].length-1;g++){var m=d[f][g].slice(),b=this._firstDayOfMonth[g];if(v){var S=this._firstDayPoints[g];m[h]=(S[h]+d[0][g+1][h])/2}var y=o.get("formatter"),w=s[+b.m-1],_={yyyy:b.y,yy:(b.y+"").slice(2),MM:b.m,M:+b.m,nameMap:w},x=this._formatterLabel(y,_),A=new Ie({z2:30,style:X(Ue(o,{text:x}),this._monthTextPositionControl(m,v,a,u,l)),silent:p});i.add(A)}}},e.prototype._weekTextPositionControl=function(t,n,a,i,o){var s="center",l="middle",u=t[0],c=t[1],d=a==="start";return n==="horizontal"?(u=u+i+(d?1:-1)*o[0]/2,s=d?"right":"left"):(c=c+i+(d?1:-1)*o[1]/2,l=d?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(t,n,a,i,o){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),d=s.get("margin"),f=l.getFirstDayOfWeek();if(!c||de(c)){c&&(n=Sh(c)||n);var h=n.get(["time","dayOfWeekShort"]);c=h||G(n.get(["time","dayOfWeekAbbr"]),function(_){return _[0]})}var v=l.getNextNDay(a.end.time,7-a.lweek).time,p=[l.getCellWidth(),l.getCellHeight()];d=W(d,Math.min(p[1],p[0])),u==="start"&&(v=l.getNextNDay(a.start.time,-(7+a.fweek)).time,d=-d);for(var g=s.get("silent"),m=0;m<7;m++){var b=l.getNextNDay(v,m),S=l.dataToRect([b.time],!1).center,y=m;y=Math.abs((m+f)%7);var w=new Ie({z2:30,style:X(Ue(s,{text:c[y]}),this._weekTextPositionControl(S,i,u,d,p)),silent:g});o.add(w)}}},e.type="calendar",e}(yt),lu=864e5,k2=function(){function r(e,t,n){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=e}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(e){e=RA(e);var t=e.getFullYear(),n=e.getMonth()+1,a=n<10?"0"+n:""+n,i=e.getDate(),o=i<10?"0"+i:""+i,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:a,d:o,day:s,time:e.getTime(),formatedDate:t+"-"+a+"-"+o,date:e}},r.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},r.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,a=["width","height"],i=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];T([0,1],function(d){c(i,d)&&(o[a[d]]=i[d]*s[d])});var l={width:t.getWidth(),height:t.getHeight()},u=this._rect=Zt(o,l);T([0,1],function(d){c(i,d)||(i[d]=u[a[d]]/s[d])});function c(d,f){return d[f]!=null&&d[f]!=="auto"}this._sw=i[0],this._sh=i[1]},r.prototype.dataToPoint=function(e,t){$(e)&&(e=e[0]),t==null&&(t=!0);var n=this.getDateInfo(e),a=this._rangeInfo,i=n.formatedDate;if(t&&!(n.time>=a.start.time&&n.time<a.end.time+lu))return[NaN,NaN];var o=n.day,s=this._getRangeInfo([a.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},r.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},r.prototype.dataToRect=function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},r.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,a=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,t-1,a):this._getDateByWeeksAndDay(t,n-1,a)},r.prototype.convertToPixel=function(e,t,n){var a=Pp(t);return a===this?a.dataToPoint(n):null},r.prototype.convertFromPixel=function(e,t,n){var a=Pp(t);return a===this?a.pointToData(n):null},r.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},r.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if($(e)&&e.length===1&&(e=e[0]),$(e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var a=this.getDateInfo(n),i=a.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);t=[a.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},r.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],n;t[0].time>t[1].time&&(n=!0,t.reverse());var a=Math.floor(t[1].time/lu)-Math.floor(t[0].time/lu)+1,i=new Date(t[0].time),o=i.getDate(),s=t[1].date.getDate();i.setDate(o+a-1);var l=i.getDate();if(l!==s)for(var u=i.getTime()-t[1].time>0?1:-1;(l=i.getDate())!==s&&(i.getTime()-t[1].time)*u>0;)a-=u,i.setDate(l-u);var c=Math.floor((a+t[0].day+6)/7),d=n?-c+1:c-1;return n&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:a,weeks:c,nthWeek:d,fweek:t[0].day,lweek:t[1].day}},r.prototype._getDateByWeeksAndDay=function(e,t,n){var a=this._getRangeInfo(n);if(e>a.weeks||e===0&&t<a.fweek||e===a.weeks&&t>a.lweek)return null;var i=(e-1)*7-a.fweek+t,o=new Date(a.start.time);return o.setDate(+a.start.d+i),this.getDateInfo(o)},r.create=function(e,t){var n=[];return e.eachComponent("calendar",function(a){var i=new r(a);n.push(i),a.coordinateSystem=i}),e.eachSeries(function(a){a.get("coordinateSystem")==="calendar"&&(a.coordinateSystem=n[a.get("calendarIndex")||0])}),n},r.dimensions=["time","value"],r}();function Pp(r){var e=r.calendarModel,t=r.seriesModel,n=e?e.coordinateSystem:t?t.coordinateSystem:null;return n}function O2(r){r.registerComponentModel(L2),r.registerComponentView(P2),r.registerCoordinateSystem("calendar",k2)}function N2(r,e){var t=r.existing;if(e.id=r.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var n=e.parentOption;n?e.parentId=n.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function kp(r,e){var t;return T(e,function(n){r[n]!=null&&r[n]!=="auto"&&(t=!0)}),t}function V2(r,e,t){var n=X({},t),a=r[e],i=t.$action||"merge";i==="merge"?a?(ke(a,n,!0),s0(a,n,{ignoreSize:!0}),PA(t,a),co(t,a),co(t,a,"shape"),co(t,a,"style"),co(t,a,"extra"),t.clipPath=a.clipPath):r[e]=n:i==="replace"?r[e]=n:i==="remove"&&a&&(r[e]=null)}var sS=["transition","enterFrom","leaveTo"],B2=sS.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function co(r,e,t){if(t&&(!r[t]&&e[t]&&(r[t]={}),r=r[t],e=e[t]),!(!r||!e))for(var n=t?sS:B2,a=0;a<n.length;a++){var i=n[a];r[i]==null&&e[i]!=null&&(r[i]=e[i])}}function z2(r,e){if(r&&(r.hv=e.hv=[kp(e,["left","right"]),kp(e,["top","bottom"])],r.type==="group")){var t=r,n=e;t.width==null&&(t.width=n.width=0),t.height==null&&(t.height=n.height=0)}}var H2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,n){var a=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,t,n),this.option.elements=a},e.prototype.optionUpdated=function(t,n){var a=this.option,i=(n?a:t).elements,o=a.elements=n?[]:a.elements,s=[];this._flatten(i,s,null);var l=LA(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];T(l,function(c,d){var f=c.newOption;f&&(u.push(f),N2(c,f),V2(o,d,f),z2(o[d],f))},this),a.elements=Qe(o,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(t,n,a){T(t,function(i){if(i){a&&(i.parentOption=a),n.push(i);var o=i.children;o&&o.length&&this._flatten(o,n,i),delete i.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(dt),Op={path:null,compoundPath:null,group:ae,image:hr,text:Ie},zt=je(),G2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=le()},e.prototype.render=function(t,n,a){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,a)},e.prototype._updateElements=function(t){var n=t.useElOptionsToUpdate();if(n){var a=this._elMap,i=this.group,o=t.get("z"),s=t.get("zlevel");T(n,function(l){var u=mr(l.id,null),c=u!=null?a.get(u):null,d=mr(l.parentId,null),f=d!=null?a.get(d):i,h=l.type,v=l.style;h==="text"&&v&&l.hv&&l.hv[1]&&(v.textVerticalAlign=v.textBaseline=v.verticalAlign=v.align=null);var p=l.textContent,g=l.textConfig;if(v&&Zb(v,h,!!g,!!p)){var m=Xb(v,h,!0);!g&&m.textConfig&&(g=l.textConfig=m.textConfig),!p&&m.textContent&&(p=m.textContent)}var b=F2(l),S=l.$action||"merge",y=S==="merge",w=S==="replace";if(y){var _=!c,x=c;_?x=Np(u,f,l.type,a):(x&&(zt(x).isNew=!1),Jb(x)),x&&(Io(x,b,t,{isInit:_}),Vp(x,l,o,s))}else if(w){Lo(c,l,a,t);var A=Np(u,f,l.type,a);A&&(Io(A,b,t,{isInit:!0}),Vp(A,l,o,s))}else S==="remove"&&(Qb(c,l),Lo(c,l,a,t));var C=a.get(u);if(C&&p)if(y){var D=C.getTextContent();D?D.attr(p):C.setTextContent(new Ie(p))}else w&&C.setTextContent(new Ie(p));if(C){var E=l.clipPath;if(E){var M=E.type,I=void 0,_=!1;if(y){var R=C.getClipPath();_=!R||zt(R).type!==M,I=_?Ac(M):R}else w&&(_=!0,I=Ac(M));C.setClipPath(I),Io(I,E,t,{isInit:_}),ns(I,E.keyframeAnimation,t)}var L=zt(C);C.setTextConfig(g),L.option=l,W2(C,t,l),ed({el:C,componentModel:t,itemName:C.name,itemTooltipOption:l.tooltip}),ns(C,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,n){for(var a=t.option.elements,i=this.group,o=this._elMap,s=n.getWidth(),l=n.getHeight(),u=["x","y"],c=0;c<a.length;c++){var d=a[c],f=mr(d.id,null),h=f!=null?o.get(f):null;if(!(!h||!h.isGroup)){var v=h.parent,p=v===i,g=zt(h),m=zt(v);g.width=W(g.option.width,p?s:m.width)||0,g.height=W(g.option.height,p?l:m.height)||0}}for(var c=a.length-1;c>=0;c--){var d=a[c],f=mr(d.id,null),h=f!=null?o.get(f):null;if(h){var v=h.parent,m=zt(v),b=v===i?{width:s,height:l}:{width:m.width,height:m.height},S={},y=nd(h,d,b,null,{hv:d.hv,boundingMode:d.bounding},S);if(!zt(h).isNew&&y){for(var w=d.transition,_={},x=0;x<u.length;x++){var A=u[x],C=S[A];w&&(mn(w)||Oe(w,A)>=0)?_[A]=C:h[A]=C}Ne(h,_,t,0)}else h.attr(S)}}},e.prototype._clear=function(){var t=this,n=this._elMap;n.each(function(a){Lo(a,zt(a).option,n,t._lastGraphicModel)}),this._elMap=le()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(yt);function Ac(r){var e=F(Op,r)?Op[r]:e0(r),t=new e({});return zt(t).type=r,t}function Np(r,e,t,n){var a=Ac(t);return e.add(a),n.set(r,a),zt(a).id=r,zt(a).isNew=!0,a}function Lo(r,e,t,n){var a=r&&r.parent;a&&(r.type==="group"&&r.traverse(function(i){Lo(i,e,t,n)}),Js(r,e,n),t.removeKey(zt(r).id))}function Vp(r,e,t,n){r.isGroup||T([["cursor",xn.prototype.cursor],["zlevel",n||0],["z",t||0],["z2",0]],function(a){var i=a[0];F(e,i)?r[i]=it(e[i],a[1]):r[i]==null&&(r[i]=a[1])}),T(We(e),function(a){if(a.indexOf("on")===0){var i=e[a];r[a]=xe(i)?i:null}}),F(e,"draggable")&&(r.draggable=e.draggable),e.name!=null&&(r.name=e.name),e.id!=null&&(r.id=e.id)}function F2(r){return r=X({},r),T(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(kA),function(e){delete r[e]}),r}function W2(r,e,t){var n=Ae(r).eventData;!r.silent&&!r.ignore&&!n&&(n=Ae(r).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:r.name}),n&&(n.info=t.info)}function U2(r){r.registerComponentModel(H2),r.registerComponentView(G2),r.registerPreprocessor(function(e){var t=e.graphic;$(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var Bp=["x","y","radius","angle","single"],j2=["cartesian2d","polar","singleAxis"];function $2(r){var e=r.get("coordinateSystem");return Oe(j2,e)>=0}function Pr(r){return r+"Axis"}function Y2(r,e){var t=le(),n=[],a=le();r.eachComponent({mainType:"dataZoom",query:e},function(c){a.get(c.uid)||s(c)});var i;do i=!1,r.eachComponent("dataZoom",o);while(i);function o(c){!a.get(c.uid)&&l(c)&&(s(c),i=!0)}function s(c){a.set(c.uid,!0),n.push(c),u(c)}function l(c){var d=!1;return c.eachTargetAxis(function(f,h){var v=t.get(f);v&&v[h]&&(d=!0)}),d}function u(c){c.eachTargetAxis(function(d,f){(t.get(d)||t.set(d,[]))[f]=!0})}return n}function lS(r){var e=r.ecModel,t={infoList:[],infoMap:le()};return r.eachTargetAxis(function(n,a){var i=e.getComponent(Pr(n),a);if(i){var o=i.getCoordSysModel();if(o){var s=o.uid,l=t.infoMap.get(s);l||(l={model:o,axisModels:[]},t.infoList.push(l),t.infoMap.set(s,l)),l.axisModels.push(i)}}}),t}var uu=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},r}(),gi=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,n,a){var i=zp(t);this.settledOption=i,this.mergeDefaultAndTheme(t,a),this._doInit(i)},e.prototype.mergeOption=function(t){var n=zp(t);ke(this.option,t,!0),ke(this.settledOption,n,!0),this._doInit(n)},e.prototype._doInit=function(t){var n=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var a=this.settledOption;T([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(n[i[0]]=a[i[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),n=this._targetAxisInfoMap=le(),a=this._fillSpecifiedTargetAxis(n);a?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var n=!1;return T(Bp,function(a){var i=this.getReferringComponents(Pr(a),OA);if(i.specified){n=!0;var o=new uu;T(i.models,function(s){o.add(s.componentIndex)}),t.set(a,o)}},this),n},e.prototype._fillAutoTargetAxisByOrient=function(t,n){var a=this.ecModel,i=!0;if(i){var o=n==="vertical"?"y":"x",s=a.findComponents({mainType:o+"Axis"});l(s,o)}if(i){var s=a.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===n}});l(s,"single")}function l(u,c){var d=u[0];if(d){var f=new uu;if(f.add(d.componentIndex),t.set(c,f),i=!1,c==="x"||c==="y"){var h=d.getReferringComponents("grid",cr).models[0];h&&T(u,function(v){d.componentIndex!==v.componentIndex&&h===v.getReferringComponents("grid",cr).models[0]&&f.add(v.componentIndex)})}}}i&&T(Bp,function(u){if(i){var c=a.findComponents({mainType:Pr(u),filter:function(f){return f.get("type",!0)==="category"}});if(c[0]){var d=new uu;d.add(c[0].componentIndex),t.set(u,d),i=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(n){!t&&(t=n)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var n=this._rangePropMode,a=this.get("rangeMode");T([["start","startValue"],["end","endValue"]],function(i,o){var s=t[i[0]]!=null,l=t[i[1]]!=null;s&&!l?n[o]="percent":!s&&l?n[o]="value":a?n[o]=a[o]:s&&(n[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(n,a){t==null&&(t=this.ecModel.getComponent(Pr(n),a))},this),t},e.prototype.eachTargetAxis=function(t,n){this._targetAxisInfoMap.each(function(a,i){T(a.indexList,function(o){t.call(n,i,o)})})},e.prototype.getAxisProxy=function(t,n){var a=this.getAxisModel(t,n);if(a)return a.__dzAxisProxy},e.prototype.getAxisModel=function(t,n){var a=this._targetAxisInfoMap.get(t);if(a&&a.indexMap[n])return this.ecModel.getComponent(Pr(t),n)},e.prototype.setRawRange=function(t){var n=this.option,a=this.settledOption;T([["start","startValue"],["end","endValue"]],function(i){(t[i[0]]!=null||t[i[1]]!=null)&&(n[i[0]]=a[i[0]]=t[i[0]],n[i[1]]=a[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var n=this.option;T(["start","startValue","end","endValue"],function(a){n[a]=t[a]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,n){if(t==null&&n==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(t,n).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var n,a=this._targetAxisInfoMap.keys(),i=0;i<a.length;i++)for(var o=a[i],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;n||(n=u)}return n},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(dt);function zp(r){var e={};return T(["start","end","startValue","endValue","throttle"],function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}),e}var Z2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(gi),of=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){this.dataZoomModel=t,this.ecModel=n,this.api=a},e.type="dataZoom",e}(yt),X2=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(of),Zn=T,Hp=Gt,q2=function(){function r(e,t,n,a){this._dimName=e,this._axisIndex=t,this.ecModel=a,this._dataZoomModel=n}return r.prototype.hostedBy=function(e){return this._dataZoomModel===e},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if($2(t)){var n=Pr(this._dimName),a=t.getReferringComponents(n,cr).models[0];a&&this._axisIndex===a.componentIndex&&e.push(t)}},this),e},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return Se(this._minMaxSpan)},r.prototype.calculateDataWindow=function(e){var t=this._dataExtent,n=this.getAxisModel(),a=n.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;Zn(["start","end"],function(f,h){var v=e[f],p=e[f+"Value"];i[h]==="percent"?(v==null&&(v=o[h]),p=a.parse(ye(v,o,t))):(u=!0,p=p==null?t[h]:a.parse(p),v=ye(p,t,o)),l[h]=p==null||isNaN(p)?t[h]:p,s[h]=v==null||isNaN(v)?o[h]:v}),Hp(l),Hp(s);var c=this._minMaxSpan;u?d(l,s,t,o,!1):d(s,l,o,t,!0);function d(f,h,v,p,g){var m=g?"Span":"ValueSpan";Rn(0,f,v,"all",c["min"+m],c["max"+m]);for(var b=0;b<2;b++)h[b]=ye(f[b],v,p,!0),g&&(h[b]=a.parse(h[b]))}return{valueWindow:l,percentWindow:s}},r.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=Q2(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var n=this._dimName,a=this.getTargetSeriesModels(),i=e.get("filterMode"),o=this._valueWindow;if(i==="none")return;Zn(a,function(l){var u=l.getData(),c=u.mapDimensionsAll(n);if(c.length){if(i==="weakFilter"){var d=u.getStore(),f=G(c,function(h){return u.getDimensionIndex(h)},u);u.filterSelf(function(h){for(var v,p,g,m=0;m<c.length;m++){var b=d.get(f[m],h),S=!isNaN(b),y=b<o[0],w=b>o[1];if(S&&!y&&!w)return!0;S&&(g=!0),y&&(v=!0),w&&(p=!0)}return g&&v&&p})}else Zn(c,function(h){if(i==="empty")l.setData(u=u.map(h,function(p){return s(p)?p:NaN}));else{var v={};v[h]=o,u.selectRange(v)}});Zn(c,function(h){u.setApproximateExtent(o,h)})}});function s(l){return l>=o[0]&&l<=o[1]}},r.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;Zn(["min","max"],function(a){var i=t.get(a+"Span"),o=t.get(a+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=ye(n[0]+o,n,[0,100],!0):i!=null&&(o=ye(i,[0,100],n,!0)-n[0]),e[a+"Span"]=i,e[a+"ValueSpan"]=o},this)},r.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var a=NA(n,[0,500]);a=Math.min(a,20);var i=e.axis.scale.rawExtentInfo;t[0]!==0&&i.setDeterminedMinMax("min",+n[0].toFixed(a)),t[1]!==100&&i.setDeterminedMinMax("max",+n[1].toFixed(a)),i.freeze()}},r}();function Q2(r,e,t){var n=[1/0,-1/0];Zn(t,function(o){VA(n,o.getData(),e)});var a=r.getAxisModel(),i=BA(a.axis.scale,a,n).calculate();return[i.min,i.max]}var K2={getTargetSeries:function(r){function e(a){r.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,s){var l=r.getComponent(Pr(o),s);a(o,s,l,i)})})}e(function(a,i,o,s){o.__dzAxisProxy=null});var t=[];e(function(a,i,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new q2(a,i,s,r),t.push(o.__dzAxisProxy))});var n=le();return T(t,function(a){T(a.getTargetSeriesModels(),function(i){n.set(i.uid,i)})}),n},overallReset:function(r,e){r.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(n,a){t.getAxisProxy(n,a).reset(t)}),t.eachTargetAxis(function(n,a){t.getAxisProxy(n,a).filterData(t,e)})}),r.eachComponent("dataZoom",function(t){var n=t.findRepresentativeAxisProxy();if(n){var a=n.getDataPercentWindow(),i=n.getDataValueWindow();t.setCalculatedRange({start:a[0],end:a[1],startValue:i[0],endValue:i[1]})}})}};function J2(r){r.registerAction("dataZoom",function(e,t){var n=Y2(t,e);T(n,function(a){a.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var Gp=!1;function sf(r){Gp||(Gp=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,K2),J2(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function eL(r){r.registerComponentModel(Z2),r.registerComponentView(X2),sf(r)}var Ht=function(){function r(){}return r}(),uS={};function Xn(r,e){uS[r]=e}function cS(r){return uS[r]}var tL=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;T(this.option.feature,function(n,a){var i=cS(a);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),ke(n,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(dt),rL=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,a,i){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},c=this._features||(this._features={}),d=[];T(u,function(v,p){d.push(p)}),new Wr(this._featureNames||[],d).add(f).update(f).remove(he(f,null)).execute(),this._featureNames=d;function f(v,p){var g=d[v],m=d[p],b=u[g],S=new Pt(b,t,t.ecModel),y;if(i&&i.newTitle!=null&&i.featureName===g&&(b.title=i.newTitle),g&&!m){if(nL(g))y={onclick:S.option.onclick,featureName:g};else{var w=cS(g);if(!w)return;y=new w}c[g]=y}else if(y=c[m],!y)return;y.uid=zy("toolbox-feature"),y.model=S,y.ecModel=n,y.api=a;var _=y instanceof Ht;if(!g&&m){_&&y.dispose&&y.dispose(n,a);return}if(!S.get("show")||_&&y.unusable){_&&y.remove&&y.remove(n,a);return}h(S,y,g),S.setIconStatus=function(x,A){var C=this.option,D=this.iconPaths;C.iconStatus=C.iconStatus||{},C.iconStatus[x]=A,D[x]&&(A==="emphasis"?ii:oi)(D[x])},y instanceof Ht&&y.render&&y.render(S,n,a,i)}function h(v,p,g){var m=v.getModel("iconStyle"),b=v.getModel(["emphasis","iconStyle"]),S=p instanceof Ht&&p.getIcons?p.getIcons():v.get("icon"),y=v.get("title")||{},w,_;de(S)?(w={},w[g]=S):w=S,de(y)?(_={},_[g]=y):_=y;var x=v.iconPaths={};T(w,function(A,C){var D=l0(A,{},{x:-s/2,y:-s/2,width:s,height:s});D.setStyle(m.getItemStyle());var E=D.ensureState("emphasis");E.style=b.getItemStyle();var M=new Ie({style:{text:_[C],align:b.get("textAlign"),borderRadius:b.get("textBorderRadius"),padding:b.get("textPadding"),fill:null,font:Jy({fontStyle:b.get("textFontStyle"),fontFamily:b.get("textFontFamily"),fontSize:b.get("textFontSize"),fontWeight:b.get("textFontWeight")},n)},ignore:!0});D.setTextContent(M),ed({el:D,componentModel:t,itemName:C,formatterParamsExtra:{title:_[C]}}),D.__title=_[C],D.on("mouseover",function(){var I=b.getItemStyle(),R=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";M.setStyle({fill:b.get("textFill")||I.fill||I.stroke||"#000",backgroundColor:b.get("textBackgroundColor")}),D.setTextConfig({position:b.get("textPosition")||R}),M.ignore=!t.get("showTitle"),a.enterEmphasis(this)}).on("mouseout",function(){v.get(["iconStatus",C])!=="emphasis"&&a.leaveEmphasis(this),M.hide()}),(v.get(["iconStatus",C])==="emphasis"?ii:oi)(D),o.add(D),D.on("click",Z(p.onclick,p,n,a,C)),x[C]=D})}zA(o,t,a),o.add(HA(o.getBoundingRect(),t)),l||o.eachChild(function(v){var p=v.__title,g=v.ensureState("emphasis"),m=g.textConfig||(g.textConfig={}),b=v.getTextContent(),S=b&&b.ensureState("emphasis");if(S&&!xe(S)&&p){var y=S.style||(S.style={}),w=a0(p,Ie.makeFont(y)),_=v.x+o.x,x=v.y+o.y+s,A=!1;x+w.height>a.getHeight()&&(m.position="top",A=!0);var C=A?-5-w.height:s+10;_+w.width/2>a.getWidth()?(m.position=["100%",C],y.align="right"):_-w.width/2<0&&(m.position=[0,C],y.align="left")}})},e.prototype.updateView=function(t,n,a,i){T(this._features,function(o){o instanceof Ht&&o.updateView&&o.updateView(o.model,n,a,i)})},e.prototype.remove=function(t,n){T(this._features,function(a){a instanceof Ht&&a.remove&&a.remove(t,n)}),this.group.removeAll()},e.prototype.dispose=function(t,n){T(this._features,function(a){a instanceof Ht&&a.dispose&&a.dispose(t,n)})},e.type="toolbox",e}(yt);function nL(r){return r.indexOf("my")===0}var aL=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){var a=this.model,i=a.get("name")||t.get("title.0.text")||"echarts",o=n.getZr().painter.getType()==="svg",s=o?"svg":a.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:a.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:a.get("connectedBackgroundColor"),excludeComponents:a.get("excludeComponents"),pixelRatio:a.get("pixelRatio")}),u=u0.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=i+"."+s,c.target="_blank",c.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||o){var f=l.split(","),h=f[0].indexOf("base64")>-1,v=o?decodeURIComponent(f[1]):f[1];h&&(v=window.atob(v));var p=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=v.length,m=new Uint8Array(g);g--;)m[g]=v.charCodeAt(g);var b=new Blob([m]);window.navigator.msSaveOrOpenBlob(b,p)}else{var S=document.createElement("iframe");document.body.appendChild(S);var y=S.contentWindow,w=y.document;w.open("image/svg+xml","replace"),w.write(v),w.close(),y.focus(),w.execCommand("SaveAs",!0,p),document.body.removeChild(S)}}else{var _=a.get("lang"),x='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',A=window.open();A.document.write(x),A.document.title=i}},e.getDefaultOption=function(t){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},e}(Ht),Fp="__ec_magicType_stack__",iL=[["line","bar"],["stack"]],oL=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,n=t.get("icon"),a={};return T(t.get("type"),function(i){n[i]&&(a[i]=n[i])}),a},e.getDefaultOption=function(t){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},e.prototype.onclick=function(t,n,a){var i=this.model,o=i.get(["seriesIndex",a]);if(Wp[a]){var s={series:[]},l=function(d){var f=d.subType,h=d.id,v=Wp[a](f,h,d,i);v&&(ce(v,d.option),s.series.push(v));var p=d.coordinateSystem;if(p&&p.type==="cartesian2d"&&(a==="line"||a==="bar")){var g=p.getAxesByScale("ordinal")[0];if(g){var m=g.dim,b=m+"Axis",S=d.getReferringComponents(b,cr).models[0],y=S.componentIndex;s[b]=s[b]||[];for(var w=0;w<=y;w++)s[b][y]=s[b][y]||{};s[b][y].boundaryGap=a==="bar"}}};T(iL,function(d){Oe(d,a)>=0&&T(d,function(f){i.setIconStatus(f,"normal")})}),i.setIconStatus(a,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=a;a==="stack"&&(u=ke({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",a])!=="emphasis"&&(c="tiled")),n.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(Ht),Wp={line:function(r,e,t,n){if(r==="bar")return ke({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(r,e,t,n){if(r==="line")return ke({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(r,e,t,n){var a=t.get("stack")===Fp;if(r==="line"||r==="bar")return n.setIconStatus("stack",a?"normal":"emphasis"),ke({id:e,stack:a?"":Fp},n.get(["option","stack"])||{},!0)}};Ns({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,e){e.mergeOption(r.newOption)});var el=new Array(60).join("-"),ua="	";function sL(r){var e={},t=[],n=[];return r.eachRawSeries(function(a){var i=a.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},n.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(a)}else t.push(a)}else t.push(a)}),{seriesGroupByCategoryAxis:e,other:t,meta:n}}function lL(r){var e=[];return T(r,function(t,n){var a=t.categoryAxis,i=t.valueAxis,o=i.dim,s=[" "].concat(G(t.series,function(h){return h.name})),l=[a.model.getCategories()];T(t.series,function(h){var v=h.getRawData();l.push(h.getRawData().mapArray(v.mapDimension(o),function(p){return p}))});for(var u=[s.join(ua)],c=0;c<l[0].length;c++){for(var d=[],f=0;f<l.length;f++)d.push(l[f][c]);u.push(d.join(ua))}e.push(u.join(`
`))}),e.join(`

`+el+`

`)}function uL(r){return G(r,function(e){var t=e.getRawData(),n=[e.name],a=[];return t.each(t.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],s=t.getName(o),l=0;l<i-1;l++)a[l]=arguments[l];n.push((s?s+ua:"")+a.join(ua))}),n.join(`
`)}).join(`

`+el+`

`)}function cL(r){var e=sL(r);return{value:Qe([lL(e.seriesGroupByCategoryAxis),uL(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+el+`

`),meta:e.meta}}function os(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function dL(r){var e=r.slice(0,r.indexOf(`
`));if(e.indexOf(ua)>=0)return!0}var Cc=new RegExp("["+ua+"]+","g");function fL(r){for(var e=r.split(/\n+/g),t=os(e.shift()).split(Cc),n=[],a=G(t,function(l){return{name:l,data:[]}}),i=0;i<e.length;i++){var o=os(e[i]).split(Cc);n.push(o.shift());for(var s=0;s<o.length;s++)a[s]&&(a[s].data[i]=o[s])}return{series:a,categories:n}}function hL(r){for(var e=r.split(/\n+/g),t=os(e.shift()),n=[],a=0;a<e.length;a++){var i=os(e[a]);if(i){var o=i.split(Cc),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),n[a]={name:s,value:[]},l=n[a].value):l=n[a]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?n[a].value=l[0]:n[a]=l[0])}}return{name:t,data:n}}function vL(r,e){var t=r.split(new RegExp(`
*`+el+`
*`,"g")),n={series:[]};return T(t,function(a,i){if(dL(a)){var o=fL(a),s=e[i],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:o.categories},n.series=n.series.concat(o.series))}else{var o=hL(a);n.series.push(o)}}),n}var pL=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var a=n.getDom(),i=this.model;this._dom&&a.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=i.get("optionToContent"),f=i.get("contentToOption"),h=cL(t);if(xe(d)){var v=d(n.getOption());de(v)?u.innerHTML=v:GA(v)&&u.appendChild(v)}else{c.readOnly=i.get("readOnly");var p=c.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=i.get("textColor"),p.borderColor=i.get("textareaBorderColor"),p.backgroundColor=i.get("textareaColor"),c.value=h.value,u.appendChild(c)}var g=h.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),y=document.createElement("div");b+=";background-color:"+i.get("buttonColor"),b+=";color:"+i.get("buttonTextColor");var w=this;function _(){a.removeChild(o),w._dom=null}_h(S,"click",_),_h(y,"click",function(){if(f==null&&d!=null||f!=null&&d==null){_();return}var x;try{xe(f)?x=f(u,n.getOption()):x=vL(c.value,g)}catch(A){throw _(),new Error("Data view format error "+A)}x&&n.dispatchAction({type:"changeDataView",newOption:x}),_()}),S.innerHTML=l[1],y.innerHTML=l[2],y.style.cssText=S.style.cssText=b,!i.get("readOnly")&&m.appendChild(y),m.appendChild(S),o.appendChild(s),o.appendChild(u),o.appendChild(m),u.style.height=a.clientHeight-80+"px",a.appendChild(o),this._dom=o},e.prototype.remove=function(t,n){this._dom&&n.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,n){this.remove(t,n)},e.getDefaultOption=function(t){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},e}(Ht);function gL(r,e){return G(r,function(t,n){var a=e&&e[n];if(ct(a)&&!$(a)){var i=ct(t)&&!$(t);i||(t={value:t});var o=a.name!=null&&t.name==null;return t=ce(t,a),o&&delete t.name,t}else return t})}Ns({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,e){var t=[];T(r.newOption.series,function(n){var a=e.getSeriesByName(n.name)[0];if(!a)t.push(X({type:"scatter"},n));else{var i=a.get("data");t.push({name:n.name,data:gL(n.data,i)})}}),e.mergeOption(ce({series:t},r.newOption))});var dS=T,fS=je();function mL(r,e){var t=lf(r);dS(e,function(n,a){for(var i=t.length-1;i>=0;i--){var o=t[i];if(o[a])break}if(i<0){var s=r.queryComponents({mainType:"dataZoom",subType:"select",id:a})[0];if(s){var l=s.getPercentRange();t[0][a]={dataZoomId:a,start:l[0],end:l[1]}}}}),t.push(e)}function yL(r){var e=lf(r),t=e[e.length-1];e.length>1&&e.pop();var n={};return dS(t,function(a,i){for(var o=e.length-1;o>=0;o--)if(a=e[o][i],a){n[i]=a;break}}),n}function bL(r){fS(r).snapshots=null}function SL(r){return lf(r).length}function lf(r){var e=fS(r);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var _L=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){bL(t),n.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return n},e}(Ht);Ns({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,e){e.resetOption("recreate")});var wL=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],uf=function(){function r(e,t,n){var a=this;this._targetInfoList=[];var i=Up(t,e);T(xL,function(o,s){(!n||!n.include||Oe(n.include,s)>=0)&&o(i,a._targetInfoList)})}return r.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(n,a,i){if((n.coordRanges||(n.coordRanges=[])).push(a),!n.coordRange){n.coordRange=a;var o=cu[n.brushType](0,i,a);n.__rangeOffset={offset:Zp[n.brushType](o.values,n.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},r.prototype.matchOutputRanges=function(e,t,n){T(e,function(a){var i=this.findTargetInfo(a,t);i&&i!==!0&&T(i.coordSyses,function(o){var s=cu[a.brushType](1,o,a.range,!0);n(a,s.values,o,t)})},this)},r.prototype.setInputRanges=function(e,t){T(e,function(n){var a=this.findTargetInfo(n,t);if(n.range=n.range||[],a&&a!==!0){n.panelId=a.panelId;var i=cu[n.brushType](0,a.coordSys,n.coordRange),o=n.__rangeOffset;n.range=o?Zp[n.brushType](i.values,o.offset,AL(i.xyMinMax,o.xyMinMax)):i.values}},this)},r.prototype.makePanelOpts=function(e,t){return G(this._targetInfoList,function(n){var a=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:Eb(a),isTargetByCursor:Ib(a,e,n.coordSysModel),getLinearBrushOtherExtent:Mb(a)}})},r.prototype.controlSeries=function(e,t,n){var a=this.findTargetInfo(e,n);return a===!0||a&&Oe(a.coordSyses,t.coordinateSystem)>=0},r.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,a=Up(t,e),i=0;i<n.length;i++){var o=n[i],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<jp.length;l++)if(jp[l](a,o))return o}return!0},r}();function Dc(r){return r[0]>r[1]&&r.reverse(),r}function Up(r,e){return c0(r,e,{includeMainTypes:wL})}var xL={grid:function(r,e){var t=r.xAxisModels,n=r.yAxisModels,a=r.gridModels,i=le(),o={},s={};!t&&!n&&!a||(T(t,function(l){var u=l.axis.grid.model;i.set(u.id,u),o[u.id]=!0}),T(n,function(l){var u=l.axis.grid.model;i.set(u.id,u),s[u.id]=!0}),T(a,function(l){i.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),i.each(function(l){var u=l.coordinateSystem,c=[];T(u.getCartesians(),function(d,f){(Oe(t,d.getAxis("x").model)>=0||Oe(n,d.getAxis("y").model)>=0)&&c.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:$p.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(r,e){T(r.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:$p.geo})})}},jp=[function(r,e){var t=r.xAxisModel,n=r.yAxisModel,a=r.gridModel;return!a&&t&&(a=t.axis.grid.model),!a&&n&&(a=n.axis.grid.model),a&&a===e.gridModel},function(r,e){var t=r.geoModel;return t&&t===e.geoModel}],$p={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,e=r.getBoundingRect().clone();return e.applyTransform(ra(r)),e}},cu={lineX:he(Yp,0),lineY:he(Yp,1),rect:function(r,e,t,n){var a=r?e.pointToData([t[0][0],t[1][0]],n):e.dataToPoint([t[0][0],t[1][0]],n),i=r?e.pointToData([t[0][1],t[1][1]],n):e.dataToPoint([t[0][1],t[1][1]],n),o=[Dc([a[0],i[0]]),Dc([a[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(r,e,t,n){var a=[[1/0,-1/0],[1/0,-1/0]],i=G(t,function(o){var s=r?e.pointToData(o,n):e.dataToPoint(o,n);return a[0][0]=Math.min(a[0][0],s[0]),a[1][0]=Math.min(a[1][0],s[1]),a[0][1]=Math.max(a[0][1],s[0]),a[1][1]=Math.max(a[1][1],s[1]),s});return{values:i,xyMinMax:a}}};function Yp(r,e,t,n){var a=t.getAxis(["x","y"][r]),i=Dc(G([0,1],function(s){return e?a.coordToData(a.toLocalCoord(n[s]),!0):a.toGlobalCoord(a.dataToCoord(n[s]))})),o=[];return o[r]=i,o[1-r]=[NaN,NaN],{values:i,xyMinMax:o}}var Zp={lineX:he(Xp,0),lineY:he(Xp,1),rect:function(r,e,t){return[[r[0][0]-t[0]*e[0][0],r[0][1]-t[0]*e[0][1]],[r[1][0]-t[1]*e[1][0],r[1][1]-t[1]*e[1][1]]]},polygon:function(r,e,t){return G(r,function(n,a){return[n[0]-t[0]*e[a][0],n[1]-t[1]*e[a][1]]})}};function Xp(r,e,t,n){return[e[0]-n[r]*t[0],e[1]-n[r]*t[1]]}function AL(r,e){var t=qp(r),n=qp(e),a=[t[0]/n[0],t[1]/n[1]];return isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a}function qp(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var Tc=T,CL=WA("toolbox-dataZoom_"),DL=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,a,i){this._brushController||(this._brushController=new zd(a.getZr()),this._brushController.on("brush",Z(this._onBrush,this)).mount()),ML(t,n,this,i,a),EL(t,n)},e.prototype.onclick=function(t,n,a){TL[a].call(this)},e.prototype.remove=function(t,n){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,n){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var n=t.areas;if(!t.isEnd||!n.length)return;var a={},i=this.ecModel;this._brushController.updateCovers([]);var o=new uf(cf(this.model),i,{include:["grid"]});o.matchOutputRanges(n,i,function(u,c,d){if(d.type==="cartesian2d"){var f=u.brushType;f==="rect"?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[f],d,c)}}),mL(i,a),this._dispatchZoomAction(a);function s(u,c,d){var f=c.getAxis(u),h=f.model,v=l(u,h,i),p=v.findRepresentativeAxisProxy(h).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(d=Rn(0,d.slice(),f.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),v&&(a[v.id]={dataZoomId:v.id,startValue:d[0],endValue:d[1]})}function l(u,c,d){var f;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var v=h.getAxisModel(u,c.componentIndex);v&&(f=h)}),f}},e.prototype._dispatchZoomAction=function(t){var n=[];Tc(t,function(a,i){n.push(Se(a))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},e.getDefaultOption=function(t){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},e}(Ht),TL={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(yL(this.ecModel))}};function cf(r){var e={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function EL(r,e){r.setIconStatus("back",SL(e)>1?"emphasis":"normal")}function ML(r,e,t,n,a){var i=t._isZoomActive;n&&n.type==="takeGlobalCursor"&&(i=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),t._isZoomActive=i,r.setIconStatus("zoom",i?"emphasis":"normal");var o=new uf(cf(r),e,{include:["grid"]}),s=o.makePanelOpts(a,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}FA("dataZoom",function(r){var e=r.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var n=e.getModel(t),a=[],i=cf(n),o=c0(r,i);Tc(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Tc(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var d=l.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:CL+u+d};f[c]=d,a.push(f)}return a});function IL(r){r.registerComponentModel(tL),r.registerComponentView(rL),Xn("saveAsImage",aL),Xn("magicType",oL),Xn("dataView",pL),Xn("dataZoom",DL),Xn("restore",_L),se(eL)}var RL=["rect","polygon","keep","clear"];function LL(r,e){var t=gt(r?r.brush:[]);if(t.length){var n=[];T(t,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(n=n.concat(u))});var a=r&&r.toolbox;$(a)&&(a=a[0]),a||(a={feature:{}},r.toolbox=[a]);var i=a.feature||(a.feature={}),o=i.brush||(i.brush={}),s=o.type||(o.type=[]);s.push.apply(s,n),PL(s),e&&!s.length&&s.push.apply(s,RL)}}function PL(r){var e={};T(r,function(t){e[t]=1}),r.length=0,T(e,function(t,n){r.push(n)})}var Qp=T;function Kp(r){if(r){for(var e in r)if(r.hasOwnProperty(e))return!0}}function Ec(r,e,t){var n={};return Qp(e,function(i){var o=n[i]=a();Qp(r[i],function(s,l){if(Ke.isValidType(l)){var u={type:l,visual:s};t&&t(u,i),o[l]=new Ke(u),l==="opacity"&&(u=Se(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new Ke(u))}})}),n;function a(){var i=function(){};i.prototype.__hidden=i.prototype;var o=new i;return o}}function hS(r,e,t){var n;T(t,function(a){e.hasOwnProperty(a)&&Kp(e[a])&&(n=!0)}),n&&T(t,function(a){e.hasOwnProperty(a)&&Kp(e[a])?r[a]=Se(e[a]):delete r[a]})}function kL(r,e,t,n,a,i){var o={};T(r,function(d){var f=Ke.prepareVisualTypes(e[d]);o[d]=f});var s;function l(d){return d0(t,s,d)}function u(d,f){f0(t,s,d,f)}t.each(c);function c(d,f){s=d;var h=t.getRawDataItem(s);if(!(h&&h.visualMap===!1))for(var v=n.call(a,d),p=e[v],g=o[v],m=0,b=g.length;m<b;m++){var S=g[m];p[S]&&p[S].applyVisual(d,l,u)}}}function OL(r,e,t,n){var a={};return T(r,function(i){var o=Ke.prepareVisualTypes(e[i]);a[i]=o}),{progress:function(o,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(w){return d0(s,d,w)}function c(w,_){f0(s,d,w,_)}for(var d,f=s.getStore();(d=o.next())!=null;){var h=s.getRawDataItem(d);if(!(h&&h.visualMap===!1))for(var v=n!=null?f.get(l,d):d,p=t(v),g=e[p],m=a[p],b=0,S=m.length;b<S;b++){var y=m[b];g[y]&&g[y].applyVisual(v,u,c)}}}}}function NL(r){var e=r.brushType,t={point:function(n){return Jp[e].point(n,t,r)},rect:function(n){return Jp[e].rect(n,t,r)}};return t}var Jp={lineX:eg(0),lineY:eg(1),rect:{point:function(r,e,t){return r&&t.boundingRect.contain(r[0],r[1])},rect:function(r,e,t){return r&&t.boundingRect.intersect(r)}},polygon:{point:function(r,e,t){return r&&t.boundingRect.contain(r[0],r[1])&&fn(t.range,r[0],r[1])},rect:function(r,e,t){var n=t.range;if(!r||n.length<=1)return!1;var a=r.x,i=r.y,o=r.width,s=r.height,l=n[0];if(fn(n,a,i)||fn(n,a+o,i)||fn(n,a,i+s)||fn(n,a+o,i+s)||He.create(r).contain(l[0],l[1])||Qi(a,i,a+o,i,n)||Qi(a,i,a,i+s,n)||Qi(a+o,i,a+o,i+s,n)||Qi(a,i+s,a+o,i+s,n))return!0}}};function eg(r){var e=["x","y"],t=["width","height"];return{point:function(n,a,i){if(n){var o=i.range,s=n[r];return La(s,o)}},rect:function(n,a,i){if(n){var o=i.range,s=[n[e[r]],n[e[r]]+n[t[r]]];return s[1]<s[0]&&s.reverse(),La(s[0],o)||La(s[1],o)||La(o[0],s)||La(o[1],s)}}}}function La(r,e){return e[0]<=r&&r<=e[1]}var tg=["inBrush","outOfBrush"],du="__ecBrushSelect",Mc="__ecInBrushSelectEvent";function vS(r){r.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new uf(e.option,r);t.setInputRanges(e.areas,r)})}function VL(r,e,t){var n=[],a,i;r.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),vS(r),r.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Se(o.areas),selected:[]};n.push(l);var u=o.option,c=u.brushLink,d=[],f=[],h=[],v=!1;s||(a=u.throttleType,i=u.throttleDelay);var p=G(o.areas,function(w){var _=GL[w.brushType],x=ce({boundingRect:_?_(w):void 0},w);return x.selectors=NL(x),x}),g=Ec(o.option,tg,function(w){w.mappingMethod="fixed"});$(c)&&T(c,function(w){d[w]=1});function m(w){return c==="all"||!!d[w]}function b(w){return!!w.length}r.eachSeries(function(w,_){var x=h[_]=[];w.subType==="parallel"?S(w,_):y(w,_,x)});function S(w,_){var x=w.coordinateSystem;v=v||x.hasAxisBrushed(),m(_)&&x.eachActiveState(w.getData(),function(A,C){A==="active"&&(f[C]=1)})}function y(w,_,x){if(!(!w.brushSelector||HL(o,_))&&(T(p,function(C){o.brushTargetManager.controlSeries(C,w,r)&&x.push(C),v=v||b(x)}),m(_)&&b(x))){var A=w.getData();A.each(function(C){rg(w,x,A,C)&&(f[C]=1)})}}r.eachSeries(function(w,_){var x={seriesId:w.id,seriesIndex:_,seriesName:w.name,dataIndex:[]};l.selected.push(x);var A=h[_],C=w.getData(),D=m(_)?function(E){return f[E]?(x.dataIndex.push(C.getRawIndex(E)),"inBrush"):"outOfBrush"}:function(E){return rg(w,A,C,E)?(x.dataIndex.push(C.getRawIndex(E)),"inBrush"):"outOfBrush"};(m(_)?v:b(A))&&kL(tg,g,C,D)})}),BL(e,a,i,n,t)}function BL(r,e,t,n,a){if(a){var i=r.getZr();if(!i[Mc]){i[du]||(i[du]=zL);var o=Fs(i,du,t,e);o(r,n)}}}function zL(r,e){if(!r.isDisposed()){var t=r.getZr();t[Mc]=!0,r.dispatchAction({type:"brushSelect",batch:e}),t[Mc]=!1}}function rg(r,e,t,n){for(var a=0,i=e.length;a<i;a++){var o=e[a];if(r.brushSelector(n,t,o.selectors,o))return!0}}function HL(r,e){var t=r.option.seriesIndex;return t!=null&&t!=="all"&&($(t)?Oe(t,e)<0:e!==t)}var GL={rect:function(r){return ng(r.range)},polygon:function(r){for(var e,t=r.range,n=0,a=t.length;n<a;n++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=t[n];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&ng(e)}};function ng(r){return new He(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var FL=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){this.ecModel=t,this.api=n,this.model,(this._brushController=new zd(n.getZr())).on("brush",Z(this._onBrush,this)).mount()},e.prototype.render=function(t,n,a,i){this.model=t,this._updateController(t,n,a,i)},e.prototype.updateTransform=function(t,n,a,i){vS(n),this._updateController(t,n,a,i)},e.prototype.updateVisual=function(t,n,a,i){this.updateTransform(t,n,a,i)},e.prototype.updateView=function(t,n,a,i){this._updateController(t,n,a,i)},e.prototype._updateController=function(t,n,a,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(a)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var n=this.model.id,a=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:Se(a),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:Se(a),$from:n})},e.type="brush",e}(yt),WL="#ddd",UL=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,n){var a=this.option;!n&&hS(a,t,["inBrush","outOfBrush"]);var i=a.inBrush=a.inBrush||{};a.outOfBrush=a.outOfBrush||{color:WL},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=G(t,function(n){return ag(this.option,n)},this))},e.prototype.setBrushOption=function(t){this.brushOption=ag(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(dt);function ag(r,e){return ke({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new Pt(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},e,!0)}var jL=["rect","polygon","lineX","lineY","keep","clear"],$L=function(r){V(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,a){var i,o,s;n.eachComponent({mainType:"brush"},function(l){i=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=i,this._brushMode=o,T(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===i)?"emphasis":"normal")})},e.prototype.updateView=function(t,n,a){this.render(t,n,a)},e.prototype.getIcons=function(){var t=this.model,n=t.get("icon",!0),a={};return T(t.get("type",!0),function(i){n[i]&&(a[i]=n[i])}),a},e.prototype.onclick=function(t,n,a){var i=this._brushType,o=this._brushMode;a==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:a==="keep"?i:i===a?!1:a,brushMode:a==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var n={show:!0,type:jL.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return n},e}(Ht);function YL(r){r.registerComponentView(FL),r.registerComponentModel(UL),r.registerPreprocessor(LL),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,VL),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(n){n.setAreas(e.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Gr),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Gr),Xn("brush",$L)}var ig=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a),this._initData()},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var n=this._data.count();this.option.loop?t=(t%n+n)%n:(t>=n&&(t=n-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,n=t.data||[],a=t.axisType,i=this._names=[],o;a==="category"?(o=[],T(n,function(u,c){var d=mr(UA(u),""),f;ct(u)?(f=Se(u),f.value=c):f=c,o.push(f),i.push(d)})):o=n;var s={category:"ordinal",time:"time",value:"number"}[a]||"number",l=this._data=new It([{name:"value",type:s}],this);l.initData(o,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(dt),pS=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Sa(ig.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(ig);rr(pS,cd.prototype);var ZL=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(yt),XL=function(r){V(e,r);function e(t,n,a,i){var o=r.call(this,t,n,a)||this;return o.type=i||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(pr),fu=Math.PI,og=je(),qL=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){this.api=n},e.prototype.render=function(t,n,a){if(this.model=t,this.api=a,this.ecModel=n,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,a),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,t);t.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return Ct("nameValue",{noName:!0,value:c})},T(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](i,o,l,t)},this),this._renderAxisLabel(i,s,l,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,n){var a=t.get(["label","position"]),i=t.get("orient"),o=KL(t,n),s;a==null||a==="auto"?s=i==="horizontal"?o.y+o.height/2<n.getHeight()/2?"-":"+":o.x+o.width/2<n.getWidth()/2?"+":"-":de(a)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][a]:s=a;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:fu/2},d=i==="vertical"?o.height:o.width,f=t.getModel("controlStyle"),h=f.get("show",!0),v=h?f.get("itemSize"):0,p=h?f.get("itemGap"):0,g=v+p,m=t.get(["label","rotate"])||0;m=m*fu/180;var b,S,y,w=f.get("position",!0),_=h&&f.get("showPlayBtn",!0),x=h&&f.get("showPrevBtn",!0),A=h&&f.get("showNextBtn",!0),C=0,D=d;w==="left"||w==="bottom"?(_&&(b=[0,0],C+=g),x&&(S=[C,0],C+=g),A&&(y=[D-v,0],D-=g)):(_&&(b=[D-v,0],D-=g),x&&(S=[0,0],C+=g),A&&(y=[D-v,0],D-=g));var E=[C,D];return t.get("inverse")&&E.reverse(),{viewRect:o,mainLength:d,orient:i,rotation:c[i],labelRotation:m,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[i],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[i],playPosition:b,prevBtnPosition:S,nextBtnPosition:y,axisExtent:E,controlSize:v,controlGap:p}},e.prototype._position=function(t,n){var a=this._mainGroup,i=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var s=ba(),l=o.x,u=o.y+o.height;wn(s,s,[-l,-u]),Bs(s,s,-fu/2),wn(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var c=b(o),d=b(a.getBoundingRect()),f=b(i.getBoundingRect()),h=[a.x,a.y],v=[i.x,i.y];v[0]=h[0]=c[0][0];var p=t.labelPosOpt;if(p==null||de(p)){var g=p==="+"?0:1;S(h,d,c,1,g),S(v,f,c,1,1-g)}else{var g=p>=0?0:1;S(h,d,c,1,g),v[1]=h[1]+p}a.setPosition(h),i.setPosition(v),a.rotation=i.rotation=t.rotation,m(a),m(i);function m(y){y.originX=c[0][0]-y.x,y.originY=c[1][0]-y.y}function b(y){return[[y.x,y.x+y.width],[y.y,y.y+y.height]]}function S(y,w,_,x,A){y[x]+=_[x][A]-w[x][A]}},e.prototype._createAxis=function(t,n){var a=n.getData(),i=n.get("axisType"),o=QL(n,i);o.getTicks=function(){return a.mapArray(["value"],function(u){return{value:u}})};var s=a.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new XL("value",o,t.axisExtent,i);return l.model=n,l},e.prototype._createGroup=function(t){var n=this[t]=new ae;return this.group.add(n),n},e.prototype._renderAxisLine=function(t,n,a,i){var o=a.getExtent();if(i.get(["lineStyle","show"])){var s=new Qt({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:X({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new Qt({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:ce({lineCap:"round",lineWidth:s.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},e.prototype._renderAxisTick=function(t,n,a,i){var o=this,s=i.getData(),l=a.scale.getTicks();this._tickSymbols=[],T(l,function(u){var c=a.dataToCoord(u.value),d=s.getItemModel(u.value),f=d.getModel("itemStyle"),h=d.getModel(["emphasis","itemStyle"]),v=d.getModel(["progress","itemStyle"]),p={x:c,y:0,onclick:Z(o._changeTimeline,o,u.value)},g=sg(d,f,n,p);g.ensureState("emphasis").style=h.getItemStyle(),g.ensureState("progress").style=v.getItemStyle(),To(g);var m=Ae(g);d.get("tooltip")?(m.dataIndex=u.value,m.dataModel=i):m.dataIndex=m.dataModel=null,o._tickSymbols.push(g)})},e.prototype._renderAxisLabel=function(t,n,a,i){var o=this,s=a.getLabelModel();if(s.get("show")){var l=i.getData(),u=a.getViewLabels();this._tickLabels=[],T(u,function(c){var d=c.tickValue,f=l.getItemModel(d),h=f.getModel("label"),v=f.getModel(["emphasis","label"]),p=f.getModel(["progress","label"]),g=a.dataToCoord(c.tickValue),m=new Ie({x:g,y:0,rotation:t.labelRotation-t.rotation,onclick:Z(o._changeTimeline,o,d),silent:!1,style:Ue(h,{text:c.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});m.ensureState("emphasis").style=Ue(v),m.ensureState("progress").style=Ue(p),n.add(m),To(m),og(m).dataIndex=d,o._tickLabels.push(m)})}},e.prototype._renderControl=function(t,n,a,i){var o=t.controlSize,s=t.rotation,l=i.getModel("controlStyle").getItemStyle(),u=i.getModel(["emphasis","controlStyle"]).getItemStyle(),c=i.getPlayState(),d=i.get("inverse",!0);f(t.nextBtnPosition,"next",Z(this._changeTimeline,this,d?"-":"+")),f(t.prevBtnPosition,"prev",Z(this._changeTimeline,this,d?"+":"-")),f(t.playPosition,c?"stop":"play",Z(this._handlePlayClick,this,!c),!0);function f(h,v,p,g){if(h){var m=ec(it(i.get(["controlStyle",v+"BtnSize"]),o),o),b=[0,-m/2,m,m],S=JL(i,v+"Icon",b,{x:h[0],y:h[1],originX:o/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:p});S.ensureState("emphasis").style=u,n.add(S),To(S)}}},e.prototype._renderCurrentPointer=function(t,n,a,i){var o=i.getData(),s=i.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(d){d.draggable=!0,d.drift=Z(u._handlePointerDrag,u),d.ondragend=Z(u._handlePointerDragend,u),lg(d,u._progressLine,s,a,i,!0)},onUpdate:function(d){lg(d,u._progressLine,s,a,i)}};this._currentPointer=sg(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,n,a){this._clearTimer(),this._pointerChangeTimeline([a.offsetX,a.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,n){var a=this._toAxisCoord(t)[0],i=this._axis,o=Gt(i.getExtent().slice());a>o[1]&&(a=o[1]),a<o[0]&&(a=o[0]),this._currentPointer.x=a,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=a,s.dirty());var l=this._findNearestTick(a),u=this.model;(n||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=t.model;t._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var n=this._mainGroup.getLocalTransform();return Br(t,n,!0)},e.prototype._findNearestTick=function(t){var n=this.model.getData(),a=1/0,i,o=this._axis;return n.each(["value"],function(s,l){var u=o.dataToCoord(s),c=Math.abs(u-t);c<a&&(a=c,i=l)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var n=this.model.getCurrentIndex();t==="+"?t=n+1:t==="-"&&(t=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),n=this._tickSymbols,a=this._tickLabels;if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",i<t);if(a)for(var i=0;i<a.length;i++)a&&a[i]&&a[i].toggleState("progress",og(a[i]).dataIndex<=t)},e.type="timeline.slider",e}(ZL);function QL(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new $A({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new jA({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new Yu}}function KL(r,e){return Zt(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},r.get("padding"))}function JL(r,e,t,n){var a=n.style,i=l0(r.get(["controlStyle",e]),n||{},new He(t[0],t[1],t[2],t[3]));return a&&i.setStyle(a),i}function sg(r,e,t,n,a,i){var o=e.get("color");if(a)a.setColor(o),t.add(a),i&&i.onUpdate(a);else{var s=r.get("symbol");a=mt(s,-1,-1,2,2,o),a.setStyle("strokeNoScale",!0),t.add(a),i&&i.onCreate(a)}var l=e.getItemStyle(["color"]);a.setStyle(l),n=ke({rectHover:!0,z2:100},n,!0);var u=Di(r.get("symbolSize"));n.scaleX=u[0]/2,n.scaleY=u[1]/2;var c=Li(r.get("symbolOffset"),u);c&&(n.x=(n.x||0)+c[0],n.y=(n.y||0)+c[1]);var d=r.get("symbolRotate");return n.rotation=(d||0)*Math.PI/180||0,a.attr(n),a.updateTransform(),a}function lg(r,e,t,n,a,i){if(!r.dragging){var o=a.getModel("checkpointStyle"),s=n.dataToCoord(a.getData().get("value",t));if(i||!o.get("animation",!0))r.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function eP(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,n){var a=t.getComponent("timeline");return a&&e.currentIndex!=null&&(a.setCurrentIndex(e.currentIndex),!a.get("loop",!0)&&a.isIndexMax()&&a.getPlayState()&&(a.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:a.get("replaceMerge",!0)}),ce({currentIndex:a.option.currentIndex},e)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&e.playState!=null&&n.setPlayState(e.playState)})}function tP(r){var e=r&&r.timeline;$(e)||(e=e?[e]:[]),T(e,function(t){t&&rP(t)})}function rP(r){var e=r.type,t={number:"value",time:"time"};if(t[e]&&(r.axisType=t[e],delete r.type),ug(r),vn(r,"controlPosition")){var n=r.controlStyle||(r.controlStyle={});vn(n,"position")||(n.position=r.controlPosition),n.position==="none"&&!vn(n,"show")&&(n.show=!1,delete n.position),delete r.controlPosition}T(r.data||[],function(a){ct(a)&&!$(a)&&(!vn(a,"value")&&vn(a,"name")&&(a.value=a.name),ug(a))})}function ug(r){var e=r.itemStyle||(r.itemStyle={}),t=e.emphasis||(e.emphasis={}),n=r.label||r.label||{},a=n.normal||(n.normal={}),i={normal:1,emphasis:1};T(n,function(o,s){!i[s]&&!vn(a,s)&&(a[s]=o)}),t.label&&!vn(n,"emphasis")&&(n.emphasis=t.label,delete t.label)}function vn(r,e){return r.hasOwnProperty(e)}function nP(r){r.registerComponentModel(pS),r.registerComponentView(qL),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),eP(r),r.registerPreprocessor(tP)}function df(r,e){if(!r)return!1;for(var t=$(r)?r:[r],n=0;n<t.length;n++)if(t[n]&&t[n][e])return!0;return!1}function fo(r){zs(r,"label",["show"])}var ho=je(),xr=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a),this._mergeOption(t,a,!1,!0)},e.prototype.isAnimationEnabled=function(){if(u0.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,n){this._mergeOption(t,n,!1,!1)},e.prototype._mergeOption=function(t,n,a,i){var o=this.mainType;a||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=ho(s)[o];if(!l||!l.data){ho(s)[o]=null;return}u?u._mergeOption(l,n,!0):(i&&fo(l),T(l.data,function(c){c instanceof Array?(fo(c[0]),fo(c[1])):fo(c)}),u=this.createMarkerModelFromSeries(l,this,n),X(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),ho(s)[o]=u},this)},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),o=this.getRawValue(t),s=i.getName(t);return Ct("section",{header:this.name,blocks:[Ct("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,n){var a=cd.prototype.getDataParams.call(this,t,n),i=this.__hostSeries;return i&&(a.seriesId=i.id,a.seriesName=i.name,a.seriesType=i.subType),a},e.getMarkerModelFromSeries=function(t,n){return ho(t)[n]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(dt);rr(xr,cd.prototype);var aP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,n,a){return new e(t,n,a)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(xr);function Ic(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function iP(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function vo(r,e,t,n,a,i){var o=[],s=i0(e,n),l=s?e.getCalculationInfo("stackResultDimension"):n,u=ff(e,l,r),c=e.indicesOfNearest(l,u)[0];o[a]=e.get(t,c),o[i]=e.get(l,c);var d=e.get(n,c),f=YA(e.get(n,c));return f=Math.min(f,20),f>=0&&(o[i]=+o[i].toFixed(f)),[o,d]}var hu={min:he(vo,"min"),max:he(vo,"max"),average:he(vo,"average"),median:he(vo,"median")};function mi(r,e){if(e){var t=r.getData(),n=r.coordinateSystem,a=n&&n.dimensions;if(!iP(e)&&!$(e.coord)&&$(a)){var i=gS(e,t,n,r);if(e=Se(e),e.type&&hu[e.type]&&i.baseAxis&&i.valueAxis){var o=Oe(a,i.baseAxis.dim),s=Oe(a,i.valueAxis.dim),l=hu[e.type](t,i.baseDataDim,i.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!$(a))e.coord=[];else for(var u=e.coord,c=0;c<2;c++)hu[u[c]]&&(u[c]=ff(t,t.mapDimension(a[c]),u[c]));return e}}function gS(r,e,t,n){var a={};return r.valueIndex!=null||r.valueDim!=null?(a.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,a.valueAxis=t.getAxis(oP(n,a.valueDataDim)),a.baseAxis=t.getOtherAxis(a.valueAxis),a.baseDataDim=e.mapDimension(a.baseAxis.dim)):(a.baseAxis=n.getBaseAxis(),a.valueAxis=t.getOtherAxis(a.baseAxis),a.baseDataDim=e.mapDimension(a.baseAxis.dim),a.valueDataDim=e.mapDimension(a.valueAxis.dim)),a}function oP(r,e){var t=r.getData().getDimensionInfo(e);return t&&t.coordDim}function yi(r,e){return r&&r.containData&&e.coord&&!Ic(e)?r.containData(e.coord):!0}function sP(r,e,t){return r&&r.containZone&&e.coord&&t.coord&&!Ic(e)&&!Ic(t)?r.containZone(e.coord,t.coord):!0}function mS(r,e){return r?function(t,n,a,i){var o=i<2?t.coord&&t.coord[i]:t.value;return $o(o,e[i])}:function(t,n,a,i){return $o(t.value,e[i])}}function ff(r,e,t){if(t==="average"){var n=0,a=0;return r.each(e,function(i,o){isNaN(i)||(n+=i,a++)}),n/a}else return t==="median"?r.getMedian(e):r.getDataExtent(e)[t==="max"?1:0]}var vu=je(),hf=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=le()},e.prototype.render=function(t,n,a){var i=this,o=this.markerGroupMap;o.each(function(s){vu(s).keep=!1}),n.eachSeries(function(s){var l=xr.getMarkerModelFromSeries(s,i.type);l&&i.renderSeries(s,l,n,a)}),o.each(function(s){!vu(s).keep&&i.group.remove(s.group)})},e.prototype.markKeep=function(t){vu(t).keep=!0},e.prototype.toggleBlurSeries=function(t,n){var a=this;T(t,function(i){var o=xr.getMarkerModelFromSeries(i,a.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(n?ZA(l):XA(l))})}})},e.type="marker",e}(yt);function cg(r,e,t){var n=e.coordinateSystem;r.each(function(a){var i=r.getItemModel(a),o,s=W(i.get("x"),t.getWidth()),l=W(i.get("y"),t.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(r.getValues(r.dimensions,a));else if(n){var u=r.get(n.dimensions[0],a),c=r.get(n.dimensions[1],a);o=n.dataToPoint([u,c])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),r.setItemLayout(a,o)})}var lP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,n,a){n.eachSeries(function(i){var o=xr.getMarkerModelFromSeries(i,"markPoint");o&&(cg(o.getData(),i,a),this.markerGroupMap.get(i.id).updateLayout())},this)},e.prototype.renderSeries=function(t,n,a,i){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Ls),d=uP(o,t,n);n.setData(d),cg(n.getData(),t,i),d.each(function(f){var h=d.getItemModel(f),v=h.getShallow("symbol"),p=h.getShallow("symbolSize"),g=h.getShallow("symbolRotate"),m=h.getShallow("symbolOffset"),b=h.getShallow("symbolKeepAspect");if(xe(v)||xe(p)||xe(g)||xe(m)){var S=n.getRawValue(f),y=n.getDataParams(f);xe(v)&&(v=v(S,y)),xe(p)&&(p=p(S,y)),xe(g)&&(g=g(S,y)),xe(m)&&(m=m(S,y))}var w=h.getModel("itemStyle").getItemStyle(),_=js(l,"color");w.fill||(w.fill=_),d.setItemVisual(f,{symbol:v,symbolSize:p,symbolRotate:g,symbolOffset:m,symbolKeepAspect:b,style:w})}),c.updateData(d),this.group.add(c.group),d.eachItemGraphicEl(function(f){f.traverse(function(h){Ae(h).dataModel=n})}),this.markKeep(c),c.group.silent=n.get("silent")||t.get("silent")},e.type="markPoint",e}(hf);function uP(r,e,t){var n;r?n=G(r&&r.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return X(X({},l),{name:s,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var a=new It(n,t),i=G(t.get("data"),he(mi,e));r&&(i=Qe(i,he(yi,r)));var o=mS(!!r,n);return a.initData(i,null,o),a}function cP(r){r.registerComponentModel(aP),r.registerComponentView(lP),r.registerPreprocessor(function(e){df(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var dP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,n,a){return new e(t,n,a)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(xr),po=je(),fP=function(r,e,t,n){var a=r.getData(),i;if($(n))i=n;else{var o=n.type;if(o==="min"||o==="max"||o==="average"||o==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=e.getAxis(n.yAxis!=null?"y":"x"),l=Tt(n.yAxis,n.xAxis);else{var u=gS(n,a,e,r);s=u.valueAxis;var c=qA(a,u.valueDataDim);l=ff(a,c,o)}var d=s.dim==="x"?0:1,f=1-d,h=Se(n),v={coord:[]};h.type=null,h.coord=[],h.coord[f]=-1/0,v.coord[f]=1/0;var p=t.get("precision");p>=0&&er(l)&&(l=+l.toFixed(Math.min(p,20))),h.coord[d]=v.coord[d]=l,i=[h,v,{type:o,valueIndex:n.valueIndex,value:l}]}else i=[]}var g=[mi(r,i[0]),mi(r,i[1]),X({},i[2])];return g[2].type=g[2].type||null,ke(g[2],g[0]),ke(g[2],g[1]),g};function ss(r){return!isNaN(r)&&!isFinite(r)}function dg(r,e,t,n){var a=1-r,i=n.dimensions[r];return ss(e[a])&&ss(t[a])&&e[r]===t[r]&&n.getAxis(i).containData(e[r])}function hP(r,e){if(r.type==="cartesian2d"){var t=e[0].coord,n=e[1].coord;if(t&&n&&(dg(1,t,n,r)||dg(0,t,n,r)))return!0}return yi(r,e[0])&&yi(r,e[1])}function pu(r,e,t,n,a){var i=n.coordinateSystem,o=r.getItemModel(e),s,l=W(o.get("x"),a.getWidth()),u=W(o.get("y"),a.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(r.getValues(r.dimensions,e));else{var c=i.dimensions,d=r.get(c[0],e),f=r.get(c[1],e);s=i.dataToPoint([d,f])}if(Us(i,"cartesian2d")){var h=i.getAxis("x"),v=i.getAxis("y"),c=i.dimensions;ss(r.get(c[0],e))?s[0]=h.toGlobalCoord(h.getExtent()[t?0:1]):ss(r.get(c[1],e))&&(s[1]=v.toGlobalCoord(v.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}r.setItemLayout(e,s)}var vP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,n,a){n.eachSeries(function(i){var o=xr.getMarkerModelFromSeries(i,"markLine");if(o){var s=o.getData(),l=po(o).from,u=po(o).to;l.each(function(c){pu(l,c,!0,i,a),pu(u,c,!1,i,a)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,n,a,i){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Bd);this.group.add(c.group);var d=pP(o,t,n),f=d.from,h=d.to,v=d.line;po(n).from=f,po(n).to=h,n.setData(v);var p=n.get("symbol"),g=n.get("symbolSize"),m=n.get("symbolRotate"),b=n.get("symbolOffset");$(p)||(p=[p,p]),$(g)||(g=[g,g]),$(m)||(m=[m,m]),$(b)||(b=[b,b]),d.from.each(function(y){S(f,y,!0),S(h,y,!1)}),v.each(function(y){var w=v.getItemModel(y).getModel("lineStyle").getLineStyle();v.setItemLayout(y,[f.getItemLayout(y),h.getItemLayout(y)]),w.stroke==null&&(w.stroke=f.getItemVisual(y,"style").fill),v.setItemVisual(y,{fromSymbolKeepAspect:f.getItemVisual(y,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(y,"symbolOffset"),fromSymbolRotate:f.getItemVisual(y,"symbolRotate"),fromSymbolSize:f.getItemVisual(y,"symbolSize"),fromSymbol:f.getItemVisual(y,"symbol"),toSymbolKeepAspect:h.getItemVisual(y,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(y,"symbolOffset"),toSymbolRotate:h.getItemVisual(y,"symbolRotate"),toSymbolSize:h.getItemVisual(y,"symbolSize"),toSymbol:h.getItemVisual(y,"symbol"),style:w})}),c.updateData(v),d.line.eachItemGraphicEl(function(y){Ae(y).dataModel=n,y.traverse(function(w){Ae(w).dataModel=n})});function S(y,w,_){var x=y.getItemModel(w);pu(y,w,_,t,i);var A=x.getModel("itemStyle").getItemStyle();A.fill==null&&(A.fill=js(l,"color")),y.setItemVisual(w,{symbolKeepAspect:x.get("symbolKeepAspect"),symbolOffset:it(x.get("symbolOffset",!0),b[_?0:1]),symbolRotate:it(x.get("symbolRotate",!0),m[_?0:1]),symbolSize:it(x.get("symbolSize"),g[_?0:1]),symbol:it(x.get("symbol",!0),p[_?0:1]),style:A})}this.markKeep(c),c.group.silent=n.get("silent")||t.get("silent")},e.type="markLine",e}(hf);function pP(r,e,t){var n;r?n=G(r&&r.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return X(X({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var a=new It(n,t),i=new It(n,t),o=new It([],t),s=G(t.get("data"),he(fP,e,r,t));r&&(s=Qe(s,he(hP,r)));var l=mS(!!r,n);return a.initData(G(s,function(u){return u[0]}),null,l),i.initData(G(s,function(u){return u[1]}),null,l),o.initData(G(s,function(u){return u[2]})),o.hasItemOption=!0,{from:a,to:i,line:o}}function gP(r){r.registerComponentModel(dP),r.registerComponentView(vP),r.registerPreprocessor(function(e){df(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var mP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,n,a){return new e(t,n,a)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(xr),go=je(),yP=function(r,e,t,n){var a=n[0],i=n[1];if(!(!a||!i)){var o=mi(r,a),s=mi(r,i),l=o.coord,u=s.coord;l[0]=Tt(l[0],-1/0),l[1]=Tt(l[1],-1/0),u[0]=Tt(u[0],1/0),u[1]=Tt(u[1],1/0);var c=td([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function ls(r){return!isNaN(r)&&!isFinite(r)}function fg(r,e,t,n){var a=1-r;return ls(e[a])&&ls(t[a])}function bP(r,e){var t=e.coord[0],n=e.coord[1],a={coord:t,x:e.x0,y:e.y0},i={coord:n,x:e.x1,y:e.y1};return Us(r,"cartesian2d")?t&&n&&(fg(1,t,n)||fg(0,t,n))?!0:sP(r,a,i):yi(r,a)||yi(r,i)}function hg(r,e,t,n,a){var i=n.coordinateSystem,o=r.getItemModel(e),s,l=W(o.get(t[0]),a.getWidth()),u=W(o.get(t[1]),a.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition){var c=r.getValues(["x0","y0"],e),d=r.getValues(["x1","y1"],e),f=i.clampData(c),h=i.clampData(d),v=[];t[0]==="x0"?v[0]=f[0]>h[0]?d[0]:c[0]:v[0]=f[0]>h[0]?c[0]:d[0],t[1]==="y0"?v[1]=f[1]>h[1]?d[1]:c[1]:v[1]=f[1]>h[1]?c[1]:d[1],s=n.getMarkerPosition(v,t,!0)}else{var p=r.get(t[0],e),g=r.get(t[1],e),m=[p,g];i.clampData&&i.clampData(m,m),s=i.dataToPoint(m,!0)}if(Us(i,"cartesian2d")){var b=i.getAxis("x"),S=i.getAxis("y"),p=r.get(t[0],e),g=r.get(t[1],e);ls(p)?s[0]=b.toGlobalCoord(b.getExtent()[t[0]==="x0"?0:1]):ls(g)&&(s[1]=S.toGlobalCoord(S.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var vg=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],SP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,n,a){n.eachSeries(function(i){var o=xr.getMarkerModelFromSeries(i,"markArea");if(o){var s=o.getData();s.each(function(l){var u=G(vg,function(d){return hg(s,l,d,i,a)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},e.prototype.renderSeries=function(t,n,a,i){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new ae});this.group.add(c.group),this.markKeep(c);var d=_P(o,t,n);n.setData(d),d.each(function(f){var h=G(vg,function(A){return hg(d,f,A,t,i)}),v=o.getAxis("x").scale,p=o.getAxis("y").scale,g=v.getExtent(),m=p.getExtent(),b=[v.parse(d.get("x0",f)),v.parse(d.get("x1",f))],S=[p.parse(d.get("y0",f)),p.parse(d.get("y1",f))];Gt(b),Gt(S);var y=!(g[0]>b[1]||g[1]<b[0]||m[0]>S[1]||m[1]<S[0]),w=!y;d.setItemLayout(f,{points:h,allClipped:w});var _=d.getItemModel(f).getModel("itemStyle").getItemStyle(),x=js(l,"color");_.fill||(_.fill=x,de(_.fill)&&(_.fill=Wo(_.fill,.4))),_.stroke||(_.stroke=x),d.setItemVisual(f,"style",_)}),d.diff(go(c).data).add(function(f){var h=d.getItemLayout(f);if(!h.allClipped){var v=new Ut({shape:{points:h.points}});d.setItemGraphicEl(f,v),c.group.add(v)}}).update(function(f,h){var v=go(c).data.getItemGraphicEl(h),p=d.getItemLayout(f);p.allClipped?v&&c.group.remove(v):(v?Ne(v,{shape:{points:p.points}},n,f):v=new Ut({shape:{points:p.points}}),d.setItemGraphicEl(f,v),c.group.add(v))}).remove(function(f){var h=go(c).data.getItemGraphicEl(f);c.group.remove(h)}).execute(),d.eachItemGraphicEl(function(f,h){var v=d.getItemModel(h),p=d.getItemVisual(h,"style");f.useStyle(d.getItemVisual(h,"style")),jt(f,At(v),{labelFetcher:n,labelDataIndex:h,defaultText:d.getName(h)||"",inheritColor:de(p.fill)?Wo(p.fill,1):"#000"}),Lt(f,v),Ye(f,null,null,v.get(["emphasis","disabled"])),Ae(f).dataModel=n}),go(c).data=d,c.group.silent=n.get("silent")||t.get("silent")},e.type="markArea",e}(hf);function _P(r,e,t){var n,a,i=["x0","y0","x1","y1"];if(r){var o=G(r&&r.dimensions,function(u){var c=e.getData(),d=c.getDimensionInfo(c.mapDimension(u))||{};return X(X({},d),{name:u,ordinalMeta:null})});a=G(i,function(u,c){return{name:u,type:o[c%2].type}}),n=new It(a,t)}else a=[{name:"value",type:"float"}],n=new It(a,t);var s=G(t.get("data"),he(yP,e,r,t));r&&(s=Qe(s,he(bP,r)));var l=r?function(u,c,d,f){var h=u.coord[Math.floor(f/2)][f%2];return $o(h,a[f])}:function(u,c,d,f){return $o(u.value,a[f])};return n.initData(s,null,l),n.hasItemOption=!0,n}function wP(r){r.registerComponentModel(mP),r.registerComponentView(SP),r.registerPreprocessor(function(e){df(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var xP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=Sa(gi.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(gi),vf=je();function AP(r,e,t){vf(r).coordSysRecordMap.each(function(n){var a=n.dataZoomInfoMap.get(e.uid);a&&(a.getRange=t)})}function CP(r,e){for(var t=vf(r).coordSysRecordMap,n=t.keys(),a=0;a<n.length;a++){var i=n[a],o=t.get(i),s=o.dataZoomInfoMap;if(s){var l=e.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||yS(t,o))}}}function yS(r,e){if(e){r.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function DP(r,e){var t={model:e,containsPoint:he(EP,e),dispatchAction:he(TP,r),dataZoomInfoMap:null,controller:null},n=t.controller=new Vi(r.getZr());return T(["pan","zoom","scrollMove"],function(a){n.on(a,function(i){var o=[];t.dataZoomInfoMap.each(function(s){if(i.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[a],u=l&&l(s.dzReferCoordSysInfo,t.model.mainType,t.controller,i);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&t.dispatchAction(o)})}),t}function TP(r,e){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function EP(r,e,t,n){return r.coordinateSystem.containPoint([t,n])}function MP(r){var e,t="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0;return r.each(function(i){var o=i.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;n[t+s]>n[t+e]&&(e=s),a=a&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}}}function IP(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(e,t){var n=vf(t),a=n.coordSysRecordMap||(n.coordSysRecordMap=le());a.each(function(i){i.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var o=lS(i);T(o.infoList,function(s){var l=s.model.uid,u=a.get(l)||a.set(l,DP(t,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=le());c.set(i.uid,{dzReferCoordSysInfo:s,model:i,getRange:null})})}),a.each(function(i){var o=i.controller,s,l=i.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){yS(a,i);return}var c=MP(l);o.enable(c.controlType,c.opt),o.setPointerChecker(i.containsPoint),Fs(i,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var RP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,n,a){if(r.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),AP(a,t,{pan:Z(gu.pan,this),zoom:Z(gu.zoom,this),scrollMove:Z(gu.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){CP(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(of),gu={zoom:function(r,e,t,n){var a=this.range,i=a.slice(),o=r.axisModels[0];if(o){var s=mu[e](null,[n.originX,n.originY],o,t,r),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],u=Math.max(1/n.scale,0);i[0]=(i[0]-l)*u+l,i[1]=(i[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Rn(0,i,[0,100],0,c.minSpan,c.maxSpan),this.range=i,a[0]!==i[0]||a[1]!==i[1])return i}},pan:pg(function(r,e,t,n,a,i){var o=mu[n]([i.oldX,i.oldY],[i.newX,i.newY],e,a,t);return o.signal*(r[1]-r[0])*o.pixel/o.pixelLength}),scrollMove:pg(function(r,e,t,n,a,i){var o=mu[n]([0,0],[i.scrollDelta,i.scrollDelta],e,a,t);return o.signal*(r[1]-r[0])*i.scrollDelta})};function pg(r){return function(e,t,n,a){var i=this.range,o=i.slice(),s=e.axisModels[0];if(s){var l=r(o,s,e,t,n,a);if(Rn(l,o,[0,100],"all"),this.range=o,i[0]!==o[0]||i[1]!==o[1])return o}}}var mu={grid:function(r,e,t,n,a){var i=t.axis,o={},s=a.model.coordinateSystem.getRect();return r=r||[0,0],i.dim==="x"?(o.pixel=e[0]-r[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=i.inverse?1:-1):(o.pixel=e[1]-r[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=i.inverse?-1:1),o},polar:function(r,e,t,n,a){var i=t.axis,o={},s=a.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return r=r?s.pointToCoord(r):[0,0],e=s.pointToCoord(e),t.mainType==="radiusAxis"?(o.pixel=e[0]-r[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=i.inverse?1:-1):(o.pixel=e[1]-r[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=i.inverse?-1:1),o},singleAxis:function(r,e,t,n,a){var i=t.axis,o=a.model.coordinateSystem.getRect(),s={};return r=r||[0,0],i.orient==="horizontal"?(s.pixel=e[0]-r[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=i.inverse?1:-1):(s.pixel=e[1]-r[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=i.inverse?-1:1),s}};function bS(r){sf(r),r.registerComponentModel(xP),r.registerComponentView(RP),IP(r)}var LP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Sa(gi.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(gi),Pa=Ge,gg=7,PP=1,yu=30,kP=7,ka="horizontal",mg="vertical",OP=5,NP=["line","bar","candlestick","scatter"],VP={easing:"cubicOut",duration:100,delay:0},BP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,n){this.api=n,this._onBrush=Z(this._onBrush,this),this._onBrushEnd=Z(this._onBrushEnd,this)},e.prototype.render=function(t,n,a,i){if(r.prototype.render.apply(this,arguments),Fs(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){qy(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new ae;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(n),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,n=this.api,a=t.get("brushSelect"),i=a?kP:0,o=this._findCoordRect(),s={width:n.getWidth(),height:n.getHeight()},l=this._orient===ka?{right:s.width-o.x-o.width,top:s.height-yu-gg-i,width:o.width,height:yu}:{right:gg,top:o.y,width:yu,height:o.height},u=o0(t.option);T(["right","top","width","height"],function(d){u[d]==="ph"&&(u[d]=l[d])});var c=Zt(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===mg&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,n=this._location,a=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(a===ka&&!o?{scaleY:l?1:-1,scaleX:1}:a===ka&&o?{scaleY:l?1:-1,scaleX:-1}:a===mg&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=t.getBoundingRect([s]);t.x=n.x-u.x,t.y=n.y-u.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,n=this._size,a=this._displayables.sliderGroup,i=t.get("brushSelect");a.add(new Pa({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new Pa({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:Z(this._onClickPanel,this)}),s=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),a.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var n=this._size,a=this._shadowSize||[],i=t.series,o=i.getRawData(),s=i.getShadowDim&&i.getShadowDim(),l=s&&o.getDimensionInfo(s)?i.getShadowDim():t.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||n[0]!==a[0]||n[1]!==a[1]){var d=o.getDataExtent(l),f=(d[1]-d[0])*.3;d=[d[0]-f,d[1]+f];var h=[0,n[1]],v=[0,n[0]],p=[[n[0],0],[0,0]],g=[],m=v[1]/(o.count()-1),b=0,S=Math.round(o.count()/n[0]),y;o.each([l],function(C,D){if(S>0&&D%S){b+=m;return}var E=C==null||isNaN(C)||C==="",M=E?0:ye(C,d,h,!0);E&&!y&&D?(p.push([p[p.length-1][0],0]),g.push([g[g.length-1][0],0])):!E&&y&&(p.push([b,0]),g.push([b,0])),p.push([b,M]),g.push([b,M]),b+=m,y=E}),u=this._shadowPolygonPts=p,c=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=l,this._shadowSize=[n[0],n[1]];var w=this.dataZoomModel;function _(C){var D=w.getModel(C?"selectedDataBackground":"dataBackground"),E=new ae,M=new Ut({shape:{points:u},segmentIgnoreThreshold:1,style:D.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),I=new vr({shape:{points:c},segmentIgnoreThreshold:1,style:D.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return E.add(M),E.add(I),E}for(var x=0;x<3;x++){var A=_(x===1);this._displayables.sliderGroup.add(A),this._displayables.dataShadowSegs.push(A)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,n=t.get("showDataShadow");if(n!==!1){var a,i=this.ecModel;return t.eachTargetAxis(function(o,s){var l=t.getAxisProxy(o,s).getTargetSeriesModels();T(l,function(u){if(!a&&!(n!==!0&&Oe(NP,u.get("type"))<0)){var c=i.getComponent(Pr(o),s).axis,d=zP(o),f,h=u.coordinateSystem;d!=null&&h.getOtherAxis&&(f=h.getOtherAxis(c).inverse),d=u.getData().mapDimension(d),a={thisAxis:c,series:u,thisDim:o,otherDim:d,otherAxisInverse:f}}},this)},this),a}},e.prototype._renderHandle=function(){var t=this.group,n=this._displayables,a=n.handles=[null,null],i=n.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,d=l.get("brushSelect"),f=n.filler=new Pa({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new Pa({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:PP,fill:"rgba(0,0,0,0)"}})),T([0,1],function(S){var y=l.get("handleIcon");!QA[y]&&y.indexOf("path://")<0&&y.indexOf("image://")<0&&(y="path://"+y);var w=mt(y,-1,0,2,2,null,!0);w.attr({cursor:yg(this._orient),draggable:!0,drift:Z(this._onDragMove,this,S),ondragend:Z(this._onDragEnd,this),onmouseover:Z(this._showDataInfo,this,!0),onmouseout:Z(this._showDataInfo,this,!1),z2:5});var _=w.getBoundingRect(),x=l.get("handleSize");this._handleHeight=W(x,this._size[1]),this._handleWidth=_.width/_.height*this._handleHeight,w.setStyle(l.getModel("handleStyle").getItemStyle()),w.style.strokeNoScale=!0,w.rectHover=!0,w.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),To(w);var A=l.get("handleColor");A!=null&&(w.style.fill=A),o.add(a[S]=w);var C=l.getModel("textStyle"),D=l.get("handleLabel")||{},E=D.show||!1;t.add(i[S]=new Ie({silent:!0,invisible:!E,style:Ue(C,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:C.getTextColor(),font:C.getFont()}),z2:10}))},this);var h=f;if(d){var v=W(l.get("moveHandleSize"),s[1]),p=n.moveHandle=new Ge({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:v}}),g=v*.8,m=n.moveHandleIcon=mt(l.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);m.silent=!0,m.y=s[1]+v/2-.5,p.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var b=Math.min(s[1]/2,Math.max(v,10));h=n.moveZone=new Ge({invisible:!0,shape:{y:s[1]-b,height:v+b}}),h.on("mouseover",function(){u.enterEmphasis(p)}).on("mouseout",function(){u.leaveEmphasis(p)}),o.add(p),o.add(m),o.add(h)}h.attr({draggable:!0,cursor:yg(this._orient),drift:Z(this._onDragMove,this,"all"),ondragstart:Z(this._showDataInfo,this,!0),ondragend:Z(this._onDragEnd,this),onmouseover:Z(this._showDataInfo,this,!0),onmouseout:Z(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[ye(t[0],[0,100],n,!0),ye(t[1],[0,100],n,!0)]},e.prototype._updateInterval=function(t,n){var a=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),s=a.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Rn(n,i,o,a.get("zoomLock")?"all":t,s.minSpan!=null?ye(s.minSpan,l,o,!0):null,s.maxSpan!=null?ye(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=Gt([ye(i[0],o,l,!0),ye(i[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},e.prototype._updateView=function(t){var n=this._displayables,a=this._handleEnds,i=Gt(a.slice()),o=this._size;T([0,1],function(h){var v=n.handles[h],p=this._handleHeight;v.attr({scaleX:p/2,scaleY:p/2,x:a[h]+(h?-1:1),y:o[1]/2-p/2})},this),n.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var s={x:i[0],width:i[1]-i[0]};n.moveHandle&&(n.moveHandle.setShape(s),n.moveZone.setShape(s),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=n.dataShadowSegs,u=[0,i[0],i[1],o[0]],c=0;c<l.length;c++){var d=l[c],f=d.getClipPath();f||(f=new Ge,d.setClipPath(f)),f.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var n=this.dataZoomModel,a=this._displayables,i=a.handleLabels,o=this._orient,s=["",""];if(n.get("showDetail")){var l=n.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,d=t?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],u),this._formatLabel(d[1],u)]}}var f=Gt(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(v){var p=ra(a.handles[v].parent,this.group),g=od(v===0?"right":"left",p),m=this._handleWidth/2+OP,b=Br([f[v]+(v===0?-m:m),this._size[1]/2],p);i[v].setStyle({x:b[0],y:b[1],verticalAlign:o===ka?"middle":g,align:o===ka?g:"center",text:s[v]})}},e.prototype._formatLabel=function(t,n){var a=this.dataZoomModel,i=a.get("labelFormatter"),o=a.get("labelPrecision");(o==null||o==="auto")&&(o=n.getPixelPrecision());var s=t==null||isNaN(t)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return xe(i)?i(t,s):de(i)?i.replace("{value}",s):s},e.prototype._showDataInfo=function(t){var n=this.dataZoomModel.get("handleLabel")||{},a=n.show||!1,i=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=i.get("show")||!1,s=t||this._dragging?o:a,l=this._displayables,u=l.handleLabels;u[0].attr("invisible",!s),u[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(t,n,a,i){this._dragging=!0,_n(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Br([n,a],o,!0),l=this._updateInterval(t,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var n=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(a[0]<0||a[0]>n[0]||a[1]<0||a[1]>n[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,s=this._updateInterval("all",a[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var n=t.offsetX,a=t.offsetY;this._brushStart=new yr(n,a),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var a=n.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(a.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Gt([ye(a.x,o,s,!0),ye(a.x+a.width,o,s,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(_n(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,n){var a=this._displayables,i=this.dataZoomModel,o=a.brushRect;o||(o=a.brushRect=new Pa({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(t,n),c=l.transformCoordToLocal(s.x,s.y),d=this._size;u[0]=Math.max(Math.min(d[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:d[1]})},e.prototype._dispatchZoomAction=function(t){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?VP:null,start:n[0],end:n[1]})},e.prototype._findCoordRect=function(){var t,n=lS(this.dataZoomModel).infoList;if(!t&&n.length){var a=n[0].model.coordinateSystem;t=a.getRect&&a.getRect()}if(!t){var i=this.api.getWidth(),o=this.api.getHeight();t={x:i*.2,y:o*.2,width:i*.6,height:o*.6}}return t},e.type="dataZoom.slider",e}(of);function zP(r){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[r]}function yg(r){return r==="vertical"?"ns-resize":"ew-resize"}function SS(r){r.registerComponentModel(LP),r.registerComponentView(BP),sf(r)}function HP(r){se(bS),se(SS)}var _S={get:function(r,e,t){var n=Se((GP[r]||{})[e]);return t&&$(n)?n[n.length-1]:n}},GP={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},bg=Ke.mapVisual,FP=Ke.eachVisual,WP=$,Sg=T,UP=Gt,jP=ye,us=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a)},e.prototype.optionUpdated=function(t,n){var a=this.option;!n&&hS(a,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var n=this.stateList;t=Z(t,this),this.controllerVisuals=Ec(this.option.controller,n,t),this.targetVisuals=Ec(this.option.target,n,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,n=[];return t==null||t==="all"?this.ecModel.eachSeries(function(a,i){n.push(i)}):n=gt(t),n},e.prototype.eachTargetSeries=function(t,n){T(this.getTargetSeriesIndices(),function(a){var i=this.ecModel.getSeriesByIndex(a);i&&t.call(n,i)},this)},e.prototype.isTargetSeries=function(t){var n=!1;return this.eachTargetSeries(function(a){a===t&&(n=!0)}),n},e.prototype.formatValueText=function(t,n,a){var i=this.option,o=i.precision,s=this.dataBound,l=i.formatter,u;a=a||["<",">"],$(t)&&(t=t.slice(),u=!0);var c=n?t:u?[d(t[0]),d(t[1])]:d(t);if(de(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(xe(l))return u?l(t[0],t[1]):l(t);if(u)return t[0]===s[0]?a[0]+" "+c[1]:t[1]===s[1]?a[1]+" "+c[0]:c[0]+" - "+c[1];return c;function d(f){return f===s[0]?"min":f===s[1]?"max":(+f).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,n=UP([t.min,t.max]);this._dataExtent=n},e.prototype.getDataDimensionIndex=function(t){var n=this.option.dimension;if(n!=null)return t.getDimensionIndex(n);for(var a=t.dimensions,i=a.length-1;i>=0;i--){var o=a[i],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,n=this.option,a={inRange:n.inRange,outOfRange:n.outOfRange},i=n.target||(n.target={}),o=n.controller||(n.controller={});ke(i,a),ke(o,a);var s=this.isCategory();l.call(this,i),l.call(this,o),u.call(this,i,"inRange","outOfRange"),c.call(this,o);function l(d){WP(n.color)&&!d.inRange&&(d.inRange={color:n.color.slice().reverse()}),d.inRange=d.inRange||{color:t.get("gradientColor")}}function u(d,f,h){var v=d[f],p=d[h];v&&!p&&(p=d[h]={},Sg(v,function(g,m){if(Ke.isValidType(m)){var b=_S.get(m,"inactive",s);b!=null&&(p[m]=b,m==="color"&&!p.hasOwnProperty("opacity")&&!p.hasOwnProperty("colorAlpha")&&(p.opacity=[0,0]))}}))}function c(d){var f=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,h=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,v=this.get("inactiveColor"),p=this.getItemSymbol(),g=p||"roundRect";Sg(this.stateList,function(m){var b=this.itemSize,S=d[m];S||(S=d[m]={color:s?v:[v]}),S.symbol==null&&(S.symbol=f&&Se(f)||(s?g:[g])),S.symbolSize==null&&(S.symbolSize=h&&Se(h)||(s?b[0]:[b[0],b[0]])),S.symbol=bg(S.symbol,function(_){return _==="none"?g:_});var y=S.symbolSize;if(y!=null){var w=-1/0;FP(y,function(_){_>w&&(w=_)}),S.symbolSize=bg(y,function(_){return jP(_,[0,w],[0,b[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(dt),_g=[20,140],$P=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,n){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(a){a.mappingMethod="linear",a.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=_g[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=_g[1])},e.prototype._resetRange=function(){var t=this.getExtent(),n=this.option.range;!n||n.auto?(t.auto=1,this.option.range=t):$(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],t[0]),n[1]=Math.min(n[1],t[1]))},e.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),T(this.stateList,function(t){var n=this.option.controller[t].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),n=Gt((this.get("range")||[]).slice());return n[0]>t[1]&&(n[0]=t[1]),n[1]>t[1]&&(n[1]=t[1]),n[0]<t[0]&&(n[0]=t[0]),n[1]<t[0]&&(n[1]=t[0]),n},e.prototype.getValueState=function(t){var n=this.option.range,a=this.getExtent();return(n[0]<=a[0]||n[0]<=t)&&(n[1]>=a[1]||t<=n[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var n=[];return this.eachTargetSeries(function(a){var i=[],o=a.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&i.push(l)},this),n.push({seriesId:a.id,dataIndex:i})},this),n},e.prototype.getVisualMeta=function(t){var n=wg(this,"outOfRange",this.getExtent()),a=wg(this,"inRange",this.option.range.slice()),i=[];function o(h,v){i.push({value:h,color:t(h,v)})}for(var s=0,l=0,u=a.length,c=n.length;l<c&&(!a.length||n[l]<=a[0]);l++)n[l]<a[s]&&o(n[l],"outOfRange");for(var d=1;s<u;s++,d=0)d&&i.length&&o(a[s],"outOfRange"),o(a[s],"inRange");for(var d=1;l<c;l++)(!a.length||a[a.length-1]<n[l])&&(d&&(i.length&&o(i[i.length-1].value,"outOfRange"),d=0),o(n[l],"outOfRange"));var f=i.length;return{stops:i,outerColors:[f?i[0].color:"transparent",f?i[f-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Sa(us.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(us);function wg(r,e,t){if(t[0]===t[1])return t.slice();for(var n=200,a=(t[1]-t[0])/n,i=t[0],o=[],s=0;s<=n&&i<t[1];s++)o.push(i),i+=a;return o.push(t[1]),o}var wS=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,n){this.ecModel=t,this.api=n},e.prototype.render=function(t,n,a,i){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,n,a,i)},e.prototype.renderBackground=function(t){var n=this.visualMapModel,a=KA(n.get("padding")||0),i=t.getBoundingRect();t.add(new Ge({z2:-1,silent:!0,shape:{x:i.x-a[3],y:i.y-a[0],width:i.width+a[3]+a[1],height:i.height+a[0]+a[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,n,a){a=a||{};var i=a.forceState,o=this.visualMapModel,s={};if(n==="color"){var l=o.get("contentColor");s.color=l}function u(h){return s[h]}function c(h,v){s[h]=v}var d=o.controllerVisuals[i||o.getValueState(t)],f=Ke.prepareVisualTypes(d);return T(f,function(h){var v=d[h];a.convertOpacityToAlpha&&h==="opacity"&&(h="colorAlpha",v=d.__alphaForOpacity),Ke.dependsOn(h,n)&&v&&v.applyVisual(t,u,c)}),s[n]},e.prototype.positionGroup=function(t){var n=this.visualMapModel,a=this.api;nd(t,n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},e.prototype.doRender=function(t,n,a,i){},e.type="visualMap",e}(yt),xg=[["left","right","width"],["top","bottom","height"]];function xS(r,e,t){var n=r.option,a=n.align;if(a!=null&&a!=="auto")return a;for(var i={width:e.getWidth(),height:e.getHeight()},o=n.orient==="horizontal"?1:0,s=xg[o],l=[0,null,10],u={},c=0;c<3;c++)u[xg[1-o][c]]=l[c],u[s[c]]=c===2?t[0]:n[s[c]];var d=[["x","width",3],["y","height",0]][o],f=Zt(u,i,n.padding);return s[(f.margin[d[2]]||0)+f[d[0]]+f[d[1]]*.5<i[d[1]]*.5?0:1]}function Po(r,e){return T(r||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),r}var ir=ye,YP=T,Ag=Math.min,bu=Math.max,ZP=12,XP=6,qP=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,n){r.prototype.init.call(this,t,n),this._hoverLinkFromSeriesMouseOver=Z(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Z(this._hideIndicator,this)},e.prototype.doRender=function(t,n,a,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,n=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(n);var a=t.get("text");this._renderEndsText(n,a,0),this._renderEndsText(n,a,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},e.prototype._renderEndsText=function(t,n,a){if(n){var i=n[1-a];i=i!=null?i+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,a===0?-s:l[1]+s],u),d=this._applyTransform(a===0?"bottom":"top",u),f=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new Ie({style:Ue(h,{x:c[0],y:c[1],verticalAlign:f==="horizontal"?"middle":d,align:f==="horizontal"?d:"center",text:i})}))}},e.prototype._renderBar=function(t){var n=this.visualMapModel,a=this._shapes,i=n.itemSize,o=this._orient,s=this._useHandle,l=xS(n,this.api,i),u=a.mainGroup=this._createBarGroup(l),c=new ae;u.add(c),c.add(a.outOfRange=Cg()),c.add(a.inRange=Cg(null,s?Tg(this._orient):null,Z(this._dragHandle,this,"all",!1),Z(this._dragHandle,this,"all",!0))),c.setClipPath(new Ge({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var d=n.textStyleModel.getTextRect("国"),f=bu(d.width,d.height);s&&(a.handleThumbs=[],a.handleLabels=[],a.handleLabelPoints=[],this._createHandle(n,u,0,i,f,o),this._createHandle(n,u,1,i,f,o)),this._createIndicator(n,u,i,f,o),t.add(u)},e.prototype._createHandle=function(t,n,a,i,o,s){var l=Z(this._dragHandle,this,a,!1),u=Z(this._dragHandle,this,a,!0),c=ec(t.get("handleSize"),i[0]),d=mt(t.get("handleIcon"),-c/2,-c/2,c,c,null,!0),f=Tg(this._orient);d.attr({cursor:f,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){_n(m.event)}}),d.x=i[0]/2,d.useStyle(t.getModel("handleStyle").getItemStyle()),d.setStyle({strokeNoScale:!0,strokeFirst:!0}),d.style.lineWidth*=2,d.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Va(d,!0),n.add(d);var h=this.visualMapModel.textStyleModel,v=new Ie({cursor:f,draggable:!0,drift:l,onmousemove:function(m){_n(m.event)},ondragend:u,style:Ue(h,{x:0,y:0,text:""})});v.ensureState("blur").style={opacity:.1},v.stateTransition={duration:200},this.group.add(v);var p=[c,0],g=this._shapes;g.handleThumbs[a]=d,g.handleLabelPoints[a]=p,g.handleLabels[a]=v},e.prototype._createIndicator=function(t,n,a,i,o){var s=ec(t.get("indicatorSize"),a[0]),l=mt(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:a[0]/2});var u=t.getModel("indicatorStyle").getItemStyle();if(l instanceof hr){var c=l.style;l.useStyle(X({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var d=this.visualMapModel.textStyleModel,f=new Ie({silent:!0,invisible:!0,style:Ue(d,{x:0,y:0,text:""})});this.group.add(f);var h=[(o==="horizontal"?i/2:XP)+a[0]/2,0],v=this._shapes;v.indicator=l,v.indicatorLabel=f,v.indicatorLabelPoint=h,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,n,a,i){if(this._useHandle){if(this._dragging=!n,!n){var o=this._applyTransform([a,i],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():Dg(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,n=this._dataInterval=t.getSelected(),a=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[ir(n[0],a,i,!0),ir(n[1],a,i,!0)]},e.prototype._updateInterval=function(t,n){n=n||0;var a=this.visualMapModel,i=this._handleEnds,o=[0,a.itemSize[1]];Rn(n,i,o,t,0);var s=a.getExtent();this._dataInterval=[ir(i[0],o,s,!0),ir(i[1],o,s,!0)]},e.prototype._updateView=function(t){var n=this.visualMapModel,a=n.getExtent(),i=this._shapes,o=[0,n.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,a,s,"inRange"),u=this._createBarVisual(a,a,o,"outOfRange");i.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),i.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(t,n,a,i){var o={forceState:i,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],u=this._createBarPoints(a,l);return{barColor:new Vs(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(t,n){var a=100,i=[],o=(t[1]-t[0])/a;i.push({color:this.getControllerVisual(t[0],"color",n),offset:0});for(var s=1;s<a;s++){var l=t[0]+o*s;if(l>t[1])break;i.push({color:this.getControllerVisual(l,"color",n),offset:s/a})}return i.push({color:this.getControllerVisual(t[1],"color",n),offset:1}),i},e.prototype._createBarPoints=function(t,n){var a=this.visualMapModel.itemSize;return[[a[0]-n[0],t[0]],[a[0],t[0]],[a[0],t[1]],[a[0]-n[1],t[1]]]},e.prototype._createBarGroup=function(t){var n=this._orient,a=this.visualMapModel.get("inverse");return new ae(n==="horizontal"&&!a?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&a?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!a?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,n){if(this._useHandle){var a=this._shapes,i=this.visualMapModel,o=a.handleThumbs,s=a.handleLabels,l=i.itemSize,u=i.getExtent(),c=this._applyTransform("left",a.mainGroup);YP([0,1],function(d){var f=o[d];f.setStyle("fill",n.handlesColor[d]),f.y=t[d];var h=ir(t[d],[0,l[1]],u,!0),v=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=v/l[0],f.x=l[0]-v/2;var p=Br(a.handleLabelPoints[d],ra(f,this.group));if(this._orient==="horizontal"){var g=c==="left"||c==="top"?(l[0]-v)/2:(l[0]-v)/-2;p[1]+=g}s[d].setStyle({x:p[0],y:p[1],text:i.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",a.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,n,a,i){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,d=c.indicator;if(d){d.attr("invisible",!1);var f={convertOpacityToAlpha:!0},h=this.getControllerVisual(t,"color",f),v=this.getControllerVisual(t,"symbolSize"),p=ir(t,s,u,!0),g=l[0]-v/2,m={x:d.x,y:d.y};d.y=p,d.x=g;var b=Br(c.indicatorLabelPoint,ra(d,this.group)),S=c.indicatorLabel;S.attr("invisible",!1);var y=this._applyTransform("left",c.mainGroup),w=this._orient,_=w==="horizontal";S.setStyle({text:(a||"")+o.formatValueText(n),verticalAlign:_?y:"middle",align:_?"center":y});var x={x:g,y:p,style:{fill:h}},A={style:{x:b[0],y:b[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var C={duration:100,easing:"cubicInOut",additive:!0};d.x=m.x,d.y=m.y,d.animateTo(x,C),S.animateTo(A,C)}else d.attr(x),S.attr(A);this._firstShowIndicator=!1;var D=this._shapes.handleLabels;if(D)for(var E=0;E<D.length;E++)this.api.enterBlur(D[E])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(n){if(t._hovering=!0,!t._dragging){var a=t.visualMapModel.itemSize,i=t._applyTransform([n.offsetX,n.offsetY],t._shapes.mainGroup,!0,!0);i[1]=Ag(bu(0,i[1]),a[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=a[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,n){var a=this.visualMapModel,i=a.itemSize;if(a.option.hoverLink){var o=[0,i[1]],s=a.getExtent();t=Ag(bu(o[0],t),o[1]);var l=QP(a,s,o),u=[t-l,t+l],c=ir(t,o,s,!0),d=[ir(u[0],o,s,!0),ir(u[1],o,s,!0)];u[0]<o[0]&&(d[0]=-1/0),u[1]>o[1]&&(d[1]=1/0),n&&(d[0]===-1/0?this._showIndicator(c,d[1],"< ",l):d[1]===1/0?this._showIndicator(c,d[0],"> ",l):this._showIndicator(c,c,"≈ ",l));var f=this._hoverLinkDataIndices,h=[];(n||Dg(a))&&(h=this._hoverLinkDataIndices=a.findTargetDataIndices(d));var v=JA(f,h);this._dispatchHighDown("downplay",Po(v[0],a)),this._dispatchHighDown("highlight",Po(v[1],a))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var n;if(Wy(t.target,function(l){var u=Ae(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var a=this.ecModel.getSeriesByIndex(n.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(a)){var o=a.getData(n.dataType),s=o.getStore().get(i.getDataDimensionIndex(o),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var a=0;a<n.length;a++)this.api.leaveBlur(n[a])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Po(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,n,a,i){var o=ra(n,i?null:this.group);return $(t)?Br(t,o,a):od(t,o,a)},e.prototype._dispatchHighDown=function(t,n){n&&n.length&&this.api.dispatchAction({type:t,batch:n})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(wS);function Cg(r,e,t,n){return new Ut({shape:{points:r},draggable:!!t,cursor:e,drift:t,onmousemove:function(a){_n(a.event)},ondragend:n})}function QP(r,e,t){var n=ZP/2,a=r.get("hoverLinkDataSize");return a&&(n=ir(a,e,t,!0)/2),n}function Dg(r){var e=r.get("hoverLinkOnHandle");return!!(e??r.get("realtime"))}function Tg(r){return r==="vertical"?"ns-resize":"ew-resize"}var KP={type:"selectDataRange",event:"dataRangeSelected",update:"update"},JP=function(r,e){e.eachComponent({mainType:"visualMap",query:r},function(t){t.setSelected(r.selected)})},ek=[{createOnAllSeries:!0,reset:function(r,e){var t=[];return e.eachComponent("visualMap",function(n){var a=r.pipelineContext;!n.isTargetSeries(r)||a&&a.large||t.push(OL(n.stateList,n.targetVisuals,Z(n.getValueState,n),n.getDataDimensionIndex(r.getData())))}),t}},{createOnAllSeries:!0,reset:function(r,e){var t=r.getData(),n=[];e.eachComponent("visualMap",function(a){if(a.isTargetSeries(r)){var i=a.getVisualMeta(Z(tk,null,r,a))||{stops:[],outerColors:[]},o=a.getDataDimensionIndex(t);o>=0&&(i.dimension=o,n.push(i))}}),r.getData().setVisual("visualMeta",n)}}];function tk(r,e,t,n){for(var a=e.targetVisuals[n],i=Ke.prepareVisualTypes(a),o={color:js(r.getData(),"color")},s=0,l=i.length;s<l;s++){var u=i[s],c=a[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(t,d,f)}return o.color;function d(h){return o[h]}function f(h,v){o[h]=v}}var Eg=T;function rk(r){var e=r&&r.visualMap;$(e)||(e=e?[e]:[]),Eg(e,function(t){if(t){Un(t,"splitList")&&!Un(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var n=t.pieces;n&&$(n)&&Eg(n,function(a){ct(a)&&(Un(a,"start")&&!Un(a,"min")&&(a.min=a.start),Un(a,"end")&&!Un(a,"max")&&(a.max=a.end))})}})}function Un(r,e){return r&&r.hasOwnProperty&&r.hasOwnProperty(e)}var Mg=!1;function AS(r){Mg||(Mg=!0,r.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),r.registerAction(KP,JP),T(ek,function(e){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,e)}),r.registerPreprocessor(rk))}function CS(r){r.registerComponentModel($P),r.registerComponentView(qP),AS(r)}var nk=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,n){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var a=this._mode=this._determineMode();this._pieceList=[],ak[this._mode].call(this,this._pieceList),this._resetSelected(t,n);var i=this.option.categories;this.resetVisual(function(o,s){a==="categories"?(o.mappingMethod="category",o.categories=Se(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=G(this._pieceList,function(l){return l=Se(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,n={},a=Ke.listVisualTypes(),i=this.isCategory();T(t.pieces,function(s){T(a,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),T(n,function(s,l){var u=!1;T(this.stateList,function(c){u=u||o(t,c,l)||o(t.target,c,l)},this),!u&&T(this.stateList,function(c){(t[c]||(t[c]={}))[l]=_S.get(l,c==="inRange"?"active":"inactive",i)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}r.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,n){var a=this.option,i=this._pieceList,o=(n?a:t).selected||{};if(a.selected=o,T(i,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),a.selectedMode==="single"){var s=!1;T(i,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Se(t)},e.prototype.getValueState=function(t){var n=Ke.findPieceIndex(t,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var n=[],a=this._pieceList;return this.eachTargetSeries(function(i){var o=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=Ke.findPieceIndex(l,a);c===t&&o.push(u)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},e.prototype.getRepresentValue=function(t){var n;if(this.isCategory())n=t.value;else if(t.value!=null)n=t.value;else{var a=t.interval||[];n=a[0]===-1/0&&a[1]===1/0?0:(a[0]+a[1])/2}return n},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var n=[],a=["",""],i=this;function o(c,d){var f=i.getRepresentValue({interval:c});d||(d=i.getValueState(f));var h=t(f,d);c[0]===-1/0?a[0]=h:c[1]===1/0?a[1]=h:n.push({value:c[0],color:h},{value:c[1],color:h})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return T(s,function(c){var d=c.interval;d&&(d[0]>u&&o([u,d[0]],"outOfRange"),o(d.slice()),u=d[1])},this),{stops:n,outerColors:a}},e.type="visualMap.piecewise",e.defaultOption=Sa(us.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(us),ak={splitNumber:function(r){var e=this.option,t=Math.min(e.precision,20),n=this.getExtent(),a=e.splitNumber;a=Math.max(parseInt(a,10),1),e.splitNumber=a;for(var i=(n[1]-n[0])/a;+i.toFixed(t)!==i&&t<5;)t++;e.precision=t,i=+i.toFixed(t),e.minOpen&&r.push({interval:[-1/0,n[0]],close:[0,0]});for(var o=0,s=n[0];o<a;s+=i,o++){var l=o===a-1?n[1]:s+i;r.push({interval:[s,l],close:[1,1]})}e.maxOpen&&r.push({interval:[n[1],1/0],close:[0,0]}),wh(r),T(r,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(r){var e=this.option;T(e.categories,function(t){r.push({text:this.formatValueText(t,!0),value:t})},this),Ig(e,r)},pieces:function(r){var e=this.option;T(e.pieces,function(t,n){ct(t)||(t={value:t});var a={text:"",index:n};if(t.label!=null&&(a.text=t.label),t.hasOwnProperty("value")){var i=a.value=t.value;a.interval=[i,i],a.close=[1,1]}else{for(var o=a.interval=[],s=a.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],d=0;d<2;d++){for(var f=[["gte","gt","min"],["lte","lt","max"]][d],h=0;h<3&&o[d]==null;h++)o[d]=t[f[h]],s[d]=l[h],c[d]=h===2;o[d]==null&&(o[d]=u[d])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(a.value=o[0])}a.visual=Ke.retrieveVisuals(t),r.push(a)},this),Ig(e,r),wh(r),T(r,function(t){var n=t.close,a=[["<","≤"][n[1]],[">","≥"][n[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,a)},this)}};function Ig(r,e){var t=r.inverse;(r.orient==="vertical"?!t:t)&&e.reverse()}var ik=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var n=this.visualMapModel,a=n.get("textGap"),i=n.textStyleModel,o=i.getFont(),s=i.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),d=c.endsText,f=Tt(n.get("showLabel",!0),!d),h=!n.get("selectedMode");d&&this._renderEndsText(t,d[0],u,f,l),T(c.viewPieceList,function(v){var p=v.piece,g=new ae;g.onclick=Z(this._onItemClick,this,p),this._enableHoverLink(g,v.indexInModelPieceList);var m=n.getRepresentValue(p);if(this._createItemSymbol(g,m,[0,0,u[0],u[1]],h),f){var b=this.visualMapModel.getValueState(m);g.add(new Ie({style:{x:l==="right"?-a:u[0]+a,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:b==="outOfRange"?.5:1},silent:h}))}t.add(g)},this),d&&this._renderEndsText(t,d[1],u,f,l),e1(n.get("orient"),t,n.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,n){var a=this;t.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(o){var s=a.visualMapModel;s.option.hoverLink&&a.api.dispatchAction({type:o,batch:Po(s.findTargetDataIndices(n),s)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,n=t.option;if(n.orient==="vertical")return xS(t,this.api,t.itemSize);var a=n.align;return(!a||a==="auto")&&(a="left"),a},e.prototype._renderEndsText=function(t,n,a,i,o){if(n){var s=new ae,l=this.visualMapModel.textStyleModel;s.add(new Ie({style:Ue(l,{x:i?o==="right"?a[0]:0:a[0]/2,y:a[1]/2,verticalAlign:"middle",align:i?o:"center",text:n})})),t.add(s)}},e.prototype._getViewData=function(){var t=this.visualMapModel,n=G(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),a=t.get("text"),i=t.get("orient"),o=t.get("inverse");return(i==="horizontal"?o:!o)?n.reverse():a&&(a=a.slice().reverse()),{viewPieceList:n,endsText:a}},e.prototype._createItemSymbol=function(t,n,a,i){var o=mt(this.getControllerVisual(n,"symbol"),a[0],a[1],a[2],a[3],this.getControllerVisual(n,"color"));o.silent=i,t.add(o)},e.prototype._onItemClick=function(t){var n=this.visualMapModel,a=n.option,i=a.selectedMode;if(i){var o=Se(a.selected),s=n.getSelectedMapKey(t);i==="single"||i===!0?(o[s]=!0,T(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(wS);function DS(r){r.registerComponentModel(nk),r.registerComponentView(ik),AS(r)}function ok(r){se(CS),se(DS)}var sk={label:{enabled:!0},decal:{show:!1}},Rg=je(),lk={};function uk(r,e){var t=r.getModel("aria");if(!t.get("enabled"))return;var n=Se(sk);ke(n.label,r.getLocaleModel().get("aria"),!1),ke(t.option,n,!1),a(),i();function a(){var u=t.getModel("decal"),c=u.get("show");if(c){var d=le();r.eachSeries(function(f){if(!f.isColorBySeries()){var h=d.get(f.type);h||(h={},d.set(f.type,h)),Rg(f).scope=h}}),r.eachRawSeries(function(f){if(r.isSeriesFiltered(f))return;if(xe(f.enableAriaDecal)){f.enableAriaDecal();return}var h=f.getData();if(f.isColorBySeries()){var b=Zu(f.ecModel,f.name,lk,r.getSeriesCount()),S=h.getVisual("decal");h.setVisual("decal",y(S,b))}else{var v=f.getRawData(),p={},g=Rg(f).scope;h.each(function(w){var _=h.getRawIndex(w);p[_]=w});var m=v.count();v.each(function(w){var _=p[w],x=v.getName(w)||w+"",A=Zu(f.ecModel,x,g,m),C=h.getItemVisual(_,"decal");h.setItemVisual(_,"decal",y(C,A))})}function y(w,_){var x=w?X(X({},_),w):_;return x.dirty=!0,x}})}}function i(){var u=e.getZr().dom;if(u){var c=r.getLocaleModel().get("aria"),d=t.getModel("label");if(d.option=ce(d.option,c),!!d.get("enabled")){if(u.setAttribute("role","img"),d.get("description")){u.setAttribute("aria-label",d.get("description"));return}var f=r.getSeriesCount(),h=d.get(["data","maxCount"])||10,v=d.get(["series","maxCount"])||10,p=Math.min(f,v),g;if(!(f<1)){var m=s();if(m){var b=d.get(["general","withTitle"]);g=o(b,{title:m})}else g=d.get(["general","withoutTitle"]);var S=[],y=f>1?d.get(["series","multiple","prefix"]):d.get(["series","single","prefix"]);g+=o(y,{seriesCount:f}),r.eachSeries(function(A,C){if(C<p){var D=void 0,E=A.get("name"),M=E?"withName":"withoutName";D=f>1?d.get(["series","multiple",M]):d.get(["series","single",M]),D=o(D,{seriesId:A.seriesIndex,seriesName:A.get("name"),seriesType:l(A.subType)});var I=A.getData();if(I.count()>h){var R=d.get(["data","partialData"]);D+=o(R,{displayCnt:h})}else D+=d.get(["data","allData"]);for(var L=d.get(["data","separator","middle"]),P=d.get(["data","separator","end"]),N=d.get(["data","excludeDimensionId"]),z=[],H=0;H<I.count();H++)if(H<h){var U=I.getName(H),Y=N?Qe(I.getValues(H),function(te,re){return Oe(N,re)===-1}):I.getValues(H),J=d.get(["data",U?"withName":"withoutName"]);z.push(o(J,{name:U,value:Y.join(L)}))}D+=z.join(L)+P,S.push(D)}});var w=d.getModel(["series","multiple","separator"]),_=w.get("middle"),x=w.get("end");g+=S.join(_)+x,u.setAttribute("aria-label",g)}}}}function o(u,c){if(!de(u))return u;var d=u;return T(c,function(f,h){d=d.replace(new RegExp("\\{\\s*"+h+"\\s*\\}","g"),f)}),d}function s(){var u=r.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var c=r.getLocaleModel().get(["series","typeNames"]);return c[u]||c.chart}}function ck(r){if(!(!r||!r.aria)){var e=r.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},T(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function dk(r){r.registerPreprocessor(ck),r.registerVisual(r.PRIORITY.VISUAL.ARIA,uk)}var Lg={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},fk=function(){function r(e){var t=this._condVal=de(e)?new RegExp(e):r1(e)?e:null;if(t==null){var n="";Fe(n)}}return r.prototype.evaluate=function(e){var t=typeof e;return de(t)?this._condVal.test(e):er(t)?this._condVal.test(e+""):!1},r}(),hk=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),vk=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},r}(),pk=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},r}(),gk=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),mk=function(){function r(){}return r.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,n=t(this.valueGetterParam),a=e?this.valueParser(n):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(e?a:n))return!1;return!0},r}();function pf(r,e){if(r===!0||r===!1){var t=new hk;return t.value=r,t}var n="";return TS(r)||Fe(n),r.and?Pg("and",r,e):r.or?Pg("or",r,e):r.not?yk(r,e):bk(r,e)}function Pg(r,e,t){var n=e[r],a="";$(n)||Fe(a),n.length||Fe(a);var i=r==="and"?new vk:new pk;return i.children=G(n,function(o){return pf(o,t)}),i.children.length||Fe(a),i}function yk(r,e){var t=r.not,n="";TS(t)||Fe(n);var a=new gk;return a.child=pf(t,e),a.child||Fe(n),a}function bk(r,e){for(var t="",n=e.prepareGetValue(r),a=[],i=We(r),o=r.parser,s=o?h0(o):null,l=0;l<i.length;l++){var u=i[l];if(!(u==="parser"||e.valueGetterAttrMap.get(u))){var c=F(Lg,u)?Lg[u]:u,d=r[u],f=s?s(d):d,h=t1(c,f)||c==="reg"&&new fk(f);h||Fe(t),a.push(h)}}a.length||Fe(t);var v=new mk;return v.valueGetterParam=n,v.valueParser=s,v.getValue=e.getValue,v.subCondList=a,v}function TS(r){return ct(r)&&!Ky(r)}var Sk=function(){function r(e,t){this._cond=pf(e,t)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function _k(r,e){return new Sk(r,e)}var wk={type:"echarts:filter",transform:function(r){for(var e=r.upstream,t,n=_k(r.config,{valueGetterAttrMap:le({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;F(s,"dimension")||Fe(l);var c=e.getDimensionInfo(u);return c||Fe(l),{dimIdx:c.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),a=[],i=0,o=e.count();i<o;i++)t=e.getRawDataItem(i),n.evaluate()&&a.push(t);return{data:a}}},xk={type:"echarts:sort",transform:function(r){var e=r.upstream,t=r.config,n="",a=gt(t);a.length||Fe(n);var i=[];T(a,function(c){var d=c.dimension,f=c.order,h=c.parser,v=c.incomparable;if(d==null&&Fe(n),f!=="asc"&&f!=="desc"&&Fe(n),v&&v!=="min"&&v!=="max"){var p="";Fe(p)}if(f!=="asc"&&f!=="desc"){var g="";Fe(g)}var m=e.getDimensionInfo(d);m||Fe(n);var b=h?h0(h):null;h&&!b&&Fe(n),i.push({dimIdx:m.index,parser:b,comparator:new n1(f,v)})});var o=e.sourceFormat;o!==Qy&&o!==a1&&Fe(n);for(var s=[],l=0,u=e.count();l<u;l++)s.push(e.getRawDataItem(l));return s.sort(function(c,d){for(var f=0;f<i.length;f++){var h=i[f],v=e.retrieveValueFromItem(c,h.dimIdx),p=e.retrieveValueFromItem(d,h.dimIdx);h.parser&&(v=h.parser(v),p=h.parser(p));var g=h.comparator.evaluate(v,p);if(g!==0)return g}return 0}),{data:s}}};function Ak(r){r.registerTransform(wk),r.registerTransform(xk)}var Ck=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,n,a){r.prototype.init.call(this,t,n,a),this._sourceManager=new i1(this),xh(this)},e.prototype.mergeOption=function(t,n){r.prototype.mergeOption.call(this,t,n),xh(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:o1},e}(dt),Dk=function(r){V(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(yt);function Tk(r){r.registerComponentModel(Ck),r.registerComponentView(Dk)}const Ek=(r,e,t)=>P1(r.subTree).filter(i=>{var o;return l1(i)&&((o=i.type)==null?void 0:o.name)===e&&!!i.component}).map(i=>i.component.uid).map(i=>t[i]).filter(i=>!!i),Mk=(r,e)=>{const t={},n=s1([]);return{children:n,addChild:o=>{t[o.uid]=o,n.value=Ek(r,e,t)},removeChild:o=>{delete t[o],n.value=n.value.filter(s=>s.uid!==o)}}},ES=Dr({modelValue:{type:[String,Number,Boolean],default:void 0},size:wy,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),Ik=Dr({...ES,border:Boolean}),MS={[Ci]:r=>tc(r)||Ho(r)||Kf(r),[qc]:r=>tc(r)||Ho(r)||Kf(r)},IS=Symbol("radioGroupKey"),RS=(r,e)=>{const t=ge(),n=$s(IS,void 0),a=Xe(()=>!!n),i=Xe(()=>Jf(r.value)?r.label:r.value),o=Xe({get(){return a.value?n.modelValue:r.modelValue},set(d){a.value?n.changeEvent(d):e&&e(Ci,d),t.value.checked=r.modelValue===i.value}}),s=Yw(Xe(()=>n==null?void 0:n.size)),l=Zw(Xe(()=>n==null?void 0:n.disabled)),u=ge(!1),c=Xe(()=>l.value||a.value&&o.value!==i.value?-1:0);return Xw({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},Xe(()=>a.value&&Jf(r.value))),{radioRef:t,isGroup:a,radioGroup:n,focus:u,size:s,disabled:l,tabIndex:c,modelValue:o,actualValue:i}},Rk=Ee({name:"ElRadio"}),Lk=Ee({...Rk,props:Ik,emits:MS,setup(r,{emit:e}){const t=r,n=Zr("radio"),{radioRef:a,radioGroup:i,focus:o,size:s,disabled:l,modelValue:u,actualValue:c}=RS(t,e);function d(){Oi(()=>e(qc,u.value))}return(f,h)=>{var v;return be(),bt("label",{class:at([j(n).b(),j(n).is("disabled",j(l)),j(n).is("focus",j(o)),j(n).is("bordered",f.border),j(n).is("checked",j(u)===j(c)),j(n).m(j(s))])},[Re("span",{class:at([j(n).e("input"),j(n).is("disabled",j(l)),j(n).is("checked",j(u)===j(c))])},[dd(Re("input",{ref_key:"radioRef",ref:a,"onUpdate:modelValue":p=>p0(u)?u.value=p:null,class:at(j(n).e("original")),value:j(c),name:f.name||((v=j(i))==null?void 0:v.name),disabled:j(l),checked:j(u)===j(c),type:"radio",onFocus:p=>o.value=!0,onBlur:p=>o.value=!1,onChange:d,onClick:Yo(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[v0,j(u)]]),Re("span",{class:at(j(n).e("inner"))},null,2)],2),Re("span",{class:at(j(n).e("label")),onKeydown:Yo(()=>{},["stop"])},[br(f.$slots,"default",{},()=>[Et(Mt(f.label),1)])],42,["onKeydown"])],2)}}});var Pk=wa(Lk,[["__file","radio.vue"]]);const kk=Dr({...ES}),Ok=Ee({name:"ElRadioButton"}),Nk=Ee({...Ok,props:kk,setup(r){const e=r,t=Zr("radio"),{radioRef:n,focus:a,size:i,disabled:o,modelValue:s,radioGroup:l,actualValue:u}=RS(e),c=Xe(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,f)=>{var h;return be(),bt("label",{class:at([j(t).b("button"),j(t).is("active",j(s)===j(u)),j(t).is("disabled",j(o)),j(t).is("focus",j(a)),j(t).bm("button",j(i))])},[dd(Re("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":v=>p0(s)?s.value=v:null,class:at(j(t).be("button","original-radio")),value:j(u),type:"radio",name:d.name||((h=j(l))==null?void 0:h.name),disabled:j(o),onFocus:v=>a.value=!0,onBlur:v=>a.value=!1,onClick:Yo(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[v0,j(s)]]),Re("span",{class:at(j(t).be("button","inner")),style:fd(j(s)===j(u)?j(c):{}),onKeydown:Yo(()=>{},["stop"])},[br(d.$slots,"default",{},()=>[Et(Mt(d.label),1)])],46,["onKeydown"])],2)}}});var LS=wa(Nk,[["__file","radio-button.vue"]]);const Vk=Dr({id:{type:String,default:void 0},size:wy,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...qw(["ariaLabel"])}),Bk=MS,zk=Ee({name:"ElRadioGroup"}),Hk=Ee({...zk,props:Vk,emits:Bk,setup(r,{emit:e}){const t=r,n=Zr("radio"),a=Qw(),i=ge(),{formItem:o}=Kw(),{inputId:s,isLabeledByFormItem:l}=Jw(t,{formItemContext:o}),u=d=>{e(Ci,d),Oi(()=>e(qc,d))};_a(()=>{const d=i.value.querySelectorAll("[type=radio]"),f=d[0];!Array.from(d).some(h=>h.checked)&&f&&(f.tabIndex=0)});const c=Xe(()=>t.name||a.value);return g0(IS,m0({...u1(t),changeEvent:u,name:c})),Cn(()=>t.modelValue,()=>{t.validateEvent&&(o==null||o.validate("change").catch(d=>ex()))}),(d,f)=>(be(),bt("div",{id:j(s),ref_key:"radioGroupRef",ref:i,class:at(j(n).b("group")),role:"radiogroup","aria-label":j(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":j(l)?j(o).labelId:void 0},[br(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var PS=wa(Hk,[["__file","radio-group.vue"]]);gd(Pk,{RadioButton:LS,RadioGroup:PS});const Gk=pd(PS),Fk=pd(LS),Wk=Dr({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:li([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:li([String,Object,Array])}}),Uk=Ee({name:"ElStatistic"}),jk=Ee({...Uk,props:Wk,setup(r,{expose:e}){const t=r,n=Zr("statistic"),a=Xe(()=>{const{value:i,formatter:o,precision:s,decimalSeparator:l,groupSeparator:u}=t;if(c1(o))return o(i);if(!Ho(i)||Number.isNaN(i))return i;let[c,d=""]=String(i).split(".");return d=d.padEnd(s,"0").slice(0,s>0?s:0),c=c.replace(/\B(?=(\d{3})+(?!\d))/g,u),[c,d].join(d?l:"")});return e({displayValue:a}),(i,o)=>(be(),bt("div",{class:at(j(n).b())},[i.$slots.title||i.title?(be(),bt("div",{key:0,class:at(j(n).e("head"))},[br(i.$slots,"title",{},()=>[Et(Mt(i.title),1)])],2)):ja("v-if",!0),Re("div",{class:at(j(n).e("content"))},[i.$slots.prefix||i.prefix?(be(),bt("div",{key:0,class:at(j(n).e("prefix"))},[br(i.$slots,"prefix",{},()=>[Re("span",null,Mt(i.prefix),1)])],2)):ja("v-if",!0),Re("span",{class:at(j(n).e("number")),style:fd(i.valueStyle)},Mt(j(a)),7),i.$slots.suffix||i.suffix?(be(),bt("div",{key:1,class:at(j(n).e("suffix"))},[br(i.$slots,"suffix",{},()=>[Re("span",null,Mt(i.suffix),1)])],2)):ja("v-if",!0)],2)],2))}});var $k=wa(jk,[["__file","statistic.vue"]]);const gf=gd($k),tl=Symbol("tabsRootContextKey"),Yk=Dr({tabs:{type:li(Array),default:()=>xy([])}}),kS="ElTabBar",Zk=Ee({name:kS}),Xk=Ee({...Zk,props:Yk,setup(r,{expose:e}){const t=r,n=hd(),a=$s(tl);a||Qc(kS,"<el-tabs><el-tab-bar /></el-tabs>");const i=Zr("tabs"),o=ge(),s=ge(),l=()=>{let h=0,v=0;const p=["top","bottom"].includes(a.props.tabPosition)?"width":"height",g=p==="width"?"x":"y",m=g==="x"?"left":"top";return t.tabs.every(b=>{var S,y;const w=(y=(S=n.parent)==null?void 0:S.refs)==null?void 0:y[`tab-${b.uid}`];if(!w)return!1;if(!b.active)return!0;h=w[`offset${Ir(m)}`],v=w[`client${Ir(p)}`];const _=window.getComputedStyle(w);return p==="width"&&(v-=Number.parseFloat(_.paddingLeft)+Number.parseFloat(_.paddingRight),h+=Number.parseFloat(_.paddingLeft)),!1}),{[p]:`${v}px`,transform:`translate${Ir(g)}(${h}px)`}},u=()=>s.value=l(),c=[],d=()=>{var h;c.forEach(p=>p.stop()),c.length=0;const v=(h=n.parent)==null?void 0:h.refs;if(v){for(const p in v)if(p.startsWith("tab-")){const g=v[p];g&&c.push(ju(g,u))}}};Cn(()=>t.tabs,async()=>{await Oi(),u(),d()},{immediate:!0});const f=ju(o,()=>u());return y0(()=>{c.forEach(h=>h.stop()),c.length=0,f.stop()}),e({ref:o,update:u}),(h,v)=>(be(),bt("div",{ref_key:"barRef",ref:o,class:at([j(i).e("active-bar"),j(i).is(j(a).props.tabPosition)]),style:fd(s.value)},null,6))}});var qk=wa(Xk,[["__file","tab-bar.vue"]]);const Qk=Dr({panes:{type:li(Array),default:()=>xy([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Kk={tabClick:(r,e,t)=>t instanceof Event,tabRemove:(r,e)=>e instanceof Event},kg="ElTabNav",Jk=Ee({name:kg,props:Qk,emits:Kk,setup(r,{expose:e,emit:t}){const n=$s(tl);n||Qc(kg,"<el-tabs><tab-nav /></el-tabs>");const a=Zr("tabs"),i=tx(),o=rx(),s=ge(),l=ge(),u=ge(),c=ge(),d=ge(!1),f=ge(0),h=ge(!1),v=ge(!0),p=Xe(()=>["top","bottom"].includes(n.props.tabPosition)?"width":"height"),g=Xe(()=>({transform:`translate${p.value==="width"?"X":"Y"}(-${f.value}px)`})),m=()=>{if(!s.value)return;const A=s.value[`offset${Ir(p.value)}`],C=f.value;if(!C)return;const D=C>A?C-A:0;f.value=D},b=()=>{if(!s.value||!l.value)return;const A=l.value[`offset${Ir(p.value)}`],C=s.value[`offset${Ir(p.value)}`],D=f.value;if(A-D<=C)return;const E=A-D>C*2?D+C:A-C;f.value=E},S=async()=>{const A=l.value;if(!d.value||!u.value||!s.value||!A)return;await Oi();const C=u.value.querySelector(".is-active");if(!C)return;const D=s.value,E=["top","bottom"].includes(n.props.tabPosition),M=C.getBoundingClientRect(),I=D.getBoundingClientRect(),R=E?A.offsetWidth-I.width:A.offsetHeight-I.height,L=f.value;let P=L;E?(M.left<I.left&&(P=L-(I.left-M.left)),M.right>I.right&&(P=L+M.right-I.right)):(M.top<I.top&&(P=L-(I.top-M.top)),M.bottom>I.bottom&&(P=L+(M.bottom-I.bottom))),P=Math.max(P,0),f.value=Math.min(P,R)},y=()=>{var A;if(!l.value||!s.value)return;r.stretch&&((A=c.value)==null||A.update());const C=l.value[`offset${Ir(p.value)}`],D=s.value[`offset${Ir(p.value)}`],E=f.value;D<C?(d.value=d.value||{},d.value.prev=E,d.value.next=E+D<C,C-E<D&&(f.value=C-D)):(d.value=!1,E>0&&(f.value=0))},w=A=>{let C=0;switch(A.code){case Er.left:case Er.up:C=-1;break;case Er.right:case Er.down:C=1;break;default:return}const D=Array.from(A.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let M=D.indexOf(A.target)+C;M<0?M=D.length-1:M>=D.length&&(M=0),D[M].focus({preventScroll:!0}),D[M].click(),_()},_=()=>{v.value&&(h.value=!0)},x=()=>h.value=!1;return Cn(i,A=>{A==="hidden"?v.value=!1:A==="visible"&&setTimeout(()=>v.value=!0,50)}),Cn(o,A=>{A?setTimeout(()=>v.value=!0,50):v.value=!1}),ju(u,y),_a(()=>setTimeout(()=>S(),0)),d1(()=>y()),e({scrollToActiveTab:S,removeFocus:x,tabListRef:l,tabBarRef:c}),()=>{const A=d.value?[K("span",{class:[a.e("nav-prev"),a.is("disabled",!d.value.prev)],onClick:m},[K(Do,null,{default:()=>[K(f1,null,null)]})]),K("span",{class:[a.e("nav-next"),a.is("disabled",!d.value.next)],onClick:b},[K(Do,null,{default:()=>[K(h1,null,null)]})])]:null,C=r.panes.map((D,E)=>{var M,I,R,L;const P=D.uid,N=D.props.disabled,z=(I=(M=D.props.name)!=null?M:D.index)!=null?I:`${E}`,H=!N&&(D.isClosable||r.editable);D.index=`${E}`;const U=H?K(Do,{class:"is-icon-close",onClick:te=>t("tabRemove",D,te)},{default:()=>[K(v1,null,null)]}):null,Y=((L=(R=D.slots).label)==null?void 0:L.call(R))||D.props.label,J=!N&&D.active?0:-1;return K("div",{ref:`tab-${P}`,class:[a.e("item"),a.is(n.props.tabPosition),a.is("active",D.active),a.is("disabled",N),a.is("closable",H),a.is("focus",h.value)],id:`tab-${z}`,key:`tab-${P}`,"aria-controls":`pane-${z}`,role:"tab","aria-selected":D.active,tabindex:J,onFocus:()=>_(),onBlur:()=>x(),onClick:te=>{x(),t("tabClick",D,z,te)},onKeydown:te=>{H&&(te.code===Er.delete||te.code===Er.backspace)&&t("tabRemove",D,te)}},[Y,U])});return K("div",{ref:u,class:[a.e("nav-wrap"),a.is("scrollable",!!d.value),a.is(n.props.tabPosition)]},[A,K("div",{class:a.e("nav-scroll"),ref:s},[K("div",{class:[a.e("nav"),a.is(n.props.tabPosition),a.is("stretch",r.stretch&&["top","bottom"].includes(n.props.tabPosition))],ref:l,style:g.value,role:"tablist",onKeydown:w},[r.type?null:K(qk,{ref:c,tabs:[...r.panes]},null),C])])])}}}),eO=Dr({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:li(Function),default:()=>!0},stretch:Boolean}),Su=r=>tc(r)||Ho(r),tO={[Ci]:r=>Su(r),tabClick:(r,e)=>e instanceof Event,tabChange:r=>Su(r),edit:(r,e)=>["remove","add"].includes(e),tabRemove:r=>Su(r),tabAdd:()=>!0},rO=Ee({name:"ElTabs",props:eO,emits:tO,setup(r,{emit:e,slots:t,expose:n}){var a;const i=Zr("tabs"),o=Xe(()=>["left","right"].includes(r.tabPosition)),{children:s,addChild:l,removeChild:u}=Mk(hd(),"ElTabPane"),c=ge(),d=ge((a=r.modelValue)!=null?a:"0"),f=async(m,b=!1)=>{var S,y;if(!(d.value===m||eh(m)))try{let w;if(r.beforeLeave){const _=r.beforeLeave(m,d.value);w=_ instanceof Promise?await _:_}else w=!0;w!==!1&&(d.value=m,b&&(e(Ci,m),e("tabChange",m)),(y=(S=c.value)==null?void 0:S.removeFocus)==null||y.call(S))}catch{}},h=(m,b,S)=>{m.props.disabled||(e("tabClick",m,S),f(b,!0))},v=(m,b)=>{m.props.disabled||eh(m.props.name)||(b.stopPropagation(),e("edit",m.props.name,"remove"),e("tabRemove",m.props.name))},p=()=>{e("edit",void 0,"add"),e("tabAdd")};Cn(()=>r.modelValue,m=>f(m)),Cn(d,async()=>{var m;await Oi(),(m=c.value)==null||m.scrollToActiveTab()}),g0(tl,{props:r,currentName:d,registerPane:m=>{s.value.push(m)},sortPane:l,unregisterPane:u}),n({currentName:d,tabNavRef:c});const g=({render:m})=>m();return()=>{const m=t["add-icon"],b=r.editable||r.addable?K("div",{class:[i.e("new-tab"),o.value&&i.e("new-tab-vertical")],tabindex:"0",onClick:p,onKeydown:w=>{[Er.enter,Er.numpadEnter].includes(w.code)&&p()}},[m?br(t,"add-icon"):K(Do,{class:i.is("icon-plus")},{default:()=>[K(p1,null,null)]})]):null,S=K("div",{class:[i.e("header"),o.value&&i.e("header-vertical"),i.is(r.tabPosition)]},[K(g,{render:()=>{const w=s.value.some(_=>_.slots.label);return K(Jk,{ref:c,currentName:d.value,editable:r.editable,type:r.type,panes:s.value,stretch:r.stretch,onTabClick:h,onTabRemove:v},{$stable:!w})}},null),b]),y=K("div",{class:i.e("content")},[br(t,"default")]);return K("div",{class:[i.b(),i.m(r.tabPosition),{[i.m("card")]:r.type==="card",[i.m("border-card")]:r.type==="border-card"}]},[y,S])}}});var nO=rO;const aO=Dr({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),OS="ElTabPane",iO=Ee({name:OS}),oO=Ee({...iO,props:aO,setup(r){const e=r,t=hd(),n=g1(),a=$s(tl);a||Qc(OS,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=Zr("tab-pane"),o=ge(),s=Xe(()=>e.closable||a.props.closable),l=th(()=>{var h;return a.currentName.value===((h=e.name)!=null?h:o.value)}),u=ge(l.value),c=Xe(()=>{var h;return(h=e.name)!=null?h:o.value}),d=th(()=>!e.lazy||u.value||l.value);Cn(l,h=>{h&&(u.value=!0)});const f=m0({uid:t.uid,slots:n,props:e,paneName:c,active:l,index:o,isClosable:s});return a.registerPane(f),_a(()=>{a.sortPane(f)}),m1(()=>{a.unregisterPane(f.uid)}),(h,v)=>j(d)?dd((be(),bt("div",{key:0,id:`pane-${j(c)}`,class:at(j(i).b()),role:"tabpanel","aria-hidden":!j(l),"aria-labelledby":`tab-${j(c)}`},[br(h.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[y1,j(l)]]):ja("v-if",!0)}});var NS=wa(oO,[["__file","tab-pane.vue"]]);const sO=gd(nO,{TabPane:NS}),lO=pd(NS);function uO(){const r=ge(typeof window<"u"?window.innerWidth:1200),e=()=>{r.value=window.innerWidth};return _a(()=>window.addEventListener("resize",e)),y0(()=>window.removeEventListener("resize",e)),{width:r}}const cO={class:"date-range-selector"},dO=Ee({__name:"DateRangeSelector",emits:["formattedDates"],setup(r,{emit:e}){const t=ge("all"),n=ge([]),a=e,i=l=>{const u=new Date;let c=new Date;switch(l){case"all":c=new Date(2e3,0,1);break;case"day":c.setDate(u.getDate()-1);break;case"week":c.setDate(u.getDate()-7);break;case"month":c.setMonth(u.getMonth()-1);break}n.value=[c,u],s.value&&a("formattedDates",s.value,l)},o=l=>l.toISOString().split("T")[0],s=Xe(()=>{if(!n.value||n.value.length!==2)return null;const[l,u]=n.value,c=(u.getTime()-l.getTime())/(1e3*60*60*24);return{previous_start_date:o(new Date(l.getFullYear(),l.getMonth(),l.getDate()-c)),previous_end_date:o(new Date(l.getTime()-1e3*60*60*24)),current_start_date:o(l),current_end_date:o(u)}});return _a(()=>{i(t.value)}),(l,u)=>{const c=Fk,d=Gk;return be(),bt("div",cO,[K(d,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=f=>t.value=f),style:{},onChange:u[1]||(u[1]=f=>i(f))},{default:pe(()=>[K(c,{label:"all"},{default:pe(()=>u[2]||(u[2]=[Et("All Time")])),_:1,__:[2]}),K(c,{label:"day"},{default:pe(()=>u[3]||(u[3]=[Et("Daily")])),_:1,__:[3]}),K(c,{label:"week"},{default:pe(()=>u[4]||(u[4]=[Et("Weekly")])),_:1,__:[4]}),K(c,{label:"month"},{default:pe(()=>u[5]||(u[5]=[Et("Monthly")])),_:1,__:[5]})]),_:1},8,["modelValue"])])}}}),fO=""+new URL("student-color.CdAdNSCJ.svg",import.meta.url).href,hO={class:"flex items-center gap-4"},vO=["src"],pO=Ee({__name:"StudentCard",props:{normalCount:{},count:{},growth:{}},setup(r){return(e,t)=>{const n=gf,a=md,i=yd;return be(),et(i,{class:"p-4"},{default:pe(()=>[t[0]||(t[0]=Re("h3",{class:"text-lg font-semibold mb-2"},"Total Students",-1)),Re("div",hO,[Re("img",{src:j(fO),alt:"Student Icon",class:"w-12 h-12"},null,8,vO),e.normalCount!==void 0?(be(),et(n,{key:0,value:e.normalCount},null,8,["value"])):(be(),et(n,{key:1,value:e.count,"value-style":{color:e.growth>=0?"#3f8600":"#cf1322"}},{suffix:pe(()=>[K(a,{type:e.growth>=0?"success":"danger",size:"medium"},{default:pe(()=>[Et(Mt(e.growth>=0?"+":"")+Mt(e.growth)+"% ",1)]),_:1},8,["type"])]),_:1},8,["value","value-style"]))])]),_:1,__:[0]})}}}),gO=""+new URL("teacher-color.BkLyYPDO.svg",import.meta.url).href,mO={class:"flex items-center gap-4"},yO=["src"],bO=Ee({__name:"TeacherCard",props:{normalCount:{},count:{},growth:{}},setup(r){return(e,t)=>{const n=gf,a=md,i=yd;return be(),et(i,{class:"p-4"},{default:pe(()=>[t[0]||(t[0]=Re("h3",{class:"text-lg font-semibold mb-2"},"Total Teachers",-1)),Re("div",mO,[Re("img",{src:j(gO),alt:"Teacher Icon",class:"w-12 h-12"},null,8,yO),e.normalCount!==void 0?(be(),et(n,{key:0,value:e.normalCount},null,8,["value"])):(be(),et(n,{key:1,value:e.count,"value-style":{color:e.growth>=0?"#3f8600":"#cf1322"}},{suffix:pe(()=>[K(a,{type:e.growth>=0?"success":"danger",size:"medium"},{default:pe(()=>[Et(Mt(e.growth>=0?"+":"")+Mt(e.growth)+"% ",1)]),_:1},8,["type"])]),_:1},8,["value","value-style"]))])]),_:1,__:[0]})}}}),SO="data:image/svg+xml,%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20viewBox='0%200%2030%2030'%20version='1.1'%20id='svg822'%20inkscape:version='0.92.4%20(f8dce91,%202019-08-02)'%20sodipodi:docname='admin.svg'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cdefs%20id='defs816'%3e%3c/defs%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='12.610071'%20inkscape:cx='13.690863'%20inkscape:cy='14.709664'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='true'%20units='px'%20inkscape:window-width='1366'%20inkscape:window-height='713'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='1'%20showguides='false'%20inkscape:snap-global='false'%3e%3cinkscape:grid%20type='xygrid'%20id='grid816'%3e%3c/inkscape:grid%3e%3c/sodipodi:namedview%3e%3cmetadata%20id='metadata819'%3e%3crdf:rdf%3e%3ccc:work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%3e%3c/dc:type%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:work%3e%3c/rdf:rdf%3e%3c/metadata%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(0,-289.0625)'%3e%3cpath%20style='opacity:0.91000001;fill:%232c387e;fill-opacity:1;stroke:none;stroke-width:0.5;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%2011.916016%206.28125%20A%204%204%200%200%200%207.9160156%2010.28125%20A%204%204%200%200%200%2011.916016%2014.28125%20A%204%204%200%200%200%2015.916016%2010.28125%20A%204%204%200%200%200%2011.916016%206.28125%20z%20M%208.4628906%2015.115234%20C%205.2252742%2016.489124%203.0845987%2019.623082%202.9824219%2023.138672%20C%205.1722039%2025.642012%208.3828992%2027.230469%2011.972656%2027.230469%20C%2013.939081%2027.230469%2015.782366%2026.738864%2017.416016%2025.896484%20C%2016.972529%2025.303803%2016.599939%2024.654546%2016.285156%2023.957031%20C%2015.297133%2021.767701%2014.789426%2019.133132%2014.728516%2016.570312%20L%2014.722656%2016.318359%20L%2012.001953%2020.574219%20L%208.4628906%2015.115234%20z%20M%2022.037109%2015.308594%20C%2020.292352%2015.308594%2017.177734%2017.251953%2017.177734%2017.251953%20C%2017.287817%2021.883593%2019.126557%2027.009156%2022.037109%2026.972656%20C%2022.040309%2026.972626%2022.043675%2026.972696%2022.046875%2026.972656%20C%2022.864919%2026.962256%2023.588979%2026.535536%2024.179688%2025.916016%20C%2024.770398%2025.296496%2025.255835%2024.472265%2025.654297%2023.546875%20C%2026.45122%2021.696085%2026.896484%2019.437792%2026.896484%2017.576172%20L%2026.896484%2017.308594%20L%2026.671875%2017.166016%20C%2026.671875%2017.166016%2025.951124%2016.70805%2025.029297%2016.25%20C%2024.107471%2015.79195%2023.009546%2015.308594%2022.041016%2015.308594%20L%2022.037109%2015.308594%20z%20M%2022.037109%2016.279297%20L%2022.041016%2016.279297%20C%2022.641611%2016.279297%2023.726421%2016.688174%2024.597656%2017.121094%20C%2025.326193%2017.483104%2025.720925%2017.73488%2025.896484%2017.84375%20C%2025.857384%2019.50574%2025.45849%2021.539389%2024.759766%2023.162109%20C%2024.392753%2024.014469%2023.950753%2024.748774%2023.476562%2025.246094%20C%2023.003258%2025.742454%2022.526857%2025.9928%2022.037109%2026%20L%2022.037109%2016.279297%20z%20'%20transform='translate(0,289.0625)'%20id='path852'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",_O={class:"flex items-center gap-4"},wO=["src"],xO=Ee({__name:"AdminCard",props:{count:{},growth:{},normalCount:{}},setup(r){return(e,t)=>{const n=gf,a=md,i=yd;return be(),et(i,{class:"p-4"},{default:pe(()=>[t[0]||(t[0]=Re("h3",{class:"text-lg font-semibold mb-2"},"Total Admins",-1)),Re("div",_O,[Re("img",{src:j(SO),alt:"Colored admin icon representing total admin count",class:"w-12 h-12"},null,8,wO),e.normalCount!==void 0?(be(),et(n,{key:0,value:e.normalCount},null,8,["value"])):(be(),et(n,{key:1,value:e.count,"value-style":{color:(e.growth??0)>=0?"#3f8600":"#cf1322"}},{suffix:pe(()=>[K(a,{type:(e.growth??0)>=0?"success":"danger",size:"default"},{default:pe(()=>[Et(Mt(((e.growth??0)>=0?"+":"")+(e.growth??0))+"% ",1)]),_:1},8,["type"])]),_:1},8,["value","value-style"]))])]),_:1,__:[0]})}}}),Og=Ee({__name:"StatisticsCards",props:{userCount:{},userGrowth:{},normalCount:{}},setup(r){return(e,t)=>{const n=_y,a=Sy;return be(),et(a,{gutter:30},{default:pe(()=>[K(n,{span:8},{default:pe(()=>{var i,o,s;return[K(pO,{"normal-count":(i=e.normalCount)==null?void 0:i.student,count:(o=e.userCount)==null?void 0:o.student,growth:(s=e.userGrowth)==null?void 0:s.studentGrowth},null,8,["normal-count","count","growth"])]}),_:1}),K(n,{span:8},{default:pe(()=>{var i,o,s;return[K(bO,{"normal-count":(i=e.normalCount)==null?void 0:i.teacher,count:(o=e.userCount)==null?void 0:o.teacher,growth:(s=e.userGrowth)==null?void 0:s.teacherGrowth},null,8,["normal-count","count","growth"])]}),_:1}),K(n,{span:8},{default:pe(()=>{var i,o,s;return[K(xO,{"normal-count":(i=e.normalCount)==null?void 0:i.admin,count:(o=e.userCount)==null?void 0:o.admin,growth:(s=e.userGrowth)==null?void 0:s.adminGrowth},null,8,["normal-count","count","growth"])]}),_:1})]),_:1})}}}),Ng=Ee({__name:"StatisticsOverviewView",setup(r){const e=ge(0),t=ge(0),n=ge(0),a=ge(0),i=ge(0),o=ge(0),s=ge("growth"),l=p=>{e.value=0,t.value=0,n.value=0,a.value=0,i.value=0,o.value=0,p.forEach(g=>{switch(g.role){case"student":n.value=Number(g.growth_percentage),o.value=Number(g.current);break;case"admin":e.value=Number(g.growth_percentage),a.value=Number(g.current);break;case"teacher":t.value=Number(g.growth_percentage),i.value=Number(g.current);break;default:console.warn(`Unknown role encountered: ${g.role}`)}})},u=Xe(()=>({studentGrowth:n.value,teacherGrowth:t.value,adminGrowth:e.value})),c=Xe(()=>({student:o.value,teacher:i.value,admin:a.value})),d=(p,g)=>{g==="all"?(s.value="all",v()):(s.value="growth",f(p))},f=async p=>{const g=new Ah;try{const m=await g.compareGrowthStatsByRole(p);let b=[];Array.isArray(m)?b=m:typeof m=="object"&&m!==null&&(b=Object.entries(m).map(([S,y])=>({role:S,growth_percentage:y,current:0}))),l(b),console.log("User growth stats fetched successfully:",b)}catch(m){console.error("Failed to fetch user growth stats:",m)}console.log("Parent received formatted dates:",p)},h=ge({student:0,teacher:0,admin:0}),v=async()=>{const p=new Ah;try{const g=await p.countByRole();h.value={student:g.student,teacher:g.teacher,admin:g.admin}}catch(g){console.error("Failed to fetch normal user counts:",g)}};return(p,g)=>(be(),bt(Ni,null,[K(dO,{onFormattedDates:d}),s.value==="growth"?(be(),et(Og,{key:0,"user-count":c.value,"user-growth":u.value},null,8,["user-count","user-growth"])):(be(),et(Og,{key:1,"normal-count":h.value},null,8,["normal-count"]))],64))}});var rl,ee,VS,BS,ca,pn,Vg,zS,HS,cs={},GS=[],AO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function kr(r,e){for(var t in e)r[t]=e[t];return r}function FS(r){var e=r.parentNode;e&&e.removeChild(r)}function O(r,e,t){var n,a,i,o={};for(i in e)i=="key"?n=e[i]:i=="ref"?a=e[i]:o[i]=e[i];if(arguments.length>2&&(o.children=arguments.length>3?rl.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(i in r.defaultProps)o[i]===void 0&&(o[i]=r.defaultProps[i]);return ko(r,o,n,a,null)}function ko(r,e,t,n,a){var i={type:r,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++VS};return a==null&&ee.vnode!=null&&ee.vnode(i),i}function Ar(){return{current:null}}function ze(r){return r.children}function CO(r,e,t,n,a){var i;for(i in t)i==="children"||i==="key"||i in e||ds(r,i,null,t[i],n);for(i in e)a&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||t[i]===e[i]||ds(r,i,e[i],t[i],n)}function Bg(r,e,t){e[0]==="-"?r.setProperty(e,t??""):r[e]=t==null?"":typeof t!="number"||AO.test(e)?t:t+"px"}function ds(r,e,t,n,a){var i;e:if(e==="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||Bg(r.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||Bg(r.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in r?e.toLowerCase().slice(2):e.slice(2),r.l||(r.l={}),r.l[e+i]=t,t?n||r.addEventListener(e,i?Hg:zg,i):r.removeEventListener(e,i?Hg:zg,i);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?r.removeAttribute(e):r.setAttribute(e,t))}}function zg(r){ca=!0;try{return this.l[r.type+!1](ee.event?ee.event(r):r)}finally{ca=!1}}function Hg(r){ca=!0;try{return this.l[r.type+!0](ee.event?ee.event(r):r)}finally{ca=!1}}function Rt(r,e){this.props=r,this.context=e}function bi(r,e){if(e==null)return r.__?bi(r.__,r.__.__k.indexOf(r)+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?bi(r):null}function WS(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return WS(r)}}function DO(r){ca?setTimeout(r):zS(r)}function Rc(r){(!r.__d&&(r.__d=!0)&&pn.push(r)&&!fs.__r++||Vg!==ee.debounceRendering)&&((Vg=ee.debounceRendering)||DO)(fs)}function fs(){var r,e,t,n,a,i,o,s;for(pn.sort(function(l,u){return l.__v.__b-u.__v.__b});r=pn.shift();)r.__d&&(e=pn.length,n=void 0,a=void 0,o=(i=(t=r).__v).__e,(s=t.__P)&&(n=[],(a=kr({},i)).__v=i.__v+1,mf(s,i,a,t.__n,s.ownerSVGElement!==void 0,i.__h!=null?[o]:null,n,o??bi(i),i.__h),ZS(n,i),i.__e!=o&&WS(i)),pn.length>e&&pn.sort(function(l,u){return l.__v.__b-u.__v.__b}));fs.__r=0}function US(r,e,t,n,a,i,o,s,l,u){var c,d,f,h,v,p,g,m=n&&n.__k||GS,b=m.length;for(t.__k=[],c=0;c<e.length;c++)if((h=t.__k[c]=(h=e[c])==null||typeof h=="boolean"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"?ko(null,h,null,null,h):Array.isArray(h)?ko(ze,{children:h},null,null,null):h.__b>0?ko(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)!=null){if(h.__=t,h.__b=t.__b+1,(f=m[c])===null||f&&h.key==f.key&&h.type===f.type)m[c]=void 0;else for(d=0;d<b;d++){if((f=m[d])&&h.key==f.key&&h.type===f.type){m[d]=void 0;break}f=null}mf(r,h,f=f||cs,a,i,o,s,l,u),v=h.__e,(d=h.ref)&&f.ref!=d&&(g||(g=[]),f.ref&&g.push(f.ref,null,h),g.push(d,h.__c||v,h)),v!=null?(p==null&&(p=v),typeof h.type=="function"&&h.__k===f.__k?h.__d=l=jS(h,l,r):l=$S(r,h,f,m,v,l),typeof t.type=="function"&&(t.__d=l)):l&&f.__e==l&&l.parentNode!=r&&(l=bi(f))}for(t.__e=p,c=b;c--;)m[c]!=null&&(typeof t.type=="function"&&m[c].__e!=null&&m[c].__e==t.__d&&(t.__d=YS(n).nextSibling),qS(m[c],m[c]));if(g)for(c=0;c<g.length;c++)XS(g[c],g[++c],g[++c])}function jS(r,e,t){for(var n,a=r.__k,i=0;a&&i<a.length;i++)(n=a[i])&&(n.__=r,e=typeof n.type=="function"?jS(n,e,t):$S(t,n,n,a,n.__e,e));return e}function hs(r,e){return e=e||[],r==null||typeof r=="boolean"||(Array.isArray(r)?r.some(function(t){hs(t,e)}):e.push(r)),e}function $S(r,e,t,n,a,i){var o,s,l;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||a!=i||a.parentNode==null)e:if(i==null||i.parentNode!==r)r.appendChild(a),o=null;else{for(s=i,l=0;(s=s.nextSibling)&&l<n.length;l+=1)if(s==a)break e;r.insertBefore(a,i),o=i}return o!==void 0?o:a.nextSibling}function YS(r){var e,t,n;if(r.type==null||typeof r.type=="string")return r.__e;if(r.__k){for(e=r.__k.length-1;e>=0;e--)if((t=r.__k[e])&&(n=YS(t)))return n}return null}function mf(r,e,t,n,a,i,o,s,l){var u,c,d,f,h,v,p,g,m,b,S,y,w,_,x,A=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,s=e.__e=t.__e,e.__h=null,i=[s]),(u=ee.__b)&&u(e);try{e:if(typeof A=="function"){if(g=e.props,m=(u=A.contextType)&&n[u.__c],b=u?m?m.props.value:u.__:n,t.__c?p=(c=e.__c=t.__c).__=c.__E:("prototype"in A&&A.prototype.render?e.__c=c=new A(g,b):(e.__c=c=new Rt(g,b),c.constructor=A,c.render=EO),m&&m.sub(c),c.props=g,c.state||(c.state={}),c.context=b,c.__n=n,d=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),A.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=kr({},c.__s)),kr(c.__s,A.getDerivedStateFromProps(g,c.__s))),f=c.props,h=c.state,c.__v=e,d)A.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(A.getDerivedStateFromProps==null&&g!==f&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(g,b),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(g,c.__s,b)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(c.props=g,c.state=c.__s,c.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(C){C&&(C.__=e)}),S=0;S<c._sb.length;S++)c.__h.push(c._sb[S]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(g,c.__s,b),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(f,h,v)})}if(c.context=b,c.props=g,c.__P=r,y=ee.__r,w=0,"prototype"in A&&A.prototype.render){for(c.state=c.__s,c.__d=!1,y&&y(e),u=c.render(c.props,c.state,c.context),_=0;_<c._sb.length;_++)c.__h.push(c._sb[_]);c._sb=[]}else do c.__d=!1,y&&y(e),u=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++w<25);c.state=c.__s,c.getChildContext!=null&&(n=kr(kr({},n),c.getChildContext())),d||c.getSnapshotBeforeUpdate==null||(v=c.getSnapshotBeforeUpdate(f,h)),x=u!=null&&u.type===ze&&u.key==null?u.props.children:u,US(r,Array.isArray(x)?x:[x],e,t,n,a,i,o,s,l),c.base=e.__e,e.__h=null,c.__h.length&&o.push(c),p&&(c.__E=c.__=null),c.__e=!1}else i==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=TO(t.__e,e,t,n,a,i,o,l);(u=ee.diffed)&&u(e)}catch(C){e.__v=null,(l||i!=null)&&(e.__e=s,e.__h=!!l,i[i.indexOf(s)]=null),ee.__e(C,e,t)}}function ZS(r,e){ee.__c&&ee.__c(e,r),r.some(function(t){try{r=t.__h,t.__h=[],r.some(function(n){n.call(t)})}catch(n){ee.__e(n,t.__v)}})}function TO(r,e,t,n,a,i,o,s){var l,u,c,d=t.props,f=e.props,h=e.type,v=0;if(h==="svg"&&(a=!0),i!=null){for(;v<i.length;v++)if((l=i[v])&&"setAttribute"in l==!!h&&(h?l.localName===h:l.nodeType===3)){r=l,i[v]=null;break}}if(r==null){if(h===null)return document.createTextNode(f);r=a?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,f.is&&f),i=null,s=!1}if(h===null)d===f||s&&r.data===f||(r.data=f);else{if(i=i&&rl.call(r.childNodes),u=(d=t.props||cs).dangerouslySetInnerHTML,c=f.dangerouslySetInnerHTML,!s){if(i!=null)for(d={},v=0;v<r.attributes.length;v++)d[r.attributes[v].name]=r.attributes[v].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===r.innerHTML)||(r.innerHTML=c&&c.__html||""))}if(CO(r,f,d,a,s),c)e.__k=[];else if(v=e.props.children,US(r,Array.isArray(v)?v:[v],e,t,n,a&&h!=="foreignObject",i,o,i?i[0]:t.__k&&bi(t,0),s),i!=null)for(v=i.length;v--;)i[v]!=null&&FS(i[v]);s||("value"in f&&(v=f.value)!==void 0&&(v!==r.value||h==="progress"&&!v||h==="option"&&v!==d.value)&&ds(r,"value",v,d.value,!1),"checked"in f&&(v=f.checked)!==void 0&&v!==r.checked&&ds(r,"checked",v,d.checked,!1))}return r}function XS(r,e,t){try{typeof r=="function"?r(e):r.current=e}catch(n){ee.__e(n,t)}}function qS(r,e,t){var n,a;if(ee.unmount&&ee.unmount(r),(n=r.ref)&&(n.current&&n.current!==r.__e||XS(n,null,e)),(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){ee.__e(i,e)}n.base=n.__P=null,r.__c=void 0}if(n=r.__k)for(a=0;a<n.length;a++)n[a]&&qS(n[a],e,t||typeof r.type!="function");t||r.__e==null||FS(r.__e),r.__=r.__e=r.__d=void 0}function EO(r,e,t){return this.constructor(r,t)}function Si(r,e,t){var n,a,i;ee.__&&ee.__(r,e),a=(n=!1)?null:e.__k,i=[],mf(e,r=e.__k=O(ze,null,[r]),a||cs,cs,e.ownerSVGElement!==void 0,a?null:e.firstChild?rl.call(e.childNodes):null,i,a?a.__e:e.firstChild,n),ZS(i,r)}function MO(r,e){var t={__c:e="__cC"+HS++,__:r,Consumer:function(n,a){return n.children(a)},Provider:function(n){var a,i;return this.getChildContext||(a=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(function(s){s.__e=!0,Rc(s)})},this.sub=function(o){a.push(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),s&&s.call(o)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}rl=GS.slice,ee={__e:function(r,e,t,n){for(var a,i,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(r)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(r,n||{}),o=a.__d),o)return a.__E=a}catch(s){r=s}throw r}},VS=0,BS=function(r){return r!=null&&r.constructor===void 0},ca=!1,Rt.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=kr({},this.state),typeof r=="function"&&(r=r(kr({},t),this.props)),r&&kr(t,r),r!=null&&this.__v&&(e&&this._sb.push(e),Rc(this))},Rt.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Rc(this))},Rt.prototype.render=ze,pn=[],zS=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,fs.__r=0,HS=0;var sr,_u,Gg,QS=[],wu=[],Fg=ee.__b,Wg=ee.__r,Ug=ee.diffed,jg=ee.__c,$g=ee.unmount;function IO(){for(var r;r=QS.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(Oo),r.__H.__h.forEach(Lc),r.__H.__h=[]}catch(e){r.__H.__h=[],ee.__e(e,r.__v)}}ee.__b=function(r){sr=null,Fg&&Fg(r)},ee.__r=function(r){Wg&&Wg(r);var e=(sr=r.__c).__H;e&&(_u===sr?(e.__h=[],sr.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=wu,t.__N=t.i=void 0})):(e.__h.forEach(Oo),e.__h.forEach(Lc),e.__h=[])),_u=sr},ee.diffed=function(r){Ug&&Ug(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(QS.push(e)!==1&&Gg===ee.requestAnimationFrame||((Gg=ee.requestAnimationFrame)||RO)(IO)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==wu&&(t.__=t.__V),t.i=void 0,t.__V=wu})),_u=sr=null},ee.__c=function(r,e){e.some(function(t){try{t.__h.forEach(Oo),t.__h=t.__h.filter(function(n){return!n.__||Lc(n)})}catch(n){e.some(function(a){a.__h&&(a.__h=[])}),e=[],ee.__e(n,t.__v)}}),jg&&jg(r,e)},ee.unmount=function(r){$g&&$g(r);var e,t=r.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{Oo(n)}catch(a){e=a}}),t.__H=void 0,e&&ee.__e(e,t.__v))};var Yg=typeof requestAnimationFrame=="function";function RO(r){var e,t=function(){clearTimeout(n),Yg&&cancelAnimationFrame(e),setTimeout(r)},n=setTimeout(t,100);Yg&&(e=requestAnimationFrame(t))}function Oo(r){var e=sr,t=r.__c;typeof t=="function"&&(r.__c=void 0,t()),sr=e}function Lc(r){var e=sr;r.__c=r.__(),sr=e}function LO(r,e){for(var t in e)r[t]=e[t];return r}function Zg(r,e){for(var t in r)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&r[n]!==e[n])return!0;return!1}function Xg(r){this.props=r}(Xg.prototype=new Rt).isPureReactComponent=!0,Xg.prototype.shouldComponentUpdate=function(r,e){return Zg(this.props,r)||Zg(this.state,e)};var qg=ee.__b;ee.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),qg&&qg(r)};var PO=ee.__e;ee.__e=function(r,e,t,n){if(r.then){for(var a,i=e;i=i.__;)if((a=i.__c)&&a.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),a.__c(r,e)}PO(r,e,t,n)};var Qg=ee.unmount;function KS(r,e,t){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),r.__c.__H=null),(r=LO({},r)).__c!=null&&(r.__c.__P===t&&(r.__c.__P=e),r.__c=null),r.__k=r.__k&&r.__k.map(function(n){return KS(n,e,t)})),r}function JS(r,e,t){return r&&(r.__v=null,r.__k=r.__k&&r.__k.map(function(n){return JS(n,e,t)}),r.__c&&r.__c.__P===e&&(r.__e&&t.insertBefore(r.__e,r.__d),r.__c.__e=!0,r.__c.__P=t)),r}function xu(){this.__u=0,this.t=null,this.__b=null}function e_(r){var e=r.__.__c;return e&&e.__a&&e.__a(r)}function mo(){this.u=null,this.o=null}ee.unmount=function(r){var e=r.__c;e&&e.__R&&e.__R(),e&&r.__h===!0&&(r.type=null),Qg&&Qg(r)},(xu.prototype=new Rt).__c=function(r,e){var t=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var a=e_(n.__v),i=!1,o=function(){i||(i=!0,t.__R=null,a?a(s):s())};t.__R=o;var s=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=JS(u,u.__c.__P,u.__c.__O)}var c;for(n.setState({__a:n.__b=null});c=n.t.pop();)c.forceUpdate()}},l=e.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),r.then(o,o)},xu.prototype.componentWillUnmount=function(){this.t=[]},xu.prototype.render=function(r,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=KS(this.__b,t,n.__O=n.__P)}this.__b=null}var a=e.__a&&O(ze,null,r.fallback);return a&&(a.__h=null),[O(ze,null,e.__a?null:r.children),a]};var Kg=function(r,e,t){if(++t[1]===t[0]&&r.o.delete(e),r.props.revealOrder&&(r.props.revealOrder[0]!=="t"||!r.o.size))for(t=r.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;r.u=t=t[2]}};function kO(r){return this.getChildContext=function(){return r.context},r.children}function OO(r){var e=this,t=r.i;e.componentWillUnmount=function(){Si(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),r.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(n){this.childNodes.push(n),e.i.appendChild(n)},insertBefore:function(n,a){this.childNodes.push(n),e.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.i.removeChild(n)}}),Si(O(kO,{context:e.context},r.__v),e.l)):e.l&&e.componentWillUnmount()}function NO(r,e){var t=O(OO,{__v:r,i:e});return t.containerInfo=e,t}(mo.prototype=new Rt).__a=function(r){var e=this,t=e_(e.__v),n=e.o.get(r);return n[0]++,function(a){var i=function(){e.props.revealOrder?(n.push(a),Kg(e,r,n)):a()};t?t(i):i()}},mo.prototype.render=function(r){this.u=null,this.o=new Map;var e=hs(r.children);r.revealOrder&&r.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return r.children},mo.prototype.componentDidUpdate=mo.prototype.componentDidMount=function(){var r=this;this.o.forEach(function(e,t){Kg(r,t,e)})};var VO=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,BO=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zO=typeof document<"u",HO=function(r){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(r)};Rt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(Rt.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(e){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:e})}})});var Jg=ee.event;function GO(){}function FO(){return this.cancelBubble}function WO(){return this.defaultPrevented}ee.event=function(r){return Jg&&(r=Jg(r)),r.persist=GO,r.isPropagationStopped=FO,r.isDefaultPrevented=WO,r.nativeEvent=r};var em={configurable:!0,get:function(){return this.class}},tm=ee.vnode;ee.vnode=function(r){var e=r.type,t=r.props,n=t;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var i in n={},t){var o=t[i];zO&&i==="children"&&e==="noscript"||i==="value"&&"defaultValue"in t&&o==null||(i==="defaultValue"&&"value"in t&&t.value==null?i="value":i==="download"&&o===!0?o="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!HO(t.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():a&&BO.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=o)}e=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=hs(t.children).forEach(function(s){s.props.selected=n.value.indexOf(s.props.value)!=-1})),e=="select"&&n.defaultValue!=null&&(n.value=hs(t.children).forEach(function(s){s.props.selected=n.multiple?n.defaultValue.indexOf(s.props.value)!=-1:n.defaultValue==s.props.value})),r.props=n,t.class!=t.className&&(em.enumerable="className"in t,t.className!=null&&(n.class=t.className),Object.defineProperty(n,"className",em))}r.$$typeof=VO,tm&&tm(r)};var rm=ee.__r;ee.__r=function(r){rm&&rm(r),r.__c};const t_=[],Pc=new Map;function r_(r){t_.push(r),Pc.forEach(e=>{a_(e,r)})}function UO(r){r.isConnected&&r.getRootNode&&n_(r.getRootNode())}function n_(r){let e=Pc.get(r);if(!e||!e.isConnected){if(e=r.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=$O();t&&(e.nonce=t);const n=r===document?document.head:r,a=r===document?n.querySelector("script,link[rel=stylesheet],link[as=style],style"):n.firstChild;n.insertBefore(e,a)}Pc.set(r,e),jO(e)}}function jO(r){for(const e of t_)a_(r,e)}function a_(r,e){const{sheet:t}=r,n=t.cssRules.length;e.split("}").forEach((a,i)=>{a=a.trim(),a&&t.insertRule(a+"}",n+i)})}let Au;function $O(){return Au===void 0&&(Au=YO()),Au}function YO(){const r=document.querySelector('meta[name="csp-nonce"]');if(r&&r.hasAttribute("content"))return r.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&n_(document);var ZO=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';r_(ZO);class yf{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:n}=this;e in n&&(t?delete n[e]:(n[e]-=1,n[e]<=0&&delete n[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function bf(r){r.parentNode&&r.parentNode.removeChild(r)}function lt(r,e){if(r.closest)return r.closest(e);if(!document.documentElement.contains(r))return null;do{if(XO(r,e))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1);return null}function XO(r,e){return(r.matches||r.matchesSelector||r.msMatchesSelector).call(r,e)}function qO(r,e){let t=r instanceof HTMLElement?[r]:r,n=[];for(let a=0;a<t.length;a+=1){let i=t[a].querySelectorAll(e);for(let o=0;o<i.length;o+=1)n.push(i[o])}return n}const QO=/(top|left|right|bottom|width|height)$/i;function Ya(r,e){for(let t in e)i_(r,t,e[t])}function i_(r,e,t){t==null?r.style[e]="":typeof t=="number"&&QO.test(e)?r.style[e]=`${t}px`:r.style[e]=t}function o_(r){var e,t;return(t=(e=r.composedPath)===null||e===void 0?void 0:e.call(r)[0])!==null&&t!==void 0?t:r.target}let nm=0;function nl(){return nm+=1,"fc-dom-"+nm}function al(r){r.preventDefault()}function KO(r,e){return t=>{let n=lt(t.target,r);n&&e.call(n,t,n)}}function s_(r,e,t,n){let a=KO(t,n);return r.addEventListener(e,a),()=>{r.removeEventListener(e,a)}}function JO(r,e,t,n){let a;return s_(r,"mouseover",e,(i,o)=>{if(o!==a){a=o,t(i,o);let s=l=>{a=null,n(l,o),o.removeEventListener("mouseleave",s)};o.addEventListener("mouseleave",s)}})}const am=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function eN(r,e){let t=n=>{e(n),am.forEach(a=>{r.removeEventListener(a,t)})};am.forEach(n=>{r.addEventListener(n,t)})}function l_(r){return Object.assign({onClick:r},u_(r))}function u_(r){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(r(e),e.preventDefault())}}}let im=0;function Ln(){return im+=1,String(im)}function Sf(){document.body.classList.add("fc-not-allowed")}function _f(){document.body.classList.remove("fc-not-allowed")}function tN(r){r.style.userSelect="none",r.style.webkitUserSelect="none",r.addEventListener("selectstart",al)}function rN(r){r.style.userSelect="",r.style.webkitUserSelect="",r.removeEventListener("selectstart",al)}function nN(r){r.addEventListener("contextmenu",al)}function aN(r){r.removeEventListener("contextmenu",al)}function iN(r){let e=[],t=[],n,a;for(typeof r=="string"?t=r.split(/\s*,\s*/):typeof r=="function"?t=[r]:Array.isArray(r)&&(t=r),n=0;n<t.length;n+=1)a=t[n],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function oN(r,e,t){let n,a;for(n=0;n<t.length;n+=1)if(a=sN(r,e,t[n]),a)return a;return 0}function sN(r,e,t){return t.func?t.func(r,e):lN(r[t.field],e[t.field])*(t.order||1)}function lN(r,e){return!r&&!e?0:e==null?-1:r==null?1:typeof r=="string"||typeof e=="string"?String(r).localeCompare(String(e)):r-e}function Cu(r,e){let t=String(r);return"000".substr(0,e-t.length)+t}function Za(r,e,t){return typeof r=="function"?r(...e):typeof r=="string"?e.reduce((n,a,i)=>n.replace("$"+i,a||""),r):t}function uN(r,e){return r-e}function Du(r){return r%1===0}function cN(r){let e=r.querySelector(".fc-scrollgrid-shrink-frame"),t=r.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return r.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const dN=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function _e(r,e){return typeof r=="string"?fN(r):typeof r=="object"&&r?om(r):typeof r=="number"?om({[e||"milliseconds"]:r}):null}function fN(r){let e=dN.exec(r);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function om(r){let e={years:r.years||r.year||0,months:r.months||r.month||0,days:r.days||r.day||0,milliseconds:(r.hours||r.hour||0)*60*60*1e3+(r.minutes||r.minute||0)*60*1e3+(r.seconds||r.second||0)*1e3+(r.milliseconds||r.millisecond||r.ms||0)},t=r.weeks||r.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function hN(r,e){return r.years===e.years&&r.months===e.months&&r.days===e.days&&r.milliseconds===e.milliseconds}function vN(r,e){return{years:r.years-e.years,months:r.months-e.months,days:r.days-e.days,milliseconds:r.milliseconds-e.milliseconds}}function pN(r){return aa(r)/365}function gN(r){return aa(r)/30}function aa(r){return _i(r)/864e5}function _i(r){return r.years*(365*864e5)+r.months*(30*864e5)+r.days*864e5+r.milliseconds}function kc(r){let e=r.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return r.days?r.specifiedWeeks&&r.days%7===0?{unit:"week",value:r.days/7}:{unit:"day",value:r.days}:r.months?{unit:"month",value:r.months}:r.years?{unit:"year",value:r.years}:{unit:"millisecond",value:0}}function $r(r,e,t){if(r===e)return!0;let n=r.length,a;if(n!==e.length)return!1;for(a=0;a<n;a+=1)if(!(t?t(r[a],e[a]):r[a]===e[a]))return!1;return!0}const mN=["sun","mon","tue","wed","thu","fri","sat"];function sm(r,e){let t=Or(r);return t[2]+=e*7,St(t)}function ut(r,e){let t=Or(r);return t[2]+=e,St(t)}function Yr(r,e){let t=Or(r);return t[6]+=e,St(t)}function yN(r,e){return xa(r,e)/7}function xa(r,e){return(e.valueOf()-r.valueOf())/(1e3*60*60*24)}function bN(r,e){return(e.valueOf()-r.valueOf())/(1e3*60*60)}function SN(r,e){return(e.valueOf()-r.valueOf())/(1e3*60)}function _N(r,e){return(e.valueOf()-r.valueOf())/1e3}function wN(r,e){let t=Le(r),n=Le(e);return{years:0,months:0,days:Math.round(xa(t,n)),milliseconds:e.valueOf()-n.valueOf()-(r.valueOf()-t.valueOf())}}function xN(r,e){let t=vs(r,e);return t!==null&&t%7===0?t/7:null}function vs(r,e){return Nr(r)===Nr(e)?Math.round(xa(r,e)):null}function Le(r){return St([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()])}function AN(r){return St([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours()])}function CN(r){return St([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes()])}function DN(r){return St([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()])}function TN(r,e,t){let n=r.getUTCFullYear(),a=Tu(r,n,e,t);if(a<1)return Tu(r,n-1,e,t);let i=Tu(r,n+1,e,t);return i>=1?Math.min(a,i):a}function Tu(r,e,t,n){let a=St([e,0,1+EN(e,t,n)]),i=Le(r),o=Math.round(xa(a,i));return Math.floor(o/7)+1}function EN(r,e,t){let n=7+e-t;return-((7+St([r,0,n]).getUTCDay()-e)%7)+n-1}function lm(r){return[r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()]}function um(r){return new Date(r[0],r[1]||0,r[2]==null?1:r[2],r[3]||0,r[4]||0,r[5]||0)}function Or(r){return[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()]}function St(r){return r.length===1&&(r=r.concat([0])),new Date(Date.UTC(...r))}function c_(r){return!isNaN(r.valueOf())}function Nr(r){return r.getUTCHours()*1e3*60*60+r.getUTCMinutes()*1e3*60+r.getUTCSeconds()*1e3+r.getUTCMilliseconds()}function MN(r,e,t=!1){let n=r.toISOString();return n=n.replace(".000",""),t&&(n=n.replace("T00:00:00Z","")),n.length>10&&(e==null?n=n.replace("Z",""):e!==0&&(n=n.replace("Z",xf(e,!0)))),n}function wf(r){return r.toISOString().replace(/T.*$/,"")}function IN(r){return r.toISOString().match(/^\d{4}-\d{2}/)[0]}function xf(r,e=!1){let t=r<0?"-":"+",n=Math.abs(r),a=Math.floor(n/60),i=Math.round(n%60);return e?`${t+Cu(a,2)}:${Cu(i,2)}`:`GMT${t}${a}${i?`:${Cu(i,2)}`:""}`}function me(r,e,t){let n,a;return function(...i){if(!n)a=r.apply(this,i);else if(!$r(n,i)){let o=r.apply(this,i);(!e||!e(o,a))&&(a=o)}return n=i,a}}function No(r,e,t){let n,a;return i=>(n?tr(n,i)||(a=r.call(this,i)):a=r.call(this,i),n=i,a)}const Eu={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},ps={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},yo=/\s*([ap])\.?m\.?/i,RN=/,/g,LN=/\s+/g,PN=/\u200e/g,kN=/UTC|GMT/;class ON{constructor(e){let t={},n={},a=9;for(let i in e)i in Eu?(n[i]=e[i],Eu[i]<9&&(a=Math.min(Eu[i],a))):(t[i]=e[i],i in ps&&(a=Math.min(ps[i],a)));this.standardDateProps=t,this.extendedSettings=n,this.smallestUnitNum=a,this.buildFormattingFunc=me(cm)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,n,a){let{standardDateProps:i,extendedSettings:o}=this,s=GN(e.marker,t.marker,n.calendarSystem);if(!s)return this.format(e,n);let l=s;l>1&&(i.year==="numeric"||i.year==="2-digit")&&(i.month==="numeric"||i.month==="2-digit")&&(i.day==="numeric"||i.day==="2-digit")&&(l=1);let u=this.format(e,n),c=this.format(t,n);if(u===c)return u;let d=FN(i,l),f=cm(d,o,n),h=f(e),v=f(t),p=WN(u,h,c,v),g=o.separator||a||n.defaultSeparator||"";return p?p.before+h+g+v+p.after:u+g+c}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function cm(r,e,t){let n=Object.keys(r).length;return n===1&&r.timeZoneName==="short"?a=>xf(a.timeZoneOffset):n===0&&e.week?a=>HN(t.computeWeekNumber(a.marker),t.weekText,t.weekTextLong,t.locale,e.week):NN(r,e,t)}function NN(r,e,t){r=Object.assign({},r),e=Object.assign({},e),VN(r,e),r.timeZone="UTC";let n=new Intl.DateTimeFormat(t.locale.codes,r),a;if(e.omitZeroMinute){let i=Object.assign({},r);delete i.minute,a=new Intl.DateTimeFormat(t.locale.codes,i)}return i=>{let{marker:o}=i,s;a&&!o.getUTCMinutes()?s=a:s=n;let l=s.format(o);return BN(l,i,r,e,t)}}function VN(r,e){r.timeZoneName&&(r.hour||(r.hour="2-digit"),r.minute||(r.minute="2-digit")),r.timeZoneName==="long"&&(r.timeZoneName="short"),e.omitZeroMinute&&(r.second||r.millisecond)&&delete e.omitZeroMinute}function BN(r,e,t,n,a){return r=r.replace(PN,""),t.timeZoneName==="short"&&(r=zN(r,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":xf(e.timeZoneOffset))),n.omitCommas&&(r=r.replace(RN,"").trim()),n.omitZeroMinute&&(r=r.replace(":00","")),n.meridiem===!1?r=r.replace(yo,"").trim():n.meridiem==="narrow"?r=r.replace(yo,(i,o)=>o.toLocaleLowerCase()):n.meridiem==="short"?r=r.replace(yo,(i,o)=>`${o.toLocaleLowerCase()}m`):n.meridiem==="lowercase"&&(r=r.replace(yo,i=>i.toLocaleLowerCase())),r=r.replace(LN," "),r=r.trim(),r}function zN(r,e){let t=!1;return r=r.replace(kN,()=>(t=!0,e)),t||(r+=` ${e}`),r}function HN(r,e,t,n,a){let i=[];return a==="long"?i.push(t):(a==="short"||a==="narrow")&&i.push(e),(a==="long"||a==="short")&&i.push(" "),i.push(n.simpleNumberFormat.format(r)),n.options.direction==="rtl"&&i.reverse(),i.join("")}function GN(r,e,t){return t.getMarkerYear(r)!==t.getMarkerYear(e)?5:t.getMarkerMonth(r)!==t.getMarkerMonth(e)?4:t.getMarkerDay(r)!==t.getMarkerDay(e)?2:Nr(r)!==Nr(e)?1:0}function FN(r,e){let t={};for(let n in r)(!(n in ps)||ps[n]<=e)&&(t[n]=r[n]);return t}function WN(r,e,t,n){let a=0;for(;a<r.length;){let i=r.indexOf(e,a);if(i===-1)break;let o=r.substr(0,i);a=i+e.length;let s=r.substr(a),l=0;for(;l<t.length;){let u=t.indexOf(n,l);if(u===-1)break;let c=t.substr(0,u);l=u+n.length;let d=t.substr(l);if(o===c&&s===d)return{before:o,after:s}}}return null}function dm(r,e){let t=e.markerToArray(r.marker);return{marker:r.marker,timeZoneOffset:r.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function gs(r,e,t,n){let a=dm(r,t.calendarSystem),i=e?dm(e,t.calendarSystem):null;return{date:a,start:a,end:i,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:n||t.defaultSeparator}}class UN{constructor(e){this.cmdStr=e}format(e,t,n){return t.cmdFormatter(this.cmdStr,gs(e,null,t,n))}formatRange(e,t,n,a){return n.cmdFormatter(this.cmdStr,gs(e,t,n,a))}}class jN{constructor(e){this.func=e}format(e,t,n){return this.func(gs(e,null,t,n))}formatRange(e,t,n,a){return this.func(gs(e,t,n,a))}}function tt(r){return typeof r=="object"&&r?new ON(r):typeof r=="string"?new UN(r):typeof r=="function"?new jN(r):null}const fm={navLinkDayClick:k,navLinkWeekClick:k,duration:_e,bootstrapFontAwesome:k,buttonIcons:k,customButtons:k,defaultAllDayEventDuration:_e,defaultTimedEventDuration:_e,nextDayThreshold:_e,scrollTime:_e,scrollTimeReset:Boolean,slotMinTime:_e,slotMaxTime:_e,dayPopoverFormat:tt,slotDuration:_e,snapDuration:_e,headerToolbar:k,footerToolbar:k,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:tt,dayHeaderClassNames:k,dayHeaderContent:k,dayHeaderDidMount:k,dayHeaderWillUnmount:k,dayCellClassNames:k,dayCellContent:k,dayCellDidMount:k,dayCellWillUnmount:k,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:k,weekNumbers:Boolean,weekNumberClassNames:k,weekNumberContent:k,weekNumberDidMount:k,weekNumberWillUnmount:k,editable:Boolean,viewClassNames:k,viewDidMount:k,viewWillUnmount:k,nowIndicator:Boolean,nowIndicatorClassNames:k,nowIndicatorContent:k,nowIndicatorDidMount:k,nowIndicatorWillUnmount:k,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:k,locale:k,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:k,eventOrder:iN,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:k,contentHeight:k,direction:String,weekNumberFormat:tt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:k,initialDate:k,now:k,eventDataTransform:k,stickyHeaderDates:k,stickyFooterScrollbar:k,viewHeight:k,defaultAllDay:Boolean,eventSourceFailure:k,eventSourceSuccess:k,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:k,eventConstraint:k,eventAllow:k,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:k,eventContent:k,eventDidMount:k,eventWillUnmount:k,selectConstraint:k,selectOverlap:k,selectAllow:k,droppable:Boolean,unselectCancel:String,slotLabelFormat:k,slotLaneClassNames:k,slotLaneContent:k,slotLaneDidMount:k,slotLaneWillUnmount:k,slotLabelClassNames:k,slotLabelContent:k,slotLabelDidMount:k,slotLabelWillUnmount:k,dayMaxEvents:k,dayMaxEventRows:k,dayMinWidth:Number,slotLabelInterval:_e,allDayText:String,allDayClassNames:k,allDayContent:k,allDayDidMount:k,allDayWillUnmount:k,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:tt,rerenderDelay:Number,moreLinkText:k,moreLinkHint:k,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:k,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:_e,hiddenDays:k,fixedWeekCount:Boolean,validRange:k,visibleRange:k,titleFormat:k,eventInteractive:Boolean,noEventsText:String,viewHint:k,navLinkHint:k,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:k,moreLinkClassNames:k,moreLinkContent:k,moreLinkDidMount:k,moreLinkWillUnmount:k,monthStartFormat:tt,handleCustomRendering:k,customRenderingMetaMap:k,customRenderingReplaces:Boolean},Xa={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},hm={datesSet:k,eventsSet:k,eventAdd:k,eventChange:k,eventRemove:k,windowResize:k,eventClick:k,eventMouseEnter:k,eventMouseLeave:k,select:k,unselect:k,loading:k,_unmount:k,_beforeprint:k,_afterprint:k,_noEventDrop:k,_noEventResize:k,_resize:k,_scrollRequest:k},vm={buttonText:k,buttonHints:k,views:k,plugins:k,initialEvents:k,events:k,eventSources:k},ln={headerToolbar:un,footerToolbar:un,buttonText:un,buttonHints:un,buttonIcons:un,dateIncrement:un,plugins:bo,events:bo,eventSources:bo,resources:bo};function un(r,e){return typeof r=="object"&&typeof e=="object"&&r&&e?tr(r,e):r===e}function bo(r,e){return Array.isArray(r)&&Array.isArray(e)?$r(r,e):r===e}const $N={type:String,component:k,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:k,usesMinMaxTime:Boolean,classNames:k,content:k,didMount:k,willUnmount:k};function Mu(r){return Cf(r,ln)}function Af(r,e){let t={},n={};for(let a in e)a in r&&(t[a]=e[a](r[a]));for(let a in r)a in e||(n[a]=r[a]);return{refined:t,extra:n}}function k(r){return r}const{hasOwnProperty:ms}=Object.prototype;function Cf(r,e){let t={};if(e){for(let n in e)if(e[n]===un){let a=[];for(let i=r.length-1;i>=0;i-=1){let o=r[i][n];if(typeof o=="object"&&o)a.unshift(o);else if(o!==void 0){t[n]=o;break}}a.length&&(t[n]=Cf(a))}}for(let n=r.length-1;n>=0;n-=1){let a=r[n];for(let i in a)i in t||(t[i]=a[i])}return t}function En(r,e){let t={};for(let n in r)e(r[n],n)&&(t[n]=r[n]);return t}function Pn(r,e){let t={};for(let n in r)t[n]=e(r[n],n);return t}function d_(r){let e={};for(let t of r)e[t]=!0;return e}function Df(r){let e=[];for(let t in r)e.push(r[t]);return e}function tr(r,e){if(r===e)return!0;for(let t in r)if(ms.call(r,t)&&!(t in e))return!1;for(let t in e)if(ms.call(e,t)&&r[t]!==e[t])return!1;return!0}const YN=/^on[A-Z]/;function ZN(r,e){const t=XN(r,e);for(let n of t)if(!YN.test(n))return!1;return!0}function XN(r,e){let t=[];for(let n in r)ms.call(r,n)&&(n in e||t.push(n));for(let n in e)ms.call(e,n)&&r[n]!==e[n]&&t.push(n);return t}function Iu(r,e,t={}){if(r===e)return!0;for(let n in e)if(!(n in r&&qN(r[n],e[n],t[n])))return!1;for(let n in r)if(!(n in e))return!1;return!0}function qN(r,e,t){return r===e||t===!0?!0:t?t(r,e):!1}function QN(r,e=0,t,n=1){let a=[];t==null&&(t=Object.keys(r).length);for(let i=e;i<t;i+=n){let o=r[i];o!==void 0&&a.push(o)}return a}let f_={};function KN(r,e){f_[r]=e}function JN(r){return new f_[r]}class eV{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return St(e)}markerToArray(e){return Or(e)}}KN("gregory",eV);const tV=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function rV(r){let e=tV.exec(r);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(c_(t)){let n=null;return e[13]&&(n=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:n}}}return null}class nV{constructor(e){let t=this.timeZone=e.timeZone,n=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!n||this.namedTimeZoneImpl),this.calendarSystem=JN(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):St(lm(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=St(e)),t===null||!c_(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=rV(e);if(t===null)return null;let{marker:n}=t,a=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-t.timeZoneOffset*60*1e3):a=t.timeZoneOffset),{marker:n,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let n=this.calendarSystem.markerToArray(e);return n[0]+=t.years,n[1]+=t.months,n[2]+=t.days,n[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(n)}subtract(e,t){let n=this.calendarSystem.markerToArray(e);return n[0]-=t.years,n[1]-=t.months,n[2]-=t.days,n[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(n)}addYears(e,t){let n=this.calendarSystem.markerToArray(e);return n[0]+=t,this.calendarSystem.arrayToMarker(n)}addMonths(e,t){let n=this.calendarSystem.markerToArray(e);return n[1]+=t,this.calendarSystem.arrayToMarker(n)}diffWholeYears(e,t){let{calendarSystem:n}=this;return Nr(e)===Nr(t)&&n.getMarkerDay(e)===n.getMarkerDay(t)&&n.getMarkerMonth(e)===n.getMarkerMonth(t)?n.getMarkerYear(t)-n.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:n}=this;return Nr(e)===Nr(t)&&n.getMarkerDay(e)===n.getMarkerDay(t)?n.getMarkerMonth(t)-n.getMarkerMonth(e)+(n.getMarkerYear(t)-n.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let n=this.diffWholeYears(e,t);return n!==null?{unit:"year",value:n}:(n=this.diffWholeMonths(e,t),n!==null?{unit:"month",value:n}:(n=xN(e,t),n!==null?{unit:"week",value:n}:(n=vs(e,t),n!==null?{unit:"day",value:n}:(n=bN(e,t),Du(n)?{unit:"hour",value:n}:(n=SN(e,t),Du(n)?{unit:"minute",value:n}:(n=_N(e,t),Du(n)?{unit:"second",value:n}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,n){let a;return n.years&&(a=this.diffWholeYears(e,t),a!==null)?a/pN(n):n.months&&(a=this.diffWholeMonths(e,t),a!==null)?a/gN(n):n.days&&(a=vs(e,t),a!==null)?a/aa(n):(t.valueOf()-e.valueOf())/_i(n)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?Le(e):t==="hour"?AN(e):t==="minute"?CN(e):t==="second"?DN(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):TN(e,this.weekDow,this.weekDoy)}format(e,t,n={}){return t.format({marker:e,timeZoneOffset:n.forcedTzo!=null?n.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,n,a={}){return a.isEndExclusive&&(t=Yr(t,-1)),n.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(t)},this,a.defaultSeparator)}formatIso(e,t={}){let n=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?n=t.forcedTzo:n=this.offsetForMarker(e)),MN(e,n,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?St(lm(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):St(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-um(Or(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Or(e)):null}toDate(e,t){return this.timeZone==="local"?um(Or(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Or(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class zi{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,n;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(n in e)t[n]=this.applyIconOverridePrefix(e[n]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let n;return t&&this.rtlIconClasses?n=this.rtlIconClasses[e]||this.iconClasses[e]:n=this.iconClasses[e],n?`${this.baseIconClass} ${n}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}zi.prototype.classes={};zi.prototype.iconClasses={};zi.prototype.baseIconClass="";zi.prototype.iconOverridePrefix="";function ys(r){r();let e=ee.debounceRendering,t=[];function n(a){t.push(a)}for(ee.debounceRendering=n,Si(O(aV,{}),document.createElement("div"));t.length;)t.shift()();ee.debounceRendering=e}class aV extends Rt{render(){return O("div",{})}componentDidMount(){this.setState({})}}function h_(r){let e=MO(r),t=e.Provider;return e.Provider=function(){let n=!this.getChildContext,a=t.apply(this,arguments);if(n){let i=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&i.forEach(s=>{s.context=o.value,s.forceUpdate()})},this.sub=o=>{i.push(o);let s=o.componentWillUnmount;o.componentWillUnmount=()=>{i.splice(i.indexOf(o),1),s&&s.call(o)}}}return a},e}class iV{constructor(e,t,n,a){this.execFunc=e,this.emitter=t,this.scrollTime=n,this.scrollTimeReset=a,this.handleScrollRequest=i=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},i),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const kn=h_({});function oV(r,e,t,n,a,i,o,s,l,u,c,d,f,h){return{dateEnv:a,nowManager:i,options:t,pluginHooks:s,emitter:c,dispatch:l,getCurrentData:u,calendarApi:d,viewSpec:r,viewApi:e,dateProfileGenerator:n,theme:o,isRtl:t.direction==="rtl",addResizeHandler(v){c.on("_resize",v)},removeResizeHandler(v){c.off("_resize",v)},createScrollResponder(v){return new iV(v,c,_e(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:f,unregisterInteractiveComponent:h}}class On extends Rt{shouldComponentUpdate(e,t){return!Iu(this.props,e,this.propEquality)||!Iu(this.state,t,this.stateEquality)}safeSetState(e){Iu(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}On.addPropsEquality=sV;On.addStateEquality=lV;On.contextType=kn;On.prototype.propEquality={};On.prototype.stateEquality={};class Ve extends On{}Ve.contextType=kn;function sV(r){let e=Object.create(this.prototype.propEquality);Object.assign(e,r),this.prototype.propEquality=e}function lV(r){let e=Object.create(this.prototype.stateEquality);Object.assign(e,r),this.prototype.stateEquality=e}function dr(r,e){typeof r=="function"?r(e):r&&(r.current=e)}class Tf extends Ve{constructor(){super(...arguments),this.id=Ln(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:n}=this.props;(!t.customRenderingReplaces||!Oc(n,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&dr(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:n}=t,{customGenerator:a,defaultGenerator:i,renderProps:o}=e,s=v_(e,[],this.handleEl);let l=!1,u,c=[],d;if(a!=null){const f=typeof a=="function"?a(o,O):a;if(f===!0)l=!0;else{const h=f&&typeof f=="object";h&&"html"in f?s.dangerouslySetInnerHTML={__html:f.html}:h&&"domNodes"in f?c=Array.prototype.slice.call(f.domNodes):(h?BS(f):typeof f!="function")?u=f:d=f}}else l=!Oc(e.generatorName,n);return l&&i&&(u=i(o)),this.queuedDomNodes=c,this.currentGeneratorMeta=d,O(e.elTag,s,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:n,context:a}=this,{handleCustomRendering:i,customRenderingMetaMap:o}=a.options;if(i){const s=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:o==null?void 0:o[n.generatorName];s&&i(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:s},n),{elClasses:(n.elClasses||[]).filter(uV)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,n=this.base;if(!$r(e,t)){t.forEach(bf);for(let a of e)n.appendChild(a);this.currentDomNodes=e}}}Tf.addPropsEquality({elClasses:$r,elStyle:tr,elAttrs:ZN,renderProps:tr});function Oc(r,e){var t;return!!(e.handleCustomRendering&&r&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[r]))}function v_(r,e,t){const n=Object.assign(Object.assign({},r.elAttrs),{ref:t});return(r.elClasses||e)&&(n.className=(r.elClasses||[]).concat(e||[]).concat(n.className||[]).filter(Boolean).join(" ")),r.elStyle&&(n.style=r.elStyle),n}function uV(r){return!!r}const p_=h_(0);class Tr extends Rt{constructor(){super(...arguments),this.InnerContent=cV.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(dr(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=dV(e.classNameGenerator,e.renderProps);if(e.children){const n=v_(e,t,this.handleEl),a=e.children(this.InnerContent,e.renderProps,n);return e.elTag?O(e.elTag,n,a):a}else return O(Tf,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Tr.contextType=p_;function cV(r,e){const t=r.props;return O(Tf,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:r.context},e))}function dV(r,e){const t=typeof r=="function"?r(e):r||[];return typeof t=="string"?[t]:t}class pm extends Ve{render(){let{props:e,context:t}=this,{options:n}=t,a={view:t.viewApi};return O(Tr,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...g_(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,classNameGenerator:n.viewClassNames,generatorName:void 0,didMount:n.viewDidMount,willUnmount:n.viewWillUnmount},()=>e.children)}}function g_(r){return[`fc-${r.type}-view`,"fc-view"]}function fV(r,e){let t=null,n=null;return r.start&&(t=e.createMarker(r.start)),r.end&&(n=e.createMarker(r.end)),!t&&!n||t&&n&&n<t?null:{start:t,end:n}}function gm(r,e){let t=[],{start:n}=e,a,i;for(r.sort(hV),a=0;a<r.length;a+=1)i=r[a],i.start>n&&t.push({start:n,end:i.start}),i.end>n&&(n=i.end);return n<e.end&&t.push({start:n,end:e.end}),t}function hV(r,e){return r.start.valueOf()-e.start.valueOf()}function da(r,e){let{start:t,end:n}=r,a=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(n===null?n=e.end:n=new Date(Math.min(n.valueOf(),e.end.valueOf()))),(t===null||n===null||t<n)&&(a={start:t,end:n}),a}function vV(r,e){return(r.start===null?null:r.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(r.end===null?null:r.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Ef(r,e){return(r.end===null||e.start===null||r.end>e.start)&&(r.start===null||e.end===null||r.start<e.end)}function il(r,e){return(r.start===null||e.start!==null&&e.start>=r.start)&&(r.end===null||e.end!==null&&e.end<=r.end)}function Hr(r,e){return(r.start===null||e>=r.start)&&(r.end===null||e<r.end)}function pV(r,e){return e.start!=null&&r<e.start?e.start:e.end!=null&&r>=e.end?new Date(e.end.valueOf()-1):r}function m_(r){let e=Math.floor(xa(r.start,r.end))||1,t=Le(r.start),n=ut(t,e);return{start:t,end:n}}function y_(r,e=_e(0)){let t=null,n=null;if(r.end){n=Le(r.end);let a=r.end.valueOf()-n.valueOf();a&&a>=_i(e)&&(n=ut(n,1))}return r.start&&(t=Le(r.start),n&&n<=t&&(n=ut(t,1))),{start:t,end:n}}function ea(r,e,t,n){return n==="year"?_e(t.diffWholeYears(r,e),"year"):n==="month"?_e(t.diffWholeMonths(r,e),"month"):wN(r,e)}class b_{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,n){let{dateEnv:a}=this.props,i=a.subtract(a.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(i,-1,n)}buildNext(e,t,n){let{dateEnv:a}=this.props,i=a.add(a.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(i,1,n)}build(e,t,n=!0){let{props:a}=this,i,o,s,l,u,c;return i=this.buildValidRange(),i=this.trimHiddenDays(i),n&&(e=pV(e,i)),o=this.buildCurrentRangeInfo(e,t),s=/^(year|month|week|day)$/.test(o.unit),l=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,s),l=this.trimHiddenDays(l),u=l,a.showNonCurrentDates||(u=da(u,o.range)),u=this.adjustActiveRange(u),u=da(u,i),c=Ef(o.range,i),Hr(l,e)||(e=l.start),{currentDate:e,validRange:i,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:s,activeRange:u,renderRange:l,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:c,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:n}=this,a=null,i=null,o=null,s;return n.duration?(a=n.duration,i=n.durationUnit,o=this.buildRangeFromDuration(e,t,a,i)):(s=this.props.dayCount)?(i="day",o=this.buildRangeFromDayCount(e,t,s)):(o=this.buildCustomVisibleRange(e))?i=n.dateEnv.greatestWholeUnit(o.start,o.end).unit:(a=this.getFallbackDuration(),i=kc(a).unit,o=this.buildRangeFromDuration(e,t,a,i)),{duration:a,unit:i,range:o}}getFallbackDuration(){return _e({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:n,slotMinTime:a,slotMaxTime:i}=this.props,{start:o,end:s}=e;return n&&(aa(a)<0&&(o=Le(o),o=t.add(o,a)),aa(i)>1&&(s=Le(s),s=ut(s,-1),s=t.add(s,i))),{start:o,end:s}}buildRangeFromDuration(e,t,n,a){let{dateEnv:i,dateAlignment:o}=this.props,s,l,u;if(!o){let{dateIncrement:d}=this.props;d&&_i(d)<_i(n)?o=kc(d).unit:o=a}aa(n)<=1&&this.isHiddenDay(s)&&(s=this.skipHiddenDays(s,t),s=Le(s));function c(){s=i.startOf(e,o),l=i.add(s,n),u={start:s,end:l}}return c(),this.trimHiddenDays(u)||(e=this.skipHiddenDays(e,t),c()),u}buildRangeFromDayCount(e,t,n){let{dateEnv:a,dateAlignment:i}=this.props,o=0,s=e,l;i&&(s=a.startOf(s,i)),s=Le(s),s=this.skipHiddenDays(s,t),l=s;do l=ut(l,1),this.isHiddenDay(l)||(o+=1);while(o<n);return{start:s,end:l}}buildCustomVisibleRange(e){let{props:t}=this,n=t.visibleRangeInput,a=typeof n=="function"?n.call(t.calendarApi,t.dateEnv.toDate(e)):n,i=this.refineRange(a);return i&&(i.start==null||i.end==null)?null:i}buildRenderRange(e,t,n){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,n;return t||((n=this.props.dateAlignment)?_e(1,n):e||_e({days:1}))}refineRange(e){if(e){let t=fV(e,this.props.dateEnv);return t&&(t=y_(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],n=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(t[a]=e.indexOf(a)!==-1)||(n+=1);if(!n)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:n}=e;return t&&(t=this.skipHiddenDays(t)),n&&(n=this.skipHiddenDays(n,-1,!0)),t==null||n==null||t<n?{start:t,end:n}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,n=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(n?t:0)+7)%7];)e=ut(e,t);return e}}function Mf(r,e,t,n){return{instanceId:Ln(),defId:r,range:e,forcedStartTzo:t??null,forcedEndTzo:n??null}}function gV(r,e,t,n){for(let a=0;a<n.length;a+=1){let i=n[a].parse(r,t);if(i){let{allDay:o}=r;return o==null&&(o=e,o==null&&(o=i.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:i.duration,typeData:i.typeData,typeId:a}}}return null}function Mn(r,e,t){let{dateEnv:n,pluginHooks:a,options:i}=t,{defs:o,instances:s}=r;s=En(s,l=>!o[l.defId].recurringDef);for(let l in o){let u=o[l];if(u.recurringDef){let{duration:c}=u.recurringDef;c||(c=u.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration);let d=mV(u,c,e,n,a.recurringTypes);for(let f of d){let h=Mf(l,{start:f,end:n.add(f,c)});s[h.instanceId]=h}}}return{defs:o,instances:s}}function mV(r,e,t,n,a){let o=a[r.recurringDef.typeId].expand(r.recurringDef.typeData,{start:n.subtract(t.start,e),end:t.end},n);return r.allDay&&(o=o.map(Le)),o}const Vo={id:String,groupId:String,title:String,url:String,interactive:Boolean},S_={start:k,end:k,date:k,allDay:Boolean},yV=Object.assign(Object.assign(Object.assign({},Vo),S_),{extendedProps:k});function __(r,e,t,n,a=If(t),i,o){let{refined:s,extra:l}=w_(r,t,a),u=SV(e,t),c=gV(s,u,t.dateEnv,t.pluginHooks.recurringTypes);if(c){let f=Nc(s,l,e?e.sourceId:"",c.allDay,!!c.duration,t,i);return f.recurringDef={typeId:c.typeId,typeData:c.typeData,duration:c.duration},{def:f,instance:null}}let d=bV(s,u,t,n);if(d){let f=Nc(s,l,e?e.sourceId:"",d.allDay,d.hasEnd,t,i),h=Mf(f.defId,d.range,d.forcedStartTzo,d.forcedEndTzo);return o&&f.publicId&&o[f.publicId]&&(h.instanceId=o[f.publicId]),{def:f,instance:h}}return null}function w_(r,e,t=If(e)){return Af(r,t)}function If(r){return Object.assign(Object.assign(Object.assign({},bs),yV),r.pluginHooks.eventRefiners)}function Nc(r,e,t,n,a,i,o){let s={title:r.title||"",groupId:r.groupId||"",publicId:r.id||"",url:r.url||"",recurringDef:null,defId:(o&&r.id?o[r.id]:"")||Ln(),sourceId:t,allDay:n,hasEnd:a,interactive:r.interactive,ui:Ss(r,i),extendedProps:Object.assign(Object.assign({},r.extendedProps||{}),e)};for(let l of i.pluginHooks.eventDefMemberAdders)Object.assign(s,l(r));return Object.freeze(s.ui.classNames),Object.freeze(s.extendedProps),s}function bV(r,e,t,n){let{allDay:a}=r,i,o=null,s=!1,l,u=null,c=r.start!=null?r.start:r.date;if(i=t.dateEnv.createMarkerMeta(c),i)o=i.marker;else if(!n)return null;return r.end!=null&&(l=t.dateEnv.createMarkerMeta(r.end)),a==null&&(e!=null?a=e:a=(!i||i.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),a&&o&&(o=Le(o)),l&&(u=l.marker,a&&(u=Le(u)),o&&u<=o&&(u=null)),u?s=!0:n||(s=t.options.forceEventDuration||!1,u=t.dateEnv.add(o,a?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:a,hasEnd:s,range:{start:o,end:u},forcedStartTzo:i?i.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function SV(r,e){let t=null;return r&&(t=r.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function wi(r,e,t,n,a,i){let o=Jt(),s=If(t);for(let l of r){let u=__(l,e,t,n,s,a,i);u&&Vc(u,o)}return o}function Vc(r,e=Jt()){return e.defs[r.def.defId]=r.def,r.instance&&(e.instances[r.instance.instanceId]=r.instance),e}function Rf(r,e){let t=r.instances[e];if(t){let n=r.defs[t.defId],a=ol(r,i=>_V(n,i));return a.defs[n.defId]=n,a.instances[t.instanceId]=t,a}return Jt()}function _V(r,e){return!!(r.groupId&&r.groupId===e.groupId)}function Jt(){return{defs:{},instances:{}}}function Lf(r,e){return{defs:Object.assign(Object.assign({},r.defs),e.defs),instances:Object.assign(Object.assign({},r.instances),e.instances)}}function ol(r,e){let t=En(r.defs,e),n=En(r.instances,a=>t[a.defId]);return{defs:t,instances:n}}function wV(r,e){let{defs:t,instances:n}=r,a={},i={};for(let o in t)e.defs[o]||(a[o]=t[o]);for(let o in n)!e.instances[o]&&a[n[o].defId]&&(i[o]=n[o]);return{defs:a,instances:i}}function xV(r,e){return Array.isArray(r)?wi(r,null,e,!0):typeof r=="object"&&r?wi([r],null,e,!0):r!=null?String(r):null}function mm(r){return Array.isArray(r)?r:typeof r=="string"?r.split(/\s+/):[]}const bs={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:k,overlap:k,allow:k,className:mm,classNames:mm,color:String,backgroundColor:String,borderColor:String,textColor:String},AV={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Ss(r,e){let t=xV(r.constraint,e);return{display:r.display||null,startEditable:r.startEditable!=null?r.startEditable:r.editable,durationEditable:r.durationEditable!=null?r.durationEditable:r.editable,constraints:t!=null?[t]:[],overlap:r.overlap!=null?r.overlap:null,allows:r.allow!=null?[r.allow]:[],backgroundColor:r.backgroundColor||r.color||"",borderColor:r.borderColor||r.color||"",textColor:r.textColor||"",classNames:(r.className||[]).concat(r.classNames||[])}}function CV(r){return r.reduce(DV,AV)}function DV(r,e){return{display:e.display!=null?e.display:r.display,startEditable:e.startEditable!=null?e.startEditable:r.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:r.durationEditable,constraints:r.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:r.overlap,allows:r.allows.concat(e.allows),backgroundColor:e.backgroundColor||r.backgroundColor,borderColor:e.borderColor||r.borderColor,textColor:e.textColor||r.textColor,classNames:r.classNames.concat(e.classNames)}}const TV={id:String,defaultAllDay:Boolean,url:String,format:String,events:k,eventDataTransform:k,success:k,failure:k};function x_(r,e,t=A_(e)){let n;if(typeof r=="string"?n={url:r}:typeof r=="function"||Array.isArray(r)?n={events:r}:typeof r=="object"&&r&&(n=r),n){let{refined:a,extra:i}=Af(n,t),o=EV(a,e);if(o)return{_raw:r,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:Ln(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Ss(a,e),extendedProps:i}}return null}function A_(r){return Object.assign(Object.assign(Object.assign({},bs),TV),r.pluginHooks.eventSourceRefiners)}function EV(r,e){let t=e.pluginHooks.eventSourceDefs;for(let n=t.length-1;n>=0;n-=1){let i=t[n].parseMeta(r);if(i)return{sourceDefId:n,meta:i}}return null}function MV(r,e,t,n,a){switch(e.type){case"RECEIVE_EVENTS":return IV(r,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return RV(r,t[e.sourceId],e.rawEvents,n.activeRange,a);case"ADD_EVENTS":return LV(r,e.eventStore,n?n.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Lf(r,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?Mn(r,n.activeRange,a):r;case"REMOVE_EVENTS":return wV(r,e.eventStore);case"REMOVE_EVENT_SOURCE":return D_(r,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return ol(r,i=>!i.sourceId);case"REMOVE_ALL_EVENTS":return Jt();default:return r}}function IV(r,e,t,n,a,i){if(e&&t===e.latestFetchId){let o=wi(C_(a,e,i),e,i);return n&&(o=Mn(o,n,i)),Lf(D_(r,e.sourceId),o)}return r}function RV(r,e,t,n,a){const{defIdMap:i,instanceIdMap:o}=kV(r);let s=wi(C_(t,e,a),e,a,!1,i,o);return Mn(s,n,a)}function C_(r,e,t){let n=t.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(r=ym(r,a)),n&&(r=ym(r,n)),r}function ym(r,e){let t;if(!e)t=r;else{t=[];for(let n of r){let a=e(n);a?t.push(a):a==null&&t.push(n)}}return t}function LV(r,e,t,n){return t&&(e=Mn(e,t,n)),Lf(r,e)}function bm(r,e,t){let{defs:n}=r,a=Pn(r.instances,i=>n[i.defId].allDay?i:Object.assign(Object.assign({},i),{range:{start:t.createMarker(e.toDate(i.range.start,i.forcedStartTzo)),end:t.createMarker(e.toDate(i.range.end,i.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:i.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:i.forcedEndTzo}));return{defs:n,instances:a}}function D_(r,e){return ol(r,t=>t.sourceId!==e)}function PV(r,e){return{defs:r.defs,instances:En(r.instances,t=>!e[t.instanceId])}}function kV(r){const{defs:e,instances:t}=r,n={},a={};for(let i in e){const o=e[i],{publicId:s}=o;s&&(n[s]=i)}for(let i in t){const o=t[i],s=e[o.defId],{publicId:l}=s;l&&(a[l]=i)}return{defIdMap:n,instanceIdMap:a}}class sl{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){OV(this.handlers,e,t)}off(e,t){NV(this.handlers,e,t)}trigger(e,...t){let n=this.handlers[e]||[],a=this.options&&this.options[e],i=[].concat(a||[],n);for(let o of i)o.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function OV(r,e,t){(r[e]||(r[e]=[])).push(t)}function NV(r,e,t){t?r[e]&&(r[e]=r[e].filter(n=>n!==t)):delete r[e]}const VV={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function BV(r,e){return wi(zV(r),null,e)}function zV(r){let e;return r===!0?e=[{}]:Array.isArray(r)?e=r.filter(t=>t.daysOfWeek):typeof r=="object"&&r?e=[r]:e=[],e=e.map(t=>Object.assign(Object.assign({},VV),t)),e}function T_(r,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},Pf(r,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function HV(r,e){e.emitter.trigger("unselect",{jsEvent:r?r.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Pf(r,e){let t={};for(let n of e.pluginHooks.dateSpanTransforms)Object.assign(t,n(r,e));return Object.assign(t,tB(r,e.dateEnv)),t}function Sm(r,e,t){let{dateEnv:n,options:a}=t,i=e;return r?(i=Le(i),i=n.add(i,a.defaultAllDayEventDuration)):i=n.add(i,a.defaultTimedEventDuration),i}function kf(r,e,t,n){let a=_s(r.defs,e),i=Jt();for(let o in r.defs){let s=r.defs[o];i.defs[o]=GV(s,a[o],t,n)}for(let o in r.instances){let s=r.instances[o],l=i.defs[s.defId];i.instances[o]=FV(s,l,a[s.defId],t,n)}return i}function GV(r,e,t,n){let a=t.standardProps||{};a.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(a.hasEnd=!0);let i=Object.assign(Object.assign(Object.assign({},r),a),{ui:Object.assign(Object.assign({},r.ui),a.ui)});t.extendedProps&&(i.extendedProps=Object.assign(Object.assign({},i.extendedProps),t.extendedProps));for(let o of n.pluginHooks.eventDefMutationAppliers)o(i,t,n);return!i.hasEnd&&n.options.forceEventDuration&&(i.hasEnd=!0),i}function FV(r,e,t,n,a){let{dateEnv:i}=a,o=n.standardProps&&n.standardProps.allDay===!0,s=n.standardProps&&n.standardProps.hasEnd===!1,l=Object.assign({},r);return o&&(l.range=m_(l.range)),n.datesDelta&&t.startEditable&&(l.range={start:i.add(l.range.start,n.datesDelta),end:i.add(l.range.end,n.datesDelta)}),n.startDelta&&t.durationEditable&&(l.range={start:i.add(l.range.start,n.startDelta),end:l.range.end}),n.endDelta&&t.durationEditable&&(l.range={start:l.range.start,end:i.add(l.range.end,n.endDelta)}),s&&(l.range={start:l.range.start,end:Sm(e.allDay,l.range.start,a)}),e.allDay&&(l.range={start:Le(l.range.start),end:Le(l.range.end)}),l.range.end<l.range.start&&(l.range.end=Sm(e.allDay,l.range.start,a)),l}class qn{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Pe{constructor(e,t,n){this._context=e,this._def=t,this._instance=n||null}setProp(e,t){if(e in S_)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=Vo[e](t),this.mutate({standardProps:{publicId:t}});else if(e in Vo)t=Vo[e](t),this.mutate({standardProps:{[e]:t}});else if(e in bs){let n=bs[e](t);e==="color"?n={backgroundColor:t,borderColor:t}:e==="editable"?n={startEditable:t,durationEditable:t}:n={[e]:t},this.mutate({standardProps:{ui:n}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:n}=this._context,a=n.createMarker(e);if(a&&this._instance){let i=this._instance.range,o=ea(i.start,a,n,t.granularity);t.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,t={}){let{dateEnv:n}=this._context,a;if(!(e!=null&&(a=n.createMarker(e),!a))&&this._instance)if(a){let i=ea(this._instance.range.end,a,n,t.granularity);this.mutate({endDelta:i})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,n={}){let{dateEnv:a}=this._context,i={allDay:n.allDay},o=a.createMarker(e),s;if(o&&!(t!=null&&(s=a.createMarker(t),!s))&&this._instance){let l=this._instance.range;n.allDay===!0&&(l=m_(l));let u=ea(l.start,o,a,n.granularity);if(s){let c=ea(l.end,s,a,n.granularity);hN(u,c)?this.mutate({datesDelta:u,standardProps:i}):this.mutate({startDelta:u,endDelta:c,standardProps:i})}else i.hasEnd=!1,this.mutate({datesDelta:u,standardProps:i})}}moveStart(e){let t=_e(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=_e(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=_e(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let n={allDay:e},{maintainDuration:a}=t;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(n.hasEnd=a),this.mutate({standardProps:n})}formatRange(e){let{dateEnv:t}=this._context,n=this._instance,a=tt(e);return this._def.hasEnd?t.formatRange(n.range.start,n.range.end,a,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):t.format(n.range.start,a,{forcedTzo:n.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let n=this._def,a=this._context,{eventStore:i}=a.getCurrentData(),o=Rf(i,t.instanceId);o=kf(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let l=new Pe(a,n,t);this._def=o.defs[n.defId],this._instance=o.instances[t.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:o}),a.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:yn(o,a,t),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:i})}})}}remove(){let e=this._context,t=E_(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new qn(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:n}=t,{startStr:a,endStr:i}=this,o={allDay:t.allDay};return t.title&&(o.title=t.title),a&&(o.start=a),i&&(o.end=i),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),n.display&&n.display!=="auto"&&(o.display=n.display),e.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?o.color=n.backgroundColor:(n.backgroundColor&&(o.backgroundColor=n.backgroundColor),n.borderColor&&(o.borderColor=n.borderColor)),n.textColor&&(o.textColor=n.textColor),n.classNames.length&&(o.classNames=n.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,t.extendedProps):o.extendedProps=t.extendedProps),o}toJSON(){return this.toPlainObject()}}function E_(r){let e=r._def,t=r._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function yn(r,e,t){let{defs:n,instances:a}=r,i=[],o=t?t.instanceId:"";for(let s in a){let l=a[s],u=n[l.defId];l.instanceId!==o&&i.push(new Pe(e,u,l))}return i}function _m(r,e,t,n){let a={},i={},o={},s=[],l=[],u=_s(r.defs,e);for(let c in r.defs){let d=r.defs[c];u[d.defId].display==="inverse-background"&&(d.groupId?(a[d.groupId]=[],o[d.groupId]||(o[d.groupId]=d)):i[c]=[])}for(let c in r.instances){let d=r.instances[c],f=r.defs[d.defId],h=u[f.defId],v=d.range,p=!f.allDay&&n?y_(v,n):v,g=da(p,t);g&&(h.display==="inverse-background"?f.groupId?a[f.groupId].push(g):i[d.defId].push(g):h.display!=="none"&&(h.display==="background"?s:l).push({def:f,ui:h,instance:d,range:g,isStart:p.start&&p.start.valueOf()===g.start.valueOf(),isEnd:p.end&&p.end.valueOf()===g.end.valueOf()}))}for(let c in a){let d=a[c],f=gm(d,t);for(let h of f){let v=o[c],p=u[v.defId];s.push({def:v,ui:p,instance:null,range:h,isStart:!1,isEnd:!1})}}for(let c in i){let d=i[c],f=gm(d,t);for(let h of f)s.push({def:r.defs[c],ui:u[c],instance:null,range:h,isStart:!1,isEnd:!1})}return{bg:s,fg:l}}function wm(r,e){r.fcSeg=e}function fa(r){return r.fcSeg||r.parentNode.fcSeg||null}function _s(r,e){return Pn(r,t=>M_(t,e))}function M_(r,e){let t=[];return e[""]&&t.push(e[""]),e[r.defId]&&t.push(e[r.defId]),t.push(r.ui),CV(t)}function WV(r,e){let t=r.map(UV);return t.sort((n,a)=>oN(n,a,e)),t.map(n=>n._seg)}function UV(r){let{eventRange:e}=r,t=e.def,n=e.instance?e.instance.range:e.range,a=n.start?n.start.valueOf():0,i=n.end?n.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:a,end:i,duration:i-a,allDay:Number(t.allDay),_seg:r})}function jV(r,e){let{pluginHooks:t}=e,n=t.isDraggableTransformers,{def:a,ui:i}=r.eventRange,o=i.startEditable;for(let s of n)o=s(o,a,i,e);return o}function $V(r,e){return r.isStart&&r.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function YV(r,e){return r.isEnd&&r.eventRange.ui.durationEditable}function I_(r,e,t,n,a,i,o){let{dateEnv:s,options:l}=t,{displayEventTime:u,displayEventEnd:c}=l,d=r.eventRange.def,f=r.eventRange.instance;u==null&&(u=n!==!1),c==null&&(c=a!==!1);let h=f.range.start,v=f.range.end,p=r.start||r.eventRange.range.start,g=r.end||r.eventRange.range.end,m=Le(h).valueOf()===Le(p).valueOf(),b=Le(Yr(v,-1)).valueOf()===Le(Yr(g,-1)).valueOf();return u&&!d.allDay&&(m||b)?(p=m?h:p,g=b?v:g,c&&d.hasEnd?s.formatRange(p,g,e,{forcedStartTzo:f.forcedStartTzo,forcedEndTzo:f.forcedEndTzo}):s.format(p,e,{forcedTzo:f.forcedStartTzo})):""}function qa(r,e,t){let n=r.eventRange.range;return{isPast:n.end<=e.start,isFuture:n.start>=e.end,isToday:e&&Hr(e,n.start)}}function ZV(r){let e=["fc-event"];return r.isMirror&&e.push("fc-event-mirror"),r.isDraggable&&e.push("fc-event-draggable"),(r.isStartResizable||r.isEndResizable)&&e.push("fc-event-resizable"),r.isDragging&&e.push("fc-event-dragging"),r.isResizing&&e.push("fc-event-resizing"),r.isSelected&&e.push("fc-event-selected"),r.isStart&&e.push("fc-event-start"),r.isEnd&&e.push("fc-event-end"),r.isPast&&e.push("fc-event-past"),r.isToday&&e.push("fc-event-today"),r.isFuture&&e.push("fc-event-future"),e}function XV(r){return r.instance?r.instance.instanceId:`${r.def.defId}:${r.range.start.toISOString()}`}function R_(r,e){let{def:t,instance:n}=r.eventRange,{url:a}=t;if(a)return{href:a};let{emitter:i,options:o}=e,{eventInteractive:s}=o;return s==null&&(s=t.interactive,s==null&&(s=!!i.hasHandlers("eventClick"))),s?u_(l=>{i.trigger("eventClick",{el:l.target,event:new Pe(e,t,n),jsEvent:l,view:e.viewApi})}):{}}const qV={start:k,end:k,allDay:Boolean};function QV(r,e,t){let n=KV(r,e),{range:a}=n;if(!a.start)return null;if(!a.end){if(t==null)return null;a.end=e.add(a.start,t)}return n}function KV(r,e){let{refined:t,extra:n}=Af(r,qV),a=t.start?e.createMarkerMeta(t.start):null,i=t.end?e.createMarkerMeta(t.end):null,{allDay:o}=t;return o==null&&(o=a&&a.isTimeUnspecified&&(!i||i.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:i?i.marker:null},allDay:o},n)}function JV(r,e){return vV(r.range,e.range)&&r.allDay===e.allDay&&eB(r,e)}function eB(r,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&r[t]!==e[t])return!1;for(let t in r)if(!(t in e))return!1;return!0}function tB(r,e){return Object.assign(Object.assign({},P_(r.range,e,r.allDay)),{allDay:r.allDay})}function L_(r,e,t){return Object.assign(Object.assign({},P_(r,e,t)),{timeZone:e.timeZone})}function P_(r,e,t){return{start:e.toDate(r.start),end:e.toDate(r.end),startStr:e.formatIso(r.start,{omitTime:t}),endStr:e.formatIso(r.end,{omitTime:t})}}function rB(r,e,t){let n=w_({editable:!1},t),a=Nc(n.refined,n.extra,"",r.allDay,!0,t);return{def:a,ui:M_(a,e),instance:Mf(a.defId,r.range),range:r.range,isStart:!0,isEnd:!0}}function nB(r,e,t){let n=!1,a=function(s){n||(n=!0,e(s))},i=function(s){n||(n=!0,t(s))},o=r(a,i);o&&typeof o.then=="function"&&o.then(a,i)}class xm extends Error{constructor(e,t){super(e),this.response=t}}function aB(r,e,t){r=r.toUpperCase();const n={method:r};return r==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(n.body=new URLSearchParams(t),n.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,n).then(a=>{if(a.ok)return a.json().then(i=>[i,a],()=>{throw new xm("Failure parsing JSON",a)});throw new xm("Request failed",a)})}let Ru;function k_(){return Ru==null&&(Ru=iB()),Ru}function iB(){if(typeof document>"u")return!0;let r=document.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.innerHTML="<table><tr><td><div></div></td></tr></table>",r.querySelector("table").style.height="100px",r.querySelector("div").style.height="100%",document.body.appendChild(r);let t=r.querySelector("div").offsetHeight>0;return document.body.removeChild(r),t}class oB extends Ve{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{ys(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{ys(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:n}=this.state,a=n||t.height==="auto"||t.contentHeight==="auto",i=!a&&t.height!=null?t.height:"",o=["fc",n?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return k_()||o.push("fc-liquid-hack"),e.children(o,i,a,n)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class Aa{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function sB(r,e){return{component:r,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function Of(r){return{[r.component.uid]:r}}const Bc={};class ll extends Rt{constructor(e,t){super(e,t),this.handleRefresh=()=>{let n=this.computeTiming();n.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(n.state),this.clearTimeout(),this.setTimeout(n.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,n=t.nowManager.getDateMarker(),a=t.dateEnv.startOf(n,e.unit),o=t.dateEnv.add(a,_e(1,e.unit)).valueOf()-n.valueOf();return o=Math.min(1e3*60*60*24,o),{state:{nowDate:a,todayRange:lB(a)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const t=this.computeTiming();this.setState(t.state,()=>{this.setTimeout(t.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}ll.contextType=kn;function lB(r){let e=Le(r),t=ut(e,1);return{start:e,end:t}}class uB{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:n}=this;n.currentCalendarOptionsRefiners[e]?n.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:n}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:n.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let n=this.getCurrentData(),a;t=t||"day",a=n.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:n}=this.getCurrentData(),a=[].concat(n.header?n.header.viewsWithButtons:[],n.footer?n.footer.viewsWithButtons:[]),i,o;for(let s in t)a.push(s);for(i=0;i<a.length;i+=1)if(o=t[a[i]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),n=_e(e);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,n)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:n}=this.getCurrentData();return n.format(n.createMarker(e),tt(t))}formatRange(e,t,n){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(t),tt(n),n)}formatIso(e,t){let{dateEnv:n}=this.getCurrentData();return n.formatIso(n.createMarker(e),{omitTime:t})}select(e,t){let n;t==null?e.start!=null?n=e:n={start:e,end:null}:n={start:e,end:t};let a=this.getCurrentData(),i=QV(n,a.dateEnv,_e({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),T_(i,null,a))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),HV(e,t))}addEvent(e,t){if(e instanceof Pe){let o=e._def,s=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Vc({def:o,instance:s})}),this.triggerEventAdd(e)),e}let n=this.getCurrentData(),a;if(t instanceof qn)a=t.internalEventSource;else if(typeof t=="boolean")t&&([a]=Df(n.eventSources));else if(t!=null){let o=this.getEventSourceById(t);if(!o)return console.warn(`Could not find an event source with ID "${t}"`),null;a=o.internalEventSource}let i=__(e,a,n,!1);if(i){let o=new Pe(n,i.def,i.def.recurringDef?null:i.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Vc(i)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:E_(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:n,instances:a}=t.eventStore;e=String(e);for(let i in n){let o=n[i];if(o.publicId===e){if(o.recurringDef)return new Pe(t,o,null);for(let s in a){let l=a[s];if(l.defId===o.defId)return new Pe(t,o,l)}}}return null}getEvents(){let e=this.getCurrentData();return yn(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,n=[];for(let a in t)n.push(new qn(e,t[a]));return n}getEventSourceById(e){let t=this.getCurrentData(),n=t.eventSources;e=String(e);for(let a in n)if(n[a].publicId===e)return new qn(t,n[a]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof qn)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let n=x_(e,t);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new qn(t,n)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=_e(e);t&&this.trigger("_scrollRequest",{time:t})}}function cB(r,e){return r.left>=e.left&&r.left<e.right&&r.top>=e.top&&r.top<e.bottom}function O_(r,e){let t={left:Math.max(r.left,e.left),right:Math.min(r.right,e.right),top:Math.max(r.top,e.top),bottom:Math.min(r.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function dB(r,e){return{left:Math.min(Math.max(r.left,e.left),e.right),top:Math.min(Math.max(r.top,e.top),e.bottom)}}function fB(r){return{left:(r.left+r.right)/2,top:(r.top+r.bottom)/2}}function hB(r,e){return{left:r.left-e.left,top:r.top-e.top}}function N_(r,e,t,n){return{dow:r.getUTCDay(),isDisabled:!!(n&&(!n.activeRange||!Hr(n.activeRange,r))),isOther:!!(n&&!Hr(n.currentRange,r)),isToday:!!(e&&Hr(e,r)),isPast:!!(e&&r<e.start),isFuture:!!(e&&r>=e.end)}}function Nf(r,e){let t=["fc-day",`fc-day-${mN[r.dow]}`];return r.isDisabled?t.push("fc-day-disabled"):(r.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),r.isPast&&t.push("fc-day-past"),r.isFuture&&t.push("fc-day-future"),r.isOther&&t.push("fc-day-other")),t}const vB=tt({year:"numeric",month:"long",day:"numeric"}),pB=tt({week:"long"});function zc(r,e,t="day",n=!0){const{dateEnv:a,options:i,calendarApi:o}=r;let s=a.format(e,t==="week"?pB:vB);if(i.navLinks){let l=a.toDate(e);const u=c=>{let d=t==="day"?i.navLinkDayClick:t==="week"?i.navLinkWeekClick:null;typeof d=="function"?d.call(o,a.toDate(e),c):(typeof d=="string"&&(t=d),o.zoomTo(e,t))};return Object.assign({title:Za(i.navLinkHint,[s,l],s),"data-navlink":""},n?l_(u):{onClick:u})}return{"aria-label":s}}let Lu=null;function gB(){return Lu===null&&(Lu=mB()),Lu}function mB(){let r=document.createElement("div");Ya(r,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),r.innerHTML="<div></div>",document.body.appendChild(r);let t=r.firstChild.getBoundingClientRect().left>r.getBoundingClientRect().left;return bf(r),t}let Pu;function yB(){return Pu||(Pu=bB()),Pu}function bB(){let r=document.createElement("div");r.style.overflow="scroll",r.style.position="absolute",r.style.top="-9999px",r.style.left="-9999px",document.body.appendChild(r);let e=V_(r);return document.body.removeChild(r),e}function V_(r){return{x:r.offsetHeight-r.clientHeight,y:r.offsetWidth-r.clientWidth}}function SB(r,e=!1){let t=window.getComputedStyle(r),n=parseInt(t.borderLeftWidth,10)||0,a=parseInt(t.borderRightWidth,10)||0,i=parseInt(t.borderTopWidth,10)||0,o=parseInt(t.borderBottomWidth,10)||0,s=V_(r),l=s.y-n-a,u=s.x-i-o,c={borderLeft:n,borderRight:a,borderTop:i,borderBottom:o,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return gB()&&t.direction==="rtl"?c.scrollbarLeft=l:c.scrollbarRight=l,e&&(c.paddingLeft=parseInt(t.paddingLeft,10)||0,c.paddingRight=parseInt(t.paddingRight,10)||0,c.paddingTop=parseInt(t.paddingTop,10)||0,c.paddingBottom=parseInt(t.paddingBottom,10)||0),c}function _B(r,e=!1,t){let n=Vf(r),a=SB(r,e),i={left:n.left+a.borderLeft+a.scrollbarLeft,right:n.right-a.borderRight-a.scrollbarRight,top:n.top+a.borderTop,bottom:n.bottom-a.borderBottom-a.scrollbarBottom};return e&&(i.left+=a.paddingLeft,i.right-=a.paddingRight,i.top+=a.paddingTop,i.bottom-=a.paddingBottom),i}function Vf(r){let e=r.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function wB(r){let e=B_(r),t=r.getBoundingClientRect();for(let n of e){let a=O_(t,n.getBoundingClientRect());if(a)t=a;else return null}return t}function B_(r){let e=[];for(;r instanceof HTMLElement;){let t=window.getComputedStyle(r);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(r),r=r.parentNode}return e}class ws{constructor(e,t,n,a){this.els=t;let i=this.originClientRect=e.getBoundingClientRect();n&&this.buildElHorizontals(i.left),a&&this.buildElVerticals(i.top)}buildElHorizontals(e){let t=[],n=[];for(let a of this.els){let i=a.getBoundingClientRect();t.push(i.left-e),n.push(i.right-e)}this.lefts=t,this.rights=n}buildElVerticals(e){let t=[],n=[];for(let a of this.els){let i=a.getBoundingClientRect();t.push(i.top-e),n.push(i.bottom-e)}this.tops=t,this.bottoms=n}leftToIndex(e){let{lefts:t,rights:n}=this,a=t.length,i;for(i=0;i<a;i+=1)if(e>=t[i]&&e<n[i])return i}topToIndex(e){let{tops:t,bottoms:n}=this,a=t.length,i;for(i=0;i<a;i+=1)if(e>=t[i]&&e<n[i])return i}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return So(this.tops||[],e.tops||[])&&So(this.bottoms||[],e.bottoms||[])&&So(this.lefts||[],e.lefts||[])&&So(this.rights||[],e.rights||[])}}function So(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(Math.round(r[n])!==Math.round(e[n]))return!1;return!0}class Bf{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class xB extends Bf{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class AB extends Bf{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Nn extends Ve{constructor(){super(...arguments),this.uid=Ln()}prepareHits(){}queryHit(e,t,n,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!lt(e,".fc-event-mirror")}isValidDateDownEl(e){return!lt(e,".fc-event:not(.fc-bg-event)")&&!lt(e,".fc-more-link")&&!lt(e,"a[data-navlink]")&&!lt(e,".fc-popover")}}class CB{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let n of e)this.insertEntry(n,t);return t}insertEntry(e,t){let n=this.findInsertion(e);this.isInsertionValid(n,e)?this.insertEntryAt(e,n):this.handleInvalidInsertion(n,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,n){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},t),{span:z_(t.span,e.touchingEntry.span)});n.push(a),this.splitEntry(t,e.touchingEntry,n)}else n.push(t)}splitEntry(e,t,n){let a=e.span,i=t.span;a.start<i.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:i.start}},n),a.end>i.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.end,end:a.end}},n)}insertEntryAt(e,t){let{entriesByLevel:n,levelCoords:a}=this;t.lateral===-1?(ku(a,t.level,t.levelCoord),ku(n,t.level,[e])):ku(n[t.level],t.lateral,e),this.stackCnts[Qa(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:n,strictOrder:a,stackCnts:i}=this,o=t.length,s=0,l=-1,u=-1,c=null,d=0;for(let v=0;v<o;v+=1){const p=t[v];if(!a&&p>=s+this.getEntryThickness(e))break;let g=n[v],m,b=Cm(g,e.span.start,Am),S=b[0]+b[1];for(;(m=g[S])&&m.span.start<e.span.end;){let y=p+this.getEntryThickness(m);y>s&&(s=y,c=m,l=v,u=S),y===s&&(d=Math.max(d,i[Qa(m)]+1)),S+=1}}let f=0;if(c)for(f=l+1;f<o&&t[f]<s;)f+=1;let h=-1;return f<o&&t[f]===s&&(h=Cm(n[f],e.span.end,Am)[0]),{touchingLevel:l,touchingLateral:u,touchingEntry:c,stackCnt:d,levelCoord:s,level:f,lateral:h}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,n=e.length,a=[];for(let i=0;i<n;i+=1){let o=e[i],s=t[i];for(let l of o)a.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:s}))}return a}}function Am(r){return r.span.end}function Qa(r){return r.index+":"+r.span.start}function z_(r,e){let t=Math.max(r.start,e.start),n=Math.min(r.end,e.end);return t<n?{start:t,end:n}:null}function ku(r,e,t){r.splice(e,0,t)}function Cm(r,e,t){let n=0,a=r.length;if(!a||e<t(r[n]))return[0,0];if(e>t(r[a-1]))return[a,0];for(;n<a;){let i=Math.floor(n+(a-n)/2),o=t(r[i]);if(e<o)a=i;else if(e>o)n=i+1;else return[i,1]}return[n,0]}class DB{constructor(e,t){this.emitter=new sl}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const zf={};function TB(r,e){return!r||e>10?tt({weekday:"short"}):e>1?tt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):tt({weekday:"long"})}const H_="fc-col-header-cell";function G_(r){return r.text}class EB extends Ve{render(){let{dateEnv:e,options:t,theme:n,viewApi:a}=this.context,{props:i}=this,{date:o,dateProfile:s}=i,l=N_(o,i.todayRange,null,s),u=[H_].concat(Nf(l,n)),c=e.format(o,i.dayHeaderFormat),d=!l.isDisabled&&i.colCnt>1?zc(this.context,o):{},f=e.toDate(o);e.namedTimeZoneImpl&&(f=Yr(f,36e5));let h=Object.assign(Object.assign(Object.assign({date:f,view:a},i.extraRenderProps),{text:c}),l);return O(Tr,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan,"data-date":l.isDisabled?void 0:wf(o)},i.extraDataAttrs),renderProps:h,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:G_,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},v=>O("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&O(v,{elTag:"a",elAttrs:d,elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"]})))}}const MB=tt({weekday:"long"});class IB extends Ve{render(){let{props:e}=this,{dateEnv:t,theme:n,viewApi:a,options:i}=this.context,o=ut(new Date(2592e5),e.dow),s={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=t.format(o,e.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:o},s),{view:a}),e.extraRenderProps),{text:l});return O(Tr,{elTag:"th",elClasses:[H_,...Nf(s,n),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:i.dayHeaderContent,defaultGenerator:G_,classNameGenerator:i.dayHeaderClassNames,didMount:i.dayHeaderDidMount,willUnmount:i.dayHeaderWillUnmount},c=>O("div",{className:"fc-scrollgrid-sync-inner"},O(c,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(o,MB)}})))}}class RB extends Ve{constructor(){super(...arguments),this.createDayHeaderFormatter=me(LB)}render(){let{context:e}=this,{dates:t,dateProfile:n,datesRepDistinctDays:a,renderIntro:i}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,t.length);return O(ll,{unit:"day"},(s,l)=>O("tr",{role:"row"},i&&i("day"),t.map(u=>a?O(EB,{key:u.toISOString(),date:u,dateProfile:n,todayRange:l,colCnt:t.length,dayHeaderFormat:o}):O(IB,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:o}))))}}function LB(r,e,t){return r||TB(e,t)}class PB{constructor(e,t){let n=e.start,{end:a}=e,i=[],o=[],s=-1;for(;n<a;)t.isHiddenDay(n)?i.push(s+.5):(s+=1,i.push(s),o.push(n)),n=ut(n,1);this.dates=o,this.indices=i,this.cnt=o.length}sliceRange(e){let t=this.getDateDayIndex(e.start),n=this.getDateDayIndex(ut(e.end,-1)),a=Math.max(0,t),i=Math.min(this.cnt-1,n);return a=Math.ceil(a),i=Math.floor(i),a<=i?{firstIndex:a,lastIndex:i,isStart:t===a,isEnd:n===i}:null}getDateDayIndex(e){let{indices:t}=this,n=Math.floor(xa(this.dates[0],e));return n<0?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]}}class kB{constructor(e,t){let{dates:n}=e,a,i,o;if(t){for(i=n[0].getUTCDay(),a=1;a<n.length&&n[a].getUTCDay()!==i;a+=1);o=Math.ceil(n.length/a)}else o=1,a=n.length;this.rowCnt=o,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let n=[];for(let a=0;a<this.colCnt;a+=1)n.push(this.buildCell(t,a));e.push(n)}return e}buildCell(e,t){let n=this.daySeries.dates[e*this.colCnt+t];return{key:n.toISOString(),date:n}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,n=this.daySeries.sliceRange(e),a=[];if(n){let{firstIndex:i,lastIndex:o}=n,s=i;for(;s<=o;){let l=Math.floor(s/t),u=Math.min((l+1)*t,o+1);a.push({row:l,firstCol:s%t,lastCol:(u-1)%t,isStart:n.isStart&&s===i,isEnd:n.isEnd&&u-1===o}),s=u}}return a}}class OB{constructor(){this.sliceBusinessHours=me(this._sliceBusinessHours),this.sliceDateSelection=me(this._sliceDateSpan),this.sliceEventStore=me(this._sliceEventStore),this.sliceEventDrag=me(this._sliceInteraction),this.sliceEventResize=me(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,n,a,...i){let{eventUiBases:o}=e,s=this.sliceEventStore(e.eventStore,o,t,n,...i);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,n,o,a,...i),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,n,a,...i),fgEventSegs:s.fg,bgEventSegs:s.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,t,n,...i),eventResize:this.sliceEventResize(e.eventResize,o,t,n,...i),eventSelection:e.eventSelection}}sliceNowDate(e,t,n,a,...i){return this._sliceDateSpan({range:{start:e,end:Yr(e,1)},allDay:!1},t,n,{},a,...i)}_sliceBusinessHours(e,t,n,a,...i){return e?this._sliceEventStore(Mn(e,_o(t,!!n),a),{},t,n,...i).bg:[]}_sliceEventStore(e,t,n,a,...i){if(e){let o=_m(e,t,_o(n,!!a),a);return{bg:this.sliceEventRanges(o.bg,i),fg:this.sliceEventRanges(o.fg,i)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,n,a,...i){if(!e)return null;let o=_m(e.mutatedEvents,t,_o(n,!!a),a);return{segs:this.sliceEventRanges(o.fg,i),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,n,a,i,...o){if(!e)return[];let s=_o(t,!!n),l=da(e.range,s);if(l){e=Object.assign(Object.assign({},e),{range:l});let u=rB(e,a,i),c=this.sliceRange(e.range,...o);for(let d of c)d.eventRange=u;return c}return[]}sliceEventRanges(e,t){let n=[];for(let a of e)n.push(...this.sliceEventRange(a,t));return n}sliceEventRange(e,t){let n=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(n={start:n.start,end:ut(n.start,1)});let a=this.sliceRange(n,...t);for(let i of a)i.eventRange=e,i.isStart=e.isStart&&i.isStart,i.isEnd=e.isEnd&&i.isEnd;return a}}function _o(r,e){let t=r.activeRange;return e?t:{start:Yr(t.start,r.slotMinTime.milliseconds),end:Yr(t.end,r.slotMaxTime.milliseconds-864e5)}}function F_(r,e,t){let{instances:n}=r.mutatedEvents;for(let a in n)if(!il(e.validRange,n[a].range))return!1;return W_({eventDrag:r},t)}function NB(r,e,t){return il(e.validRange,r.range)?W_({dateSelection:r},t):!1}function W_(r,e){let t=e.getCurrentData(),n=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},r);return(e.pluginHooks.isPropsValid||VB)(n,e)}function VB(r,e,t={},n){return!(r.eventDrag&&!BB(r,e,t,n)||r.dateSelection&&!zB(r,e,t,n))}function BB(r,e,t,n){let a=e.getCurrentData(),i=r.eventDrag,o=i.mutatedEvents,s=o.defs,l=o.instances,u=_s(s,i.isEvent?r.eventUiBases:{"":a.selectionConfig});n&&(u=Pn(u,n));let c=PV(r.eventStore,i.affectedEvents.instances),d=c.defs,f=c.instances,h=_s(d,r.eventUiBases);for(let v in l){let p=l[v],g=p.range,m=u[p.defId],b=s[p.defId];if(!U_(m.constraints,g,c,r.businessHours,e))return!1;let{eventOverlap:S}=e.options,y=typeof S=="function"?S:null;for(let _ in f){let x=f[_];if(Ef(g,x.range)&&(h[x.defId].overlap===!1&&i.isEvent||m.overlap===!1||y&&!y(new Pe(e,d[x.defId],x),new Pe(e,b,p))))return!1}let w=a.eventStore;for(let _ of m.allows){let x=Object.assign(Object.assign({},t),{range:p.range,allDay:b.allDay}),A=w.defs[b.defId],C=w.instances[v],D;if(A?D=new Pe(e,A,C):D=new Pe(e,b),!_(Pf(x,e),D))return!1}}return!0}function zB(r,e,t,n){let a=r.eventStore,i=a.defs,o=a.instances,s=r.dateSelection,l=s.range,{selectionConfig:u}=e.getCurrentData();if(n&&(u=n(u)),!U_(u.constraints,l,a,r.businessHours,e))return!1;let{selectOverlap:c}=e.options,d=typeof c=="function"?c:null;for(let f in o){let h=o[f];if(Ef(l,h.range)&&(u.overlap===!1||d&&!d(new Pe(e,i[h.defId],h),null)))return!1}for(let f of u.allows){let h=Object.assign(Object.assign({},t),s);if(!f(Pf(h,e),null))return!1}return!0}function U_(r,e,t,n,a){for(let i of r)if(!GB(HB(i,e,t,n,a),e))return!1;return!0}function HB(r,e,t,n,a){return r==="businessHours"?Ou(Mn(n,e,a)):typeof r=="string"?Ou(ol(t,i=>i.groupId===r)):typeof r=="object"&&r?Ou(Mn(r,e,a)):[]}function Ou(r){let{instances:e}=r,t=[];for(let n in e)t.push(e[n].range);return t}function GB(r,e){for(let t of r)if(il(t,e))return!0;return!1}const wo=/^(visible|hidden)$/;class FB extends Ve{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,dr(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:n}=e,a=t&&n,i=["fc-scroller"];return t&&(n?i.push("fc-scroller-liquid-absolute"):i.push("fc-scroller-liquid")),O("div",{ref:this.handleEl,className:i.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(wo.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:n}=e;for(let a=0;a<n.length;a+=1)if(n[a].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(wo.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:n}=e;for(let a=0;a<n.length;a+=1)if(n[a].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return wo.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return wo.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class gn{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,n)=>{let{depths:a,currentMap:i}=this,o=!1,s=!1;t!==null?(o=n in i,i[n]=t,a[n]=(a[n]||0)+1,s=!0):(a[n]-=1,a[n]||(delete i[n],delete this.callbackMap[n],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(n)),s&&this.masterCallback(t,String(n)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=n=>{this.handleValue(n,String(e))}),t}collect(e,t,n){return QN(this.currentMap,e,t,n)}getAll(){return Df(this.currentMap)}}function WB(r){let e=qO(r,".fc-scrollgrid-shrink"),t=0;for(let n of e)t=Math.max(t,cN(n));return Math.ceil(t)}function j_(r,e){return r.liquid&&e.liquid}function UB(r,e){return e.maxHeight!=null||j_(r,e)}function jB(r,e,t,n){let{expandRows:a}=t;return typeof e.content=="function"?e.content(t):O("table",{role:"presentation",className:[e.tableClassName,r.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:a?t.clientHeight:""}},t.tableColGroupNode,O(n?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function $B(r,e){return $r(r,e,tr)}function YB(r,e){let t=[];for(let n of r){let a=n.span||1;for(let i=0;i<a;i+=1)t.push(O("col",{style:{width:n.width==="shrink"?ZB(e):n.width||"",minWidth:n.minWidth||""}}))}return O("colgroup",{},...t)}function ZB(r){return r??4}function XB(r){for(let e of r)if(e.width==="shrink")return!0;return!1}function qB(r,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return r&&t.push("fc-scrollgrid-liquid"),t}function QB(r,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${r.type}`,r.className];return e&&r.liquid&&r.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),r.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function KB(r){return O("div",{className:"fc-scrollgrid-sticky-shim",style:{width:r.clientWidth,minWidth:r.tableMinWidth}})}function Dm(r){let{stickyHeaderDates:e}=r;return(e==null||e==="auto")&&(e=r.height==="auto"||r.viewHeight==="auto"),e}function JB(r){let{stickyFooterScrollbar:e}=r;return(e==null||e==="auto")&&(e=r.height==="auto"||r.viewHeight==="auto"),e}class $_ extends Ve{constructor(){super(...arguments),this.processCols=me(e=>e,$B),this.renderMicroColGroup=me(YB),this.scrollerRefs=new gn,this.scrollerElRefs=new gn(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:n}=this,a=e.sections||[],i=this.processCols(e.cols),o=this.renderMicroColGroup(i,t.shrinkWidth),s=qB(e.liquid,n);e.collapsibleWidth&&s.push("fc-scrollgrid-collapsible");let l=a.length,u=0,c,d=[],f=[],h=[];for(;u<l&&(c=a[u]).type==="header";)d.push(this.renderSection(c,o,!0)),u+=1;for(;u<l&&(c=a[u]).type==="body";)f.push(this.renderSection(c,o,!1)),u+=1;for(;u<l&&(c=a[u]).type==="footer";)h.push(this.renderSection(c,o,!0)),u+=1;let v=!k_();const p={role:"rowgroup"};return O("table",{role:"grid",className:s.join(" "),style:{height:e.height}},!!(!v&&d.length)&&O("thead",p,...d),!!(!v&&f.length)&&O("tbody",p,...f),!!(!v&&h.length)&&O("tfoot",p,...h),v&&O("tbody",p,...d,...f,...h))}renderSection(e,t,n){return"outerContent"in e?O(ze,{key:e.key},e.outerContent):O("tr",{key:e.key,role:"presentation",className:QB(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,n))}renderChunkTd(e,t,n,a){if("outerContent"in n)return n.outerContent;let{props:i}=this,{forceYScrollbars:o,scrollerClientWidths:s,scrollerClientHeights:l}=this.state,u=UB(i,e),c=j_(i,e),d=i.liquid?o?"scroll":u?"auto":"hidden":"visible",f=e.key,h=jB(e,n,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!i.collapsibleWidth&&s[f]!==void 0?s[f]:null,clientHeight:l[f]!==void 0?l[f]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return O(a?"th":"td",{ref:n.elRef,role:"presentation"},O("div",{className:`fc-scroller-harness${c?" fc-scroller-harness-liquid":""}`},O(FB,{ref:this.scrollerRefs.createRef(f),elRef:this.scrollerElRefs.createRef(f),overflowY:d,overflowX:i.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:c,liquidIsAbsolute:!0},h)))}_handleScrollerEl(e,t){let n=ez(this.props.sections,t);n&&dr(n.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return XB(this.props.cols)?WB(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=yB(),{scrollerRefs:t,scrollerElRefs:n}=this,a=!1,i={},o={};for(let s in t.currentMap){let l=t.currentMap[s];if(l&&l.needsYScrolling()){a=!0;break}}for(let s of this.props.sections){let l=s.key,u=n.currentMap[l];if(u){let c=u.parentNode;i[l]=Math.floor(c.getBoundingClientRect().width-(a?e.y:0)),o[l]=Math.floor(c.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:i,scrollerClientHeights:o}}}$_.addStateEquality({scrollerClientWidths:tr,scrollerClientHeights:tr});function ez(r,e){for(let t of r)if(t.key===e)return t;return null}class Hf extends Ve{constructor(){super(...arguments),this.buildPublicEvent=me((e,t,n)=>new Pe(e,t,n)),this.handleEl=e=>{this.el=e,dr(this.props.elRef,e),e&&wm(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:n}=t,{seg:a}=e,{eventRange:i}=a,{ui:o}=i,s={event:this.buildPublicEvent(t,i.def,i.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&jV(a,t),isStartResizable:!e.disableResizing&&$V(a,t),isEndResizable:!e.disableResizing&&YV(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return O(Tr,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...ZV(s),...a.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:s,generatorName:"eventContent",customGenerator:n.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:n.eventClassNames,didMount:n.eventDidMount,willUnmount:n.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&wm(this.el,this.props.seg)}}class Y_ extends Ve{render(){let{props:e,context:t}=this,{options:n}=t,{seg:a}=e,{ui:i}=a.eventRange,o=n.eventTimeFormat||e.defaultTimeFormat,s=I_(a,o,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return O(Hf,Object.assign({},e,{elTag:"a",elStyle:{borderColor:i.borderColor,backgroundColor:i.backgroundColor},elAttrs:R_(a,t),defaultGenerator:tz,timeText:s}),(l,u)=>O(ze,null,O(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&O("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&O("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Y_.addPropsEquality({seg:tr});function tz(r){return O("div",{className:"fc-event-main-frame"},r.timeText&&O("div",{className:"fc-event-time"},r.timeText),O("div",{className:"fc-event-title-container"},O("div",{className:"fc-event-title fc-sticky"},r.event.title||O(ze,null," "))))}const rz=tt({day:"numeric"});class Z_ extends Ve{constructor(){super(...arguments),this.refineRenderProps=No(nz)}render(){let{props:e,context:t}=this,{options:n}=t,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:n.monthStartFormat});return O(Tr,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":wf(e.date)}),elClasses:[...Nf(a,t.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,generatorName:"dayCellContent",customGenerator:n.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:n.dayCellClassNames,didMount:n.dayCellDidMount,willUnmount:n.dayCellWillUnmount},e.children)}}function X_(r){return!!(r.dayCellContent||Oc("dayCellContent",r))}function nz(r){let{date:e,dateEnv:t,dateProfile:n,isMonthStart:a}=r,i=N_(e,r.todayRange,null,n),o=r.showDayNumber?t.format(e,a?r.monthStartFormat:rz):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:r.viewApi},i),{isMonthStart:a,dayNumberText:o}),r.extraRenderProps)}class az extends Ve{render(){let{props:e}=this,{seg:t}=e;return O(Hf,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:iz,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function iz(r){let{title:e}=r.event;return e&&O("div",{className:"fc-event-title"},r.event.title)}function oz(r){return O("div",{className:`fc-${r}`})}const sz=r=>O(kn.Consumer,null,e=>{let{dateEnv:t,options:n}=e,{date:a}=r,i=n.weekNumberFormat||r.defaultFormat,o=t.computeWeekNumber(a),s=t.format(a,i),l={num:o,text:s,date:a};return O(Tr,{elRef:r.elRef,elTag:r.elTag,elAttrs:r.elAttrs,elClasses:r.elClasses,elStyle:r.elStyle,renderProps:l,generatorName:"weekNumberContent",customGenerator:n.weekNumberContent,defaultGenerator:lz,classNameGenerator:n.weekNumberClassNames,didMount:n.weekNumberDidMount,willUnmount:n.weekNumberWillUnmount},r.children)});function lz(r){return r.text}const Nu=10;class uz extends Ve{constructor(){super(...arguments),this.state={titleId:nl()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&dr(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=o_(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:n,state:a}=this,i=["fc-popover",e.getClass("popover")].concat(n.extraClassNames||[]);return NO(O("div",Object.assign({},n.extraAttrs,{id:n.id,className:i.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),O("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},O("span",{className:"fc-popover-title",id:a.titleId},n.title),O("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),O("div",{className:"fc-popover-body "+e.getClass("popoverContent")},n.children)),n.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:n}=this.props,{rootEl:a}=this,i=wB(t);if(i){let o=a.getBoundingClientRect(),s=n?lt(t,".fc-scrollgrid").getBoundingClientRect().top:i.top,l=e?i.right-o.width:i.left;s=Math.max(s,Nu),l=Math.min(l,document.documentElement.clientWidth-Nu-o.width),l=Math.max(l,Nu);let u=a.offsetParent.getBoundingClientRect();Ya(a,{top:s-u.top,left:l-u.left})}}}class cz extends Nn{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:n}=this,{startDate:a,todayRange:i,dateProfile:o}=n,s=t.format(a,e.dayPopoverFormat);return O(Z_,{elRef:this.handleRootEl,date:a,dateProfile:o,todayRange:i},(l,u,c)=>O(uz,{elRef:c.ref,id:n.id,title:s,extraClassNames:["fc-more-popover"].concat(c.className||[]),extraAttrs:c,parentEl:n.parentEl,alignmentEl:n.alignmentEl,alignGridTop:n.alignGridTop,onClose:n.onClose},X_(e)&&O(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),n.children))}queryHit(e,t,n,a){let{rootEl:i,props:o}=this;return e>=0&&e<n&&t>=0&&t<a?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:i,rect:{left:0,top:0,right:n,bottom:a},layer:1}:null}}class dz extends Ve{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:nl()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&dr(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:n}=this,{moreLinkClick:a}=n.options,i=Tm(t).start;function o(s){let{def:l,instance:u,range:c}=s.eventRange;return{event:new Pe(n,l,u),start:n.dateEnv.toDate(c.start),end:n.dateEnv.toDate(c.end),isStart:s.isStart,isEnd:s.isEnd}}typeof a=="function"&&(a=a({date:i,allDay:!!t.allDayDate,allSegs:t.allSegs.map(o),hiddenSegs:t.hiddenSegs.map(o),jsEvent:e,view:n.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&n.calendarApi.zoomTo(i,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return O(kn.Consumer,null,n=>{let{viewApi:a,options:i,calendarApi:o}=n,{moreLinkText:s}=i,{moreCnt:l}=e,u=Tm(e),c=typeof s=="function"?s.call(o,l):`+${l} ${s}`,d=Za(i.moreLinkHint,[l],c),f={num:l,shortText:`+${l}`,text:c,view:a};return O(ze,null,!!e.moreCnt&&O(Tr,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),l_(this.handleClick)),{title:d,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:f,generatorName:"moreLinkContent",customGenerator:i.moreLinkContent,defaultGenerator:e.defaultGenerator||fz,classNameGenerator:i.moreLinkClassNames,didMount:i.moreLinkDidMount,willUnmount:i.moreLinkWillUnmount},e.children),t.isPopoverOpen&&O(cz,{id:t.popoverId,startDate:u.start,endDate:u.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=lt(this.linkEl,".fc-view-harness"))}}function fz(r){return r.text}function Tm(r){if(r.allDayDate)return{start:r.allDayDate,end:ut(r.allDayDate,1)};let{hiddenSegs:e}=r;return{start:hz(e),end:pz(e)}}function hz(r){return r.reduce(vz).eventRange.range.start}function vz(r,e){return r.eventRange.range.start<e.eventRange.range.start?r:e}function pz(r){return r.reduce(gz).eventRange.range.end}function gz(r,e){return r.eventRange.range.end>e.eventRange.range.end?r:e}class mz{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class yz extends mz{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let n=!1;e.isActive?(t.set(e.id,e),n=!0):t.has(e.id)&&(t.delete(e.id),n=!0),n&&this.set(t)}}const bz=[],q_={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},Q_=Object.assign(Object.assign({},q_),{buttonHints:{prev:"Previous $0",next:"Next $0",today(r,e){return e==="day"?"Today":`This ${r}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(r){return`Show ${r} more event${r===1?"":"s"}`}});function Sz(r){let e=r.length>0?r[0].code:"en",t=bz.concat(r),n={en:Q_};for(let a of t)n[a.code]=a;return{map:n,defaultCode:e}}function K_(r,e){return typeof r=="object"&&!Array.isArray(r)?J_(r.code,[r.code],r):_z(r,e)}function _z(r,e){let t=[].concat(r||[]),n=wz(t,e)||Q_;return J_(r,t,n)}function wz(r,e){for(let t=0;t<r.length;t+=1){let n=r[t].toLocaleLowerCase().split("-");for(let a=n.length;a>0;a-=1){let i=n.slice(0,a).join("-");if(e[i])return e[i]}}return null}function J_(r,e,t){let n=Cf([q_,t],["buttonText"]);delete n.code;let{week:a}=n;return delete n.week,{codeArg:r,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(r),options:n}}function Xr(r){return{id:Ln(),name:r.name,premiumReleaseDate:r.premiumReleaseDate?new Date(r.premiumReleaseDate):void 0,deps:r.deps||[],reducers:r.reducers||[],isLoadingFuncs:r.isLoadingFuncs||[],contextInit:[].concat(r.contextInit||[]),eventRefiners:r.eventRefiners||{},eventDefMemberAdders:r.eventDefMemberAdders||[],eventSourceRefiners:r.eventSourceRefiners||{},isDraggableTransformers:r.isDraggableTransformers||[],eventDragMutationMassagers:r.eventDragMutationMassagers||[],eventDefMutationAppliers:r.eventDefMutationAppliers||[],dateSelectionTransformers:r.dateSelectionTransformers||[],datePointTransforms:r.datePointTransforms||[],dateSpanTransforms:r.dateSpanTransforms||[],views:r.views||{},viewPropsTransformers:r.viewPropsTransformers||[],isPropsValid:r.isPropsValid||null,externalDefTransforms:r.externalDefTransforms||[],viewContainerAppends:r.viewContainerAppends||[],eventDropTransformers:r.eventDropTransformers||[],componentInteractions:r.componentInteractions||[],calendarInteractions:r.calendarInteractions||[],themeClasses:r.themeClasses||{},eventSourceDefs:r.eventSourceDefs||[],cmdFormatter:r.cmdFormatter,recurringTypes:r.recurringTypes||[],namedTimeZonedImpl:r.namedTimeZonedImpl,initialView:r.initialView||"",elementDraggingImpl:r.elementDraggingImpl,optionChangeHandlers:r.optionChangeHandlers||{},scrollGridImpl:r.scrollGridImpl||null,listenerRefiners:r.listenerRefiners||{},optionRefiners:r.optionRefiners||{},propSetHandlers:r.propSetHandlers||{}}}function xz(r,e){let t={},n={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(i){for(let o of i){const s=o.name,l=t[s];l===void 0?(t[s]=o.id,a(o.deps),n=Cz(n,o)):l!==o.id&&console.warn(`Duplicate plugin '${s}'`)}}return r&&a(r),a(e),n}function Az(){let r=[],e=[],t;return(n,a)=>((!t||!$r(n,r)||!$r(a,e))&&(t=xz(n,a)),r=n,e=a,t)}function Cz(r,e){return{premiumReleaseDate:Dz(r.premiumReleaseDate,e.premiumReleaseDate),reducers:r.reducers.concat(e.reducers),isLoadingFuncs:r.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:r.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},r.eventRefiners),e.eventRefiners),eventDefMemberAdders:r.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},r.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:r.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:r.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:r.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:r.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:r.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:r.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},r.views),e.views),viewPropsTransformers:r.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||r.isPropsValid,externalDefTransforms:r.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:r.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:r.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:r.calendarInteractions.concat(e.calendarInteractions),componentInteractions:r.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},r.themeClasses),e.themeClasses),eventSourceDefs:r.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||r.cmdFormatter,recurringTypes:r.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||r.namedTimeZonedImpl,initialView:r.initialView||e.initialView,elementDraggingImpl:r.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},r.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||r.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},r.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},r.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},r.propSetHandlers),e.propSetHandlers)}}function Dz(r,e){return r===void 0?e:e===void 0?r:new Date(Math.max(r.valueOf(),e.valueOf()))}class qr extends zi{}qr.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};qr.prototype.baseIconClass="fc-icon";qr.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};qr.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};qr.prototype.iconOverrideOption="buttonIcons";qr.prototype.iconOverrideCustomButtonOption="icon";qr.prototype.iconOverridePrefix="fc-icon-";function Tz(r,e){let t={},n;for(n in r)Hc(n,t,r,e);for(n in e)Hc(n,t,r,e);return t}function Hc(r,e,t,n){if(e[r])return e[r];let a=Ez(r,e,t,n);return a&&(e[r]=a),a}function Ez(r,e,t,n){let a=t[r],i=n[r],o=c=>a&&a[c]!==null?a[c]:i&&i[c]!==null?i[c]:null,s=o("component"),l=o("superType"),u=null;if(l){if(l===r)throw new Error("Can't have a custom view type that references itself");u=Hc(l,e,t,n)}return!s&&u&&(s=u.component),s?{type:r,component:s,defaults:Object.assign(Object.assign({},u?u.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),i?i.rawOptions:{})}:null}function Em(r){return Pn(r,Mz)}function Mz(r){let e=typeof r=="function"?{component:r}:r,{component:t}=e;return e.content?t=Mm(e):t&&!(t.prototype instanceof Ve)&&(t=Mm(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function Mm(r){return e=>O(kn.Consumer,null,t=>O(Tr,{elTag:"div",elClasses:g_(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:r.content,classNameGenerator:r.classNames,didMount:r.didMount,willUnmount:r.willUnmount}))}function Iz(r,e,t,n){let a=Em(r),i=Em(e.views),o=Tz(a,i);return Pn(o,s=>Rz(s,i,e,t,n))}function Rz(r,e,t,n,a){let i=r.overrides.duration||r.defaults.duration||n.duration||t.duration,o=null,s="",l="",u={};if(i&&(o=Lz(i),o)){let f=kc(o);s=f.unit,f.value===1&&(l=s,u=e[s]?e[s].rawOptions:{})}let c=f=>{let h=f.buttonText||{},v=r.defaults.buttonTextKey;return v!=null&&h[v]!=null?h[v]:h[r.type]!=null?h[r.type]:h[l]!=null?h[l]:null},d=f=>{let h=f.buttonHints||{},v=r.defaults.buttonTextKey;return v!=null&&h[v]!=null?h[v]:h[r.type]!=null?h[r.type]:h[l]!=null?h[l]:null};return{type:r.type,component:r.component,duration:o,durationUnit:s,singleUnit:l,optionDefaults:r.defaults,optionOverrides:Object.assign(Object.assign({},u),r.overrides),buttonTextOverride:c(n)||c(t)||r.overrides.buttonText,buttonTextDefault:c(a)||r.defaults.buttonText||c(Xa)||r.type,buttonTitleOverride:d(n)||d(t)||r.overrides.buttonHint,buttonTitleDefault:d(a)||r.defaults.buttonHint||d(Xa)}}let Im={};function Lz(r){let e=JSON.stringify(r),t=Im[e];return t===void 0&&(t=_e(r),Im[e]=t),t}function Pz(r,e){switch(e.type){case"CHANGE_VIEW_TYPE":r=e.viewType}return r}function kz(r,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return r}}function Oz(r,e,t){let n=r.initialDate;return n!=null?e.createMarker(n):t.getDateMarker()}function Nz(r,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},r),{[e.optionName]:e.rawOptionValue});default:return r}}function Vz(r,e,t,n){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return n.build(e.dateMarker||t);case"CHANGE_DATE":return n.build(e.dateMarker);case"PREV":if(a=n.buildPrev(r,t),a.isValid)return a;break;case"NEXT":if(a=n.buildNext(r,t),a.isValid)return a;break}return r}function Bz(r,e,t){let n=e?e.activeRange:null;return tw({},jz(r,t),n,t)}function zz(r,e,t,n){let a=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return tw(r,e.sources,a,n);case"REMOVE_EVENT_SOURCE":return Gz(r,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?rw(r,a,n):r;case"FETCH_EVENT_SOURCES":return Gf(r,e.sourceIds?d_(e.sourceIds):nw(r,n),a,e.isRefetch||!1,n);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return Uz(r,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return r}}function Hz(r,e,t){let n=e?e.activeRange:null;return Gf(r,nw(r,t),n,!0,t)}function ew(r){for(let e in r)if(r[e].isFetching)return!0;return!1}function tw(r,e,t,n){let a={};for(let i of e)a[i.sourceId]=i;return t&&(a=rw(a,t,n)),Object.assign(Object.assign({},r),a)}function Gz(r,e){return En(r,t=>t.sourceId!==e)}function rw(r,e,t){return Gf(r,En(r,n=>Fz(n,e,t)),e,!1,t)}function Fz(r,e,t){return aw(r,t)?!t.options.lazyFetching||!r.fetchRange||r.isFetching||e.start<r.fetchRange.start||e.end>r.fetchRange.end:!r.latestFetchId}function Gf(r,e,t,n,a){let i={};for(let o in r){let s=r[o];e[o]?i[o]=Wz(s,t,n,a):i[o]=s}return i}function Wz(r,e,t,n){let{options:a,calendarApi:i}=n,o=n.pluginHooks.eventSourceDefs[r.sourceDefId],s=Ln();return o.fetch({eventSource:r,range:e,isRefetch:t,context:n},l=>{let{rawEvents:u}=l;a.eventSourceSuccess&&(u=a.eventSourceSuccess.call(i,u,l.response)||u),r.success&&(u=r.success.call(i,u,l.response)||u),n.dispatch({type:"RECEIVE_EVENTS",sourceId:r.sourceId,fetchId:s,fetchRange:e,rawEvents:u})},l=>{let u=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(i,l),u=!0),r.failure&&(r.failure(l),u=!0),u||console.warn(l.message,l),n.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:r.sourceId,fetchId:s,fetchRange:e,error:l})}),Object.assign(Object.assign({},r),{isFetching:!0,latestFetchId:s})}function Uz(r,e,t,n){let a=r[e];return a&&t===a.latestFetchId?Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:n})}):r}function nw(r,e){return En(r,t=>aw(t,e))}function jz(r,e){let t=A_(e),n=[].concat(r.eventSources||[]),a=[];r.initialEvents&&n.unshift(r.initialEvents),r.events&&n.unshift(r.events);for(let i of n){let o=x_(i,e,t);o&&a.push(o)}return a}function aw(r,e){return!e.pluginHooks.eventSourceDefs[r.sourceDefId].ignoreRange}function $z(r,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return r}}function Yz(r,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return r}}function Zz(r,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return r}}function Xz(r,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return r}}function qz(r,e,t,n,a){let i=r.headerToolbar?Rm(r.headerToolbar,r,e,t,n,a):null,o=r.footerToolbar?Rm(r.footerToolbar,r,e,t,n,a):null;return{header:i,footer:o}}function Rm(r,e,t,n,a,i){let o={},s=[],l=!1;for(let u in r){let c=r[u],d=Qz(c,e,t,n,a,i);o[u]=d.widgets,s.push(...d.viewsWithButtons),l=l||d.hasTitle}return{sectionWidgets:o,viewsWithButtons:s,hasTitle:l}}function Qz(r,e,t,n,a,i){let o=e.direction==="rtl",s=e.customButtons||{},l=t.buttonText||{},u=e.buttonText||{},c=t.buttonHints||{},d=e.buttonHints||{},f=r?r.split(" "):[],h=[],v=!1;return{widgets:f.map(g=>g.split(",").map(m=>{if(m==="title")return v=!0,{buttonName:m};let b,S,y,w,_,x;if(b=s[m])y=A=>{b.click&&b.click.call(A.target,A,A.target)},(w=n.getCustomButtonIconClass(b))||(w=n.getIconClass(m,o))||(_=b.text),x=b.hint||b.text;else if(S=a[m]){h.push(m),y=()=>{i.changeView(m)},(_=S.buttonTextOverride)||(w=n.getIconClass(m,o))||(_=S.buttonTextDefault);let A=S.buttonTextOverride||S.buttonTextDefault;x=Za(S.buttonTitleOverride||S.buttonTitleDefault||e.viewHint,[A,m],A)}else if(i[m])if(y=()=>{i[m]()},(_=l[m])||(w=n.getIconClass(m,o))||(_=u[m]),m==="prevYear"||m==="nextYear"){let A=m==="prevYear"?"prev":"next";x=Za(c[A]||d[A],[u.year||"year","year"],u[m])}else x=A=>Za(c[m]||d[m],[u[A]||A,A],u[m]);return{buttonName:m,buttonClick:y,buttonIcon:w,buttonText:_,buttonHint:x}})),viewsWithButtons:h,hasTitle:v}}class Kz{constructor(e,t,n){this.type=e,this.getCurrentData=t,this.dateEnv=n}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let Jz={ignoreRange:!0,parseMeta(r){return Array.isArray(r.events)?r.events:null},fetch(r,e){e({rawEvents:r.eventSource.meta})}};const eH=Xr({name:"array-event-source",eventSourceDefs:[Jz]});let tH={parseMeta(r){return typeof r.events=="function"?r.events:null},fetch(r,e,t){const{dateEnv:n}=r.context,a=r.eventSource.meta;nB(a.bind(null,L_(r.range,n)),i=>e({rawEvents:i}),t)}};const rH=Xr({name:"func-event-source",eventSourceDefs:[tH]}),nH={method:String,extraParams:k,startParam:String,endParam:String,timeZoneParam:String};let aH={parseMeta(r){return r.url&&(r.format==="json"||!r.format)?{url:r.url,format:"json",method:(r.method||"GET").toUpperCase(),extraParams:r.extraParams,startParam:r.startParam,endParam:r.endParam,timeZoneParam:r.timeZoneParam}:null},fetch(r,e,t){const{meta:n}=r.eventSource,a=oH(n,r.range,r.context);aB(n.method,n.url,a).then(([i,o])=>{e({rawEvents:i,response:o})},t)}};const iH=Xr({name:"json-event-source",eventSourceRefiners:nH,eventSourceDefs:[aH]});function oH(r,e,t){let{dateEnv:n,options:a}=t,i,o,s,l,u={};return i=r.startParam,i==null&&(i=a.startParam),o=r.endParam,o==null&&(o=a.endParam),s=r.timeZoneParam,s==null&&(s=a.timeZoneParam),typeof r.extraParams=="function"?l=r.extraParams():l=r.extraParams||{},Object.assign(u,l),u[i]=n.formatIso(e.start),u[o]=n.formatIso(e.end),n.timeZone!=="local"&&(u[s]=n.timeZone),u}const sH={daysOfWeek:k,startTime:_e,endTime:_e,duration:_e,startRecur:k,endRecur:k};let lH={parse(r,e){if(r.daysOfWeek||r.startTime||r.endTime||r.startRecur||r.endRecur){let t={daysOfWeek:r.daysOfWeek||null,startTime:r.startTime||null,endTime:r.endTime||null,startRecur:r.startRecur?e.createMarker(r.startRecur):null,endRecur:r.endRecur?e.createMarker(r.endRecur):null,dateEnv:e},n;return r.duration&&(n=r.duration),!n&&r.startTime&&r.endTime&&(n=vN(r.endTime,r.startTime)),{allDayGuess:!r.startTime&&!r.endTime,duration:n,typeData:t}}return null},expand(r,e,t){let n=da(e,{start:r.startRecur,end:r.endRecur});return n?cH(r.daysOfWeek,r.startTime,r.dateEnv,t,n):[]}};const uH=Xr({name:"simple-recurring-event",recurringTypes:[lH],eventRefiners:sH});function cH(r,e,t,n,a){let i=r?d_(r):null,o=Le(a.start),s=a.end,l=[];for(;o<s;){let u;(!i||i[o.getUTCDay()])&&(e?u=n.add(o,e):u=o,l.push(n.createMarker(t.toDate(u)))),o=ut(o,1)}return l}const dH=Xr({name:"change-handler",optionChangeHandlers:{events(r,e){Lm([r],e)},eventSources:Lm}});function Lm(r,e){let t=Df(e.getCurrentData().eventSources);if(t.length===1&&r.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(r[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:r[0]});return}let n=[];for(let a of r){let i=!1;for(let o=0;o<t.length;o+=1)if(t[o]._raw===a){t.splice(o,1),i=!0;break}i||n.push(a)}for(let a of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of n)e.calendarApi.addEventSource(a)}function fH(r,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},L_(r.activeRange,e.dateEnv)),{view:e.viewApi}))}function hH(r,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",yn(r,e))}const vH=[eH,rH,iH,uH,dH,Xr({name:"misc",isLoadingFuncs:[r=>ew(r.eventSources)],propSetHandlers:{dateProfile:fH,eventStore:hH}})];class pH{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new yf(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],n;for(;n=e.shift();)this.runTask(n),t.push(n);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function gH(r,e,t){let n;return/^(year|month)$/.test(r.currentRangeUnit)?n=r.currentRange:n=r.activeRange,t.formatRange(n.start,n.end,tt(e.titleFormat||mH(r)),{isEndExclusive:r.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function mH(r){let{currentRangeUnit:e}=r;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=vs(r.currentRange.start,r.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class Pm{constructor(){this.resetListeners=new Set}handleInput(e,t){const n=this.dateEnv;if(e!==n&&(typeof t=="function"?this.nowFn=t:n||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,n))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class yH{constructor(e){this.computeCurrentViewData=me(this._computeCurrentViewData),this.organizeRawLocales=me(Sz),this.buildLocale=me(K_),this.buildPluginHooks=Az(),this.buildDateEnv=me(bH),this.buildTheme=me(SH),this.parseToolbars=me(qz),this.buildViewSpecs=me(Iz),this.buildDateProfileGenerator=No(_H),this.buildViewApi=me(wH),this.buildViewUiProps=No(CH),this.buildEventUiBySource=me(xH,tr),this.buildEventUiBases=me(AH),this.parseContextBusinessHours=No(DH),this.buildTitle=me(gH),this.nowManager=new Pm,this.emitter=new sl,this.actionRunner=new pH(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=f=>{this.actionRunner.request(f)},this.props=e,this.actionRunner.pause(),this.nowManager=new Pm;let t={},n=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),a=n.calendarOptions.initialView||n.pluginHooks.initialView,i=this.computeCurrentViewData(a,n,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(i.options);let o={nowManager:this.nowManager,dateEnv:n.dateEnv,options:n.calendarOptions,pluginHooks:n.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s=Oz(n.calendarOptions,n.dateEnv,this.nowManager),l=i.dateProfileGenerator.build(s);Hr(l.activeRange,s)||(s=l.currentRange.start);for(let f of n.pluginHooks.contextInit)f(o);let u=Bz(n.calendarOptions,l,o),c={dynamicOptionOverrides:t,currentViewType:a,currentDate:s,dateProfile:l,businessHours:this.parseContextBusinessHours(o),eventSources:u,eventUiBases:{},eventStore:Jt(),renderableEventStore:Jt(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},d=Object.assign(Object.assign({},o),c);for(let f of n.pluginHooks.reducers)Object.assign(c,f(null,null,d));Vu(c,o)&&this.emitter.trigger("loading",!0),this.state=c,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:n}=this;t===void 0?n.optionOverrides=e:(n.optionOverrides=Object.assign(Object.assign({},n.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:n,emitter:a}=this,i=Nz(n.dynamicOptionOverrides,e),o=this.computeOptionsData(t.optionOverrides,i,t.calendarApi),s=Pz(n.currentViewType,e),l=this.computeCurrentViewData(s,o,t.optionOverrides,i);t.calendarApi.currentDataManager=this,a.setThisContext(t.calendarApi),a.setOptions(l.options);let u={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:c,dateProfile:d}=n;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(d=l.dateProfileGenerator.build(c)),c=kz(c,e),d=Vz(d,e,c,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Hr(d.currentRange,c))&&(c=d.currentRange.start);let f=zz(n.eventSources,e,d,u),h=MV(n.eventStore,e,f,d,u),p=ew(f)&&!l.options.progressiveEventRendering&&n.renderableEventStore||h,{eventUiSingleBase:g,selectionConfig:m}=this.buildViewUiProps(u),b=this.buildEventUiBySource(f),S=this.buildEventUiBases(p.defs,g,b),y={dynamicOptionOverrides:i,currentViewType:s,currentDate:c,dateProfile:d,eventSources:f,eventStore:h,renderableEventStore:p,selectionConfig:m,eventUiBases:S,businessHours:this.parseContextBusinessHours(u),dateSelection:$z(n.dateSelection,e),eventSelection:Yz(n.eventSelection,e),eventDrag:Zz(n.eventDrag,e),eventResize:Xz(n.eventResize,e)},w=Object.assign(Object.assign({},u),y);for(let A of o.pluginHooks.reducers)Object.assign(y,A(n,e,w));let _=Vu(n,u),x=Vu(y,u);!_&&x?a.trigger("loading",!0):_&&!x&&a.trigger("loading",!1),this.state=y,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,n=this.data,a=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),i=this.computeCurrentViewData(t.currentViewType,a,e.optionOverrides,t.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,i.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),i),t),s=a.pluginHooks.optionChangeHandlers,l=n&&n.calendarOptions,u=a.calendarOptions;if(l&&l!==u){l.timeZone!==u.timeZone&&(t.eventSources=o.eventSources=Hz(o.eventSources,t.dateProfile,o),t.eventStore=o.eventStore=bm(o.eventStore,n.dateEnv,o.dateEnv),t.renderableEventStore=o.renderableEventStore=bm(o.renderableEventStore,n.dateEnv,o.dateEnv));for(let c in s)(this.optionsForHandling.indexOf(c)!==-1||l[c]!==u[c])&&s[c](u[c],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,t,n){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:i,localeDefaults:o,availableLocaleData:s,extra:l}=this.processRawCalendarOptions(e,t);km(l);let u=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,i,s,a.defaultRangeSeparator),c=this.buildViewSpecs(i.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),d=this.buildTheme(a,i),f=this.parseToolbars(a,this.stableOptionOverrides,d,c,n);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:i,dateEnv:u,viewSpecs:c,theme:d,toolbarConfig:f,localeDefaults:o,availableRawLocales:s.map}}processRawCalendarOptions(e,t){let{locales:n,locale:a}=Mu([Xa,e,t]),i=this.organizeRawLocales(n),o=i.map,s=this.buildLocale(a||i.defaultCode,o).options,l=this.buildPluginHooks(e.plugins||[],vH),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fm),hm),vm),l.listenerRefiners),l.optionRefiners),c={},d=Mu([Xa,s,e,t]),f={},h=this.currentCalendarOptionsInput,v=this.currentCalendarOptionsRefined,p=!1;for(let g in d)this.optionsForRefining.indexOf(g)===-1&&(d[g]===h[g]||ln[g]&&g in h&&ln[g](h[g],d[g]))?f[g]=v[g]:u[g]?(f[g]=u[g](d[g]),p=!0):c[g]=h[g];return p&&(this.currentCalendarOptionsInput=d,this.currentCalendarOptionsRefined=f,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:i,localeDefaults:s,extra:c}}_computeCurrentViewData(e,t,n,a){let i=t.viewSpecs[e];if(!i)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:s}=this.processRawViewOptions(i,t.pluginHooks,t.localeDefaults,n,a);km(s),this.nowManager.handleInput(t.dateEnv,o.now);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),u=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:i,options:o,dateProfileGenerator:l,viewApi:u}}processRawViewOptions(e,t,n,a,i){let o=Mu([Xa,e.optionDefaults,n,a,e.optionOverrides,i]),s=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fm),hm),vm),$N),t.listenerRefiners),t.optionRefiners),l={},u=this.currentViewOptionsInput,c=this.currentViewOptionsRefined,d=!1,f={};for(let h in o)o[h]===u[h]||ln[h]&&ln[h](o[h],u[h])?l[h]=c[h]:(o[h]===this.currentCalendarOptionsInput[h]||ln[h]&&ln[h](o[h],this.currentCalendarOptionsInput[h])?h in this.currentCalendarOptionsRefined&&(l[h]=this.currentCalendarOptionsRefined[h]):s[h]?l[h]=s[h](o[h]):f[h]=o[h],d=!0);return d&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:f}}}function bH(r,e,t,n,a,i,o,s){let l=K_(e||o.defaultCode,o.map);return new nV({calendarSystem:"gregory",timeZone:r,namedTimeZoneImpl:i.namedTimeZonedImpl,locale:l,weekNumberCalculation:t,firstDay:n,weekText:a,cmdFormatter:i.cmdFormatter,defaultSeparator:s})}function SH(r,e){let t=e.themeClasses[r.themeSystem]||qr;return new t(r)}function _H(r){let e=r.dateProfileGeneratorClass||b_;return new e(r)}function wH(r,e,t){return new Kz(r,e,t)}function xH(r){return Pn(r,e=>e.ui)}function AH(r,e,t){let n={"":e};for(let a in r){let i=r[a];i.sourceId&&t[i.sourceId]&&(n[a]=t[i.sourceId])}return n}function CH(r){let{options:e}=r;return{eventUiSingleBase:Ss({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},r),selectionConfig:Ss({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},r)}}function Vu(r,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(r))return!0;return!1}function DH(r){return BV(r.options.businessHours,r)}function km(r,e){for(let t in r)console.warn(`Unknown option '${t}'`)}class TH extends Ve{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return O("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:n}=this.context,a=[],i=!0;for(let o of e){let{buttonName:s,buttonClick:l,buttonText:u,buttonIcon:c,buttonHint:d}=o;if(s==="title")i=!1,a.push(O("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let f=s===t.activeButton,h=!t.isTodayEnabled&&s==="today"||!t.isPrevEnabled&&s==="prev"||!t.isNextEnabled&&s==="next",v=[`fc-${s}-button`,n.getClass("button")];f&&v.push(n.getClass("buttonActive")),a.push(O("button",{type:"button",title:typeof d=="function"?d(t.navUnit):d,disabled:h,"aria-pressed":f,className:v.join(" "),onClick:l},u||(c?O("span",{className:c,role:"img"}):"")))}}if(a.length>1){let o=i&&n.getClass("buttonGroup")||"";return O("div",{className:o},...a)}return a[0]}}class Om extends Ve{render(){let{model:e,extraClassName:t}=this.props,n=!1,a,i,o=e.sectionWidgets,s=o.center;return o.left?(n=!0,a=o.left):a=o.start,o.right?(n=!0,i=o.right):i=o.end,O("div",{className:[t||"","fc-toolbar",n?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",s||[]),this.renderSection("end",i||[]))}renderSection(e,t){let{props:n}=this;return O(TH,{key:e,widgetGroups:t,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId})}}class EH extends Ve{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,dr(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:n}=e,a=["fc-view-harness",n||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",o="";return n?t.availableWidth!==null?i=t.availableWidth/n:o=`${1/n*100}%`:i=e.height||"",O("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:i,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class MH extends Aa{constructor(e){super(e),this.handleSegClick=(t,n)=>{let{component:a}=this,{context:i}=a,o=fa(n);if(o&&a.isValidSegDownEl(t.target)){let s=lt(t.target,".fc-event-forced-url"),l=s?s.querySelector("a[href]").href:"";i.emitter.trigger("eventClick",{el:n,event:new Pe(a.context,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:i.viewApi}),l&&!t.defaultPrevented&&(window.location.href=l)}},this.destroy=s_(e.el,"click",".fc-event",this.handleSegClick)}}class IH extends Aa{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,n)=>{fa(n)&&(this.currentSegEl=n,this.triggerEvent("eventMouseEnter",t,n))},this.handleSegLeave=(t,n)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,n))},this.removeHoverListeners=JO(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,n){let{component:a}=this,{context:i}=a,o=fa(n);(!t||a.isValidSegDownEl(t.target))&&i.emitter.trigger(e,{el:n,event:new Pe(i,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:i.viewApi})}}class RH extends On{constructor(){super(...arguments),this.buildViewContext=me(oV),this.buildViewPropTransformers=me(PH),this.buildToolbarProps=me(LH),this.headerRef=Ar(),this.footerRef=Ar(),this.interactionsStore={},this.state={viewLabelId:nl()},this.registerInteractiveComponent=(e,t)=>{let n=sB(e,t),o=[MH,IH].concat(this.props.pluginHooks.componentInteractions).map(s=>new s(n));this.interactionsStore[e.uid]=o,Bc[e.uid]=n},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let n of t)n.destroy();delete this.interactionsStore[e.uid]}delete Bc[e.uid]},this.resizeRunner=new yf(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:n}=e,a=!1,i="",o;e.isHeightAuto||e.forPrint?i="":n.height!=null?a=!0:n.contentHeight!=null?i=n.contentHeight:o=Math.max(n.aspectRatio,.5);let s=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),l=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return O(kn.Provider,{value:s},O(ll,{unit:"day"},u=>{let c=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,u,e.viewTitle);return O(ze,null,t.header&&O(Om,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:l},c)),O(EH,{liquid:a,height:i,aspectRatio:o,labeledById:l},this.renderView(e),this.buildAppendContent()),t.footer&&O(Om,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},c)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(n=>new n(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let n in t)t[n](e[n],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:n}=t.pluginHooks;for(let a in n)t[a]!==e[a]&&n[a](t[a],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(n=>n(e));return O(ze,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:n}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},i=this.buildViewPropTransformers(t.viewPropsTransformers);for(let s of i)Object.assign(a,s.transform(a,e));let o=n.component;return O(o,Object.assign({},a))}}function LH(r,e,t,n,a,i){let o=t.build(a,void 0,!1),s=t.buildPrev(e,n,!1),l=t.buildNext(e,n,!1);return{title:i,activeButton:r.type,navUnit:r.singleUnit,isTodayEnabled:o.isValid&&!Hr(e.currentRange,a),isPrevEnabled:s.isValid,isNextEnabled:l.isValid}}function PH(r){return r.map(e=>new e)}class kH extends uB{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=n=>{switch(n.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=n=>{this.currentData=n,this.renderRunner.request(n.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:n}=this;ys(()=>{Si(O(oB,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},(a,i,o,s)=>(this.setClassNames(a),this.setHeight(i),O(p_.Provider,{value:this.customContentRenderId},O(RH,Object.assign({isHeightAuto:o,forPrint:s},n))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Si(null,this.el),this.setClassNames([]),this.setHeight(""))},UO(e),this.el=e,this.renderRunner=new yf(this.handleRenderRequest),new yH({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){ys(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!$r(e,this.currentClassNames)){let{classList:t}=this.el;for(let n of this.currentClassNames)t.remove(n);for(let n of e)t.add(n);this.currentClassNames=e}}setHeight(e){i_(this.el,"height",e)}}const OH={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},NH=Ee({props:{options:Object},data(){return{renderId:0,customRenderingMap:new Map}},methods:{getApi(){return this.calendar},buildOptions(r){return{...r,customRenderingMetaMap:zH(this.$slots),handleCustomRendering:this.handleCustomRendering}}},render(){const r=[];for(const e of this.customRenderingMap.values())r.push(Eo(VH,{key:e.id,customRendering:e}));return Eo("div",{attrs:{"data-fc-render-id":this.renderId}},Eo(Ni,r))},mounted(){const r=new yz;this.handleCustomRendering=r.handle.bind(r);const e=this.buildOptions(this.options),t=new kH(this.$el,e);this.calendar=t,t.render(),r.subscribe(n=>{this.customRenderingMap=n,this.renderId++,this.needCustomRenderingResize=!0})},beforeUpdate(){this.getApi().resumeRendering()},updated(){this.needCustomRenderingResize&&(this.needCustomRenderingResize=!1,this.getApi().updateSize())},beforeUnmount(){this.getApi().destroy()},watch:BH()}),VH=Ee({props:{customRendering:Object},render(){const r=this.customRendering,e=typeof r.generatorMeta=="function"?r.generatorMeta(r.renderProps):r.generatorMeta;return Eo(b1,{to:r.containerEl},e)}});function BH(){let r={options:{deep:!0,handler(e){let t=this.getApi();t.pauseRendering();let n=this.buildOptions(e);t.resetOptions(n),this.renderId++}}};for(let e in OH)r[`options.${e}`]={deep:!0,handler(t){if(t!==void 0){let n=this.getApi();n.pauseRendering(),n.resetOptions({[e]:t},[e]),this.renderId++}}};return r}function zH(r){const e={};for(const t in r)e[HH(t)]=r[t];return e}function HH(r){return r.split("-").map((e,t)=>t?GH(e):e).join("")}function GH(r){return r.charAt(0).toUpperCase()+r.slice(1)}class FH extends Nn{constructor(){super(...arguments),this.headerElRef=Ar()}renderSimpleLayout(e,t){let{props:n,context:a}=this,i=[],o=Dm(a.options);return e&&i.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),O(pm,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},O($_,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:i}))}renderHScrollLayout(e,t,n,a){let i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");let{props:o,context:s}=this,l=!o.forPrint&&Dm(s.options),u=!o.forPrint&&JB(s.options),c=[];return e&&c.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),c.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),u&&c.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:KB}]}),O(pm,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},O(i,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:n,minWidth:a}]}],sections:c}))}}function Bo(r,e){let t=[];for(let n=0;n<e;n+=1)t[n]=[];for(let n of r)t[n.row].push(n);return t}function xo(r,e){let t=[];for(let n=0;n<e;n+=1)t[n]=[];for(let n of r)t[n.firstCol].push(n);return t}function Nm(r,e){let t=[];if(r){for(let n=0;n<e;n+=1)t[n]={affectedInstances:r.affectedInstances,isEvent:r.isEvent,segs:[]};for(let n of r.segs)t[n.row].segs.push(n)}else for(let n=0;n<e;n+=1)t[n]=null;return t}const iw=tt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function ow(r){let{display:e}=r.eventRange.ui;return e==="list-item"||e==="auto"&&!r.eventRange.def.allDay&&r.firstCol===r.lastCol&&r.isStart&&r.isEnd}class sw extends Ve{render(){let{props:e}=this;return O(Y_,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:iw,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class lw extends Ve{render(){let{props:e,context:t}=this,{options:n}=t,{seg:a}=e,i=n.eventTimeFormat||iw,o=I_(a,i,t,!0,e.defaultDisplayEventEnd);return O(Hf,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:R_(e.seg,t),defaultGenerator:WH,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function WH(r){return O(ze,null,O("div",{className:"fc-daygrid-event-dot",style:{borderColor:r.borderColor||r.backgroundColor}}),r.timeText&&O("div",{className:"fc-event-time"},r.timeText),O("div",{className:"fc-event-title"},r.event.title||O(ze,null," ")))}class UH extends Ve{constructor(){super(...arguments),this.compileSegs=me(jH)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:n}=this.compileSegs(e.singlePlacements);return O(dz,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:n,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return O(ze,null,t.map(i=>{let o=i.eventRange.instance.instanceId;return O("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:a[o]?"hidden":""}},ow(i)?O(lw,Object.assign({seg:i,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},qa(i,e.todayRange))):O(sw,Object.assign({seg:i,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},qa(i,e.todayRange))))}))}})}}function jH(r){let e=[],t=[];for(let n of r)e.push(n.seg),n.isVisible||t.push(n.seg);return{allSegs:e,invisibleSegs:t}}const $H=tt({week:"narrow"});class YH extends Nn{constructor(){super(...arguments),this.rootElRef=Ar(),this.state={dayNumberId:nl()},this.handleRootEl=e=>{dr(this.rootElRef,e),dr(this.props.elRef,e)}}render(){let{context:e,props:t,state:n,rootElRef:a}=this,{options:i,dateEnv:o}=e,{date:s,dateProfile:l}=t;const u=t.showDayNumber&&XH(s,l.currentRange,o);return O(Z_,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:ZH,date:s,dateProfile:l,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:u,extraRenderProps:t.extraRenderProps},(c,d)=>O("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&O(sz,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:zc(e,s,"week"),date:s,defaultFormat:$H}),!d.isDisabled&&(t.showDayNumber||X_(i)||t.forceDayTop)?O("div",{className:"fc-daygrid-day-top"},O(c,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},zc(e,s)),{id:n.dayNumberId})})):t.showDayNumber?O("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},O("a",{className:"fc-daygrid-day-number"}," ")):void 0,O("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,O("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},O(UH,{allDayDate:s,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:a,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),O("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function ZH(r){return r.dayNumberText||O(ze,null," ")}function XH(r,e,t){const{start:n,end:a}=e,i=Yr(a,-1),o=t.getYear(n),s=t.getMonth(n),l=t.getYear(i),u=t.getMonth(i);return!(o===l&&s===u)&&(r.valueOf()===n.valueOf()||t.getDay(r)===1&&r.valueOf()<a.valueOf())}function uw(r){return r.eventRange.instance.instanceId+":"+r.firstCol}function cw(r){return uw(r)+":"+r.lastCol}function qH(r,e,t,n,a,i,o){let s=new JH(m=>{let b=r[m.index].eventRange.instance.instanceId+":"+m.span.start+":"+(m.span.end-1);return a[b]||1});s.allowReslicing=!0,s.strictOrder=n,e===!0||t===!0?(s.maxCoord=i,s.hiddenConsumes=!0):typeof e=="number"?s.maxStackCnt=e:typeof t=="number"&&(s.maxStackCnt=t,s.hiddenConsumes=!0);let l=[],u=[];for(let m=0;m<r.length;m+=1){let b=r[m],S=cw(b);a[S]!=null?l.push({index:m,span:{start:b.firstCol,end:b.lastCol+1}}):u.push(b)}let c=s.addSegs(l),d=s.toRects(),{singleColPlacements:f,multiColPlacements:h,leftoverMargins:v}=QH(d,r,o),p=[],g=[];for(let m of u){h[m.firstCol].push({seg:m,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let b=m.firstCol;b<=m.lastCol;b+=1)f[b].push({seg:ia(m,b,b+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let m=0;m<o.length;m+=1)p.push(0);for(let m of c){let b=r[m.index],S=m.span;h[S.start].push({seg:ia(b,S.start,S.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let y=S.start;y<S.end;y+=1)p[y]+=1,f[y].push({seg:ia(b,y,y+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let m=0;m<o.length;m+=1)g.push(v[m]);return{singleColPlacements:f,multiColPlacements:h,moreCnts:p,moreMarginTops:g}}function QH(r,e,t){let n=KH(r,t.length),a=[],i=[],o=[];for(let s=0;s<t.length;s+=1){let l=n[s],u=[],c=0,d=0;for(let h of l){let v=e[h.index];u.push({seg:ia(v,s,s+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:h.levelCoord-c}),c=h.levelCoord+h.thickness}let f=[];c=0,d=0;for(let h of l){let v=e[h.index],p=h.span.end-h.span.start>1,g=h.span.start===s;d+=h.levelCoord-c,c=h.levelCoord+h.thickness,p?(d+=h.thickness,g&&f.push({seg:ia(v,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:h.levelCoord,marginTop:0})):g&&(f.push({seg:ia(v,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:d}),d=0)}a.push(u),i.push(f),o.push(d)}return{singleColPlacements:a,multiColPlacements:i,leftoverMargins:o}}function KH(r,e){let t=[];for(let n=0;n<e;n+=1)t.push([]);for(let n of r)for(let a=n.span.start;a<n.span.end;a+=1)t[a].push(n);return t}function ia(r,e,t,n){if(r.firstCol===e&&r.lastCol===t-1)return r;let a=r.eventRange,i=a.range,o=da(i,{start:n[e].date,end:ut(n[t-1].date,1)});return Object.assign(Object.assign({},r),{firstCol:e,lastCol:t-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:o},isStart:r.isStart&&o.start.valueOf()===i.start.valueOf(),isEnd:r.isEnd&&o.end.valueOf()===i.end.valueOf()})}class JH extends CB{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:n}=this,a=i=>!this.forceHidden[Qa(i)];for(let i=0;i<n.length;i+=1)n[i]=n[i].filter(a);return t}handleInvalidInsertion(e,t,n){const{entriesByLevel:a,forceHidden:i}=this,{touchingEntry:o,touchingLevel:s,touchingLateral:l}=e;if(this.hiddenConsumes&&o){const u=Qa(o);if(!i[u])if(this.allowReslicing){const c=Object.assign(Object.assign({},o),{span:z_(o.span,t.span)}),d=Qa(c);i[d]=!0,a[s][l]=c,n.push(c),this.splitEntry(o,t,n)}else i[u]=!0,n.push(o)}super.handleInvalidInsertion(e,t,n)}}class dw extends Nn{constructor(){super(...arguments),this.cellElRefs=new gn,this.frameElRefs=new gn,this.fgElRefs=new gn,this.segHarnessRefs=new gn,this.rootElRef=Ar(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:n}=this,{options:a}=n,i=e.cells.length,o=xo(e.businessHourSegs,i),s=xo(e.bgEventSegs,i),l=xo(this.getHighlightSegs(),i),u=xo(this.getMirrorSegs(),i),{singleColPlacements:c,multiColPlacements:d,moreCnts:f,moreMarginTops:h}=qH(WV(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),v=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return O("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((p,g)=>{let m=this.renderFgSegs(g,e.forPrint?c[g]:d[g],e.todayRange,v),b=this.renderFgSegs(g,eG(u[g],d),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return O(YH,{key:p.key,elRef:this.cellElRefs.createRef(p.key),innerElRef:this.frameElRefs.createRef(p.key),dateProfile:e.dateProfile,date:p.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&g===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:p.extraRenderProps,extraDataAttrs:p.extraDataAttrs,extraClassNames:p.extraClassNames,extraDateSpan:p.extraDateSpan,moreCnt:f[g],moreMarginTop:h[g],singlePlacements:c[g],fgContentElRef:this.fgElRefs.createRef(p.key),fgContent:O(ze,null,O(ze,null,m),O(ze,null,b)),bgContent:O(ze,null,this.renderFillSegs(l[g],"highlight"),this.renderFillSegs(o[g],"non-business"),this.renderFillSegs(s[g],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let n=this.props;this.updateSizing(!tr(e,n))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,n,a,i,o,s){let{context:l}=this,{eventSelection:u}=this.props,{framePositions:c}=this.state,d=this.props.cells.length===1,f=i||o||s,h=[];if(c)for(let v of t){let{seg:p}=v,{instanceId:g}=p.eventRange.instance,m=v.isVisible&&!a[g],b=v.isAbsolute,S="",y="";b&&(l.isRtl?(y=0,S=c.lefts[p.lastCol]-c.lefts[p.firstCol]):(S=0,y=c.rights[p.firstCol]-c.rights[p.lastCol])),h.push(O("div",{className:"fc-daygrid-event-harness"+(b?" fc-daygrid-event-harness-abs":""),key:uw(p),ref:f?null:this.segHarnessRefs.createRef(cw(p)),style:{visibility:m?"":"hidden",marginTop:b?"":v.marginTop,top:b?v.absoluteTop:"",left:S,right:y}},ow(p)?O(lw,Object.assign({seg:p,isDragging:i,isSelected:g===u,defaultDisplayEventEnd:d},qa(p,n))):O(sw,Object.assign({seg:p,isDragging:i,isResizing:o,isDateSelecting:s,isSelected:g===u,defaultDisplayEventEnd:d},qa(p,n)))))}return h}renderFillSegs(e,t){let{isRtl:n}=this.context,{todayRange:a}=this.props,{framePositions:i}=this.state,o=[];if(i)for(let s of e){let l=n?{right:0,left:i.lefts[s.lastCol]-i.lefts[s.firstCol]}:{left:0,right:i.rights[s.firstCol]-i.rights[s.lastCol]};o.push(O("div",{key:XV(s.eventRange),className:"fc-daygrid-bg-harness",style:l},t==="bg-event"?O(az,Object.assign({seg:s},qa(s,a))):oz(t)))}return O(ze,{},...o)}updateSizing(e){let{props:t,state:n,frameElRefs:a}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let l=t.cells.map(u=>a.currentMap[u.key]);if(l.length){let u=this.rootElRef.current,c=new ws(u,l,!0,!1);(!n.framePositions||!n.framePositions.similarTo(c))&&this.setState({framePositions:new ws(u,l,!0,!1)})}}const i=this.state.segHeights,o=this.querySegHeights(),s=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},i),o),maxContentHeight:s?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let n in e){let a=Math.round(e[n].getBoundingClientRect().height);t[n]=Math.max(t[n]||0,a)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],n=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}dw.addStateEquality({segHeights:tr});function eG(r,e){if(!r.length)return[];let t=tG(e);return r.map(n=>({seg:n,isVisible:!0,isAbsolute:!0,absoluteTop:t[n.eventRange.instance.instanceId],marginTop:0}))}function tG(r){let e={};for(let t of r)for(let n of t)e[n.seg.eventRange.instance.instanceId]=n.absoluteTop;return e}class rG extends Nn{constructor(){super(...arguments),this.splitBusinessHourSegs=me(Bo),this.splitBgEventSegs=me(nG),this.splitFgEventSegs=me(Bo),this.splitDateSelectionSegs=me(Bo),this.splitEventDrag=me(Nm),this.splitEventResize=me(Nm),this.rowRefs=new gn}render(){let{props:e,context:t}=this,n=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,n),i=this.splitBgEventSegs(e.bgEventSegs,n),o=this.splitFgEventSegs(e.fgEventSegs,n),s=this.splitDateSelectionSegs(e.dateSelectionSegs,n),l=this.splitEventDrag(e.eventDrag,n),u=this.splitEventResize(e.eventResize,n),c=n>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return O(ll,{unit:"day"},(d,f)=>O(ze,null,e.cells.map((h,v)=>O(dw,{ref:this.rowRefs.createRef(v),key:h.length?h[0].date.toISOString():v,showDayNumbers:n>1,showWeekNumbers:e.showWeekNumbers,todayRange:f,dateProfile:e.dateProfile,cells:h,renderIntro:e.renderRowIntro,businessHourSegs:a[v],eventSelection:e.eventSelection,bgEventSegs:i[v],fgEventSegs:o[v],dateSelectionSegs:s[v],eventDrag:l[v],eventResize:u[v],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:c,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ws(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new ws(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:n,rowPositions:a}=this,i=n.leftToIndex(e),o=a.topToIndex(t);if(o!=null&&i!=null){let s=this.props.cells[o][i];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,i),allDay:!0},s.extraDateSpan),dayEl:this.getCellEl(o,i),rect:{left:n.lefts[i],right:n.rights[i],top:a.tops[o],bottom:a.bottoms[o]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let n=this.props.cells[e][t].date,a=ut(n,1);return{start:n,end:a}}}function nG(r,e){return Bo(r.filter(aG),e)}function aG(r){return r.eventRange.def.allDay}class iG extends Nn{constructor(){super(...arguments),this.elRef=Ar(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:n,expandRows:a}=e,i=n===!0||t===!0;i&&!a&&(i=!1,t=null,n=null);let o=["fc-daygrid-body",i?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return O("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},O("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,O("tbody",{role:"presentation"},O(rG,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:n,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=oG(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),n=t.closest(".fc-scroller"),a=e.getBoundingClientRect().top-t.getBoundingClientRect().top;n.scrollTop=a?a+1:0}this.needsScrollReset=!1}}}function oG(r,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=r.querySelector(`[data-date="${IN(e.currentDate)}-01"]`)),t||(t=r.querySelector(`[data-date="${wf(e.currentDate)}"]`)),t}class sG extends OB{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class lG extends Nn{constructor(){super(...arguments),this.slicer=new sG,this.tableRef=Ar()}render(){let{props:e,context:t}=this;return O(iG,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class uG extends FH{constructor(){super(...arguments),this.buildDayTableModel=me(cG),this.headerRef=Ar(),this.tableRef=Ar()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:n}=this,a=this.buildDayTableModel(n.dateProfile,t),i=e.dayHeaders&&O(RB,{ref:this.headerRef,dateProfile:n.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),o=s=>O(lG,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:a,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:s.tableColGroupNode,tableMinWidth:s.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:s.clientWidth,clientHeight:s.clientHeight,forPrint:n.forPrint});return e.dayMinWidth?this.renderHScrollLayout(i,o,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(i,o)}}function cG(r,e){let t=new PB(r.renderRange,e);return new kB(t,/year|month|week/.test(r.currentRangeUnit))}class dG extends b_{buildRenderRange(e,t,n){let a=super.buildRenderRange(e,t,n),{props:i}=this;return fG({currentRange:a,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:i.fixedWeekCount,dateEnv:i.dateEnv})}}function fG(r){let{dateEnv:e,currentRange:t}=r,{start:n,end:a}=t,i;if(r.snapToWeek&&(n=e.startOfWeek(n),i=e.startOfWeek(a),i.valueOf()!==a.valueOf()&&(a=sm(i,1))),r.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(ut(t.end,-1))),s=Math.ceil(yN(o,a));a=sm(a,6-s)}return{start:n,end:a}}var hG=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';r_(hG);var vG=Xr({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:uG,dateProfileGeneratorClass:dG},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});zf.touchMouseIgnoreWait=500;let Gc=0,xs=0,Fc=!1;class fw{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&pG(t)&&this.tryStart(t)){let n=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let n=this.createEventFromMouse(t);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let n=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n);let a=t.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let n=this.createEventFromTouch(t);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleTouchEnd=t=>{if(this.isDragging){let n=t.target;n.removeEventListener("touchmove",this.handleTouchMove),n.removeEventListener("touchend",this.handleTouchEnd),n.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,gG()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let n=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:n,pageY:a,deltaX:n-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new sl,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),mG()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),yG()}tryStart(e){let t=this.querySubjectEl(e),n=e.target;return t&&(!this.handleSelector||lt(n,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Fc=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?lt(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Gc||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Fc=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let n=0,a=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(n=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:n,deltaY:a}}createEventFromTouch(e,t){let n=e.touches,a,i,o=0,s=0;return n&&n.length?(a=n[0].pageX,i=n[0].pageY):(a=e.pageX,i=e.pageY),t?(this.origPageX=a,this.origPageY=i):(o=a-this.origPageX,s=i-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:i,deltaX:o,deltaY:s}}}function pG(r){return r.button===0&&!r.ctrlKey}function gG(){Gc+=1,setTimeout(()=>{Gc-=1},zf.touchMouseIgnoreWait)}function mG(){xs+=1,xs===1&&window.addEventListener("touchmove",hw,{passive:!1})}function yG(){xs-=1,xs||window.removeEventListener("touchmove",hw,{passive:!1})}function hw(r){Fc&&r.preventDefault()}class bG{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,n){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=n-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let n=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)}doRevertAnimation(e,t){let n=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();n.style.transition="top "+t+"ms,left "+t+"ms",Ya(n,{left:a.left,top:a.top}),eN(n,()=>{n.style.transition="",e()})}cleanup(){this.mirrorEl&&(bf(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Ya(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),Ya(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class vw extends Bf{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class pw extends vw{constructor(e,t){super(new xB(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return _B(this.scrollController.el)}}class SG extends vw{constructor(e){super(new AB,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Vm=typeof performance=="function"?performance.now:Date.now;class _G{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=Vm();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let n=e-window.scrollX,a=t-window.scrollY,i=this.pointerScreenY===null?0:a-this.pointerScreenY,o=this.pointerScreenX===null?0:n-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Vm()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:n}=e,{edgeThreshold:a}=this,i=a-e.distance,o=i*i/(a*a)*this.maxVelocity*t,s=1;switch(e.name){case"left":s=-1;case"right":n.setScrollLeft(n.getScrollLeft()+o*s);break;case"top":s=-1;case"bottom":n.setScrollTop(n.getScrollTop()+o*s);break}}computeBestEdge(e,t){let{edgeThreshold:n}=this,a=null,i=this.scrollCaches||[];for(let o of i){let s=o.clientRect,l=e-s.left,u=s.right-e,c=t-s.top,d=s.bottom-t;l>=0&&u>=0&&c>=0&&d>=0&&(c<=n&&this.everMovedUp&&o.canScrollUp()&&(!a||a.distance>c)&&(a={scrollCache:o,name:"top",distance:c}),d<=n&&this.everMovedDown&&o.canScrollDown()&&(!a||a.distance>d)&&(a={scrollCache:o,name:"bottom",distance:d}),l<=n&&this.everMovedLeft&&o.canScrollLeft()&&(!a||a.distance>l)&&(a={scrollCache:o,name:"left",distance:l}),u<=n&&this.everMovedRight&&o.canScrollRight()&&(!a||a.distance>u)&&(a={scrollCache:o,name:"right",distance:u}))}return a}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new SG(!1):new pw(t,!1))}queryScrollEls(e){let t=[];for(let n of this.scrollQuery)typeof n=="object"?t.push(n):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(n)));return t}}class Hi extends DB{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,tN(document.body),nN(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let i=this.minDistance,o,{deltaX:s,deltaY:l}=a;o=s*s+l*l,o>=i*i&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,rN(document.body),aN(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let n=this.pointer=new fw(e);n.emitter.on("pointerdown",this.onPointerDown),n.emitter.on("pointermove",this.onPointerMove),n.emitter.on("pointerup",this.onPointerUp),t&&(n.selector=t),this.mirror=new bG,this.autoScroller=new _G}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class wG{constructor(e){this.el=e,this.origRect=Vf(e),this.scrollCaches=B_(e).map(t=>new pw(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let n={left:e,top:t};for(let a of this.scrollCaches)if(!xG(a.getEventTarget())&&!cB(n,a.clientRect))return!1;return!0}}function xG(r){let e=r.tagName;return e==="HTML"||e==="BODY"}class ul{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=n=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(n),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",n)):a.setIgnoreMove(!0)},this.handleDragStart=n=>{this.emitter.trigger("dragstart",n),this.handleMove(n,!0)},this.handleDragMove=n=>{this.emitter.trigger("dragmove",n),this.handleMove(n)},this.handlePointerUp=n=>{this.releaseHits(),this.emitter.trigger("pointerup",n)},this.handleDragEnd=n=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,n),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",n)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new sl}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},n=t,a=e.subjectEl,i;a instanceof HTMLElement&&(i=Vf(a),n=dB(n,i));let o=this.initialHit=this.queryHitForOffset(n.left,n.top);if(o){if(this.useSubjectCenter&&i){let s=O_(i,o.rect);s&&(n=fB(s))}this.coordAdjust=hB(n,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let n=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!cl(this.movingHit,n))&&(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,e))}prepareHits(){this.offsetTrackers=Pn(this.droppableStore,e=>(e.component.prepareHits(),new wG(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:n,offsetTrackers:a}=this,i=null;for(let o in n){let s=n[o].component,l=a[o];if(l&&l.isWithinClipping(e,t)){let u=l.computeLeft(),c=l.computeTop(),d=e-u,f=t-c,{origRect:h}=l,v=h.right-h.left,p=h.bottom-h.top;if(d>=0&&d<v&&f>=0&&f<p){let g=s.queryHit(d,f,v,p);g&&il(g.dateProfile.activeRange,g.dateSpan.range)&&(this.disablePointCheck||l.el.contains(l.el.getRootNode().elementFromPoint(d+u-window.scrollX,f+c-window.scrollY)))&&(!i||g.layer>i.layer)&&(g.componentId=o,g.context=s.context,g.rect.left+=u,g.rect.right+=u,g.rect.top+=c,g.rect.bottom+=c,i=g)}}}return i}}function cl(r,e){return!r&&!e?!0:!!r!=!!e?!1:JV(r.dateSpan,e.dateSpan)}function gw(r,e){let t={};for(let n of e.pluginHooks.datePointTransforms)Object.assign(t,n(r,e));return Object.assign(t,AG(r,e.dateEnv)),t}function AG(r,e){return{date:e.toDate(r.range.start),dateStr:e.formatIso(r.range.start,{omitTime:r.allDay}),allDay:r.allDay}}class CG extends Aa{constructor(e){super(e),this.handlePointerDown=n=>{let{dragging:a}=this,i=n.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(i))},this.handleDragEnd=n=>{let{component:a}=this,{pointer:i}=this.dragging;if(!i.wasTouchScroll){let{initialHit:o,finalHit:s}=this.hitDragging;if(o&&s&&cl(o,s)){let{context:l}=a,u=Object.assign(Object.assign({},gw(o.dateSpan,l)),{dayEl:o.dayEl,jsEvent:n.origEvent,view:l.viewApi||l.calendarApi.view});l.emitter.trigger("dateClick",u)}}},this.dragging=new Hi(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new ul(this.dragging,Of(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class DG extends Aa{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:s,dragging:l}=this,{options:u}=s.context,c=u.selectable&&s.isValidDateDownEl(o.origEvent.target);l.setIgnoreMove(!c),l.delay=o.isTouch?TG(s):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,s)=>{let{context:l}=this.component,u=null,c=!1;if(o){let d=this.hitDragging.initialHit;o.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,o)||(u=EG(d,o,l.pluginHooks.dateSelectionTransformers)),(!u||!NB(u,o.dateProfile,l))&&(c=!0,u=null)}u?l.dispatch({type:"SELECT_DATES",selection:u}):s||l.dispatch({type:"UNSELECT_DATES"}),c?Sf():_f(),s||(this.dragSelection=u)},this.handlePointerUp=o=>{this.dragSelection&&(T_(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:n}=t.context,a=this.dragging=new Hi(e.el);a.touchScrollAllowed=!1,a.minDistance=n.selectMinDistance||0,a.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new ul(this.dragging,Of(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function TG(r){let{options:e}=r.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function EG(r,e,t){let n=r.dateSpan,a=e.dateSpan,i=[n.range.start,n.range.end,a.range.start,a.range.end];i.sort(uN);let o={};for(let s of t){let l=s(r,e);if(l===!1)return null;l&&Object.assign(o,l)}return o.range={start:i[0],end:i[3]},o.allDay=n.allDay,o}class Gi extends Aa{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let s=o.origEvent.target,{component:l,dragging:u}=this,{mirror:c}=u,{options:d}=l.context,f=l.context;this.subjectEl=o.subjectEl;let h=this.subjectSeg=fa(o.subjectEl),p=(this.eventRange=h.eventRange).instance.instanceId;this.relevantEvents=Rf(f.getCurrentData().eventStore,p),u.minDistance=o.isTouch?0:d.eventDragMinDistance,u.delay=o.isTouch&&p!==l.props.eventSelection?IG(l):null,d.fixedMirrorParent?c.parentNode=d.fixedMirrorParent:c.parentNode=lt(s,".fc"),c.revertDuration=d.dragRevertDuration;let g=l.isValidSegDownEl(s)&&!lt(s,".fc-event-resizer");u.setIgnoreMove(!g),this.isDragging=g&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let s=this.component.context,l=this.eventRange,u=l.instance.instanceId;o.isTouch?u!==this.component.props.eventSelection&&s.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):s.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(s.calendarApi.unselect(o),s.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Pe(s,l.def,l.instance),jsEvent:o.origEvent,view:s.viewApi}))},this.handleHitUpdate=(o,s)=>{if(!this.isDragging)return;let l=this.relevantEvents,u=this.hitDragging.initialHit,c=this.component.context,d=null,f=null,h=null,v=!1,p={affectedEvents:l,mutatedEvents:Jt(),isEvent:!0};if(o){d=o.context;let g=d.options;c===d||g.editable&&g.droppable?(f=MG(u,o,this.eventRange.instance.range.start,d.getCurrentData().pluginHooks.eventDragMutationMassagers),f&&(h=kf(l,d.getCurrentData().eventUiBases,f,d),p.mutatedEvents=h,F_(p,o.dateProfile,d)||(v=!0,f=null,h=null,p.mutatedEvents=Jt()))):d=null}this.displayDrag(d,p),v?Sf():_f(),s||(c===d&&cl(u,o)&&(f=null),this.dragging.setMirrorNeedsRevert(!f),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=d,this.validMutation=f,this.mutatedRelevantEvents=h)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let s=this.component.context,l=s.viewApi,{receivingContext:u,validMutation:c}=this,d=this.eventRange.def,f=this.eventRange.instance,h=new Pe(s,d,f),v=this.relevantEvents,p=this.mutatedRelevantEvents,{finalHit:g}=this.hitDragging;if(this.clearDrag(),s.emitter.trigger("eventDragStop",{el:this.subjectEl,event:h,jsEvent:o.origEvent,view:l}),c){if(u===s){let m=new Pe(s,p.defs[d.defId],f?p.instances[f.instanceId]:null);s.dispatch({type:"MERGE_EVENTS",eventStore:p});let b={oldEvent:h,event:m,relatedEvents:yn(p,s,f),revert(){s.dispatch({type:"MERGE_EVENTS",eventStore:v})}},S={};for(let y of s.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(S,y(c,s));s.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},b),S),{el:o.subjectEl,delta:c.datesDelta,jsEvent:o.origEvent,view:l})),s.emitter.trigger("eventChange",b)}else if(u){let m={event:h,relatedEvents:yn(v,s,f),revert(){s.dispatch({type:"MERGE_EVENTS",eventStore:v})}};s.emitter.trigger("eventLeave",Object.assign(Object.assign({},m),{draggedEl:o.subjectEl,view:l})),s.dispatch({type:"REMOVE_EVENTS",eventStore:v}),s.emitter.trigger("eventRemove",m);let b=p.defs[d.defId],S=p.instances[f.instanceId],y=new Pe(u,b,S);u.dispatch({type:"MERGE_EVENTS",eventStore:p});let w={event:y,relatedEvents:yn(p,u,S),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:p})}};u.emitter.trigger("eventAdd",w),o.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},gw(g.dateSpan,u)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:g.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},w),{draggedEl:o.subjectEl,view:g.context.viewApi}))}}else s.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:n}=t.context,a=this.dragging=new Hi(e.el);a.pointer.selector=Gi.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=n.dragScroll;let i=this.hitDragging=new ul(this.dragging,Bc);i.useSubjectCenter=e.useEventCenter,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let n=this.component.context,a=this.receivingContext;a&&a!==e&&(a===n?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:Jt(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Gi.SELECTOR=".fc-event-draggable, .fc-event-resizable";function MG(r,e,t,n){let a=r.dateSpan,i=e.dateSpan,o=a.range.start,s=i.range.start,l={};a.allDay!==i.allDay&&(l.allDay=i.allDay,l.hasEnd=e.context.options.allDayMaintainDuration,i.allDay?o=Le(t):o=t);let u=ea(o,s,r.context.dateEnv,r.componentId===e.componentId?r.largeUnit:null);u.milliseconds&&(l.allDay=!1);let c={datesDelta:u,standardProps:l};for(let d of n)d(c,r,e);return c}function IG(r){let{options:e}=r.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class RG extends Aa{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=i=>{let{component:o}=this,s=this.querySegEl(i),l=fa(s),u=this.eventRange=l.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(i.origEvent.target)||i.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=i=>{let{context:o}=this.component,s=this.eventRange;this.relevantEvents=Rf(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let l=this.querySegEl(i);this.draggingSegEl=l,this.draggingSeg=fa(l),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:l,event:new Pe(o,s.def,s.instance),jsEvent:i.origEvent,view:o.viewApi})},this.handleHitUpdate=(i,o,s)=>{let{context:l}=this.component,u=this.relevantEvents,c=this.hitDragging.initialHit,d=this.eventRange.instance,f=null,h=null,v=!1,p={affectedEvents:u,mutatedEvents:Jt(),isEvent:!0};i&&(i.componentId===c.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(c,i)||(f=LG(c,i,s.subjectEl.classList.contains("fc-event-resizer-start"),d.range))),f&&(h=kf(u,l.getCurrentData().eventUiBases,f,l),p.mutatedEvents=h,F_(p,i.dateProfile,l)||(v=!0,f=null,h=null,p.mutatedEvents=null)),h?l.dispatch({type:"SET_EVENT_RESIZE",state:p}):l.dispatch({type:"UNSET_EVENT_RESIZE"}),v?Sf():_f(),o||(f&&cl(c,i)&&(f=null),this.validMutation=f,this.mutatedRelevantEvents=h)},this.handleDragEnd=i=>{let{context:o}=this.component,s=this.eventRange.def,l=this.eventRange.instance,u=new Pe(o,s,l),c=this.relevantEvents,d=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:i.origEvent,view:o.viewApi}),this.validMutation){let f=new Pe(o,d.defs[s.defId],l?d.instances[l.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:d});let h={oldEvent:u,event:f,relatedEvents:yn(d,o,l),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:c})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},h),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||_e(0),endDelta:this.validMutation.endDelta||_e(0),jsEvent:i.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",h)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,n=this.dragging=new Hi(e.el);n.pointer.selector=".fc-event-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=t.context.options.dragScroll;let a=this.hitDragging=new ul(this.dragging,Of(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return lt(e.subjectEl,".fc-event")}}function LG(r,e,t,n){let a=r.context.dateEnv,i=r.dateSpan.range.start,o=e.dateSpan.range.start,s=ea(i,o,a,r.largeUnit);if(t){if(a.add(n.start,s)<n.end)return{startDelta:s}}else if(a.add(n.end,s)>n.start)return{endDelta:s};return null}class PG{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=n=>{n.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=n=>{let a=this.context.options.unselectCancel,i=o_(n.origEvent);this.matchesCancel=!!lt(i,a),this.matchesEvent=!!lt(i,Gi.SELECTOR)},this.onDocumentPointerUp=n=>{let{context:a}=this,{documentPointer:i}=this,o=a.getCurrentData();if(!i.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let s=a.options.unselectAuto;s&&(!s||!this.matchesCancel)&&a.calendarApi.unselect(n)}o.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new fw(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const kG={fixedMirrorParent:k},OG={dateClick:k,eventDragStart:k,eventDragStop:k,eventDrop:k,eventResizeStart:k,eventResizeStop:k,eventResize:k,drop:k,eventReceive:k,eventLeave:k};zf.dataAttrPrefix="";var NG=Xr({name:"@fullcalendar/interaction",componentInteractions:[CG,DG,Gi,RG],calendarInteractions:[PG],elementDraggingImpl:Hi,optionRefiners:kG,listenerRefiners:OG}),_t="top",$t="bottom",Yt="right",wt="left",Ff="auto",Fi=[_t,$t,Yt,wt],ha="start",xi="end",VG="clippingParents",mw="viewport",Oa="popper",BG="reference",Bm=Fi.reduce(function(r,e){return r.concat([e+"-"+ha,e+"-"+xi])},[]),yw=[].concat(Fi,[Ff]).reduce(function(r,e){return r.concat([e,e+"-"+ha,e+"-"+xi])},[]),zG="beforeRead",HG="read",GG="afterRead",FG="beforeMain",WG="main",UG="afterMain",jG="beforeWrite",$G="write",YG="afterWrite",ZG=[zG,HG,GG,FG,WG,UG,jG,$G,YG];function fr(r){return r?(r.nodeName||"").toLowerCase():null}function kt(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function In(r){var e=kt(r).Element;return r instanceof e||r instanceof Element}function Wt(r){var e=kt(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function Wf(r){if(typeof ShadowRoot>"u")return!1;var e=kt(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function XG(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},a=e.attributes[t]||{},i=e.elements[t];!Wt(i)||!fr(i)||(Object.assign(i.style,n),Object.keys(a).forEach(function(o){var s=a[o];s===!1?i.removeAttribute(o):i.setAttribute(o,s===!0?"":s)}))})}function qG(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var a=e.elements[n],i=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),s=o.reduce(function(l,u){return l[u]="",l},{});!Wt(a)||!fr(a)||(Object.assign(a.style,s),Object.keys(i).forEach(function(l){a.removeAttribute(l)}))})}}const bw={name:"applyStyles",enabled:!0,phase:"write",fn:XG,effect:qG,requires:["computeStyles"]};function ur(r){return r.split("-")[0]}var bn=Math.max,As=Math.min,va=Math.round;function Wc(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Sw(){return!/^((?!chrome|android).)*safari/i.test(Wc())}function pa(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=r.getBoundingClientRect(),a=1,i=1;e&&Wt(r)&&(a=r.offsetWidth>0&&va(n.width)/r.offsetWidth||1,i=r.offsetHeight>0&&va(n.height)/r.offsetHeight||1);var o=In(r)?kt(r):window,s=o.visualViewport,l=!Sw()&&t,u=(n.left+(l&&s?s.offsetLeft:0))/a,c=(n.top+(l&&s?s.offsetTop:0))/i,d=n.width/a,f=n.height/i;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Uf(r){var e=pa(r),t=r.offsetWidth,n=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:n}}function _w(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&Wf(t)){var n=e;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Cr(r){return kt(r).getComputedStyle(r)}function QG(r){return["table","td","th"].indexOf(fr(r))>=0}function Qr(r){return((In(r)?r.ownerDocument:r.document)||window.document).documentElement}function dl(r){return fr(r)==="html"?r:r.assignedSlot||r.parentNode||(Wf(r)?r.host:null)||Qr(r)}function zm(r){return!Wt(r)||Cr(r).position==="fixed"?null:r.offsetParent}function KG(r){var e=/firefox/i.test(Wc()),t=/Trident/i.test(Wc());if(t&&Wt(r)){var n=Cr(r);if(n.position==="fixed")return null}var a=dl(r);for(Wf(a)&&(a=a.host);Wt(a)&&["html","body"].indexOf(fr(a))<0;){var i=Cr(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Wi(r){for(var e=kt(r),t=zm(r);t&&QG(t)&&Cr(t).position==="static";)t=zm(t);return t&&(fr(t)==="html"||fr(t)==="body"&&Cr(t).position==="static")?e:t||KG(r)||e}function jf(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Ka(r,e,t){return bn(r,As(e,t))}function JG(r,e,t){var n=Ka(r,e,t);return n>t?t:n}function ww(){return{top:0,right:0,bottom:0,left:0}}function xw(r){return Object.assign({},ww(),r)}function Aw(r,e){return e.reduce(function(t,n){return t[n]=r,t},{})}var eF=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,xw(typeof e!="number"?e:Aw(e,Fi))};function tF(r){var e,t=r.state,n=r.name,a=r.options,i=t.elements.arrow,o=t.modifiersData.popperOffsets,s=ur(t.placement),l=jf(s),u=[wt,Yt].indexOf(s)>=0,c=u?"height":"width";if(!(!i||!o)){var d=eF(a.padding,t),f=Uf(i),h=l==="y"?_t:wt,v=l==="y"?$t:Yt,p=t.rects.reference[c]+t.rects.reference[l]-o[l]-t.rects.popper[c],g=o[l]-t.rects.reference[l],m=Wi(i),b=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,S=p/2-g/2,y=d[h],w=b-f[c]-d[v],_=b/2-f[c]/2+S,x=Ka(y,_,w),A=l;t.modifiersData[n]=(e={},e[A]=x,e.centerOffset=x-_,e)}}function rF(r){var e=r.state,t=r.options,n=t.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||_w(e.elements.popper,a)&&(e.elements.arrow=a))}const nF={name:"arrow",enabled:!0,phase:"main",fn:tF,effect:rF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ga(r){return r.split("-")[1]}var aF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function iF(r,e){var t=r.x,n=r.y,a=e.devicePixelRatio||1;return{x:va(t*a)/a||0,y:va(n*a)/a||0}}function Hm(r){var e,t=r.popper,n=r.popperRect,a=r.placement,i=r.variation,o=r.offsets,s=r.position,l=r.gpuAcceleration,u=r.adaptive,c=r.roundOffsets,d=r.isFixed,f=o.x,h=f===void 0?0:f,v=o.y,p=v===void 0?0:v,g=typeof c=="function"?c({x:h,y:p}):{x:h,y:p};h=g.x,p=g.y;var m=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),S=wt,y=_t,w=window;if(u){var _=Wi(t),x="clientHeight",A="clientWidth";if(_===kt(t)&&(_=Qr(t),Cr(_).position!=="static"&&s==="absolute"&&(x="scrollHeight",A="scrollWidth")),_=_,a===_t||(a===wt||a===Yt)&&i===xi){y=$t;var C=d&&_===w&&w.visualViewport?w.visualViewport.height:_[x];p-=C-n.height,p*=l?1:-1}if(a===wt||(a===_t||a===$t)&&i===xi){S=Yt;var D=d&&_===w&&w.visualViewport?w.visualViewport.width:_[A];h-=D-n.width,h*=l?1:-1}}var E=Object.assign({position:s},u&&aF),M=c===!0?iF({x:h,y:p},kt(t)):{x:h,y:p};if(h=M.x,p=M.y,l){var I;return Object.assign({},E,(I={},I[y]=b?"0":"",I[S]=m?"0":"",I.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+p+"px)":"translate3d("+h+"px, "+p+"px, 0)",I))}return Object.assign({},E,(e={},e[y]=b?p+"px":"",e[S]=m?h+"px":"",e.transform="",e))}function oF(r){var e=r.state,t=r.options,n=t.gpuAcceleration,a=n===void 0?!0:n,i=t.adaptive,o=i===void 0?!0:i,s=t.roundOffsets,l=s===void 0?!0:s,u={placement:ur(e.placement),variation:ga(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Hm(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Hm(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const sF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:oF,data:{}};var Ao={passive:!0};function lF(r){var e=r.state,t=r.instance,n=r.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,s=o===void 0?!0:o,l=kt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&u.forEach(function(c){c.addEventListener("scroll",t.update,Ao)}),s&&l.addEventListener("resize",t.update,Ao),function(){i&&u.forEach(function(c){c.removeEventListener("scroll",t.update,Ao)}),s&&l.removeEventListener("resize",t.update,Ao)}}const uF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:lF,data:{}};var cF={left:"right",right:"left",bottom:"top",top:"bottom"};function zo(r){return r.replace(/left|right|bottom|top/g,function(e){return cF[e]})}var dF={start:"end",end:"start"};function Gm(r){return r.replace(/start|end/g,function(e){return dF[e]})}function $f(r){var e=kt(r),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function Yf(r){return pa(Qr(r)).left+$f(r).scrollLeft}function fF(r,e){var t=kt(r),n=Qr(r),a=t.visualViewport,i=n.clientWidth,o=n.clientHeight,s=0,l=0;if(a){i=a.width,o=a.height;var u=Sw();(u||!u&&e==="fixed")&&(s=a.offsetLeft,l=a.offsetTop)}return{width:i,height:o,x:s+Yf(r),y:l}}function hF(r){var e,t=Qr(r),n=$f(r),a=(e=r.ownerDocument)==null?void 0:e.body,i=bn(t.scrollWidth,t.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=bn(t.scrollHeight,t.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-n.scrollLeft+Yf(r),l=-n.scrollTop;return Cr(a||t).direction==="rtl"&&(s+=bn(t.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:s,y:l}}function Zf(r){var e=Cr(r),t=e.overflow,n=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+a+n)}function Cw(r){return["html","body","#document"].indexOf(fr(r))>=0?r.ownerDocument.body:Wt(r)&&Zf(r)?r:Cw(dl(r))}function Ja(r,e){var t;e===void 0&&(e=[]);var n=Cw(r),a=n===((t=r.ownerDocument)==null?void 0:t.body),i=kt(n),o=a?[i].concat(i.visualViewport||[],Zf(n)?n:[]):n,s=e.concat(o);return a?s:s.concat(Ja(dl(o)))}function Uc(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function vF(r,e){var t=pa(r,!1,e==="fixed");return t.top=t.top+r.clientTop,t.left=t.left+r.clientLeft,t.bottom=t.top+r.clientHeight,t.right=t.left+r.clientWidth,t.width=r.clientWidth,t.height=r.clientHeight,t.x=t.left,t.y=t.top,t}function Fm(r,e,t){return e===mw?Uc(fF(r,t)):In(e)?vF(e,t):Uc(hF(Qr(r)))}function pF(r){var e=Ja(dl(r)),t=["absolute","fixed"].indexOf(Cr(r).position)>=0,n=t&&Wt(r)?Wi(r):r;return In(n)?e.filter(function(a){return In(a)&&_w(a,n)&&fr(a)!=="body"}):[]}function gF(r,e,t,n){var a=e==="clippingParents"?pF(r):[].concat(e),i=[].concat(a,[t]),o=i[0],s=i.reduce(function(l,u){var c=Fm(r,u,n);return l.top=bn(c.top,l.top),l.right=As(c.right,l.right),l.bottom=As(c.bottom,l.bottom),l.left=bn(c.left,l.left),l},Fm(r,o,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Dw(r){var e=r.reference,t=r.element,n=r.placement,a=n?ur(n):null,i=n?ga(n):null,o=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,l;switch(a){case _t:l={x:o,y:e.y-t.height};break;case $t:l={x:o,y:e.y+e.height};break;case Yt:l={x:e.x+e.width,y:s};break;case wt:l={x:e.x-t.width,y:s};break;default:l={x:e.x,y:e.y}}var u=a?jf(a):null;if(u!=null){var c=u==="y"?"height":"width";switch(i){case ha:l[u]=l[u]-(e[c]/2-t[c]/2);break;case xi:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function Ai(r,e){e===void 0&&(e={});var t=e,n=t.placement,a=n===void 0?r.placement:n,i=t.strategy,o=i===void 0?r.strategy:i,s=t.boundary,l=s===void 0?VG:s,u=t.rootBoundary,c=u===void 0?mw:u,d=t.elementContext,f=d===void 0?Oa:d,h=t.altBoundary,v=h===void 0?!1:h,p=t.padding,g=p===void 0?0:p,m=xw(typeof g!="number"?g:Aw(g,Fi)),b=f===Oa?BG:Oa,S=r.rects.popper,y=r.elements[v?b:f],w=gF(In(y)?y:y.contextElement||Qr(r.elements.popper),l,c,o),_=pa(r.elements.reference),x=Dw({reference:_,element:S,placement:a}),A=Uc(Object.assign({},S,x)),C=f===Oa?A:_,D={top:w.top-C.top+m.top,bottom:C.bottom-w.bottom+m.bottom,left:w.left-C.left+m.left,right:C.right-w.right+m.right},E=r.modifiersData.offset;if(f===Oa&&E){var M=E[a];Object.keys(D).forEach(function(I){var R=[Yt,$t].indexOf(I)>=0?1:-1,L=[_t,$t].indexOf(I)>=0?"y":"x";D[I]+=M[L]*R})}return D}function mF(r,e){e===void 0&&(e={});var t=e,n=t.placement,a=t.boundary,i=t.rootBoundary,o=t.padding,s=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?yw:l,c=ga(n),d=c?s?Bm:Bm.filter(function(v){return ga(v)===c}):Fi,f=d.filter(function(v){return u.indexOf(v)>=0});f.length===0&&(f=d);var h=f.reduce(function(v,p){return v[p]=Ai(r,{placement:p,boundary:a,rootBoundary:i,padding:o})[ur(p)],v},{});return Object.keys(h).sort(function(v,p){return h[v]-h[p]})}function yF(r){if(ur(r)===Ff)return[];var e=zo(r);return[Gm(r),e,Gm(e)]}function bF(r){var e=r.state,t=r.options,n=r.name;if(!e.modifiersData[n]._skip){for(var a=t.mainAxis,i=a===void 0?!0:a,o=t.altAxis,s=o===void 0?!0:o,l=t.fallbackPlacements,u=t.padding,c=t.boundary,d=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,v=h===void 0?!0:h,p=t.allowedAutoPlacements,g=e.options.placement,m=ur(g),b=m===g,S=l||(b||!v?[zo(g)]:yF(g)),y=[g].concat(S).reduce(function(re,oe){return re.concat(ur(oe)===Ff?mF(e,{placement:oe,boundary:c,rootBoundary:d,padding:u,flipVariations:v,allowedAutoPlacements:p}):oe)},[]),w=e.rects.reference,_=e.rects.popper,x=new Map,A=!0,C=y[0],D=0;D<y.length;D++){var E=y[D],M=ur(E),I=ga(E)===ha,R=[_t,$t].indexOf(M)>=0,L=R?"width":"height",P=Ai(e,{placement:E,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),N=R?I?Yt:wt:I?$t:_t;w[L]>_[L]&&(N=zo(N));var z=zo(N),H=[];if(i&&H.push(P[M]<=0),s&&H.push(P[N]<=0,P[z]<=0),H.every(function(re){return re})){C=E,A=!1;break}x.set(E,H)}if(A)for(var U=v?3:1,Y=function(oe){var Ce=y.find(function(nt){var ne=x.get(nt);if(ne)return ne.slice(0,oe).every(function(Q){return Q})});if(Ce)return C=Ce,"break"},J=U;J>0;J--){var te=Y(J);if(te==="break")break}e.placement!==C&&(e.modifiersData[n]._skip=!0,e.placement=C,e.reset=!0)}}const SF={name:"flip",enabled:!0,phase:"main",fn:bF,requiresIfExists:["offset"],data:{_skip:!1}};function Wm(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function Um(r){return[_t,Yt,$t,wt].some(function(e){return r[e]>=0})}function _F(r){var e=r.state,t=r.name,n=e.rects.reference,a=e.rects.popper,i=e.modifiersData.preventOverflow,o=Ai(e,{elementContext:"reference"}),s=Ai(e,{altBoundary:!0}),l=Wm(o,n),u=Wm(s,a,i),c=Um(l),d=Um(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const wF={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_F};function xF(r,e,t){var n=ur(r),a=[wt,_t].indexOf(n)>=0?-1:1,i=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,o=i[0],s=i[1];return o=o||0,s=(s||0)*a,[wt,Yt].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function AF(r){var e=r.state,t=r.options,n=r.name,a=t.offset,i=a===void 0?[0,0]:a,o=yw.reduce(function(c,d){return c[d]=xF(d,e.rects,i),c},{}),s=o[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}const CF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:AF};function DF(r){var e=r.state,t=r.name;e.modifiersData[t]=Dw({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const TF={name:"popperOffsets",enabled:!0,phase:"read",fn:DF,data:{}};function EF(r){return r==="x"?"y":"x"}function MF(r){var e=r.state,t=r.options,n=r.name,a=t.mainAxis,i=a===void 0?!0:a,o=t.altAxis,s=o===void 0?!1:o,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,d=t.padding,f=t.tether,h=f===void 0?!0:f,v=t.tetherOffset,p=v===void 0?0:v,g=Ai(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),m=ur(e.placement),b=ga(e.placement),S=!b,y=jf(m),w=EF(y),_=e.modifiersData.popperOffsets,x=e.rects.reference,A=e.rects.popper,C=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,D=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(_){if(i){var I,R=y==="y"?_t:wt,L=y==="y"?$t:Yt,P=y==="y"?"height":"width",N=_[y],z=N+g[R],H=N-g[L],U=h?-A[P]/2:0,Y=b===ha?x[P]:A[P],J=b===ha?-A[P]:-x[P],te=e.elements.arrow,re=h&&te?Uf(te):{width:0,height:0},oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ww(),Ce=oe[R],nt=oe[L],ne=Ka(0,x[P],re[P]),Q=S?x[P]/2-U-ne-Ce-D.mainAxis:Y-ne-Ce-D.mainAxis,fe=S?-x[P]/2+U+ne+nt+D.mainAxis:J+ne+nt+D.mainAxis,ue=e.elements.arrow&&Wi(e.elements.arrow),De=ue?y==="y"?ue.clientTop||0:ue.clientLeft||0:0,Me=(I=E==null?void 0:E[y])!=null?I:0,$e=N+Q-Me-De,Te=N+fe-Me,Be=Ka(h?As(z,$e):z,N,h?bn(H,Te):H);_[y]=Be,M[y]=Be-N}if(s){var Ze,st=y==="x"?_t:wt,Ot=y==="x"?$t:Yt,ft=_[w],Xt=w==="y"?"height":"width",Ca=ft+g[st],Kr=ft-g[Ot],Da=[_t,wt].indexOf(m)!==-1,ji=(Ze=E==null?void 0:E[w])!=null?Ze:0,$i=Da?Ca:ft-x[Xt]-A[Xt]-ji+D.altAxis,Yi=Da?ft+x[Xt]+A[Xt]-ji-D.altAxis:Kr,Zi=h&&Da?JG($i,ft,Yi):Ka(h?$i:Ca,ft,h?Yi:Kr);_[w]=Zi,M[w]=Zi-ft}e.modifiersData[n]=M}}const IF={name:"preventOverflow",enabled:!0,phase:"main",fn:MF,requiresIfExists:["offset"]};function RF(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function LF(r){return r===kt(r)||!Wt(r)?$f(r):RF(r)}function PF(r){var e=r.getBoundingClientRect(),t=va(e.width)/r.offsetWidth||1,n=va(e.height)/r.offsetHeight||1;return t!==1||n!==1}function kF(r,e,t){t===void 0&&(t=!1);var n=Wt(e),a=Wt(e)&&PF(e),i=Qr(e),o=pa(r,a,t),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&((fr(e)!=="body"||Zf(i))&&(s=LF(e)),Wt(e)?(l=pa(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=Yf(i))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function OF(r){var e=new Map,t=new Set,n=[];r.forEach(function(i){e.set(i.name,i)});function a(i){t.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(s){if(!t.has(s)){var l=e.get(s);l&&a(l)}}),n.push(i)}return r.forEach(function(i){t.has(i.name)||a(i)}),n}function NF(r){var e=OF(r);return ZG.reduce(function(t,n){return t.concat(e.filter(function(a){return a.phase===n}))},[])}function VF(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function BF(r){var e=r.reduce(function(t,n){var a=t[n.name];return t[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var jm={placement:"bottom",modifiers:[],strategy:"absolute"};function $m(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function zF(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,n=t===void 0?[]:t,a=e.defaultOptions,i=a===void 0?jm:a;return function(s,l,u){u===void 0&&(u=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},jm,i),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(m){var b=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},i,c.options,b),c.scrollParents={reference:In(s)?Ja(s):s.contextElement?Ja(s.contextElement):[],popper:Ja(l)};var S=NF(BF([].concat(n,c.options.modifiers)));return c.orderedModifiers=S.filter(function(y){return y.enabled}),v(),h.update()},forceUpdate:function(){if(!f){var m=c.elements,b=m.reference,S=m.popper;if($m(b,S)){c.rects={reference:kF(b,Wi(S),c.options.strategy==="fixed"),popper:Uf(S)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(D){return c.modifiersData[D.name]=Object.assign({},D.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var w=c.orderedModifiers[y],_=w.fn,x=w.options,A=x===void 0?{}:x,C=w.name;typeof _=="function"&&(c=_({state:c,options:A,name:C,instance:h})||c)}}}},update:VF(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){p(),f=!0}};if(!$m(s,l))return h;h.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function v(){c.orderedModifiers.forEach(function(g){var m=g.name,b=g.options,S=b===void 0?{}:b,y=g.effect;if(typeof y=="function"){var w=y({state:c,name:m,instance:h,options:S}),_=function(){};d.push(w||_)}})}function p(){d.forEach(function(g){return g()}),d=[]}return h}}var HF=[uF,TF,sF,bw,CF,SF,IF,nF,wF],GF=zF({defaultModifiers:HF}),FF="tippy-box",Tw="tippy-content",WF="tippy-backdrop",Ew="tippy-arrow",Mw="tippy-svg-arrow",cn={passive:!0,capture:!0},Iw=function(){return document.body};function Bu(r,e,t){if(Array.isArray(r)){var n=r[e];return n??(Array.isArray(t)?t[e]:t)}return r}function Xf(r,e){var t={}.toString.call(r);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function Rw(r,e){return typeof r=="function"?r.apply(void 0,e):r}function Ym(r,e){if(e===0)return r;var t;return function(n){clearTimeout(t),t=setTimeout(function(){r(n)},e)}}function UF(r){return r.split(/\s+/).filter(Boolean)}function Qn(r){return[].concat(r)}function Zm(r,e){r.indexOf(e)===-1&&r.push(e)}function jF(r){return r.filter(function(e,t){return r.indexOf(e)===t})}function $F(r){return r.split("-")[0]}function Cs(r){return[].slice.call(r)}function Xm(r){return Object.keys(r).reduce(function(e,t){return r[t]!==void 0&&(e[t]=r[t]),e},{})}function ei(){return document.createElement("div")}function fl(r){return["Element","Fragment"].some(function(e){return Xf(r,e)})}function YF(r){return Xf(r,"NodeList")}function ZF(r){return Xf(r,"MouseEvent")}function XF(r){return!!(r&&r._tippy&&r._tippy.reference===r)}function qF(r){return fl(r)?[r]:YF(r)?Cs(r):Array.isArray(r)?r:Cs(document.querySelectorAll(r))}function zu(r,e){r.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function qm(r,e){r.forEach(function(t){t&&t.setAttribute("data-state",e)})}function QF(r){var e,t=Qn(r),n=t[0];return n!=null&&(e=n.ownerDocument)!=null&&e.body?n.ownerDocument:document}function KF(r,e){var t=e.clientX,n=e.clientY;return r.every(function(a){var i=a.popperRect,o=a.popperState,s=a.props,l=s.interactiveBorder,u=$F(o.placement),c=o.modifiersData.offset;if(!c)return!0;var d=u==="bottom"?c.top.y:0,f=u==="top"?c.bottom.y:0,h=u==="right"?c.left.x:0,v=u==="left"?c.right.x:0,p=i.top-n+d>l,g=n-i.bottom-f>l,m=i.left-t+h>l,b=t-i.right-v>l;return p||g||m||b})}function Hu(r,e,t){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(a){r[n](a,t)})}function Qm(r,e){for(var t=e;t;){var n;if(r.contains(t))return!0;t=t.getRootNode==null||(n=t.getRootNode())==null?void 0:n.host}return!1}var lr={isTouch:!1},Km=0;function JF(){lr.isTouch||(lr.isTouch=!0,window.performance&&document.addEventListener("mousemove",Lw))}function Lw(){var r=performance.now();r-Km<20&&(lr.isTouch=!1,document.removeEventListener("mousemove",Lw)),Km=r}function e5(){var r=document.activeElement;if(XF(r)){var e=r._tippy;r.blur&&!e.state.isVisible&&r.blur()}}function t5(){document.addEventListener("touchstart",JF,cn),window.addEventListener("blur",e5)}var r5=typeof window<"u"&&typeof document<"u",n5=r5?!!window.msCrypto:!1,a5={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},i5={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Kt=Object.assign({appendTo:Iw,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},a5,i5),o5=Object.keys(Kt),s5=function(e){var t=Object.keys(e);t.forEach(function(n){Kt[n]=e[n]})};function Pw(r){var e=r.plugins||[],t=e.reduce(function(n,a){var i=a.name,o=a.defaultValue;if(i){var s;n[i]=r[i]!==void 0?r[i]:(s=Kt[i])!=null?s:o}return n},{});return Object.assign({},r,t)}function l5(r,e){var t=e?Object.keys(Pw(Object.assign({},Kt,{plugins:e}))):o5,n=t.reduce(function(a,i){var o=(r.getAttribute("data-tippy-"+i)||"").trim();if(!o)return a;if(i==="content")a[i]=o;else try{a[i]=JSON.parse(o)}catch{a[i]=o}return a},{});return n}function Jm(r,e){var t=Object.assign({},e,{content:Rw(e.content,[r])},e.ignoreAttributes?{}:l5(r,e.plugins));return t.aria=Object.assign({},Kt.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var u5=function(){return"innerHTML"};function jc(r,e){r[u5()]=e}function ey(r){var e=ei();return r===!0?e.className=Ew:(e.className=Mw,fl(r)?e.appendChild(r):jc(e,r)),e}function ty(r,e){fl(e.content)?(jc(r,""),r.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?jc(r,e.content):r.textContent=e.content)}function $c(r){var e=r.firstElementChild,t=Cs(e.children);return{box:e,content:t.find(function(n){return n.classList.contains(Tw)}),arrow:t.find(function(n){return n.classList.contains(Ew)||n.classList.contains(Mw)}),backdrop:t.find(function(n){return n.classList.contains(WF)})}}function kw(r){var e=ei(),t=ei();t.className=FF,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var n=ei();n.className=Tw,n.setAttribute("data-state","hidden"),ty(n,r.props),e.appendChild(t),t.appendChild(n),a(r.props,r.props);function a(i,o){var s=$c(e),l=s.box,u=s.content,c=s.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(i.content!==o.content||i.allowHTML!==o.allowHTML)&&ty(u,r.props),o.arrow?c?i.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(ey(o.arrow))):l.appendChild(ey(o.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:a}}kw.$$tippy=!0;var c5=1,Co=[],Gu=[];function d5(r,e){var t=Jm(r,Object.assign({},Kt,Pw(Xm(e)))),n,a,i,o=!1,s=!1,l=!1,u=!1,c,d,f,h=[],v=Ym($e,t.interactiveDebounce),p,g=c5++,m=null,b=jF(t.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},y={id:g,reference:r,popper:ei(),popperInstance:m,props:t,state:S,plugins:b,clearDelayTimeouts:$i,setProps:Yi,setContent:Zi,show:Gw,hide:Fw,hideWithInteractivity:Ww,enable:Da,disable:ji,unmount:Uw,destroy:jw};if(!t.render)return y;var w=t.render(y),_=w.popper,x=w.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+y.id,y.popper=_,r._tippy=y,_._tippy=y;var A=b.map(function(B){return B.fn(y)}),C=r.hasAttribute("aria-expanded");return ue(),U(),N(),z("onCreate",[y]),t.showOnCreate&&Ca(),_.addEventListener("mouseenter",function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()}),_.addEventListener("mouseleave",function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&R().addEventListener("mousemove",v)}),y;function D(){var B=y.props.touch;return Array.isArray(B)?B:[B,0]}function E(){return D()[0]==="hold"}function M(){var B;return!!((B=y.props.render)!=null&&B.$$tippy)}function I(){return p||r}function R(){var B=I().parentNode;return B?QF(B):document}function L(){return $c(_)}function P(B){return y.state.isMounted&&!y.state.isVisible||lr.isTouch||c&&c.type==="focus"?0:Bu(y.props.delay,B?0:1,Kt.delay)}function N(B){B===void 0&&(B=!1),_.style.pointerEvents=y.props.interactive&&!B?"":"none",_.style.zIndex=""+y.props.zIndex}function z(B,q,ie){if(ie===void 0&&(ie=!0),A.forEach(function(ve){ve[B]&&ve[B].apply(ve,q)}),ie){var we;(we=y.props)[B].apply(we,q)}}function H(){var B=y.props.aria;if(B.content){var q="aria-"+B.content,ie=_.id,we=Qn(y.props.triggerTarget||r);we.forEach(function(ve){var ht=ve.getAttribute(q);if(y.state.isVisible)ve.setAttribute(q,ht?ht+" "+ie:ie);else{var Nt=ht&&ht.replace(ie,"").trim();Nt?ve.setAttribute(q,Nt):ve.removeAttribute(q)}})}}function U(){if(!(C||!y.props.aria.expanded)){var B=Qn(y.props.triggerTarget||r);B.forEach(function(q){y.props.interactive?q.setAttribute("aria-expanded",y.state.isVisible&&q===I()?"true":"false"):q.removeAttribute("aria-expanded")})}}function Y(){R().removeEventListener("mousemove",v),Co=Co.filter(function(B){return B!==v})}function J(B){if(!(lr.isTouch&&(l||B.type==="mousedown"))){var q=B.composedPath&&B.composedPath()[0]||B.target;if(!(y.props.interactive&&Qm(_,q))){if(Qn(y.props.triggerTarget||r).some(function(ie){return Qm(ie,q)})){if(lr.isTouch||y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else z("onClickOutside",[y,B]);y.props.hideOnClick===!0&&(y.clearDelayTimeouts(),y.hide(),s=!0,setTimeout(function(){s=!1}),y.state.isMounted||Ce())}}}function te(){l=!0}function re(){l=!1}function oe(){var B=R();B.addEventListener("mousedown",J,!0),B.addEventListener("touchend",J,cn),B.addEventListener("touchstart",re,cn),B.addEventListener("touchmove",te,cn)}function Ce(){var B=R();B.removeEventListener("mousedown",J,!0),B.removeEventListener("touchend",J,cn),B.removeEventListener("touchstart",re,cn),B.removeEventListener("touchmove",te,cn)}function nt(B,q){Q(B,function(){!y.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&q()})}function ne(B,q){Q(B,q)}function Q(B,q){var ie=L().box;function we(ve){ve.target===ie&&(Hu(ie,"remove",we),q())}if(B===0)return q();Hu(ie,"remove",d),Hu(ie,"add",we),d=we}function fe(B,q,ie){ie===void 0&&(ie=!1);var we=Qn(y.props.triggerTarget||r);we.forEach(function(ve){ve.addEventListener(B,q,ie),h.push({node:ve,eventType:B,handler:q,options:ie})})}function ue(){E()&&(fe("touchstart",Me,{passive:!0}),fe("touchend",Te,{passive:!0})),UF(y.props.trigger).forEach(function(B){if(B!=="manual")switch(fe(B,Me),B){case"mouseenter":fe("mouseleave",Te);break;case"focus":fe(n5?"focusout":"blur",Be);break;case"focusin":fe("focusout",Be);break}})}function De(){h.forEach(function(B){var q=B.node,ie=B.eventType,we=B.handler,ve=B.options;q.removeEventListener(ie,we,ve)}),h=[]}function Me(B){var q,ie=!1;if(!(!y.state.isEnabled||Ze(B)||s)){var we=((q=c)==null?void 0:q.type)==="focus";c=B,p=B.currentTarget,U(),!y.state.isVisible&&ZF(B)&&Co.forEach(function(ve){return ve(B)}),B.type==="click"&&(y.props.trigger.indexOf("mouseenter")<0||o)&&y.props.hideOnClick!==!1&&y.state.isVisible?ie=!0:Ca(B),B.type==="click"&&(o=!ie),ie&&!we&&Kr(B)}}function $e(B){var q=B.target,ie=I().contains(q)||_.contains(q);if(!(B.type==="mousemove"&&ie)){var we=Xt().concat(_).map(function(ve){var ht,Nt=ve._tippy,Vn=(ht=Nt.popperInstance)==null?void 0:ht.state;return Vn?{popperRect:ve.getBoundingClientRect(),popperState:Vn,props:t}:null}).filter(Boolean);KF(we,B)&&(Y(),Kr(B))}}function Te(B){var q=Ze(B)||y.props.trigger.indexOf("click")>=0&&o;if(!q){if(y.props.interactive){y.hideWithInteractivity(B);return}Kr(B)}}function Be(B){y.props.trigger.indexOf("focusin")<0&&B.target!==I()||y.props.interactive&&B.relatedTarget&&_.contains(B.relatedTarget)||Kr(B)}function Ze(B){return lr.isTouch?E()!==B.type.indexOf("touch")>=0:!1}function st(){Ot();var B=y.props,q=B.popperOptions,ie=B.placement,we=B.offset,ve=B.getReferenceClientRect,ht=B.moveTransition,Nt=M()?$c(_).arrow:null,Vn=ve?{getBoundingClientRect:ve,contextElement:ve.contextElement||I()}:r,Qf={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Xi){var Bn=Xi.state;if(M()){var $w=L(),vl=$w.box;["placement","reference-hidden","escaped"].forEach(function(qi){qi==="placement"?vl.setAttribute("data-placement",Bn.placement):Bn.attributes.popper["data-popper-"+qi]?vl.setAttribute("data-"+qi,""):vl.removeAttribute("data-"+qi)}),Bn.attributes.popper={}}}},Jr=[{name:"offset",options:{offset:we}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ht}},Qf];M()&&Nt&&Jr.push({name:"arrow",options:{element:Nt,padding:3}}),Jr.push.apply(Jr,(q==null?void 0:q.modifiers)||[]),y.popperInstance=GF(Vn,_,Object.assign({},q,{placement:ie,onFirstUpdate:f,modifiers:Jr}))}function Ot(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function ft(){var B=y.props.appendTo,q,ie=I();y.props.interactive&&B===Iw||B==="parent"?q=ie.parentNode:q=Rw(B,[ie]),q.contains(_)||q.appendChild(_),y.state.isMounted=!0,st()}function Xt(){return Cs(_.querySelectorAll("[data-tippy-root]"))}function Ca(B){y.clearDelayTimeouts(),B&&z("onTrigger",[y,B]),oe();var q=P(!0),ie=D(),we=ie[0],ve=ie[1];lr.isTouch&&we==="hold"&&ve&&(q=ve),q?n=setTimeout(function(){y.show()},q):y.show()}function Kr(B){if(y.clearDelayTimeouts(),z("onUntrigger",[y,B]),!y.state.isVisible){Ce();return}if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(B.type)>=0&&o)){var q=P(!1);q?a=setTimeout(function(){y.state.isVisible&&y.hide()},q):i=requestAnimationFrame(function(){y.hide()})}}function Da(){y.state.isEnabled=!0}function ji(){y.hide(),y.state.isEnabled=!1}function $i(){clearTimeout(n),clearTimeout(a),cancelAnimationFrame(i)}function Yi(B){if(!y.state.isDestroyed){z("onBeforeUpdate",[y,B]),De();var q=y.props,ie=Jm(r,Object.assign({},q,Xm(B),{ignoreAttributes:!0}));y.props=ie,ue(),q.interactiveDebounce!==ie.interactiveDebounce&&(Y(),v=Ym($e,ie.interactiveDebounce)),q.triggerTarget&&!ie.triggerTarget?Qn(q.triggerTarget).forEach(function(we){we.removeAttribute("aria-expanded")}):ie.triggerTarget&&r.removeAttribute("aria-expanded"),U(),N(),x&&x(q,ie),y.popperInstance&&(st(),Xt().forEach(function(we){requestAnimationFrame(we._tippy.popperInstance.forceUpdate)})),z("onAfterUpdate",[y,B])}}function Zi(B){y.setProps({content:B})}function Gw(){var B=y.state.isVisible,q=y.state.isDestroyed,ie=!y.state.isEnabled,we=lr.isTouch&&!y.props.touch,ve=Bu(y.props.duration,0,Kt.duration);if(!(B||q||ie||we)&&!I().hasAttribute("disabled")&&(z("onShow",[y],!1),y.props.onShow(y)!==!1)){if(y.state.isVisible=!0,M()&&(_.style.visibility="visible"),N(),oe(),y.state.isMounted||(_.style.transition="none"),M()){var ht=L(),Nt=ht.box,Vn=ht.content;zu([Nt,Vn],0)}f=function(){var Jr;if(!(!y.state.isVisible||u)){if(u=!0,_.offsetHeight,_.style.transition=y.props.moveTransition,M()&&y.props.animation){var hl=L(),Xi=hl.box,Bn=hl.content;zu([Xi,Bn],ve),qm([Xi,Bn],"visible")}H(),U(),Zm(Gu,y),(Jr=y.popperInstance)==null||Jr.forceUpdate(),z("onMount",[y]),y.props.animation&&M()&&ne(ve,function(){y.state.isShown=!0,z("onShown",[y])})}},ft()}}function Fw(){var B=!y.state.isVisible,q=y.state.isDestroyed,ie=!y.state.isEnabled,we=Bu(y.props.duration,1,Kt.duration);if(!(B||q||ie)&&(z("onHide",[y],!1),y.props.onHide(y)!==!1)){if(y.state.isVisible=!1,y.state.isShown=!1,u=!1,o=!1,M()&&(_.style.visibility="hidden"),Y(),Ce(),N(!0),M()){var ve=L(),ht=ve.box,Nt=ve.content;y.props.animation&&(zu([ht,Nt],we),qm([ht,Nt],"hidden"))}H(),U(),y.props.animation?M()&&nt(we,y.unmount):y.unmount()}}function Ww(B){R().addEventListener("mousemove",v),Zm(Co,v),v(B)}function Uw(){y.state.isVisible&&y.hide(),y.state.isMounted&&(Ot(),Xt().forEach(function(B){B._tippy.unmount()}),_.parentNode&&_.parentNode.removeChild(_),Gu=Gu.filter(function(B){return B!==y}),y.state.isMounted=!1,z("onHidden",[y]))}function jw(){y.state.isDestroyed||(y.clearDelayTimeouts(),y.unmount(),De(),delete r._tippy,y.state.isDestroyed=!0,z("onDestroy",[y]))}}function Ui(r,e){e===void 0&&(e={});var t=Kt.plugins.concat(e.plugins||[]);t5();var n=Object.assign({},e,{plugins:t}),a=qF(r),i=a.reduce(function(o,s){var l=s&&d5(s,n);return l&&o.push(l),o},[]);return fl(r)?i[0]:i}Ui.defaultProps=Kt;Ui.setDefaultProps=s5;Ui.currentInput=lr;Object.assign({},bw,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});Ui.setDefaultProps({render:kw});const ry=Ee({__name:"CambodiaCalendar",setup(r){const e=S1().public.calendarificApiKey,t=ge({plugins:[vG,NG],initialView:"dayGridMonth",height:"auto",headerToolbar:{right:"prev,next",center:"title",left:""},events:[],eventClick(o){const s=o.event;i.value={title:s.title,date:s.startStr,description:s.extendedProps.description||"No description"},a.value=!0},eventDidMount(o){const s=o.el.querySelector(".fc-event-title");if(s){const l=s.textContent||"";s.innerHTML=`<span class="slide-text">${l}</span>`}Ui(o.el,{content:o.event.extendedProps.description||o.event.title,placement:"top"})}}),n=async()=>{var o,s,l;try{const u=new Date().getFullYear(),c=`cambodia_holidays_${u}`,d=localStorage.getItem(c);if(d){const v=JSON.parse(d);t.value.events=v;return}const h=await(await fetch(`https://calendarific.com/api/v2/holidays?api_key=${e}&country=KH&year=${u}`)).json();if(((o=h.meta)==null?void 0:o.code)===200&&((s=h.response)!=null&&s.holidays)){const v=h.response.holidays.map(p=>({title:p.name,date:p.date.iso,color:"var(--color-primary)",extendedProps:{description:p.description}}));localStorage.setItem(c,JSON.stringify(v)),t.value.events=v}else console.error("API Error:",((l=h.meta)==null?void 0:l.error_detail)||"Unknown error")}catch(u){console.error("Failed to fetch holidays",u)}};_a(()=>{n()});const a=ge(!1),i=ge(null);return(o,s)=>{var c;const l=nx,u=k1;return be(),bt(Ni,null,[K(j(NH),{options:t.value},null,8,["options"]),K(u,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=d=>a.value=d),title:(c=i.value)==null?void 0:c.title,width:"400px",center:""},{default:pe(()=>{var d,f;return[Re("p",null,[s[2]||(s[2]=Re("strong",null,"Date:",-1)),Et(" "+Mt((d=i.value)==null?void 0:d.date),1)]),Re("p",null,[s[3]||(s[3]=Re("strong",null,"Description:",-1)),Et(" "+Mt((f=i.value)==null?void 0:f.description),1)])]}),footer:pe(()=>[K(l,{onClick:s[0]||(s[0]=d=>a.value=!1)},{default:pe(()=>s[4]||(s[4]=[Et("Close")])),_:1,__:[4]})]),_:1},8,["modelValue","title"])],64)}}});var nr=Py.CMD;function ta(r,e){return Math.abs(r-e)<1e-5}function Yc(r){var e=r.data,t=r.len(),n=[],a,i=0,o=0,s=0,l=0;function u(I,R){a&&a.length>2&&n.push(a),a=[I,R]}function c(I,R,L,P){ta(I,L)&&ta(R,P)||a.push(I,R,L,P,L,P)}function d(I,R,L,P,N,z){var H=Math.abs(R-I),U=Math.tan(H/4)*4/3,Y=R<I?-1:1,J=Math.cos(I),te=Math.sin(I),re=Math.cos(R),oe=Math.sin(R),Ce=J*N+L,nt=te*z+P,ne=re*N+L,Q=oe*z+P,fe=N*U*Y,ue=z*U*Y;a.push(Ce-fe*te,nt+ue*J,ne+fe*oe,Q-ue*re,ne,Q)}for(var f,h,v,p,g=0;g<t;){var m=e[g++],b=g===1;switch(b&&(i=e[g],o=e[g+1],s=i,l=o,(m===nr.L||m===nr.C||m===nr.Q)&&(a=[s,l])),m){case nr.M:i=s=e[g++],o=l=e[g++],u(s,l);break;case nr.L:f=e[g++],h=e[g++],c(i,o,f,h),i=f,o=h;break;case nr.C:a.push(e[g++],e[g++],e[g++],e[g++],i=e[g++],o=e[g++]);break;case nr.Q:f=e[g++],h=e[g++],v=e[g++],p=e[g++],a.push(i+2/3*(f-i),o+2/3*(h-o),v+2/3*(f-v),p+2/3*(h-p),v,p),i=v,o=p;break;case nr.A:var S=e[g++],y=e[g++],w=e[g++],_=e[g++],x=e[g++],A=e[g++]+x;g+=1;var C=!e[g++];f=Math.cos(x)*w+S,h=Math.sin(x)*_+y,b?(s=f,l=h,u(s,l)):c(i,o,f,h),i=Math.cos(A)*w+S,o=Math.sin(A)*_+y;for(var D=(C?-1:1)*Math.PI/2,E=x;C?E>A:E<A;E+=D){var M=C?Math.max(E+D,A):Math.min(E+D,A);d(E,M,S,y,w,_)}break;case nr.R:s=i=e[g++],l=o=e[g++],f=s+e[g++],h=l+e[g++],u(f,l),c(f,l,f,h),c(f,h,s,h),c(s,h,s,l),c(s,l,f,l);break;case nr.Z:a&&c(i,o,s,l),i=s,o=l;break}}return a&&a.length>2&&n.push(a),n}function Zc(r,e,t,n,a,i,o,s,l,u){if(ta(r,t)&&ta(e,n)&&ta(a,o)&&ta(i,s)){l.push(o,s);return}var c=2/u,d=c*c,f=o-r,h=s-e,v=Math.sqrt(f*f+h*h);f/=v,h/=v;var p=t-r,g=n-e,m=a-o,b=i-s,S=p*p+g*g,y=m*m+b*b;if(S<d&&y<d){l.push(o,s);return}var w=f*p+h*g,_=-f*m-h*b,x=S-w*w,A=y-_*_;if(x<d&&w>=0&&A<d&&_>=0){l.push(o,s);return}var C=[],D=[];Zo(r,t,a,o,.5,C),Zo(e,n,i,s,.5,D),Zc(C[0],D[0],C[1],D[1],C[2],D[2],C[3],D[3],l,u),Zc(C[4],D[4],C[5],D[5],C[6],D[6],C[7],D[7],l,u)}function f5(r,e){var t=Yc(r),n=[];e=e||1;for(var a=0;a<t.length;a++){var i=t[a],o=[],s=i[0],l=i[1];o.push(s,l);for(var u=2;u<i.length;){var c=i[u++],d=i[u++],f=i[u++],h=i[u++],v=i[u++],p=i[u++];Zc(s,l,c,d,f,h,v,p,o,e),s=v,l=p}n.push(o)}return n}function Ow(r,e,t){var n=r[e],a=r[1-e],i=Math.abs(n/a),o=Math.ceil(Math.sqrt(i*t)),s=Math.floor(t/o);s===0&&(s=1,o=t);for(var l=[],u=0;u<o;u++)l.push(s);var c=o*s,d=t-c;if(d>0)for(var u=0;u<d;u++)l[u%o]+=1;return l}function ny(r,e,t){for(var n=r.r0,a=r.r,i=r.startAngle,o=r.endAngle,s=Math.abs(o-i),l=s*a,u=a-n,c=l>Math.abs(u),d=Ow([l,u],c?0:1,e),f=(c?s:u)/d.length,h=0;h<d.length;h++)for(var v=(c?u:s)/d[h],p=0;p<d[h];p++){var g={};c?(g.startAngle=i+f*h,g.endAngle=i+f*(h+1),g.r0=n+v*p,g.r=n+v*(p+1)):(g.startAngle=i+v*p,g.endAngle=i+v*(p+1),g.r0=n+f*h,g.r=n+f*(h+1)),g.clockwise=r.clockwise,g.cx=r.cx,g.cy=r.cy,t.push(g)}}function h5(r,e,t){for(var n=r.width,a=r.height,i=n>a,o=Ow([n,a],i?0:1,e),s=i?"width":"height",l=i?"height":"width",u=i?"x":"y",c=i?"y":"x",d=r[s]/o.length,f=0;f<o.length;f++)for(var h=r[l]/o[f],v=0;v<o[f];v++){var p={};p[u]=f*d,p[c]=v*h,p[s]=d,p[l]=h,p.x+=r.x,p.y+=r.y,t.push(p)}}function ay(r,e,t,n){return r*n-t*e}function v5(r,e,t,n,a,i,o,s){var l=t-r,u=n-e,c=o-a,d=s-i,f=ay(c,d,l,u);if(Math.abs(f)<1e-6)return null;var h=r-a,v=e-i,p=ay(h,v,c,d)/f;return p<0||p>1?null:new yr(p*l+r,p*u+e)}function p5(r,e,t){var n=new yr;yr.sub(n,t,e),n.normalize();var a=new yr;yr.sub(a,r,e);var i=a.dot(n);return i}function jn(r,e){var t=r[r.length-1];t&&t[0]===e[0]&&t[1]===e[1]||r.push(e)}function g5(r,e,t){for(var n=r.length,a=[],i=0;i<n;i++){var o=r[i],s=r[(i+1)%n],l=v5(o[0],o[1],s[0],s[1],e.x,e.y,t.x,t.y);l&&a.push({projPt:p5(l,e,t),pt:l,idx:i})}if(a.length<2)return[{points:r},{points:r}];a.sort(function(g,m){return g.projPt-m.projPt});var u=a[0],c=a[a.length-1];if(c.idx<u.idx){var d=u;u=c,c=d}for(var f=[u.pt.x,u.pt.y],h=[c.pt.x,c.pt.y],v=[f],p=[h],i=u.idx+1;i<=c.idx;i++)jn(v,r[i].slice());jn(v,h),jn(v,f);for(var i=c.idx+1;i<=u.idx+n;i++)jn(p,r[i%n].slice());return jn(p,f),jn(p,h),[{points:v},{points:p}]}function iy(r){var e=r.points,t=[],n=[];Hs(e,t,n);var a=new He(t[0],t[1],n[0]-t[0],n[1]-t[1]),i=a.width,o=a.height,s=a.x,l=a.y,u=new yr,c=new yr;return i>o?(u.x=c.x=s+i/2,u.y=l,c.y=l+o):(u.y=c.y=l+o/2,u.x=s,c.x=s+i),g5(e,u,c)}function Ds(r,e,t,n){if(t===1)n.push(e);else{var a=Math.floor(t/2),i=r(e);Ds(r,i[0],a,n),Ds(r,i[1],t-a,n)}return n}function m5(r,e){for(var t=[],n=0;n<e;n++)t.push(vd(r));return t}function y5(r,e){e.setStyle(r.style),e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel}function b5(r){for(var e=[],t=0;t<r.length;)e.push([r[t++],r[t++]]);return e}function S5(r,e){var t=[],n=r.shape,a;switch(r.type){case"rect":h5(n,e,t),a=Ge;break;case"sector":ny(n,e,t),a=An;break;case"circle":ny({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},e,t),a=An;break;default:var i=r.getComputedTransform(),o=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,s=G(f5(r.getUpdatedPathProxy(),o),function(m){return b5(m)}),l=s.length;if(l===0)Ds(iy,{points:s[0]},e,t);else if(l===e)for(var u=0;u<l;u++)t.push({points:s[u]});else{var c=0,d=G(s,function(m){var b=[],S=[];Hs(m,b,S);var y=(S[1]-b[1])*(S[0]-b[0]);return c+=y,{poly:m,area:y}});d.sort(function(m,b){return b.area-m.area});for(var f=e,u=0;u<l;u++){var h=d[u];if(f<=0)break;var v=u===l-1?f:Math.ceil(h.area/c*e);v<0||(Ds(iy,{points:h.poly},v,t),f-=v)}}a=Ut;break}if(!a)return m5(r,e);for(var p=[],u=0;u<t.length;u++){var g=new a;g.setShape(t[u]),y5(r,g),p.push(g)}return p}function _5(r,e){var t=r.length,n=e.length;if(t===n)return[r,e];for(var a=[],i=[],o=t<n?r:e,s=Math.min(t,n),l=Math.abs(n-t)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,d=[o[0],o[1]],f=l,h=2;h<s;){var v=o[h-2],p=o[h-1],g=o[h++],m=o[h++],b=o[h++],S=o[h++],y=o[h++],w=o[h++];if(f<=0){d.push(g,m,b,S,y,w);continue}for(var _=Math.min(f,c-1)+1,x=1;x<=_;x++){var A=x/_;Zo(v,g,b,y,A,a),Zo(p,m,S,w,A,i),v=a[3],p=i[3],d.push(a[1],i[1],a[2],i[2],v,p),g=a[5],m=i[5],b=a[6],S=i[6]}f-=_-1}return o===r?[d,e]:[r,d]}function oy(r,e){for(var t=r.length,n=r[t-2],a=r[t-1],i=[],o=0;o<e.length;)i[o++]=n,i[o++]=a;return i}function w5(r,e){for(var t,n,a,i=[],o=[],s=0;s<Math.max(r.length,e.length);s++){var l=r[s],u=e[s],c=void 0,d=void 0;l?u?(t=_5(l,u),c=t[0],d=t[1],n=c,a=d):(d=oy(a||l,l),c=l):(c=oy(n||u,u),d=u),i.push(c),o.push(d)}return[i,o]}function sy(r){for(var e=0,t=0,n=0,a=r.length,i=0,o=a-2;i<a;o=i,i+=2){var s=r[o],l=r[o+1],u=r[i],c=r[i+1],d=s*c-u*l;e+=d,t+=(s+u)*d,n+=(l+c)*d}return e===0?[r[0]||0,r[1]||0]:[t/e/3,n/e/3,e]}function x5(r,e,t,n){for(var a=(r.length-2)/6,i=1/0,o=0,s=r.length,l=s-2,u=0;u<a;u++){for(var c=u*6,d=0,f=0;f<s;f+=2){var h=f===0?c:(c+f-2)%l+2,v=r[h]-t[0],p=r[h+1]-t[1],g=e[f]-n[0],m=e[f+1]-n[1],b=g-v,S=m-p;d+=b*b+S*S}d<i&&(i=d,o=u)}return o}function A5(r){for(var e=[],t=r.length,n=0;n<t;n+=2)e[n]=r[t-n-2],e[n+1]=r[t-n-1];return e}function C5(r,e,t,n){for(var a=[],i,o=0;o<r.length;o++){var s=r[o],l=e[o],u=sy(s),c=sy(l);i==null&&(i=u[2]<0!=c[2]<0);var d=[],f=[],h=0,v=1/0,p=[],g=s.length;i&&(s=A5(s));for(var m=x5(s,l,u,c)*6,b=g-2,S=0;S<b;S+=2){var y=(m+S)%b+2;d[S+2]=s[y]-u[0],d[S+3]=s[y+1]-u[1]}d[0]=s[m]-u[0],d[1]=s[m+1]-u[1];for(var w=n/t,_=-n/2;_<=n/2;_+=w){for(var x=Math.sin(_),A=Math.cos(_),C=0,S=0;S<s.length;S+=2){var D=d[S],E=d[S+1],M=l[S]-c[0],I=l[S+1]-c[1],R=M*A-I*x,L=M*x+I*A;p[S]=R,p[S+1]=L;var P=R-D,N=L-E;C+=P*P+N*N}if(C<v){v=C,h=_;for(var z=0;z<p.length;z++)f[z]=p[z]}}a.push({from:d,to:f,fromCp:u,toCp:c,rotation:-h})}return a}function Ts(r){return r.__isCombineMorphing}var Nw="__mOriginal_";function Es(r,e,t){var n=Nw+e,a=r[n]||r[e];r[n]||(r[n]=r[e]);var i=t.replace,o=t.after,s=t.before;r[e]=function(){var l=arguments,u;return s&&s.apply(this,l),i?u=i.apply(this,l):u=a.apply(this,l),o&&o.apply(this,l),u}}function ti(r,e){var t=Nw+e;r[t]&&(r[e]=r[t],r[t]=null)}function ly(r,e){for(var t=0;t<r.length;t++)for(var n=r[t],a=0;a<n.length;){var i=n[a],o=n[a+1];n[a++]=e[0]*i+e[2]*o+e[4],n[a++]=e[1]*i+e[3]*o+e[5]}}function Vw(r,e){var t=r.getUpdatedPathProxy(),n=e.getUpdatedPathProxy(),a=w5(Yc(t),Yc(n)),i=a[0],o=a[1],s=r.getComputedTransform(),l=e.getComputedTransform();function u(){this.transform=null}s&&ly(i,s),l&&ly(o,l),Es(e,"updateTransform",{replace:u}),e.transform=null;var c=C5(i,o,10,Math.PI),d=[];Es(e,"buildPath",{replace:function(f){for(var h=e.__morphT,v=1-h,p=[],g=0;g<c.length;g++){var m=c[g],b=m.from,S=m.to,y=m.rotation*h,w=m.fromCp,_=m.toCp,x=Math.sin(y),A=Math.cos(y);_1(p,w,_,h);for(var C=0;C<b.length;C+=2){var D=b[C],E=b[C+1],M=S[C],I=S[C+1],R=D*v+M*h,L=E*v+I*h;d[C]=R*A-L*x+p[0],d[C+1]=R*x+L*A+p[1]}var P=d[0],N=d[1];f.moveTo(P,N);for(var C=2;C<b.length;){var M=d[C++],I=d[C++],z=d[C++],H=d[C++],U=d[C++],Y=d[C++];P===M&&N===I&&z===U&&H===Y?f.lineTo(U,Y):f.bezierCurveTo(M,I,z,H,U,Y),P=U,N=Y}}}})}function qf(r,e,t){if(!r||!e)return e;var n=t.done,a=t.during;Vw(r,e),e.__morphT=0;function i(){ti(e,"buildPath"),ti(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},ce({during:function(o){e.dirtyShape(),a&&a(o)},done:function(){i(),n&&n()}},t)),e}function D5(r,e,t,n,a,i){var o=16;r=a===t?0:Math.round(32767*(r-t)/(a-t)),e=i===n?0:Math.round(32767*(e-n)/(i-n));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var c=0,d=0;(r&u)>0&&(c=1),(e&u)>0&&(d=1),s+=u*u*(3*c^d),d===0&&(c===1&&(r=u-1-r,e=u-1-e),l=r,r=e,e=l)}return s}function Ms(r){var e=1/0,t=1/0,n=-1/0,a=-1/0,i=G(r,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),c=l.x+l.width/2+(u?u[4]:0),d=l.y+l.height/2+(u?u[5]:0);return e=Math.min(c,e),t=Math.min(d,t),n=Math.max(c,n),a=Math.max(d,a),[c,d]}),o=G(i,function(s,l){return{cp:s,z:D5(s[0],s[1],e,t,n,a),path:r[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function Bw(r){return S5(r.path,r.count)}function Xc(){return{fromIndividuals:[],toIndividuals:[],count:0}}function T5(r,e,t){var n=[];function a(w){for(var _=0;_<w.length;_++){var x=w[_];Ts(x)?a(x.childrenRef()):x instanceof ot&&n.push(x)}}a(r);var i=n.length;if(!i)return Xc();var o=t.dividePath||Bw,s=o({path:e,count:i});if(s.length!==i)return console.error("Invalid morphing: unmatched splitted path"),Xc();n=Ms(n),s=Ms(s);for(var l=t.done,u=t.during,c=t.individualDelay,d=new Kn,f=0;f<i;f++){var h=n[f],v=s[f];v.parent=e,v.copyTransform(d),c||Vw(h,v)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function p(w){for(var _=0;_<s.length;_++)s[_].addSelfToZr(w)}Es(e,"addSelfToZr",{after:function(w){p(w)}}),Es(e,"removeSelfFromZr",{after:function(w){for(var _=0;_<s.length;_++)s[_].removeSelfFromZr(w)}});function g(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,ti(e,"addSelfToZr"),ti(e,"removeSelfFromZr")}var m=s.length;if(c)for(var b=m,S=function(){b--,b===0&&(g(),l&&l())},f=0;f<m;f++){var y=c?ce({delay:(t.delay||0)+c(f,m,n[f],s[f]),done:S},t):t;qf(n[f],s[f],y)}else e.__morphT=0,e.animateTo({__morphT:1},ce({during:function(w){for(var _=0;_<m;_++){var x=s[_];x.__morphT=e.__morphT,x.dirtyShape()}u&&u(w)},done:function(){g();for(var w=0;w<r.length;w++)ti(r[w],"updateTransform");l&&l()}},t));return e.__zr&&p(e.__zr),{fromIndividuals:n,toIndividuals:s,count:m}}function E5(r,e,t){var n=e.length,a=[],i=t.dividePath||Bw;function o(h){for(var v=0;v<h.length;v++){var p=h[v];Ts(p)?o(p.childrenRef()):p instanceof ot&&a.push(p)}}if(Ts(r)){o(r.childrenRef());var s=a.length;if(s<n)for(var l=0,u=s;u<n;u++)a.push(vd(a[l++%s]));a.length=n}else{a=i({path:r,count:n});for(var c=r.getComputedTransform(),u=0;u<a.length;u++)a[u].setLocalTransform(c);if(a.length!==n)return console.error("Invalid morphing: unmatched splitted path"),Xc()}a=Ms(a),e=Ms(e);for(var d=t.individualDelay,u=0;u<n;u++){var f=d?ce({delay:(t.delay||0)+d(u,n,a[u],e[u])},t):t;qf(a[u],e[u],f)}return{fromIndividuals:a,toIndividuals:e,count:e.length}}function uy(r){return $(r[0])}function cy(r,e){for(var t=[],n=r.length,a=0;a<n;a++)t.push({one:r[a],many:[]});for(var a=0;a<e.length;a++){var i=e[a].length,o=void 0;for(o=0;o<i;o++)t[o%n].many.push(e[a][o])}for(var s=0,a=n-1;a>=0;a--)if(!t[a].many.length){var l=t[s].many;if(l.length<=1)if(s)s=0;else return t;var i=l.length,u=Math.ceil(i/2);t[a].many=l.slice(u,i),t[s].many=l.slice(0,u),s++}return t}var M5={clone:function(r){for(var e=[],t=1-Math.pow(1-r.path.style.opacity,1/r.count),n=0;n<r.count;n++){var a=vd(r.path);a.setStyle("opacity",t),e.push(a)}return e},split:null};function Fu(r,e,t,n,a,i){if(!r.length||!e.length)return;var o=Pi("update",n,a);if(!(o&&o.duration>0))return;var s=n.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,c;uy(r)&&(u=r,c=e),uy(e)&&(u=e,c=r);function d(m,b,S,y,w){var _=m.many,x=m.one;if(_.length===1&&!w){var A=b?_[0]:x,C=b?x:_[0];if(Ts(A))d({many:[A],one:C},!0,S,y,!0);else{var D=s?ce({delay:s(S,y)},l):l;qf(A,C,D),i(A,C,A,C,D)}}else for(var E=ce({dividePath:M5[t],individualDelay:s&&function(N,z,H,U){return s(N+S,y)}},l),M=b?T5(_,x,E):E5(x,_,E),I=M.fromIndividuals,R=M.toIndividuals,L=I.length,P=0;P<L;P++){var D=s?ce({delay:s(P,L)},l):l;i(I[P],R[P],b?_[P]:m.one,b?m.one:_[P],D)}}for(var f=u?u===r:r.length>e.length,h=u?cy(c,u):cy(f?e:r,[f?r:e]),v=0,p=0;p<h.length;p++)v+=h[p].many.length;for(var g=0,p=0;p<h.length;p++)d(h[p],f,g,v),g+=h[p].many.length}function dn(r){if(!r)return[];if($(r)){for(var e=[],t=0;t<r.length;t++)e.push(dn(r[t]));return e}var n=[];return r.traverse(function(a){a instanceof ot&&!a.disableMorphing&&!a.invisible&&!a.ignore&&n.push(a)}),n}var zw=1e4,I5=0,dy=1,fy=2,R5=je();function L5(r,e){for(var t=r.dimensions,n=0;n<t.length;n++){var a=r.getDimensionInfo(t[n]);if(a&&a.otherDims[e]===0)return t[n]}}function P5(r,e,t){var n=r.getDimensionInfo(t),a=n&&n.ordinalMeta;if(n){var i=r.get(n.name,e);return a&&a.categories[i]||i+""}}function hy(r,e,t,n){var a=n?"itemChildGroupId":"itemGroupId",i=L5(r,a);if(i){var o=P5(r,e,i);return o}var s=r.getRawDataItem(e),l=n?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!n)return t||r.getId(e)}function vy(r){var e=[];return T(r,function(t){var n=t.data,a=t.dataGroupId;if(!(n.count()>zw))for(var i=n.getIndices(),o=0;o<i.length;o++)e.push({data:n,groupId:hy(n,o,a,!1),childGroupId:hy(n,o,a,!0),divide:t.divide,dataIndex:o})}),e}function Wu(r,e,t){r.traverse(function(n){n instanceof ot&&xt(n,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function Uu(r){if(r.parent){var e=r.getComputedTransform();r.setLocalTransform(e),r.parent.remove(r)}}function $n(r){r.stopAnimation(),r.isGroup&&r.traverse(function(e){e.stopAnimation()})}function k5(r,e,t){var n=Pi("update",t,e);n&&r.traverse(function(a){if(a instanceof xn){var i=w1(a);i&&a.animateFrom({style:i},n)}})}function O5(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n<t;n++){var a=r[n],i=e[n];if(a.data.getId(a.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function Hw(r,e,t){var n=vy(r),a=vy(e);function i(S,y,w,_,x){(w||S)&&y.animateFrom({style:w&&w!==S?X(X({},w.style),S.style):S.style},x)}var o=!1,s=I5,l=le(),u=le();n.forEach(function(S){S.groupId&&l.set(S.groupId,!0),S.childGroupId&&u.set(S.childGroupId,!0)});for(var c=0;c<a.length;c++){var d=a[c].groupId;if(u.get(d)){s=dy;break}var f=a[c].childGroupId;if(f&&l.get(f)){s=fy;break}}function h(S,y){return function(w){var _=w.data,x=w.dataIndex;return y?_.getId(x):S?s===dy?w.childGroupId:w.groupId:s===fy?w.childGroupId:w.groupId}}var v=O5(n,a),p={};if(!v)for(var c=0;c<a.length;c++){var g=a[c],m=g.data.getItemGraphicEl(g.dataIndex);m&&(p[m.id]=!0)}function b(S,y){var w=n[y],_=a[S],x=_.data.hostModel,A=w.data.getItemGraphicEl(w.dataIndex),C=_.data.getItemGraphicEl(_.dataIndex);if(A===C){C&&k5(C,_.dataIndex,x);return}A&&p[A.id]||C&&($n(C),A?($n(A),Uu(A),o=!0,Fu(dn(A),dn(C),_.divide,x,S,i)):Wu(C,x,S))}new Wr(n,a,h(!0,v),h(!1,v),null,"multiple").update(b).updateManyToOne(function(S,y){var w=a[S],_=w.data,x=_.hostModel,A=_.getItemGraphicEl(w.dataIndex),C=Qe(G(y,function(D){return n[D].data.getItemGraphicEl(n[D].dataIndex)}),function(D){return D&&D!==A&&!p[D.id]});A&&($n(A),C.length?(T(C,function(D){$n(D),Uu(D)}),o=!0,Fu(dn(C),dn(A),w.divide,x,S,i)):Wu(A,x,w.dataIndex))}).updateOneToMany(function(S,y){var w=n[y],_=w.data.getItemGraphicEl(w.dataIndex);if(!(_&&p[_.id])){var x=Qe(G(S,function(C){return a[C].data.getItemGraphicEl(a[C].dataIndex)}),function(C){return C&&C!==_}),A=a[S[0]].data.hostModel;x.length&&(T(x,function(C){return $n(C)}),_?($n(_),Uu(_),o=!0,Fu(dn(_),dn(x),w.divide,A,S[0],i)):T(x,function(C){return Wu(C,A,S[0])}))}}).updateManyToMany(function(S,y){new Wr(y,S,function(w){return n[w].data.getId(n[w].dataIndex)},function(w){return a[w].data.getId(a[w].dataIndex)}).update(function(w,_){b(S[w],y[_])}).execute()}).execute(),o&&T(e,function(S){var y=S.data,w=y.hostModel,_=w&&t.getViewOfSeriesModel(w),x=Pi("update",w,0);_&&w.isAnimationEnabled()&&x&&x.duration>0&&_.group.traverse(function(A){A instanceof ot&&!A.animators.length&&A.animateFrom({style:{opacity:0}},x)})})}function py(r){var e=r.getModel("universalTransition").get("seriesKey");return e||r.id}function gy(r){return $(r)?r.sort().join(","):r}function Mr(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function N5(r,e){var t=le(),n=le(),a=le();return T(r.oldSeries,function(i,o){var s=r.oldDataGroupIds[o],l=r.oldData[o],u=py(i),c=gy(u);n.set(c,{dataGroupId:s,data:l}),$(u)&&T(u,function(d){a.set(d,{key:c,dataGroupId:s,data:l})})}),T(e.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var o=i.get("dataGroupId"),s=i.getData(),l=py(i),u=gy(l),c=n.get(u);if(c)t.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:Mr(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:Mr(s),data:s}]});else if($(l)){var d=[];T(l,function(v){var p=n.get(v);p.data&&d.push({dataGroupId:p.dataGroupId,divide:Mr(p.data),data:p.data})}),d.length&&t.set(u,{oldSeries:d,newSeries:[{dataGroupId:o,data:s,divide:Mr(s)}]})}else{var f=a.get(l);if(f){var h=t.get(f.key);h||(h={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:Mr(f.data)}],newSeries:[]},t.set(f.key,h)),h.newSeries.push({dataGroupId:o,data:s,divide:Mr(s)})}}}}),t}function my(r,e){for(var t=0;t<r.length;t++){var n=e.seriesIndex!=null&&e.seriesIndex===r[t].seriesIndex||e.seriesId!=null&&e.seriesId===r[t].id;if(n)return t}}function V5(r,e,t,n){var a=[],i=[];T(gt(r.from),function(o){var s=my(e.oldSeries,o);s>=0&&a.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Mr(e.oldData[s]),groupIdDim:o.dimension})}),T(gt(r.to),function(o){var s=my(t.updatedSeries,o);if(s>=0){var l=t.updatedSeries[s].getData();i.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:Mr(l),groupIdDim:o.dimension})}}),a.length>0&&i.length>0&&Hw(a,i,n)}function B5(r){r.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){T(gt(n.seriesTransition),function(a){T(gt(a.to),function(i){for(var o=n.updatedSeries,s=0;s<o.length;s++)(i.seriesIndex!=null&&i.seriesIndex===o[s].seriesIndex||i.seriesId!=null&&i.seriesId===o[s].id)&&(o[s][bl]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(e,t,n){var a=R5(t);if(a.oldSeries&&n.updatedSeries&&n.optionChanged){var i=n.seriesTransition;if(i)T(gt(i),function(h){V5(h,a,n,t)});else{var o=N5(a,n);T(o.keys(),function(h){var v=o.get(h);Hw(v.oldSeries,v.newSeries,t)})}T(n.updatedSeries,function(h){h[bl]&&(h[bl]=!1)})}for(var s=e.getSeries(),l=a.oldSeries=[],u=a.oldDataGroupIds=[],c=a.oldData=[],d=0;d<s.length;d++){var f=s[d].getData();f.count()<zw&&(l.push(s[d]),u.push(s[d].get("dataGroupId")),c.push(f))}})}se([x1]);se([DC]);se([A1,C1,D1,LC,WC,MD,nT,HT,lE,vE,xE,mM,FM,JM,pI,bI,MI,NI,YI,JI,uR,$R]);se(T1);se(y2);se($0);se(R2);se(Rb);se(O2);se(U2);se(IL);se(E1);se(ud);se(YL);se(M1);se(nP);se(cP);se(gP);se(wP);se(I1);se(HP);se(bS);se(SS);se(ok);se(CS);se(DS);se(dk);se(Ak);se(Tk);se(B5);se($1);const yy=Ee({__name:"PieChart",setup(r){const e={present:120,absent:15,late:8,excused:5},t=ge({title:{text:"Today's Attendance",left:"center",textStyle:{fontSize:18,fontWeight:"600"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:["Present","Absent","Late","Excused"],axisTick:{alignWithLabel:!0}},yAxis:{type:"value",minInterval:1},series:[{name:"Students",type:"bar",data:[e.present,e.absent,e.late,e.excused],itemStyle:{color:n=>{const a=["#10B981","#EF4444","#F59E0B","#3B82F6"];return new Vs(0,0,0,1,[{offset:0,color:a[n.dataIndex]},{offset:1,color:a[n.dataIndex]+"80"}])}},barWidth:"50%"}]});return(n,a)=>(be(),bt(Ni,null,[a[0]||(a[0]=Re("h2",{class:"text-xl font-bold mb-4"},"Today's Attendance",-1)),K(j(R1),{option:t.value,style:{height:"300px",width:"100%"}},null,8,["option"])],64))}}),z5=Ee({__name:"BarChart",setup(r){const e={title:{text:"Users by Role",textStyle:{fontSize:18,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{name:"Users",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {c}"},data:[{value:120,name:"Students"},{value:45,name:"Teachers"},{value:15,name:"Admins"}]}]};return(t,n)=>{const a=L1("VChart");return be(),et(a,{option:e,style:{height:"400px",width:"100%"}})}}}),by=O1(z5,[["__scopeId","data-v-3e832215"]]),H5=1080,K5=Ee({__name:"index",setup(r){const{width:e}=uO(),t=Xe(()=>e.value>=H5),n=ge("charts");return(a,i)=>{const o=_y,s=Sy,l=lO,u=sO;return be(),et(s,{class:"p-4",gutter:20},{default:pe(()=>[K(o,{xs:24,xl:16},{default:pe(()=>[t.value?(be(),bt(Ni,{key:1},[K(Ng),K(s,{gutter:20,class:"mt-4"},{default:pe(()=>[K(o,{xs:24,md:12},{default:pe(()=>[K(yy)]),_:1}),K(o,{xs:24,md:12},{default:pe(()=>[K(by)]),_:1})]),_:1})],64)):(be(),et(u,{key:0,modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=c=>n.value=c),stretch:""},{default:pe(()=>[(be(),et(l,{label:"Charts & Stats",name:"charts",key:"charts"},{default:pe(()=>[K(Ng),K(s,{gutter:20,class:"mt-4"},{default:pe(()=>[K(o,{xs:24,md:12},{default:pe(()=>[K(yy)]),_:1}),K(o,{xs:24,md:12},{default:pe(()=>[K(by)]),_:1})]),_:1})]),_:1})),(be(),et(l,{label:"Calendar",name:"calendar",key:"calendar"},{default:pe(()=>[K(ry)]),_:1}))]),_:1},8,["modelValue"]))]),_:1}),t.value?(be(),et(o,{key:0,xl:8},{default:pe(()=>[K(ry)]),_:1})):ja("",!0)]),_:1})}}});export{K5 as _};
